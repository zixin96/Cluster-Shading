/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var x={9282:(x,w,S)=>{"use strict";var U=S(4155),G=S(5108);function _typeof(x){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},_typeof(x)}function _defineProperties(x,w){for(var S=0;S<w.length;S++){var U=w[S];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(x,(G=U.key,z=void 0,z=function _toPrimitive(x,w){if("object"!==_typeof(x)||null===x)return x;var S=x[Symbol.toPrimitive];if(void 0!==S){var U=S.call(x,w||"default");if("object"!==_typeof(U))return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===w?String:Number)(x)}(G,"string"),"symbol"===_typeof(z)?z:String(z)),U)}var G,z}function _createClass(x,w,S){return w&&_defineProperties(x.prototype,w),S&&_defineProperties(x,S),Object.defineProperty(x,"prototype",{writable:!1}),x}var z,H,j=S(2136).codes,X=j.ERR_AMBIGUOUS_ARGUMENT,q=j.ERR_INVALID_ARG_TYPE,K=j.ERR_INVALID_ARG_VALUE,Y=j.ERR_INVALID_RETURN_VALUE,Z=j.ERR_MISSING_ARGS,J=S(5961),Q=S(9539).inspect,ee=S(9539).types,te=ee.isPromise,ne=ee.isRegExp,re=S(8162)(),ie=S(5624)(),oe=S(1924)("RegExp.prototype.test");new Map;function lazyLoadComparison(){var x=S(9158);z=x.isDeepEqual,H=x.isDeepStrictEqual}var ae=!1,se=x.exports=ok,le={};function innerFail(x){if(x.message instanceof Error)throw x.message;throw new J(x)}function innerOk(x,w,S,U){if(!S){var G=!1;if(0===w)G=!0,U="No value argument passed to `assert.ok()`";else if(U instanceof Error)throw U;var z=new J({actual:S,expected:!0,message:U,operator:"==",stackStartFn:x});throw z.generatedMessage=G,z}}function ok(){for(var x=arguments.length,w=new Array(x),S=0;S<x;S++)w[S]=arguments[S];innerOk.apply(void 0,[ok,w.length].concat(w))}se.fail=function fail(x,w,S,z,H){var j,X=arguments.length;if(0===X)j="Failed";else if(1===X)S=x,x=void 0;else{if(!1===ae)ae=!0,(U.emitWarning?U.emitWarning:G.warn.bind(G))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094");2===X&&(z="!=")}if(S instanceof Error)throw S;var q={actual:x,expected:w,operator:void 0===z?"fail":z,stackStartFn:H||fail};void 0!==S&&(q.message=S);var K=new J(q);throw j&&(K.message=j,K.generatedMessage=!0),K},se.AssertionError=J,se.ok=ok,se.equal=function equal(x,w,S){if(arguments.length<2)throw new Z("actual","expected");x!=w&&innerFail({actual:x,expected:w,message:S,operator:"==",stackStartFn:equal})},se.notEqual=function notEqual(x,w,S){if(arguments.length<2)throw new Z("actual","expected");x==w&&innerFail({actual:x,expected:w,message:S,operator:"!=",stackStartFn:notEqual})},se.deepEqual=function deepEqual(x,w,S){if(arguments.length<2)throw new Z("actual","expected");void 0===z&&lazyLoadComparison(),z(x,w)||innerFail({actual:x,expected:w,message:S,operator:"deepEqual",stackStartFn:deepEqual})},se.notDeepEqual=function notDeepEqual(x,w,S){if(arguments.length<2)throw new Z("actual","expected");void 0===z&&lazyLoadComparison(),z(x,w)&&innerFail({actual:x,expected:w,message:S,operator:"notDeepEqual",stackStartFn:notDeepEqual})},se.deepStrictEqual=function deepStrictEqual(x,w,S){if(arguments.length<2)throw new Z("actual","expected");void 0===z&&lazyLoadComparison(),H(x,w)||innerFail({actual:x,expected:w,message:S,operator:"deepStrictEqual",stackStartFn:deepStrictEqual})},se.notDeepStrictEqual=function notDeepStrictEqual(x,w,S){if(arguments.length<2)throw new Z("actual","expected");void 0===z&&lazyLoadComparison();H(x,w)&&innerFail({actual:x,expected:w,message:S,operator:"notDeepStrictEqual",stackStartFn:notDeepStrictEqual})},se.strictEqual=function strictEqual(x,w,S){if(arguments.length<2)throw new Z("actual","expected");ie(x,w)||innerFail({actual:x,expected:w,message:S,operator:"strictEqual",stackStartFn:strictEqual})},se.notStrictEqual=function notStrictEqual(x,w,S){if(arguments.length<2)throw new Z("actual","expected");ie(x,w)&&innerFail({actual:x,expected:w,message:S,operator:"notStrictEqual",stackStartFn:notStrictEqual})};var ce=_createClass((function Comparison(x,w,S){var U=this;!function _classCallCheck(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}(this,Comparison),w.forEach((function(w){w in x&&(void 0!==S&&"string"==typeof S[w]&&ne(x[w])&&oe(x[w],S[w])?U[w]=S[w]:U[w]=x[w])}))}));function expectedException(x,w,S,U){if("function"!=typeof w){if(ne(w))return oe(w,x);if(2===arguments.length)throw new q("expected",["Function","RegExp"],w);if("object"!==_typeof(x)||null===x){var G=new J({actual:x,expected:w,message:S,operator:"deepStrictEqual",stackStartFn:U});throw G.operator=U.name,G}var j=Object.keys(w);if(w instanceof Error)j.push("name","message");else if(0===j.length)throw new K("error",w,"may not be an empty object");return void 0===z&&lazyLoadComparison(),j.forEach((function(G){"string"==typeof x[G]&&ne(w[G])&&oe(w[G],x[G])||function compareExceptionKey(x,w,S,U,G,z){if(!(S in x)||!H(x[S],w[S])){if(!U){var j=new ce(x,G),X=new ce(w,G,x),q=new J({actual:j,expected:X,operator:"deepStrictEqual",stackStartFn:z});throw q.actual=x,q.expected=w,q.operator=z.name,q}innerFail({actual:x,expected:w,message:U,operator:z.name,stackStartFn:z})}}(x,w,G,S,j,U)})),!0}return void 0!==w.prototype&&x instanceof w||!Error.isPrototypeOf(w)&&!0===w.call({},x)}function getActual(x){if("function"!=typeof x)throw new q("fn","Function",x);try{x()}catch(x){return x}return le}function checkIsPromise(x){return te(x)||null!==x&&"object"===_typeof(x)&&"function"==typeof x.then&&"function"==typeof x.catch}function waitForActual(x){return Promise.resolve().then((function(){var w;if("function"==typeof x){if(!checkIsPromise(w=x()))throw new Y("instance of Promise","promiseFn",w)}else{if(!checkIsPromise(x))throw new q("promiseFn",["Function","Promise"],x);w=x}return Promise.resolve().then((function(){return w})).then((function(){return le})).catch((function(x){return x}))}))}function expectsError(x,w,S,U){if("string"==typeof S){if(4===arguments.length)throw new q("error",["Object","Error","Function","RegExp"],S);if("object"===_typeof(w)&&null!==w){if(w.message===S)throw new X("error/message",'The error message "'.concat(w.message,'" is identical to the message.'))}else if(w===S)throw new X("error/message",'The error "'.concat(w,'" is identical to the message.'));U=S,S=void 0}else if(null!=S&&"object"!==_typeof(S)&&"function"!=typeof S)throw new q("error",["Object","Error","Function","RegExp"],S);if(w===le){var G="";S&&S.name&&(G+=" (".concat(S.name,")")),G+=U?": ".concat(U):".";var z="rejects"===x.name?"rejection":"exception";innerFail({actual:void 0,expected:S,operator:x.name,message:"Missing expected ".concat(z).concat(G),stackStartFn:x})}if(S&&!expectedException(w,S,U,x))throw w}function expectsNoError(x,w,S,U){if(w!==le){if("string"==typeof S&&(U=S,S=void 0),!S||expectedException(w,S)){var G=U?": ".concat(U):".",z="doesNotReject"===x.name?"rejection":"exception";innerFail({actual:w,expected:S,operator:x.name,message:"Got unwanted ".concat(z).concat(G,"\n")+'Actual message: "'.concat(w&&w.message,'"'),stackStartFn:x})}throw w}}function internalMatch(x,w,S,U,G){if(!ne(w))throw new q("regexp","RegExp",w);var z="match"===G;if("string"!=typeof x||oe(w,x)!==z){if(S instanceof Error)throw S;var H=!S;S=S||("string"!=typeof x?'The "string" argument must be of type string. Received type '+"".concat(_typeof(x)," (").concat(Q(x),")"):(z?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(Q(w),". Input:\n\n").concat(Q(x),"\n"));var j=new J({actual:x,expected:w,message:S,operator:G,stackStartFn:U});throw j.generatedMessage=H,j}}function strict(){for(var x=arguments.length,w=new Array(x),S=0;S<x;S++)w[S]=arguments[S];innerOk.apply(void 0,[strict,w.length].concat(w))}se.throws=function throws(x){for(var w=arguments.length,S=new Array(w>1?w-1:0),U=1;U<w;U++)S[U-1]=arguments[U];expectsError.apply(void 0,[throws,getActual(x)].concat(S))},se.rejects=function rejects(x){for(var w=arguments.length,S=new Array(w>1?w-1:0),U=1;U<w;U++)S[U-1]=arguments[U];return waitForActual(x).then((function(x){return expectsError.apply(void 0,[rejects,x].concat(S))}))},se.doesNotThrow=function doesNotThrow(x){for(var w=arguments.length,S=new Array(w>1?w-1:0),U=1;U<w;U++)S[U-1]=arguments[U];expectsNoError.apply(void 0,[doesNotThrow,getActual(x)].concat(S))},se.doesNotReject=function doesNotReject(x){for(var w=arguments.length,S=new Array(w>1?w-1:0),U=1;U<w;U++)S[U-1]=arguments[U];return waitForActual(x).then((function(x){return expectsNoError.apply(void 0,[doesNotReject,x].concat(S))}))},se.ifError=function ifError(x){if(null!=x){var w="ifError got unwanted exception: ";"object"===_typeof(x)&&"string"==typeof x.message?0===x.message.length&&x.constructor?w+=x.constructor.name:w+=x.message:w+=Q(x);var S=new J({actual:x,expected:null,operator:"ifError",message:w,stackStartFn:ifError}),U=x.stack;if("string"==typeof U){var G=U.split("\n");G.shift();for(var z=S.stack.split("\n"),H=0;H<G.length;H++){var j=z.indexOf(G[H]);if(-1!==j){z=z.slice(0,j);break}}S.stack="".concat(z.join("\n"),"\n").concat(G.join("\n"))}throw S}},se.match=function match(x,w,S){internalMatch(x,w,S,match,"match")},se.doesNotMatch=function doesNotMatch(x,w,S){internalMatch(x,w,S,doesNotMatch,"doesNotMatch")},se.strict=re(strict,se,{equal:se.strictEqual,deepEqual:se.deepStrictEqual,notEqual:se.notStrictEqual,notDeepEqual:se.notDeepStrictEqual}),se.strict.strict=se.strict},5961:(x,w,S)=>{"use strict";var U=S(4155);function ownKeys(x,w){var S=Object.keys(x);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(x);w&&(U=U.filter((function(w){return Object.getOwnPropertyDescriptor(x,w).enumerable}))),S.push.apply(S,U)}return S}function _objectSpread(x){for(var w=1;w<arguments.length;w++){var S=null!=arguments[w]?arguments[w]:{};w%2?ownKeys(Object(S),!0).forEach((function(w){_defineProperty(x,w,S[w])})):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(S)):ownKeys(Object(S)).forEach((function(w){Object.defineProperty(x,w,Object.getOwnPropertyDescriptor(S,w))}))}return x}function _defineProperty(x,w,S){return(w=_toPropertyKey(w))in x?Object.defineProperty(x,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):x[w]=S,x}function _defineProperties(x,w){for(var S=0;S<w.length;S++){var U=w[S];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(x,_toPropertyKey(U.key),U)}}function _toPropertyKey(x){var w=function _toPrimitive(x,w){if("object"!==_typeof(x)||null===x)return x;var S=x[Symbol.toPrimitive];if(void 0!==S){var U=S.call(x,w||"default");if("object"!==_typeof(U))return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===w?String:Number)(x)}(x,"string");return"symbol"===_typeof(w)?w:String(w)}function _possibleConstructorReturn(x,w){if(w&&("object"===_typeof(w)||"function"==typeof w))return w;if(void 0!==w)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(x)}function _assertThisInitialized(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function _wrapNativeSuper(x){var w="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(x){if(null===x||!function _isNativeFunction(x){return-1!==Function.toString.call(x).indexOf("[native code]")}(x))return x;if("function"!=typeof x)throw new TypeError("Super expression must either be null or a function");if(void 0!==w){if(w.has(x))return w.get(x);w.set(x,Wrapper)}function Wrapper(){return _construct(x,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(x.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,x)},_wrapNativeSuper(x)}function _construct(x,w,S){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(x,w,S){var U=[null];U.push.apply(U,w);var G=new(Function.bind.apply(x,U));return S&&_setPrototypeOf(G,S.prototype),G},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(x){return!1}}function _setPrototypeOf(x,w){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(x,w){return x.__proto__=w,x},_setPrototypeOf(x,w)}function _getPrototypeOf(x){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(x){return x.__proto__||Object.getPrototypeOf(x)},_getPrototypeOf(x)}function _typeof(x){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},_typeof(x)}var G=S(9539).inspect,z=S(2136).codes.ERR_INVALID_ARG_TYPE;function endsWith(x,w,S){return(void 0===S||S>x.length)&&(S=x.length),x.substring(S-w.length,S)===w}var H="",j="",X="",q="",K={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function copyError(x){var w=Object.keys(x),S=Object.create(Object.getPrototypeOf(x));return w.forEach((function(w){S[w]=x[w]})),Object.defineProperty(S,"message",{value:x.message}),S}function inspectValue(x){return G(x,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function createErrDiff(x,w,S){var G="",z="",Y=0,Z="",J=!1,Q=inspectValue(x),ee=Q.split("\n"),te=inspectValue(w).split("\n"),ne=0,re="";if("strictEqual"===S&&"object"===_typeof(x)&&"object"===_typeof(w)&&null!==x&&null!==w&&(S="strictEqualObject"),1===ee.length&&1===te.length&&ee[0]!==te[0]){var ie=ee[0].length+te[0].length;if(ie<=10){if(!("object"===_typeof(x)&&null!==x||"object"===_typeof(w)&&null!==w||0===x&&0===w))return"".concat(K[S],"\n\n")+"".concat(ee[0]," !== ").concat(te[0],"\n")}else if("strictEqualObject"!==S){if(ie<(U.stderr&&U.stderr.isTTY?U.stderr.columns:80)){for(;ee[0][ne]===te[0][ne];)ne++;ne>2&&(re="\n  ".concat(function repeat(x,w){if(w=Math.floor(w),0==x.length||0==w)return"";var S=x.length*w;for(w=Math.floor(Math.log(w)/Math.log(2));w;)x+=x,w--;return x+x.substring(0,S-x.length)}(" ",ne),"^"),ne=0)}}}for(var oe=ee[ee.length-1],ae=te[te.length-1];oe===ae&&(ne++<2?Z="\n  ".concat(oe).concat(Z):G=oe,ee.pop(),te.pop(),0!==ee.length&&0!==te.length);)oe=ee[ee.length-1],ae=te[te.length-1];var se=Math.max(ee.length,te.length);if(0===se){var le=Q.split("\n");if(le.length>30)for(le[26]="".concat(H,"...").concat(q);le.length>27;)le.pop();return"".concat(K.notIdentical,"\n\n").concat(le.join("\n"),"\n")}ne>3&&(Z="\n".concat(H,"...").concat(q).concat(Z),J=!0),""!==G&&(Z="\n  ".concat(G).concat(Z),G="");var ce=0,ue=K[S]+"\n".concat(j,"+ actual").concat(q," ").concat(X,"- expected").concat(q),he=" ".concat(H,"...").concat(q," Lines skipped");for(ne=0;ne<se;ne++){var de=ne-Y;if(ee.length<ne+1)de>1&&ne>2&&(de>4?(z+="\n".concat(H,"...").concat(q),J=!0):de>3&&(z+="\n  ".concat(te[ne-2]),ce++),z+="\n  ".concat(te[ne-1]),ce++),Y=ne,G+="\n".concat(X,"-").concat(q," ").concat(te[ne]),ce++;else if(te.length<ne+1)de>1&&ne>2&&(de>4?(z+="\n".concat(H,"...").concat(q),J=!0):de>3&&(z+="\n  ".concat(ee[ne-2]),ce++),z+="\n  ".concat(ee[ne-1]),ce++),Y=ne,z+="\n".concat(j,"+").concat(q," ").concat(ee[ne]),ce++;else{var pe=te[ne],fe=ee[ne],me=fe!==pe&&(!endsWith(fe,",")||fe.slice(0,-1)!==pe);me&&endsWith(pe,",")&&pe.slice(0,-1)===fe&&(me=!1,fe+=","),me?(de>1&&ne>2&&(de>4?(z+="\n".concat(H,"...").concat(q),J=!0):de>3&&(z+="\n  ".concat(ee[ne-2]),ce++),z+="\n  ".concat(ee[ne-1]),ce++),Y=ne,z+="\n".concat(j,"+").concat(q," ").concat(fe),G+="\n".concat(X,"-").concat(q," ").concat(pe),ce+=2):(z+=G,G="",1!==de&&0!==ne||(z+="\n  ".concat(fe),ce++))}if(ce>20&&ne<se-2)return"".concat(ue).concat(he,"\n").concat(z,"\n").concat(H,"...").concat(q).concat(G,"\n")+"".concat(H,"...").concat(q)}return"".concat(ue).concat(J?he:"","\n").concat(z).concat(G).concat(Z).concat(re)}var Y=function(x,w){!function _inherits(x,w){if("function"!=typeof w&&null!==w)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),Object.defineProperty(x,"prototype",{writable:!1}),w&&_setPrototypeOf(x,w)}(AssertionError,x);var S=function _createSuper(x){var w=_isNativeReflectConstruct();return function _createSuperInternal(){var S,U=_getPrototypeOf(x);if(w){var G=_getPrototypeOf(this).constructor;S=Reflect.construct(U,arguments,G)}else S=U.apply(this,arguments);return _possibleConstructorReturn(this,S)}}(AssertionError);function AssertionError(x){var w;if(function _classCallCheck(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}(this,AssertionError),"object"!==_typeof(x)||null===x)throw new z("options","Object",x);var G=x.message,Y=x.operator,Z=x.stackStartFn,J=x.actual,Q=x.expected,ee=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=G)w=S.call(this,String(G));else if(U.stderr&&U.stderr.isTTY&&(U.stderr&&U.stderr.getColorDepth&&1!==U.stderr.getColorDepth()?(H="[34m",j="[32m",q="[39m",X="[31m"):(H="",j="",q="",X="")),"object"===_typeof(J)&&null!==J&&"object"===_typeof(Q)&&null!==Q&&"stack"in J&&J instanceof Error&&"stack"in Q&&Q instanceof Error&&(J=copyError(J),Q=copyError(Q)),"deepStrictEqual"===Y||"strictEqual"===Y)w=S.call(this,createErrDiff(J,Q,Y));else if("notDeepStrictEqual"===Y||"notStrictEqual"===Y){var te=K[Y],ne=inspectValue(J).split("\n");if("notStrictEqual"===Y&&"object"===_typeof(J)&&null!==J&&(te=K.notStrictEqualObject),ne.length>30)for(ne[26]="".concat(H,"...").concat(q);ne.length>27;)ne.pop();w=1===ne.length?S.call(this,"".concat(te," ").concat(ne[0])):S.call(this,"".concat(te,"\n\n").concat(ne.join("\n"),"\n"))}else{var re=inspectValue(J),ie="",oe=K[Y];"notDeepEqual"===Y||"notEqual"===Y?(re="".concat(K[Y],"\n\n").concat(re)).length>1024&&(re="".concat(re.slice(0,1021),"...")):(ie="".concat(inspectValue(Q)),re.length>512&&(re="".concat(re.slice(0,509),"...")),ie.length>512&&(ie="".concat(ie.slice(0,509),"...")),"deepEqual"===Y||"equal"===Y?re="".concat(oe,"\n\n").concat(re,"\n\nshould equal\n\n"):ie=" ".concat(Y," ").concat(ie)),w=S.call(this,"".concat(re).concat(ie))}return Error.stackTraceLimit=ee,w.generatedMessage=!G,Object.defineProperty(_assertThisInitialized(w),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),w.code="ERR_ASSERTION",w.actual=J,w.expected=Q,w.operator=Y,Error.captureStackTrace&&Error.captureStackTrace(_assertThisInitialized(w),Z),w.stack,w.name="AssertionError",_possibleConstructorReturn(w)}return function _createClass(x,w,S){return w&&_defineProperties(x.prototype,w),S&&_defineProperties(x,S),Object.defineProperty(x,"prototype",{writable:!1}),x}(AssertionError,[{key:"toString",value:function toString(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:w,value:function value(x,w){return G(this,_objectSpread(_objectSpread({},w),{},{customInspect:!1,depth:0}))}}]),AssertionError}(_wrapNativeSuper(Error),G.custom);x.exports=Y},2136:(x,w,S)=>{"use strict";function _typeof(x){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},_typeof(x)}function _defineProperties(x,w){for(var S=0;S<w.length;S++){var U=w[S];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(x,(G=U.key,z=void 0,z=function _toPrimitive(x,w){if("object"!==_typeof(x)||null===x)return x;var S=x[Symbol.toPrimitive];if(void 0!==S){var U=S.call(x,w||"default");if("object"!==_typeof(U))return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===w?String:Number)(x)}(G,"string"),"symbol"===_typeof(z)?z:String(z)),U)}var G,z}function _setPrototypeOf(x,w){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(x,w){return x.__proto__=w,x},_setPrototypeOf(x,w)}function _createSuper(x){var w=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(x){return!1}}();return function _createSuperInternal(){var S,U=_getPrototypeOf(x);if(w){var G=_getPrototypeOf(this).constructor;S=Reflect.construct(U,arguments,G)}else S=U.apply(this,arguments);return function _possibleConstructorReturn(x,w){if(w&&("object"===_typeof(w)||"function"==typeof w))return w;if(void 0!==w)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}(x)}(this,S)}}function _getPrototypeOf(x){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(x){return x.__proto__||Object.getPrototypeOf(x)},_getPrototypeOf(x)}var U,G,z={};function createErrorType(x,w,S){S||(S=Error);var U=function(S){!function _inherits(x,w){if("function"!=typeof w&&null!==w)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),Object.defineProperty(x,"prototype",{writable:!1}),w&&_setPrototypeOf(x,w)}(NodeError,S);var U=_createSuper(NodeError);function NodeError(S,G,z){var H;return function _classCallCheck(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}(this,NodeError),H=U.call(this,function getMessage(x,S,U){return"string"==typeof w?w:w(x,S,U)}(S,G,z)),H.code=x,H}return function _createClass(x,w,S){return w&&_defineProperties(x.prototype,w),S&&_defineProperties(x,S),Object.defineProperty(x,"prototype",{writable:!1}),x}(NodeError)}(S);z[x]=U}function oneOf(x,w){if(Array.isArray(x)){var S=x.length;return x=x.map((function(x){return String(x)})),S>2?"one of ".concat(w," ").concat(x.slice(0,S-1).join(", "),", or ")+x[S-1]:2===S?"one of ".concat(w," ").concat(x[0]," or ").concat(x[1]):"of ".concat(w," ").concat(x[0])}return"of ".concat(w," ").concat(String(x))}createErrorType("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),createErrorType("ERR_INVALID_ARG_TYPE",(function(x,w,G){var z,H;if(void 0===U&&(U=S(9282)),U("string"==typeof x,"'name' must be a string"),"string"==typeof w&&function startsWith(x,w,S){return x.substr(!S||S<0?0:+S,w.length)===w}(w,"not ")?(z="must not be",w=w.replace(/^not /,"")):z="must be",function endsWith(x,w,S){return(void 0===S||S>x.length)&&(S=x.length),x.substring(S-w.length,S)===w}(x," argument"))H="The ".concat(x," ").concat(z," ").concat(oneOf(w,"type"));else{var j=function includes(x,w,S){return"number"!=typeof S&&(S=0),!(S+w.length>x.length)&&-1!==x.indexOf(w,S)}(x,".")?"property":"argument";H='The "'.concat(x,'" ').concat(j," ").concat(z," ").concat(oneOf(w,"type"))}return H+=". Received type ".concat(_typeof(G))}),TypeError),createErrorType("ERR_INVALID_ARG_VALUE",(function(x,w){var U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===G&&(G=S(9539));var z=G.inspect(w);return z.length>128&&(z="".concat(z.slice(0,128),"...")),"The argument '".concat(x,"' ").concat(U,". Received ").concat(z)}),TypeError,RangeError),createErrorType("ERR_INVALID_RETURN_VALUE",(function(x,w,S){var U;return U=S&&S.constructor&&S.constructor.name?"instance of ".concat(S.constructor.name):"type ".concat(_typeof(S)),"Expected ".concat(x,' to be returned from the "').concat(w,'"')+" function but got ".concat(U,".")}),TypeError),createErrorType("ERR_MISSING_ARGS",(function(){for(var x=arguments.length,w=new Array(x),G=0;G<x;G++)w[G]=arguments[G];void 0===U&&(U=S(9282)),U(w.length>0,"At least one arg needs to be specified");var z="The ",H=w.length;switch(w=w.map((function(x){return'"'.concat(x,'"')})),H){case 1:z+="".concat(w[0]," argument");break;case 2:z+="".concat(w[0]," and ").concat(w[1]," arguments");break;default:z+=w.slice(0,H-1).join(", "),z+=", and ".concat(w[H-1]," arguments")}return"".concat(z," must be specified")}),TypeError),x.exports.codes=z},9158:(x,w,S)=>{"use strict";function _slicedToArray(x,w){return function _arrayWithHoles(x){if(Array.isArray(x))return x}(x)||function _iterableToArrayLimit(x,w){var S=null==x?null:"undefined"!=typeof Symbol&&x[Symbol.iterator]||x["@@iterator"];if(null!=S){var U,G,z,H,j=[],X=!0,q=!1;try{if(z=(S=S.call(x)).next,0===w){if(Object(S)!==S)return;X=!1}else for(;!(X=(U=z.call(S)).done)&&(j.push(U.value),j.length!==w);X=!0);}catch(x){q=!0,G=x}finally{try{if(!X&&null!=S.return&&(H=S.return(),Object(H)!==H))return}finally{if(q)throw G}}return j}}(x,w)||function _unsupportedIterableToArray(x,w){if(!x)return;if("string"==typeof x)return _arrayLikeToArray(x,w);var S=Object.prototype.toString.call(x).slice(8,-1);"Object"===S&&x.constructor&&(S=x.constructor.name);if("Map"===S||"Set"===S)return Array.from(x);if("Arguments"===S||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return _arrayLikeToArray(x,w)}(x,w)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(x,w){(null==w||w>x.length)&&(w=x.length);for(var S=0,U=new Array(w);S<w;S++)U[S]=x[S];return U}function _typeof(x){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},_typeof(x)}var U=void 0!==/a/g.flags,G=function arrayFromSet(x){var w=[];return x.forEach((function(x){return w.push(x)})),w},z=function arrayFromMap(x){var w=[];return x.forEach((function(x,S){return w.push([S,x])})),w},H=Object.is?Object.is:S(609),j=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},X=Number.isNaN?Number.isNaN:S(360);function uncurryThis(x){return x.call.bind(x)}var q=uncurryThis(Object.prototype.hasOwnProperty),K=uncurryThis(Object.prototype.propertyIsEnumerable),Y=uncurryThis(Object.prototype.toString),Z=S(9539).types,J=Z.isAnyArrayBuffer,Q=Z.isArrayBufferView,ee=Z.isDate,te=Z.isMap,ne=Z.isRegExp,re=Z.isSet,ie=Z.isNativeError,oe=Z.isBoxedPrimitive,ae=Z.isNumberObject,se=Z.isStringObject,le=Z.isBooleanObject,ce=Z.isBigIntObject,ue=Z.isSymbolObject,he=Z.isFloat32Array,de=Z.isFloat64Array;function isNonIndex(x){if(0===x.length||x.length>10)return!0;for(var w=0;w<x.length;w++){var S=x.charCodeAt(w);if(S<48||S>57)return!0}return 10===x.length&&x>=Math.pow(2,32)}function getOwnNonIndexProperties(x){return Object.keys(x).filter(isNonIndex).concat(j(x).filter(Object.prototype.propertyIsEnumerable.bind(x)))}function compare(x,w){if(x===w)return 0;for(var S=x.length,U=w.length,G=0,z=Math.min(S,U);G<z;++G)if(x[G]!==w[G]){S=x[G],U=w[G];break}return S<U?-1:U<S?1:0}var pe=0,fe=1,me=2,ge=3;function innerDeepEqual(x,w,S,G){if(x===w)return 0!==x||(!S||H(x,w));if(S){if("object"!==_typeof(x))return"number"==typeof x&&X(x)&&X(w);if("object"!==_typeof(w)||null===x||null===w)return!1;if(Object.getPrototypeOf(x)!==Object.getPrototypeOf(w))return!1}else{if(null===x||"object"!==_typeof(x))return(null===w||"object"!==_typeof(w))&&x==w;if(null===w||"object"!==_typeof(w))return!1}var z=Y(x);if(z!==Y(w))return!1;if(Array.isArray(x)){if(x.length!==w.length)return!1;var j=getOwnNonIndexProperties(x),q=getOwnNonIndexProperties(w);return j.length===q.length&&keyCheck(x,w,S,G,fe,j)}if("[object Object]"===z&&(!te(x)&&te(w)||!re(x)&&re(w)))return!1;if(ee(x)){if(!ee(w)||Date.prototype.getTime.call(x)!==Date.prototype.getTime.call(w))return!1}else if(ne(x)){if(!ne(w)||!function areSimilarRegExps(x,w){return U?x.source===w.source&&x.flags===w.flags:RegExp.prototype.toString.call(x)===RegExp.prototype.toString.call(w)}(x,w))return!1}else if(ie(x)||x instanceof Error){if(x.message!==w.message||x.name!==w.name)return!1}else{if(Q(x)){if(S||!he(x)&&!de(x)){if(!function areSimilarTypedArrays(x,w){return x.byteLength===w.byteLength&&0===compare(new Uint8Array(x.buffer,x.byteOffset,x.byteLength),new Uint8Array(w.buffer,w.byteOffset,w.byteLength))}(x,w))return!1}else if(!function areSimilarFloatArrays(x,w){if(x.byteLength!==w.byteLength)return!1;for(var S=0;S<x.byteLength;S++)if(x[S]!==w[S])return!1;return!0}(x,w))return!1;var K=getOwnNonIndexProperties(x),Z=getOwnNonIndexProperties(w);return K.length===Z.length&&keyCheck(x,w,S,G,pe,K)}if(re(x))return!(!re(w)||x.size!==w.size)&&keyCheck(x,w,S,G,me);if(te(x))return!(!te(w)||x.size!==w.size)&&keyCheck(x,w,S,G,ge);if(J(x)){if(!function areEqualArrayBuffers(x,w){return x.byteLength===w.byteLength&&0===compare(new Uint8Array(x),new Uint8Array(w))}(x,w))return!1}else if(oe(x)&&!function isEqualBoxedPrimitive(x,w){return ae(x)?ae(w)&&H(Number.prototype.valueOf.call(x),Number.prototype.valueOf.call(w)):se(x)?se(w)&&String.prototype.valueOf.call(x)===String.prototype.valueOf.call(w):le(x)?le(w)&&Boolean.prototype.valueOf.call(x)===Boolean.prototype.valueOf.call(w):ce(x)?ce(w)&&BigInt.prototype.valueOf.call(x)===BigInt.prototype.valueOf.call(w):ue(w)&&Symbol.prototype.valueOf.call(x)===Symbol.prototype.valueOf.call(w)}(x,w))return!1}return keyCheck(x,w,S,G,pe)}function getEnumerables(x,w){return w.filter((function(w){return K(x,w)}))}function keyCheck(x,w,S,U,H,X){if(5===arguments.length){X=Object.keys(x);var Y=Object.keys(w);if(X.length!==Y.length)return!1}for(var Z=0;Z<X.length;Z++)if(!q(w,X[Z]))return!1;if(S&&5===arguments.length){var J=j(x);if(0!==J.length){var Q=0;for(Z=0;Z<J.length;Z++){var ee=J[Z];if(K(x,ee)){if(!K(w,ee))return!1;X.push(ee),Q++}else if(K(w,ee))return!1}var te=j(w);if(J.length!==te.length&&getEnumerables(w,te).length!==Q)return!1}else{var ne=j(w);if(0!==ne.length&&0!==getEnumerables(w,ne).length)return!1}}if(0===X.length&&(H===pe||H===fe&&0===x.length||0===x.size))return!0;if(void 0===U)U={val1:new Map,val2:new Map,position:0};else{var re=U.val1.get(x);if(void 0!==re){var ie=U.val2.get(w);if(void 0!==ie)return re===ie}U.position++}U.val1.set(x,U.position),U.val2.set(w,U.position);var oe=function objEquiv(x,w,S,U,H,j){var X=0;if(j===me){if(!function setEquiv(x,w,S,U){for(var z=null,H=G(x),j=0;j<H.length;j++){var X=H[j];if("object"===_typeof(X)&&null!==X)null===z&&(z=new Set),z.add(X);else if(!w.has(X)){if(S)return!1;if(!setMightHaveLoosePrim(x,w,X))return!1;null===z&&(z=new Set),z.add(X)}}if(null!==z){for(var q=G(w),K=0;K<q.length;K++){var Y=q[K];if("object"===_typeof(Y)&&null!==Y){if(!setHasEqualElement(z,Y,S,U))return!1}else if(!S&&!x.has(Y)&&!setHasEqualElement(z,Y,S,U))return!1}return 0===z.size}return!0}(x,w,S,H))return!1}else if(j===ge){if(!function mapEquiv(x,w,S,U){for(var G=null,H=z(x),j=0;j<H.length;j++){var X=_slicedToArray(H[j],2),q=X[0],K=X[1];if("object"===_typeof(q)&&null!==q)null===G&&(G=new Set),G.add(q);else{var Y=w.get(q);if(void 0===Y&&!w.has(q)||!innerDeepEqual(K,Y,S,U)){if(S)return!1;if(!mapMightHaveLoosePrim(x,w,q,K,U))return!1;null===G&&(G=new Set),G.add(q)}}}if(null!==G){for(var Z=z(w),J=0;J<Z.length;J++){var Q=_slicedToArray(Z[J],2),ee=Q[0],te=Q[1];if("object"===_typeof(ee)&&null!==ee){if(!mapHasEqualEntry(G,x,ee,te,S,U))return!1}else if(!(S||x.has(ee)&&innerDeepEqual(x.get(ee),te,!1,U)||mapHasEqualEntry(G,x,ee,te,!1,U)))return!1}return 0===G.size}return!0}(x,w,S,H))return!1}else if(j===fe)for(;X<x.length;X++){if(!q(x,X)){if(q(w,X))return!1;for(var K=Object.keys(x);X<K.length;X++){var Y=K[X];if(!q(w,Y)||!innerDeepEqual(x[Y],w[Y],S,H))return!1}return K.length===Object.keys(w).length}if(!q(w,X)||!innerDeepEqual(x[X],w[X],S,H))return!1}for(X=0;X<U.length;X++){var Z=U[X];if(!innerDeepEqual(x[Z],w[Z],S,H))return!1}return!0}(x,w,S,X,U,H);return U.val1.delete(x),U.val2.delete(w),oe}function setHasEqualElement(x,w,S,U){for(var z=G(x),H=0;H<z.length;H++){var j=z[H];if(innerDeepEqual(w,j,S,U))return x.delete(j),!0}return!1}function findLooseMatchingPrimitives(x){switch(_typeof(x)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":x=+x;case"number":if(X(x))return!1}return!0}function setMightHaveLoosePrim(x,w,S){var U=findLooseMatchingPrimitives(S);return null!=U?U:w.has(U)&&!x.has(U)}function mapMightHaveLoosePrim(x,w,S,U,G){var z=findLooseMatchingPrimitives(S);if(null!=z)return z;var H=w.get(z);return!(void 0===H&&!w.has(z)||!innerDeepEqual(U,H,!1,G))&&(!x.has(z)&&innerDeepEqual(U,H,!1,G))}function mapHasEqualEntry(x,w,S,U,z,H){for(var j=G(x),X=0;X<j.length;X++){var q=j[X];if(innerDeepEqual(S,q,z,H)&&innerDeepEqual(U,w.get(q),z,H))return x.delete(q),!0}return!1}x.exports={isDeepEqual:function isDeepEqual(x,w){return innerDeepEqual(x,w,false)},isDeepStrictEqual:function isDeepStrictEqual(x,w){return innerDeepEqual(x,w,true)}}},4145:(x,w,S)=>{"use strict";S.r(w),S.d(w,{glTFLoader:()=>se});var U=S(5975),G=S(9685);function create(){var x=new G.WT(3);return G.WT!=Float32Array&&(x[0]=0,x[1]=0,x[2]=0),x}function fromValues(x,w,S){var U=new G.WT(3);return U[0]=x,U[1]=w,U[2]=S,U}function set(x,w,S,U){return x[0]=w,x[1]=S,x[2]=U,x}function vec3_dot(x,w){return x[0]*w[0]+x[1]*w[1]+x[2]*w[2]}function cross(x,w,S){var U=w[0],G=w[1],z=w[2],H=S[0],j=S[1],X=S[2];return x[0]=G*X-z*j,x[1]=z*H-U*X,x[2]=U*j-G*H,x}var z,H=function vec3_length(x){var w=x[0],S=x[1],U=x[2];return Math.hypot(w,S,U)};z=create();!function(){var x=function vec4_create(){var x=new G.WT(4);return G.WT!=Float32Array&&(x[0]=0,x[1]=0,x[2]=0,x[3]=0),x}()}();function quat_create(){var x=new G.WT(4);return G.WT!=Float32Array&&(x[0]=0,x[1]=0,x[2]=0),x[3]=1,x}function slerp(x,w,S,U){var z,H,j,X,q,K=w[0],Y=w[1],Z=w[2],J=w[3],Q=S[0],ee=S[1],te=S[2],ne=S[3];return(H=K*Q+Y*ee+Z*te+J*ne)<0&&(H=-H,Q=-Q,ee=-ee,te=-te,ne=-ne),1-H>G.Ib?(z=Math.acos(H),j=Math.sin(z),X=Math.sin((1-U)*z)/j,q=Math.sin(U*z)/j):(X=1-U,q=U),x[0]=X*K+q*Q,x[1]=X*Y+q*ee,x[2]=X*Z+q*te,x[3]=X*J+q*ne,x}var j,X,q,K,Y,Z,J,Q=function vec4_set(x,w,S,U,G){return x[0]=w,x[1]=S,x[2]=U,x[3]=G,x},ee=function vec4_normalize(x,w){var S=w[0],U=w[1],G=w[2],z=w[3],H=S*S+U*U+G*G+z*z;return H>0&&(H=1/Math.sqrt(H)),x[0]=S*H,x[1]=U*H,x[2]=G*H,x[3]=z*H,x},te=(j=create(),X=fromValues(1,0,0),q=fromValues(0,1,0),K=quat_create(),Y=quat_create(),Z=function mat3_create(){var x=new G.WT(9);return G.WT!=Float32Array&&(x[1]=0,x[2]=0,x[3]=0,x[5]=0,x[6]=0,x[7]=0),x[0]=1,x[4]=1,x[8]=1,x}(),S(5108)),ne=ne||{},re=ne.Scene=function(){this.meshes=[]},ie=ne.Mesh=function(){this.meshID="",this.primitives=[]},oe=ne.Primitive=function(){this.mode=4,this.matrix=U.Ue(),this.indices=null,this.indicesComponentType=5123,this.vertexBuffer=null,this.attributes={},this.material=null,this.technique=null},ae=ne.glTFModel=function(){this.defaultScene="",this.scenes={},this.nodeMatrix={},this.json=null,this.shaders={},this.programs={},this.images={}},se=ne.glTFLoader=function(x){J=x,this._init(),this.glTF=null};se.prototype._init=function(){this._parseDone=!1,this._loadDone=!1,this._bufferRequested=0,this._bufferLoaded=0,this._buffers={},this._bufferTasks={},this._bufferViews={},this._shaderRequested=0,this._shaderLoaded=0,this._imageRequested=0,this._imageLoaded=0,this._pendingTasks=0,this._finishedPendingTasks=0,this.onload=null},se.prototype._getBufferViewData=function(x,w,S){var U=this._bufferViews[w];if(U)S(U);else{var G=x.bufferViews[w],z=this._buffers[G.buffer];if(z)this._bufferViews[w]=z.slice(G.byteOffset,G.byteOffset+G.byteLength),S(U);else{this._pendingTasks++;var H=this._bufferTasks[G.buffer];H||(this._bufferTasks[G.buffer]=[],H=this._bufferTasks[G.buffer]);var j=this;H.push((function(x){var U=j._bufferViews[w];U||(te.log("create new BufferView Data for "+w),U=j._bufferViews[w]=x.slice(G.byteOffset,G.byteOffset+G.byteLength)),j._finishedPendingTasks++,S(U)}))}}},se.prototype._checkComplete=function(){this._bufferRequested==this._bufferLoaded&&this._shaderRequested==this._shaderLoaded&&this._imageRequested==this._imageLoaded&&(this._loadDone=!0),this._loadDone&&this._parseDone&&this._pendingTasks==this._finishedPendingTasks&&this.onload(this.glTF)},se.prototype._parseGLTF=function(x){if(this.glTF.json=x,this.glTF.defaultScene=x.scene,x.scenes)for(var w in x.scenes){var S=new re;this.glTF.scenes[w]=S;for(var U=x.scenes[w].nodes,G=U.length,z=0;z<G;++z){var H=U[z];this._parseNode(x,H,S)}}this._parseDone=!0,this._checkComplete()};var le=create(),ce=quat_create(),ue=create(),he=U.Ue();se.prototype._parseNode=function(x,w,S,G){var z=x.nodes[w];void 0===G&&(G=U.Ue());var H=U.Ue();if(z.hasOwnProperty("matrix")){for(var j=0;j<16;++j)H[j]=z.matrix[j];U.Jp(H,G,H)}else set(le,z.translation[0],z.translation[1],z.translation[2]),Q(ce,z.rotation[0],z.rotation[1],z.rotation[2],z.rotation[3]),U.yl(he,ce,le),U.Jp(H,H,he),set(ue,z.scale[0],z.scale[1],z.scale[2]),U.bA(H,H,ue);this.glTF.nodeMatrix[w]=H;var X=z.meshes;if(X)for(var q=X.length,K=0;K<q;++K){var Y=new ie;S.meshes.push(Y);var Z=X[K],J=x.meshes[Z];Y.meshID=Z;for(var ee=J.primitives,te=ee.length,ne=0;ne<te;++ne){var re=new oe;Y.primitives.push(re);var ae=ee[ne];ae.indices&&this._parseIndices(x,ae,re),this._parseAttributes(x,ae,re,H),re.material=x.materials[ae.material],re.material.technique&&(re.technique=x.techniques[re.material.technique])}}for(var se=z.children,de=se.length,pe=0;pe<de;++pe){var fe=se[pe];this._parseNode(x,fe,S,H)}},se.prototype._parseIndices=function(x,w,S){var U=w.indices,G=x.accessors[U];S.mode=w.mode||4,S.indicesComponentType=G.componentType;var z=this;this._getBufferViewData(x,G.bufferView,(function(x){S.indices=function _getAccessorData(x,w){return _arrayBuffer2TypedArray(x,w.byteOffset,w.count*pe[w.type],w.componentType)}(x,G),z._checkComplete()}))},se.prototype._parseAttributes=function(x,w,S,G){var z=Object.keys(w.attributes)[0],H=x.accessors[w.attributes[z]],j=H.bufferView,X=x.bufferViews[j],q=this;this._getBufferViewData(x,j,(function(z){S.vertexBuffer=_arrayBuffer2TypedArray(z,0,X.byteLength/de[H.componentType],H.componentType);for(var j in w.attributes){var K=w.attributes[j],Y=x.accessors[K],Z=de[Y.componentType];Y.byteStride,Y.byteOffset,Y.count;U.JG(S.matrix,G),S.attributes[j]={size:pe[Y.type],type:Y.componentType,stride:Y.byteStride,offset:Y.byteOffset}}q._checkComplete()}))},se.prototype.loadGLTF=function(x,w){this._init(),this.onload=w||function(x){te.log("glTF model loaded."),te.log(x)},this.glTF=new ae,this.baseUri=function _getBaseUri(x){var w="",S=x.lastIndexOf("/");-1!==S&&(w=x.substring(0,S+1));return w}(x);var S=this;!function _loadJSON(x,w){var S=new XMLHttpRequest;S.overrideMimeType("application/json"),S.open("GET",x,!0),S.onreadystatechange=function(){4==S.readyState&&"200"==S.status&&w(S.responseText,this)},S.send(null)}(x,(function(x){var w,U=JSON.parse(x),G=function loadArrayBufferCallback(x){var U,G;if(S._buffers[w]=x,S._bufferLoaded++,S._bufferTasks[w])for(U=0,G=S._bufferTasks[w].length;U<G;++U)S._bufferTasks[w][U](x);S._checkComplete()};if(U.buffers)for(w in U.buffers)S._bufferRequested++,_loadArrayBuffer(S.baseUri+U.buffers[w].uri,G);var z,H,j,X=function loadImageCallback(x,w){S._imageLoaded++,S.glTF.images[w]=x,S._checkComplete()};if(U.images)for(z in U.images)S._imageRequested++,_loadImage(S.baseUri+U.images[z].uri,z,X);var q=function loadVertexShaderFileCallback(x){S._shaderLoaded++,j.vertexShader=x,j.fragmentShader&&(j.program=_createProgram(J,j.vertexShader,j.fragmentShader),S._checkComplete())},K=function loadFragmentShaderFileCallback(x){S._shaderLoaded++,j.fragmentShader=x,j.vertexShader&&(j.program=_createProgram(J,j.vertexShader,j.fragmentShader),S._checkComplete())};if(U.programs)for(H in U.programs){j=S.glTF.programs[H]={vertexShader:null,fragmentShader:null,program:null};var Y=U.programs[H];S._shaderRequested+=2,_loadShaderFile(S.baseUri+U.shaders[Y.vertexShader].uri,q),_loadShaderFile(S.baseUri+U.shaders[Y.fragmentShader].uri,K)}S._parseGLTF(U)}))};var de={5120:1,5121:1,5122:2,5123:2,5126:4},pe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function _arrayBuffer2TypedArray(x,w,S,U){switch(U){case 5122:return new Int16Array(x,w,S);case 5123:return new Uint16Array(x,w,S);case 5124:return new Int32Array(x,w,S);case 5125:return new Uint32Array(x,w,S);case 5126:return new Float32Array(x,w,S);default:return null}}function _loadArrayBuffer(x,w){var S=new XMLHttpRequest;S.responseType="arraybuffer",S.open("GET",x,!0),S.onreadystatechange=function(){if(4==S.readyState&&"200"==S.status){var x=S.response;x&&w&&w(x)}},S.send(null)}function _loadShaderFile(x,w){var S=new XMLHttpRequest;S.responseType="text",S.open("GET",x,!0),S.onreadystatechange=function(){if(4==S.readyState&&"200"==S.status){var x=S.response;x&&w&&w(x)}},S.send(null)}function _loadImage(x,w,S){var U=new Image;U.src=x,U.onload=function(){S(U,w)}}function _createShader(x,w,S){var U=x.createShader(S);return x.shaderSource(U,w),x.compileShader(U),U}function _createProgram(x,w,S){var U=x.createProgram(),G=_createShader(x,w,x.VERTEX_SHADER),z=_createShader(x,S,x.FRAGMENT_SHADER);x.attachShader(U,G),x.deleteShader(G),x.attachShader(U,z),x.deleteShader(z),x.linkProgram(U);var H=x.getProgramInfoLog(U);return H&&te.log(H),(H=x.getShaderInfoLog(G))&&te.log(H),(H=x.getShaderInfoLog(z))&&te.log(H),U}ne.Attributes=["POSITION","NORMAL","TEXCOORD","COLOR","JOINT","WEIGHT"]},7943:(x,w,S)=>{"use strict";function colorToString(x,w){var S=x.__state.conversionName.toString(),U=Math.round(x.r),G=Math.round(x.g),z=Math.round(x.b),H=x.a,j=Math.round(x.h),X=x.s.toFixed(1),q=x.v.toFixed(1);if(w||"THREE_CHAR_HEX"===S||"SIX_CHAR_HEX"===S){for(var K=x.hex.toString(16);K.length<6;)K="0"+K;return"#"+K}return"CSS_RGB"===S?"rgb("+U+","+G+","+z+")":"CSS_RGBA"===S?"rgba("+U+","+G+","+z+","+H+")":"HEX"===S?"0x"+x.hex.toString(16):"RGB_ARRAY"===S?"["+U+","+G+","+z+"]":"RGBA_ARRAY"===S?"["+U+","+G+","+z+","+H+"]":"RGB_OBJ"===S?"{r:"+U+",g:"+G+",b:"+z+"}":"RGBA_OBJ"===S?"{r:"+U+",g:"+G+",b:"+z+",a:"+H+"}":"HSV_OBJ"===S?"{h:"+j+",s:"+X+",v:"+q+"}":"HSVA_OBJ"===S?"{h:"+j+",s:"+X+",v:"+q+",a:"+H+"}":"unknown format"}S.d(w,{BJ:()=>Ge,JG:()=>abort,nS:()=>ze,Dd:()=>He,JQ:()=>Ne,gl:()=>Be,NR:()=>Ve,Re:()=>makeRenderLoop});var U=Array.prototype.forEach,G=Array.prototype.slice,z={BREAK:{},extend:function extend(x){return this.each(G.call(arguments,1),(function(w){(this.isObject(w)?Object.keys(w):[]).forEach(function(S){this.isUndefined(w[S])||(x[S]=w[S])}.bind(this))}),this),x},defaults:function defaults(x){return this.each(G.call(arguments,1),(function(w){(this.isObject(w)?Object.keys(w):[]).forEach(function(S){this.isUndefined(x[S])&&(x[S]=w[S])}.bind(this))}),this),x},compose:function compose(){var x=G.call(arguments);return function(){for(var w=G.call(arguments),S=x.length-1;S>=0;S--)w=[x[S].apply(this,w)];return w[0]}},each:function each(x,w,S){if(x)if(U&&x.forEach&&x.forEach===U)x.forEach(w,S);else if(x.length===x.length+0){var G,z=void 0;for(z=0,G=x.length;z<G;z++)if(z in x&&w.call(S,x[z],z)===this.BREAK)return}else for(var H in x)if(w.call(S,x[H],H)===this.BREAK)return},defer:function defer(x){setTimeout(x,0)},debounce:function debounce(x,w,S){var U=void 0;return function(){var G=this,z=arguments;var H=S||!U;clearTimeout(U),U=setTimeout((function delayed(){U=null,S||x.apply(G,z)}),w),H&&x.apply(G,z)}},toArray:function toArray(x){return x.toArray?x.toArray():G.call(x)},isUndefined:function isUndefined(x){return void 0===x},isNull:function isNull(x){return null===x},isNaN:function(x){function isNaN(w){return x.apply(this,arguments)}return isNaN.toString=function(){return x.toString()},isNaN}((function(x){return isNaN(x)})),isArray:Array.isArray||function(x){return x.constructor===Array},isObject:function isObject(x){return x===Object(x)},isNumber:function isNumber(x){return x===x+0},isString:function isString(x){return x===x+""},isBoolean:function isBoolean(x){return!1===x||!0===x},isFunction:function isFunction(x){return x instanceof Function}},H=[{litmus:z.isString,conversions:{THREE_CHAR_HEX:{read:function read(x){var w=x.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==w&&{space:"HEX",hex:parseInt("0x"+w[1].toString()+w[1].toString()+w[2].toString()+w[2].toString()+w[3].toString()+w[3].toString(),0)}},write:colorToString},SIX_CHAR_HEX:{read:function read(x){var w=x.match(/^#([A-F0-9]{6})$/i);return null!==w&&{space:"HEX",hex:parseInt("0x"+w[1].toString(),0)}},write:colorToString},CSS_RGB:{read:function read(x){var w=x.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==w&&{space:"RGB",r:parseFloat(w[1]),g:parseFloat(w[2]),b:parseFloat(w[3])}},write:colorToString},CSS_RGBA:{read:function read(x){var w=x.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==w&&{space:"RGB",r:parseFloat(w[1]),g:parseFloat(w[2]),b:parseFloat(w[3]),a:parseFloat(w[4])}},write:colorToString}}},{litmus:z.isNumber,conversions:{HEX:{read:function read(x){return{space:"HEX",hex:x,conversionName:"HEX"}},write:function write(x){return x.hex}}}},{litmus:z.isArray,conversions:{RGB_ARRAY:{read:function read(x){return 3===x.length&&{space:"RGB",r:x[0],g:x[1],b:x[2]}},write:function write(x){return[x.r,x.g,x.b]}},RGBA_ARRAY:{read:function read(x){return 4===x.length&&{space:"RGB",r:x[0],g:x[1],b:x[2],a:x[3]}},write:function write(x){return[x.r,x.g,x.b,x.a]}}}},{litmus:z.isObject,conversions:{RGBA_OBJ:{read:function read(x){return!!(z.isNumber(x.r)&&z.isNumber(x.g)&&z.isNumber(x.b)&&z.isNumber(x.a))&&{space:"RGB",r:x.r,g:x.g,b:x.b,a:x.a}},write:function write(x){return{r:x.r,g:x.g,b:x.b,a:x.a}}},RGB_OBJ:{read:function read(x){return!!(z.isNumber(x.r)&&z.isNumber(x.g)&&z.isNumber(x.b))&&{space:"RGB",r:x.r,g:x.g,b:x.b}},write:function write(x){return{r:x.r,g:x.g,b:x.b}}},HSVA_OBJ:{read:function read(x){return!!(z.isNumber(x.h)&&z.isNumber(x.s)&&z.isNumber(x.v)&&z.isNumber(x.a))&&{space:"HSV",h:x.h,s:x.s,v:x.v,a:x.a}},write:function write(x){return{h:x.h,s:x.s,v:x.v,a:x.a}}},HSV_OBJ:{read:function read(x){return!!(z.isNumber(x.h)&&z.isNumber(x.s)&&z.isNumber(x.v))&&{space:"HSV",h:x.h,s:x.s,v:x.v}},write:function write(x){return{h:x.h,s:x.s,v:x.v}}}}}],j=void 0,X=void 0,q=function interpret(){X=!1;var x=arguments.length>1?z.toArray(arguments):arguments[0];return z.each(H,(function(w){if(w.litmus(x))return z.each(w.conversions,(function(w,S){if(j=w.read(x),!1===X&&!1!==j)return X=j,j.conversionName=S,j.conversion=w,z.BREAK})),z.BREAK})),X},K=void 0,Y={hsv_to_rgb:function hsv_to_rgb(x,w,S){var U=Math.floor(x/60)%6,G=x/60-Math.floor(x/60),z=S*(1-w),H=S*(1-G*w),j=S*(1-(1-G)*w),X=[[S,j,z],[H,S,z],[z,S,j],[z,H,S],[j,z,S],[S,z,H]][U];return{r:255*X[0],g:255*X[1],b:255*X[2]}},rgb_to_hsv:function rgb_to_hsv(x,w,S){var U=Math.min(x,w,S),G=Math.max(x,w,S),z=G-U,H=void 0;return 0===G?{h:NaN,s:0,v:0}:(H=x===G?(w-S)/z:w===G?2+(S-x)/z:4+(x-w)/z,(H/=6)<0&&(H+=1),{h:360*H,s:z/G,v:G/255})},rgb_to_hex:function rgb_to_hex(x,w,S){var U=this.hex_with_component(0,2,x);return U=this.hex_with_component(U,1,w),U=this.hex_with_component(U,0,S)},component_from_hex:function component_from_hex(x,w){return x>>8*w&255},hex_with_component:function hex_with_component(x,w,S){return S<<(K=8*w)|x&~(255<<K)}},Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},classCallCheck=function(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")},J=function(){function defineProperties(x,w){for(var S=0;S<w.length;S++){var U=w[S];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(x,U.key,U)}}return function(x,w,S){return w&&defineProperties(x.prototype,w),S&&defineProperties(x,S),x}}(),Q=function get(x,w,S){null===x&&(x=Function.prototype);var U=Object.getOwnPropertyDescriptor(x,w);if(void 0===U){var G=Object.getPrototypeOf(x);return null===G?void 0:get(G,w,S)}if("value"in U)return U.value;var z=U.get;return void 0!==z?z.call(S):void 0},inherits=function(x,w){if("function"!=typeof w&&null!==w)throw new TypeError("Super expression must either be null or a function, not "+typeof w);x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(x,w):x.__proto__=w)},possibleConstructorReturn=function(x,w){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!w||"object"!=typeof w&&"function"!=typeof w?x:w},ee=function(){function Color(){if(classCallCheck(this,Color),this.__state=q.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return J(Color,[{key:"toString",value:function toString(){return colorToString(this)}},{key:"toHexString",value:function toHexString(){return colorToString(this,!0)}},{key:"toOriginal",value:function toOriginal(){return this.__state.conversion.write(this)}}]),Color}();function defineRGBComponent(x,w,S){Object.defineProperty(x,w,{get:function get$$1(){return"RGB"===this.__state.space||ee.recalculateRGB(this,w,S),this.__state[w]},set:function set$$1(x){"RGB"!==this.__state.space&&(ee.recalculateRGB(this,w,S),this.__state.space="RGB"),this.__state[w]=x}})}function defineHSVComponent(x,w){Object.defineProperty(x,w,{get:function get$$1(){return"HSV"===this.__state.space||ee.recalculateHSV(this),this.__state[w]},set:function set$$1(x){"HSV"!==this.__state.space&&(ee.recalculateHSV(this),this.__state.space="HSV"),this.__state[w]=x}})}ee.recalculateRGB=function(x,w,S){if("HEX"===x.__state.space)x.__state[w]=Y.component_from_hex(x.__state.hex,S);else{if("HSV"!==x.__state.space)throw new Error("Corrupted color state");z.extend(x.__state,Y.hsv_to_rgb(x.__state.h,x.__state.s,x.__state.v))}},ee.recalculateHSV=function(x){var w=Y.rgb_to_hsv(x.r,x.g,x.b);z.extend(x.__state,{s:w.s,v:w.v}),z.isNaN(w.h)?z.isUndefined(x.__state.h)&&(x.__state.h=0):x.__state.h=w.h},ee.COMPONENTS=["r","g","b","h","s","v","hex","a"],defineRGBComponent(ee.prototype,"r",2),defineRGBComponent(ee.prototype,"g",1),defineRGBComponent(ee.prototype,"b",0),defineHSVComponent(ee.prototype,"h"),defineHSVComponent(ee.prototype,"s"),defineHSVComponent(ee.prototype,"v"),Object.defineProperty(ee.prototype,"a",{get:function get$$1(){return this.__state.a},set:function set$$1(x){this.__state.a=x}}),Object.defineProperty(ee.prototype,"hex",{get:function get$$1(){return"HEX"!==this.__state.space&&(this.__state.hex=Y.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function set$$1(x){this.__state.space="HEX",this.__state.hex=x}});var te=function(){function Controller(x,w){classCallCheck(this,Controller),this.initialValue=x[w],this.domElement=document.createElement("div"),this.object=x,this.property=w,this.__onChange=void 0,this.__onFinishChange=void 0}return J(Controller,[{key:"onChange",value:function onChange(x){return this.__onChange=x,this}},{key:"onFinishChange",value:function onFinishChange(x){return this.__onFinishChange=x,this}},{key:"setValue",value:function setValue(x){return this.object[this.property]=x,this.__onChange&&this.__onChange.call(this,x),this.updateDisplay(),this}},{key:"getValue",value:function getValue(){return this.object[this.property]}},{key:"updateDisplay",value:function updateDisplay(){return this}},{key:"isModified",value:function isModified(){return this.initialValue!==this.getValue()}}]),Controller}(),ne={};z.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(x,w){z.each(x,(function(x){ne[x]=w}))}));var re=/(\d+(\.\d+)?)px/;function cssValueToPixels(x){if("0"===x||z.isUndefined(x))return 0;var w=x.match(re);return z.isNull(w)?0:parseFloat(w[1])}var ie={makeSelectable:function makeSelectable(x,w){void 0!==x&&void 0!==x.style&&(x.onselectstart=w?function(){return!1}:function(){},x.style.MozUserSelect=w?"auto":"none",x.style.KhtmlUserSelect=w?"auto":"none",x.unselectable=w?"on":"off")},makeFullscreen:function makeFullscreen(x,w,S){var U=S,G=w;z.isUndefined(G)&&(G=!0),z.isUndefined(U)&&(U=!0),x.style.position="absolute",G&&(x.style.left=0,x.style.right=0),U&&(x.style.top=0,x.style.bottom=0)},fakeEvent:function fakeEvent(x,w,S,U){var G=S||{},H=ne[w];if(!H)throw new Error("Event type "+w+" not supported.");var j=document.createEvent(H);switch(H){case"MouseEvents":var X=G.x||G.clientX||0,q=G.y||G.clientY||0;j.initMouseEvent(w,G.bubbles||!1,G.cancelable||!0,window,G.clickCount||1,0,0,X,q,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var K=j.initKeyboardEvent||j.initKeyEvent;z.defaults(G,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),K(w,G.bubbles||!1,G.cancelable,window,G.ctrlKey,G.altKey,G.shiftKey,G.metaKey,G.keyCode,G.charCode);break;default:j.initEvent(w,G.bubbles||!1,G.cancelable||!0)}z.defaults(j,U),x.dispatchEvent(j)},bind:function bind(x,w,S,U){var G=U||!1;return x.addEventListener?x.addEventListener(w,S,G):x.attachEvent&&x.attachEvent("on"+w,S),ie},unbind:function unbind(x,w,S,U){var G=U||!1;return x.removeEventListener?x.removeEventListener(w,S,G):x.detachEvent&&x.detachEvent("on"+w,S),ie},addClass:function addClass(x,w){if(void 0===x.className)x.className=w;else if(x.className!==w){var S=x.className.split(/ +/);-1===S.indexOf(w)&&(S.push(w),x.className=S.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return ie},removeClass:function removeClass(x,w){if(w)if(x.className===w)x.removeAttribute("class");else{var S=x.className.split(/ +/),U=S.indexOf(w);-1!==U&&(S.splice(U,1),x.className=S.join(" "))}else x.className=void 0;return ie},hasClass:function hasClass(x,w){return new RegExp("(?:^|\\s+)"+w+"(?:\\s+|$)").test(x.className)||!1},getWidth:function getWidth(x){var w=getComputedStyle(x);return cssValueToPixels(w["border-left-width"])+cssValueToPixels(w["border-right-width"])+cssValueToPixels(w["padding-left"])+cssValueToPixels(w["padding-right"])+cssValueToPixels(w.width)},getHeight:function getHeight(x){var w=getComputedStyle(x);return cssValueToPixels(w["border-top-width"])+cssValueToPixels(w["border-bottom-width"])+cssValueToPixels(w["padding-top"])+cssValueToPixels(w["padding-bottom"])+cssValueToPixels(w.height)},getOffset:function getOffset(x){var w=x,S={left:0,top:0};if(w.offsetParent)do{S.left+=w.offsetLeft,S.top+=w.offsetTop,w=w.offsetParent}while(w);return S},isActive:function isActive(x){return x===document.activeElement&&(x.type||x.href)}},oe=function(x){function BooleanController(x,w){classCallCheck(this,BooleanController);var S=possibleConstructorReturn(this,(BooleanController.__proto__||Object.getPrototypeOf(BooleanController)).call(this,x,w)),U=S;return S.__prev=S.getValue(),S.__checkbox=document.createElement("input"),S.__checkbox.setAttribute("type","checkbox"),ie.bind(S.__checkbox,"change",(function onChange(){U.setValue(!U.__prev)}),!1),S.domElement.appendChild(S.__checkbox),S.updateDisplay(),S}return inherits(BooleanController,x),J(BooleanController,[{key:"setValue",value:function setValue(x){var w=Q(BooleanController.prototype.__proto__||Object.getPrototypeOf(BooleanController.prototype),"setValue",this).call(this,x);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),w}},{key:"updateDisplay",value:function updateDisplay(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Q(BooleanController.prototype.__proto__||Object.getPrototypeOf(BooleanController.prototype),"updateDisplay",this).call(this)}}]),BooleanController}(te),ae=function(x){function OptionController(x,w,S){classCallCheck(this,OptionController);var U=possibleConstructorReturn(this,(OptionController.__proto__||Object.getPrototypeOf(OptionController)).call(this,x,w)),G=S,H=U;if(U.__select=document.createElement("select"),z.isArray(G)){var j={};z.each(G,(function(x){j[x]=x})),G=j}return z.each(G,(function(x,w){var S=document.createElement("option");S.innerHTML=w,S.setAttribute("value",x),H.__select.appendChild(S)})),U.updateDisplay(),ie.bind(U.__select,"change",(function(){var x=this.options[this.selectedIndex].value;H.setValue(x)})),U.domElement.appendChild(U.__select),U}return inherits(OptionController,x),J(OptionController,[{key:"setValue",value:function setValue(x){var w=Q(OptionController.prototype.__proto__||Object.getPrototypeOf(OptionController.prototype),"setValue",this).call(this,x);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),w}},{key:"updateDisplay",value:function updateDisplay(){return ie.isActive(this.__select)?this:(this.__select.value=this.getValue(),Q(OptionController.prototype.__proto__||Object.getPrototypeOf(OptionController.prototype),"updateDisplay",this).call(this))}}]),OptionController}(te),se=function(x){function StringController(x,w){classCallCheck(this,StringController);var S=possibleConstructorReturn(this,(StringController.__proto__||Object.getPrototypeOf(StringController)).call(this,x,w)),U=S;function onChange(){U.setValue(U.__input.value)}return S.__input=document.createElement("input"),S.__input.setAttribute("type","text"),ie.bind(S.__input,"keyup",onChange),ie.bind(S.__input,"change",onChange),ie.bind(S.__input,"blur",(function onBlur(){U.__onFinishChange&&U.__onFinishChange.call(U,U.getValue())})),ie.bind(S.__input,"keydown",(function(x){13===x.keyCode&&this.blur()})),S.updateDisplay(),S.domElement.appendChild(S.__input),S}return inherits(StringController,x),J(StringController,[{key:"updateDisplay",value:function updateDisplay(){return ie.isActive(this.__input)||(this.__input.value=this.getValue()),Q(StringController.prototype.__proto__||Object.getPrototypeOf(StringController.prototype),"updateDisplay",this).call(this)}}]),StringController}(te);function numDecimals(x){var w=x.toString();return w.indexOf(".")>-1?w.length-w.indexOf(".")-1:0}var le=function(x){function NumberController(x,w,S){classCallCheck(this,NumberController);var U=possibleConstructorReturn(this,(NumberController.__proto__||Object.getPrototypeOf(NumberController)).call(this,x,w)),G=S||{};return U.__min=G.min,U.__max=G.max,U.__step=G.step,z.isUndefined(U.__step)?0===U.initialValue?U.__impliedStep=1:U.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(U.initialValue))/Math.LN10))/10:U.__impliedStep=U.__step,U.__precision=numDecimals(U.__impliedStep),U}return inherits(NumberController,x),J(NumberController,[{key:"setValue",value:function setValue(x){var w=x;return void 0!==this.__min&&w<this.__min?w=this.__min:void 0!==this.__max&&w>this.__max&&(w=this.__max),void 0!==this.__step&&w%this.__step!=0&&(w=Math.round(w/this.__step)*this.__step),Q(NumberController.prototype.__proto__||Object.getPrototypeOf(NumberController.prototype),"setValue",this).call(this,w)}},{key:"min",value:function min(x){return this.__min=x,this}},{key:"max",value:function max(x){return this.__max=x,this}},{key:"step",value:function step(x){return this.__step=x,this.__impliedStep=x,this.__precision=numDecimals(x),this}}]),NumberController}(te);var ce=function(x){function NumberControllerBox(x,w,S){classCallCheck(this,NumberControllerBox);var U=possibleConstructorReturn(this,(NumberControllerBox.__proto__||Object.getPrototypeOf(NumberControllerBox)).call(this,x,w,S));U.__truncationSuspended=!1;var G=U,H=void 0;function onFinish(){G.__onFinishChange&&G.__onFinishChange.call(G,G.getValue())}function onMouseDrag(x){var w=H-x.clientY;G.setValue(G.getValue()+w*G.__impliedStep),H=x.clientY}function onMouseUp(){ie.unbind(window,"mousemove",onMouseDrag),ie.unbind(window,"mouseup",onMouseUp),onFinish()}return U.__input=document.createElement("input"),U.__input.setAttribute("type","text"),ie.bind(U.__input,"change",(function onChange(){var x=parseFloat(G.__input.value);z.isNaN(x)||G.setValue(x)})),ie.bind(U.__input,"blur",(function onBlur(){onFinish()})),ie.bind(U.__input,"mousedown",(function onMouseDown(x){ie.bind(window,"mousemove",onMouseDrag),ie.bind(window,"mouseup",onMouseUp),H=x.clientY})),ie.bind(U.__input,"keydown",(function(x){13===x.keyCode&&(G.__truncationSuspended=!0,this.blur(),G.__truncationSuspended=!1,onFinish())})),U.updateDisplay(),U.domElement.appendChild(U.__input),U}return inherits(NumberControllerBox,x),J(NumberControllerBox,[{key:"updateDisplay",value:function updateDisplay(){return this.__input.value=this.__truncationSuspended?this.getValue():function roundToDecimal(x,w){var S=Math.pow(10,w);return Math.round(x*S)/S}(this.getValue(),this.__precision),Q(NumberControllerBox.prototype.__proto__||Object.getPrototypeOf(NumberControllerBox.prototype),"updateDisplay",this).call(this)}}]),NumberControllerBox}(le);function map(x,w,S,U,G){return U+(x-w)/(S-w)*(G-U)}var ue=function(x){function NumberControllerSlider(x,w,S,U,G){classCallCheck(this,NumberControllerSlider);var z=possibleConstructorReturn(this,(NumberControllerSlider.__proto__||Object.getPrototypeOf(NumberControllerSlider)).call(this,x,w,{min:S,max:U,step:G})),H=z;function onMouseDrag(x){x.preventDefault();var w=H.__background.getBoundingClientRect();return H.setValue(map(x.clientX,w.left,w.right,H.__min,H.__max)),!1}function onMouseUp(){ie.unbind(window,"mousemove",onMouseDrag),ie.unbind(window,"mouseup",onMouseUp),H.__onFinishChange&&H.__onFinishChange.call(H,H.getValue())}function onTouchMove(x){var w=x.touches[0].clientX,S=H.__background.getBoundingClientRect();H.setValue(map(w,S.left,S.right,H.__min,H.__max))}function onTouchEnd(){ie.unbind(window,"touchmove",onTouchMove),ie.unbind(window,"touchend",onTouchEnd),H.__onFinishChange&&H.__onFinishChange.call(H,H.getValue())}return z.__background=document.createElement("div"),z.__foreground=document.createElement("div"),ie.bind(z.__background,"mousedown",(function onMouseDown(x){document.activeElement.blur(),ie.bind(window,"mousemove",onMouseDrag),ie.bind(window,"mouseup",onMouseUp),onMouseDrag(x)})),ie.bind(z.__background,"touchstart",(function onTouchStart(x){if(1!==x.touches.length)return;ie.bind(window,"touchmove",onTouchMove),ie.bind(window,"touchend",onTouchEnd),onTouchMove(x)})),ie.addClass(z.__background,"slider"),ie.addClass(z.__foreground,"slider-fg"),z.updateDisplay(),z.__background.appendChild(z.__foreground),z.domElement.appendChild(z.__background),z}return inherits(NumberControllerSlider,x),J(NumberControllerSlider,[{key:"updateDisplay",value:function updateDisplay(){var x=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*x+"%",Q(NumberControllerSlider.prototype.__proto__||Object.getPrototypeOf(NumberControllerSlider.prototype),"updateDisplay",this).call(this)}}]),NumberControllerSlider}(le),he=function(x){function FunctionController(x,w,S){classCallCheck(this,FunctionController);var U=possibleConstructorReturn(this,(FunctionController.__proto__||Object.getPrototypeOf(FunctionController)).call(this,x,w)),G=U;return U.__button=document.createElement("div"),U.__button.innerHTML=void 0===S?"Fire":S,ie.bind(U.__button,"click",(function(x){return x.preventDefault(),G.fire(),!1})),ie.addClass(U.__button,"button"),U.domElement.appendChild(U.__button),U}return inherits(FunctionController,x),J(FunctionController,[{key:"fire",value:function fire(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),FunctionController}(te),de=function(x){function ColorController(x,w){classCallCheck(this,ColorController);var S=possibleConstructorReturn(this,(ColorController.__proto__||Object.getPrototypeOf(ColorController)).call(this,x,w));S.__color=new ee(S.getValue()),S.__temp=new ee(0);var U=S;S.domElement=document.createElement("div"),ie.makeSelectable(S.domElement,!1),S.__selector=document.createElement("div"),S.__selector.className="selector",S.__saturation_field=document.createElement("div"),S.__saturation_field.className="saturation-field",S.__field_knob=document.createElement("div"),S.__field_knob.className="field-knob",S.__field_knob_border="2px solid ",S.__hue_knob=document.createElement("div"),S.__hue_knob.className="hue-knob",S.__hue_field=document.createElement("div"),S.__hue_field.className="hue-field",S.__input=document.createElement("input"),S.__input.type="text",S.__input_textShadow="0 1px 1px ",ie.bind(S.__input,"keydown",(function(x){13===x.keyCode&&onBlur.call(this)})),ie.bind(S.__input,"blur",onBlur),ie.bind(S.__selector,"mousedown",(function(){ie.addClass(this,"drag").bind(window,"mouseup",(function(){ie.removeClass(U.__selector,"drag")}))})),ie.bind(S.__selector,"touchstart",(function(){ie.addClass(this,"drag").bind(window,"touchend",(function(){ie.removeClass(U.__selector,"drag")}))}));var G=document.createElement("div");function fieldDown(x){setSV(x),ie.bind(window,"mousemove",setSV),ie.bind(window,"touchmove",setSV),ie.bind(window,"mouseup",fieldUpSV),ie.bind(window,"touchend",fieldUpSV)}function fieldDownH(x){setH(x),ie.bind(window,"mousemove",setH),ie.bind(window,"touchmove",setH),ie.bind(window,"mouseup",fieldUpH),ie.bind(window,"touchend",fieldUpH)}function fieldUpSV(){ie.unbind(window,"mousemove",setSV),ie.unbind(window,"touchmove",setSV),ie.unbind(window,"mouseup",fieldUpSV),ie.unbind(window,"touchend",fieldUpSV),onFinish()}function fieldUpH(){ie.unbind(window,"mousemove",setH),ie.unbind(window,"touchmove",setH),ie.unbind(window,"mouseup",fieldUpH),ie.unbind(window,"touchend",fieldUpH),onFinish()}function onBlur(){var x=q(this.value);!1!==x?(U.__color.__state=x,U.setValue(U.__color.toOriginal())):this.value=U.__color.toString()}function onFinish(){U.__onFinishChange&&U.__onFinishChange.call(U,U.__color.toOriginal())}function setSV(x){-1===x.type.indexOf("touch")&&x.preventDefault();var w=U.__saturation_field.getBoundingClientRect(),S=x.touches&&x.touches[0]||x,G=S.clientX,z=S.clientY,H=(G-w.left)/(w.right-w.left),j=1-(z-w.top)/(w.bottom-w.top);return j>1?j=1:j<0&&(j=0),H>1?H=1:H<0&&(H=0),U.__color.v=j,U.__color.s=H,U.setValue(U.__color.toOriginal()),!1}function setH(x){-1===x.type.indexOf("touch")&&x.preventDefault();var w=U.__hue_field.getBoundingClientRect(),S=1-((x.touches&&x.touches[0]||x).clientY-w.top)/(w.bottom-w.top);return S>1?S=1:S<0&&(S=0),U.__color.h=360*S,U.setValue(U.__color.toOriginal()),!1}return z.extend(S.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),z.extend(S.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:S.__field_knob_border+(S.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),z.extend(S.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),z.extend(S.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),z.extend(G.style,{width:"100%",height:"100%",background:"none"}),linearGradient(G,"top","rgba(0,0,0,0)","#000"),z.extend(S.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),function hueGradient(x){x.style.background="",x.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",x.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",x.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",x.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",x.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}(S.__hue_field),z.extend(S.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:S.__input_textShadow+"rgba(0,0,0,0.7)"}),ie.bind(S.__saturation_field,"mousedown",fieldDown),ie.bind(S.__saturation_field,"touchstart",fieldDown),ie.bind(S.__field_knob,"mousedown",fieldDown),ie.bind(S.__field_knob,"touchstart",fieldDown),ie.bind(S.__hue_field,"mousedown",fieldDownH),ie.bind(S.__hue_field,"touchstart",fieldDownH),S.__saturation_field.appendChild(G),S.__selector.appendChild(S.__field_knob),S.__selector.appendChild(S.__saturation_field),S.__selector.appendChild(S.__hue_field),S.__hue_field.appendChild(S.__hue_knob),S.domElement.appendChild(S.__input),S.domElement.appendChild(S.__selector),S.updateDisplay(),S}return inherits(ColorController,x),J(ColorController,[{key:"updateDisplay",value:function updateDisplay(){var x=q(this.getValue());if(!1!==x){var w=!1;z.each(ee.COMPONENTS,(function(S){if(!z.isUndefined(x[S])&&!z.isUndefined(this.__color.__state[S])&&x[S]!==this.__color.__state[S])return w=!0,{}}),this),w&&z.extend(this.__color.__state,x)}z.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var S=this.__color.v<.5||this.__color.s>.5?255:0,U=255-S;z.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+S+","+S+","+S+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,linearGradient(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),z.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+S+","+S+","+S+")",textShadow:this.__input_textShadow+"rgba("+U+","+U+","+U+",.7)"})}}]),ColorController}(te),pe=["-moz-","-o-","-webkit-","-ms-",""];function linearGradient(x,w,S,U){x.style.background="",z.each(pe,(function(G){x.style.cssText+="background: "+G+"linear-gradient("+w+", "+S+" 0%, "+U+" 100%); "}))}var fe=function inject(x,w){var S=w||document,U=document.createElement("style");U.type="text/css",U.innerHTML=x;var G=S.getElementsByTagName("head")[0];try{G.appendChild(U)}catch(x){}},me=function ControllerFactory(x,w){var S=x[w];return z.isArray(arguments[2])||z.isObject(arguments[2])?new ae(x,w,arguments[2]):z.isNumber(S)?z.isNumber(arguments[2])&&z.isNumber(arguments[3])?z.isNumber(arguments[4])?new ue(x,w,arguments[2],arguments[3],arguments[4]):new ue(x,w,arguments[2],arguments[3]):z.isNumber(arguments[4])?new ce(x,w,{min:arguments[2],max:arguments[3],step:arguments[4]}):new ce(x,w,{min:arguments[2],max:arguments[3]}):z.isString(S)?new se(x,w):z.isFunction(S)?new he(x,w,""):z.isBoolean(S)?new oe(x,w):null};var ge=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function dat_gui_module_requestAnimationFrame(x){setTimeout(x,1e3/60)},ve=function(){function CenteredDiv(){classCallCheck(this,CenteredDiv),this.backgroundElement=document.createElement("div"),z.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),ie.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),z.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var x=this;ie.bind(this.backgroundElement,"click",(function(){x.hide()}))}return J(CenteredDiv,[{key:"show",value:function show(){var x=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),z.defer((function(){x.backgroundElement.style.opacity=1,x.domElement.style.opacity=1,x.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function hide(){var x=this,hide=function hide(){x.domElement.style.display="none",x.backgroundElement.style.display="none",ie.unbind(x.domElement,"webkitTransitionEnd",hide),ie.unbind(x.domElement,"transitionend",hide),ie.unbind(x.domElement,"oTransitionEnd",hide)};ie.bind(this.domElement,"webkitTransitionEnd",hide),ie.bind(this.domElement,"transitionend",hide),ie.bind(this.domElement,"oTransitionEnd",hide),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function layout(){this.domElement.style.left=window.innerWidth/2-ie.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-ie.getHeight(this.domElement)/2+"px"}}]),CenteredDiv}(),ye=function ___$insertStyle(x){if(x&&"undefined"!=typeof window){var w=document.createElement("style");return w.setAttribute("type","text/css"),w.innerHTML=x,document.head.appendChild(w),x}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");fe(ye);var _e="Default",be=function(){try{return!!window.localStorage}catch(x){return!1}}(),xe=void 0,Ee=!0,we=void 0,Se=!1,Te=[],Ce=function GUI(x){var w=this,S=x||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),ie.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],S=z.defaults(S,{closeOnTop:!1,autoPlace:!0,width:GUI.DEFAULT_WIDTH}),S=z.defaults(S,{resizable:S.autoPlace,hideable:S.autoPlace}),z.isUndefined(S.load)?S.load={preset:_e}:S.preset&&(S.load.preset=S.preset),z.isUndefined(S.parent)&&S.hideable&&Te.push(this),S.resizable=z.isUndefined(S.parent)&&S.resizable,S.autoPlace&&z.isUndefined(S.scrollable)&&(S.scrollable=!0);var U=be&&"true"===localStorage.getItem(getLocalStorageHash(this,"isLocal")),G=void 0,H=void 0;if(Object.defineProperties(this,{parent:{get:function get$$1(){return S.parent}},scrollable:{get:function get$$1(){return S.scrollable}},autoPlace:{get:function get$$1(){return S.autoPlace}},closeOnTop:{get:function get$$1(){return S.closeOnTop}},preset:{get:function get$$1(){return w.parent?w.getRoot().preset:S.load.preset},set:function set$$1(x){w.parent?w.getRoot().preset=x:S.load.preset=x,function setPresetSelectIndex(x){for(var w=0;w<x.__preset_select.length;w++)x.__preset_select[w].value===x.preset&&(x.__preset_select.selectedIndex=w)}(this),w.revert()}},width:{get:function get$$1(){return S.width},set:function set$$1(x){S.width=x,setWidth(w,x)}},name:{get:function get$$1(){return S.name},set:function set$$1(x){S.name=x,H&&(H.innerHTML=S.name)}},closed:{get:function get$$1(){return S.closed},set:function set$$1(x){S.closed=x,S.closed?ie.addClass(w.__ul,GUI.CLASS_CLOSED):ie.removeClass(w.__ul,GUI.CLASS_CLOSED),this.onResize(),w.__closeButton&&(w.__closeButton.innerHTML=x?GUI.TEXT_OPEN:GUI.TEXT_CLOSED)}},load:{get:function get$$1(){return S.load}},useLocalStorage:{get:function get$$1(){return U},set:function set$$1(x){be&&(U=x,x?ie.bind(window,"unload",G):ie.unbind(window,"unload",G),localStorage.setItem(getLocalStorageHash(w,"isLocal"),x))}}}),z.isUndefined(S.parent)){if(this.closed=S.closed||!1,ie.addClass(this.domElement,GUI.CLASS_MAIN),ie.makeSelectable(this.domElement,!1),be&&U){w.useLocalStorage=!0;var j=localStorage.getItem(getLocalStorageHash(this,"gui"));j&&(S.load=JSON.parse(j))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=GUI.TEXT_CLOSED,ie.addClass(this.__closeButton,GUI.CLASS_CLOSE_BUTTON),S.closeOnTop?(ie.addClass(this.__closeButton,GUI.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(ie.addClass(this.__closeButton,GUI.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),ie.bind(this.__closeButton,"click",(function(){w.closed=!w.closed}))}else{void 0===S.closed&&(S.closed=!0);var X=document.createTextNode(S.name);ie.addClass(X,"controller-name"),H=addRow(w,X);ie.addClass(this.__ul,GUI.CLASS_CLOSED),ie.addClass(H,"title"),ie.bind(H,"click",(function onClickTitle(x){return x.preventDefault(),w.closed=!w.closed,!1})),S.closed||(this.closed=!1)}S.autoPlace&&(z.isUndefined(S.parent)&&(Ee&&(we=document.createElement("div"),ie.addClass(we,"dg"),ie.addClass(we,GUI.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(we),Ee=!1),we.appendChild(this.domElement),ie.addClass(this.domElement,GUI.CLASS_AUTO_PLACE)),this.parent||setWidth(w,S.width)),this.__resizeHandler=function(){w.onResizeDebounced()},ie.bind(window,"resize",this.__resizeHandler),ie.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),ie.bind(this.__ul,"transitionend",this.__resizeHandler),ie.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),S.resizable&&addResizeHandle(this),G=function saveToLocalStorage(){be&&"true"===localStorage.getItem(getLocalStorageHash(w,"isLocal"))&&localStorage.setItem(getLocalStorageHash(w,"gui"),JSON.stringify(w.getSaveObject()))},this.saveToLocalStorageIfPossible=G,S.parent||function resetWidth(){var x=w.getRoot();x.width+=1,z.defer((function(){x.width-=1}))}()};function addRow(x,w,S){var U=document.createElement("li");return w&&U.appendChild(w),S?x.__ul.insertBefore(U,S):x.__ul.appendChild(U),x.onResize(),U}function removeListeners(x){ie.unbind(window,"resize",x.__resizeHandler),x.saveToLocalStorageIfPossible&&ie.unbind(window,"unload",x.saveToLocalStorageIfPossible)}function markPresetModified(x,w){var S=x.__preset_select[x.__preset_select.selectedIndex];S.innerHTML=w?S.value+"*":S.value}function recallSavedValue(x,w){var S=x.getRoot(),U=S.__rememberedObjects.indexOf(w.object);if(-1!==U){var G=S.__rememberedObjectIndecesToControllers[U];if(void 0===G&&(G={},S.__rememberedObjectIndecesToControllers[U]=G),G[w.property]=w,S.load&&S.load.remembered){var z=S.load.remembered,H=void 0;if(z[x.preset])H=z[x.preset];else{if(!z[_e])return;H=z[_e]}if(H[U]&&void 0!==H[U][w.property]){var j=H[U][w.property];w.initialValue=j,w.setValue(j)}}}}function _add(x,w,S,U){if(void 0===w[S])throw new Error('Object "'+w+'" has no property "'+S+'"');var G=void 0;if(U.color)G=new de(w,S);else{var H=[w,S].concat(U.factoryArgs);G=me.apply(x,H)}U.before instanceof te&&(U.before=U.before.__li),recallSavedValue(x,G),ie.addClass(G.domElement,"c");var j=document.createElement("span");ie.addClass(j,"property-name"),j.innerHTML=G.property;var X=document.createElement("div");X.appendChild(j),X.appendChild(G.domElement);var q=addRow(x,X,U.before);return ie.addClass(q,Ce.CLASS_CONTROLLER_ROW),G instanceof de?ie.addClass(q,"color"):ie.addClass(q,Z(G.getValue())),function augmentController(x,w,S){if(S.__li=w,S.__gui=x,z.extend(S,{options:function options(w){if(arguments.length>1){var U=S.__li.nextElementSibling;return S.remove(),_add(x,S.object,S.property,{before:U,factoryArgs:[z.toArray(arguments)]})}if(z.isArray(w)||z.isObject(w)){var G=S.__li.nextElementSibling;return S.remove(),_add(x,S.object,S.property,{before:G,factoryArgs:[w]})}},name:function name(x){return S.__li.firstElementChild.firstElementChild.innerHTML=x,S},listen:function listen(){return S.__gui.listen(S),S},remove:function remove(){return S.__gui.remove(S),S}}),S instanceof ue){var U=new ce(S.object,S.property,{min:S.__min,max:S.__max,step:S.__step});z.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(x){var w=S[x],G=U[x];S[x]=U[x]=function(){var x=Array.prototype.slice.call(arguments);return G.apply(U,x),w.apply(S,x)}})),ie.addClass(w,"has-slider"),S.domElement.insertBefore(U.domElement,S.domElement.firstElementChild)}else if(S instanceof ce){var G=function r(w){if(z.isNumber(S.__min)&&z.isNumber(S.__max)){var U=S.__li.firstElementChild.firstElementChild.innerHTML,G=S.__gui.__listening.indexOf(S)>-1;S.remove();var H=_add(x,S.object,S.property,{before:S.__li.nextElementSibling,factoryArgs:[S.__min,S.__max,S.__step]});return H.name(U),G&&H.listen(),H}return w};S.min=z.compose(G,S.min),S.max=z.compose(G,S.max)}else S instanceof oe?(ie.bind(w,"click",(function(){ie.fakeEvent(S.__checkbox,"click")})),ie.bind(S.__checkbox,"click",(function(x){x.stopPropagation()}))):S instanceof he?(ie.bind(w,"click",(function(){ie.fakeEvent(S.__button,"click")})),ie.bind(w,"mouseover",(function(){ie.addClass(S.__button,"hover")})),ie.bind(w,"mouseout",(function(){ie.removeClass(S.__button,"hover")}))):S instanceof de&&(ie.addClass(w,"color"),S.updateDisplay=z.compose((function(x){return w.style.borderLeftColor=S.__color.toString(),x}),S.updateDisplay),S.updateDisplay());S.setValue=z.compose((function(w){return x.getRoot().__preset_select&&S.isModified()&&markPresetModified(x.getRoot(),!0),w}),S.setValue)}(x,q,G),x.__controllers.push(G),G}function getLocalStorageHash(x,w){return document.location.href+"."+w}function addPresetOption(x,w,S){var U=document.createElement("option");U.innerHTML=w,U.value=w,x.__preset_select.appendChild(U),S&&(x.__preset_select.selectedIndex=x.__preset_select.length-1)}function showHideExplain(x,w){w.style.display=x.useLocalStorage?"block":"none"}function addResizeHandle(x){var w=void 0;function drag(S){return S.preventDefault(),x.width+=w-S.clientX,x.onResize(),w=S.clientX,!1}function dragStop(){ie.removeClass(x.__closeButton,Ce.CLASS_DRAG),ie.unbind(window,"mousemove",drag),ie.unbind(window,"mouseup",dragStop)}function dragStart(S){return S.preventDefault(),w=S.clientX,ie.addClass(x.__closeButton,Ce.CLASS_DRAG),ie.bind(window,"mousemove",drag),ie.bind(window,"mouseup",dragStop),!1}x.__resize_handle=document.createElement("div"),z.extend(x.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),ie.bind(x.__resize_handle,"mousedown",dragStart),ie.bind(x.__closeButton,"mousedown",dragStart),x.domElement.insertBefore(x.__resize_handle,x.domElement.firstElementChild)}function setWidth(x,w){x.domElement.style.width=w+"px",x.__save_row&&x.autoPlace&&(x.__save_row.style.width=w+"px"),x.__closeButton&&(x.__closeButton.style.width=w+"px")}function getCurrentPreset(x,w){var S={};return z.each(x.__rememberedObjects,(function(U,G){var H={},j=x.__rememberedObjectIndecesToControllers[G];z.each(j,(function(x,S){H[S]=w?x.initialValue:x.getValue()})),S[G]=H})),S}function updateDisplays(x){0!==x.length&&ge.call(window,(function(){updateDisplays(x)})),z.each(x,(function(x){x.updateDisplay()}))}Ce.toggleHide=function(){Se=!Se,z.each(Te,(function(x){x.domElement.style.display=Se?"none":""}))},Ce.CLASS_AUTO_PLACE="a",Ce.CLASS_AUTO_PLACE_CONTAINER="ac",Ce.CLASS_MAIN="main",Ce.CLASS_CONTROLLER_ROW="cr",Ce.CLASS_TOO_TALL="taller-than-window",Ce.CLASS_CLOSED="closed",Ce.CLASS_CLOSE_BUTTON="close-button",Ce.CLASS_CLOSE_TOP="close-top",Ce.CLASS_CLOSE_BOTTOM="close-bottom",Ce.CLASS_DRAG="drag",Ce.DEFAULT_WIDTH=245,Ce.TEXT_CLOSED="Close Controls",Ce.TEXT_OPEN="Open Controls",Ce._keydownHandler=function(x){"text"===document.activeElement.type||72!==x.which&&72!==x.keyCode||Ce.toggleHide()},ie.bind(window,"keydown",Ce._keydownHandler,!1),z.extend(Ce.prototype,{add:function add(x,w){return _add(this,x,w,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function addColor(x,w){return _add(this,x,w,{color:!0})},remove:function remove(x){this.__ul.removeChild(x.__li),this.__controllers.splice(this.__controllers.indexOf(x),1);var w=this;z.defer((function(){w.onResize()}))},destroy:function destroy(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&we.removeChild(this.domElement);var x=this;z.each(this.__folders,(function(w){x.removeFolder(w)})),ie.unbind(window,"keydown",Ce._keydownHandler,!1),removeListeners(this)},addFolder:function addFolder(x){if(void 0!==this.__folders[x])throw new Error('You already have a folder in this GUI by the name "'+x+'"');var w={name:x,parent:this};w.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[x]&&(w.closed=this.load.folders[x].closed,w.load=this.load.folders[x]);var S=new Ce(w);this.__folders[x]=S;var U=addRow(this,S.domElement);return ie.addClass(U,"folder"),S},removeFolder:function removeFolder(x){this.__ul.removeChild(x.domElement.parentElement),delete this.__folders[x.name],this.load&&this.load.folders&&this.load.folders[x.name]&&delete this.load.folders[x.name],removeListeners(x);var w=this;z.each(x.__folders,(function(w){x.removeFolder(w)})),z.defer((function(){w.onResize()}))},open:function open(){this.closed=!1},close:function close(){this.closed=!0},hide:function hide(){this.domElement.style.display="none"},show:function show(){this.domElement.style.display=""},onResize:function onResize(){var x=this.getRoot();if(x.scrollable){var w=ie.getOffset(x.__ul).top,S=0;z.each(x.__ul.childNodes,(function(w){x.autoPlace&&w===x.__save_row||(S+=ie.getHeight(w))})),window.innerHeight-w-20<S?(ie.addClass(x.domElement,Ce.CLASS_TOO_TALL),x.__ul.style.height=window.innerHeight-w-20+"px"):(ie.removeClass(x.domElement,Ce.CLASS_TOO_TALL),x.__ul.style.height="auto")}x.__resize_handle&&z.defer((function(){x.__resize_handle.style.height=x.__ul.offsetHeight+"px"})),x.__closeButton&&(x.__closeButton.style.width=x.width+"px")},onResizeDebounced:z.debounce((function(){this.onResize()}),50),remember:function remember(){if(z.isUndefined(xe)&&((xe=new ve).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var x=this;z.each(Array.prototype.slice.call(arguments),(function(w){0===x.__rememberedObjects.length&&function addSaveMenu(x){var w=x.__save_row=document.createElement("li");ie.addClass(x.domElement,"has-save"),x.__ul.insertBefore(w,x.__ul.firstChild),ie.addClass(w,"save-row");var S=document.createElement("span");S.innerHTML="&nbsp;",ie.addClass(S,"button gears");var U=document.createElement("span");U.innerHTML="Save",ie.addClass(U,"button"),ie.addClass(U,"save");var G=document.createElement("span");G.innerHTML="New",ie.addClass(G,"button"),ie.addClass(G,"save-as");var H=document.createElement("span");H.innerHTML="Revert",ie.addClass(H,"button"),ie.addClass(H,"revert");var j=x.__preset_select=document.createElement("select");x.load&&x.load.remembered?z.each(x.load.remembered,(function(w,S){addPresetOption(x,S,S===x.preset)})):addPresetOption(x,_e,!1);if(ie.bind(j,"change",(function(){for(var w=0;w<x.__preset_select.length;w++)x.__preset_select[w].innerHTML=x.__preset_select[w].value;x.preset=this.value})),w.appendChild(j),w.appendChild(S),w.appendChild(U),w.appendChild(G),w.appendChild(H),be){var X=document.getElementById("dg-local-explain"),q=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(getLocalStorageHash(x,"isLocal"))&&q.setAttribute("checked","checked"),showHideExplain(x,X),ie.bind(q,"change",(function(){x.useLocalStorage=!x.useLocalStorage,showHideExplain(x,X)}))}var K=document.getElementById("dg-new-constructor");ie.bind(K,"keydown",(function(x){!x.metaKey||67!==x.which&&67!==x.keyCode||xe.hide()})),ie.bind(S,"click",(function(){K.innerHTML=JSON.stringify(x.getSaveObject(),void 0,2),xe.show(),K.focus(),K.select()})),ie.bind(U,"click",(function(){x.save()})),ie.bind(G,"click",(function(){var w=prompt("Enter a new preset name.");w&&x.saveAs(w)})),ie.bind(H,"click",(function(){x.revert()}))}(x),-1===x.__rememberedObjects.indexOf(w)&&x.__rememberedObjects.push(w)})),this.autoPlace&&setWidth(this,this.width)},getRoot:function getRoot(){for(var x=this;x.parent;)x=x.parent;return x},getSaveObject:function getSaveObject(){var x=this.load;return x.closed=this.closed,this.__rememberedObjects.length>0&&(x.preset=this.preset,x.remembered||(x.remembered={}),x.remembered[this.preset]=getCurrentPreset(this)),x.folders={},z.each(this.__folders,(function(w,S){x.folders[S]=w.getSaveObject()})),x},save:function save(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=getCurrentPreset(this),markPresetModified(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function saveAs(x){this.load.remembered||(this.load.remembered={},this.load.remembered[_e]=getCurrentPreset(this,!0)),this.load.remembered[x]=getCurrentPreset(this),this.preset=x,addPresetOption(this,x,!0),this.saveToLocalStorageIfPossible()},revert:function revert(x){z.each(this.__controllers,(function(w){this.getRoot().load.remembered?recallSavedValue(x||this.getRoot(),w):w.setValue(w.initialValue),w.__onFinishChange&&w.__onFinishChange.call(w,w.getValue())}),this),z.each(this.__folders,(function(x){x.revert(x)})),x||markPresetModified(this.getRoot(),!1)},listen:function listen(x){var w=0===this.__listening.length;this.__listening.push(x),w&&updateDisplays(this.__listening)},updateDisplay:function updateDisplay(){z.each(this.__controllers,(function(x){x.updateDisplay()})),z.each(this.__folders,(function(x){x.updateDisplay()}))}});const Ae={color:{Color:ee,math:Y,interpret:q},controllers:{Controller:te,BooleanController:oe,OptionController:ae,StringController:se,NumberController:le,NumberControllerBox:ce,NumberControllerSlider:ue,FunctionController:he,ColorController:de},dom:{dom:ie},gui:{GUI:Ce},GUI:Ce};S(1557);var Me=S(2792),Re=S.n(Me),Le=S(2212),Oe=S(5581),Pe=S.n(Oe),Ie=(S(9739),!1);function abort(x){throw Ie=!0,x}for(var Ne=document.getElementById("canvas"),Fe=Ne.getContext("webgl"),Be=Fe,De=Be.getSupportedExtensions(),ke=["OES_texture_float","OES_texture_float_linear","OES_element_index_uint","WEBGL_depth_texture","WEBGL_draw_buffers"],Ue=0;Ue<ke.length;++Ue)if(De.indexOf(ke[Ue])<0)throw"Unable to load extension "+ke[Ue];Be.getExtension("OES_texture_float"),Be.getExtension("OES_texture_float_linear"),Be.getExtension("OES_element_index_uint"),Be.getExtension("WEBGL_depth_texture");var Ge=Be.getExtension("WEBGL_draw_buffers"),Ve=(Be.getParameter(Ge.MAX_DRAW_BUFFERS_WEBGL),new Ae.GUI),We=new(Re());We.setMode(1),We.domElement.style.position="absolute",We.domElement.style.left="0px",We.domElement.style.top="0px",document.body.appendChild(We.domElement);var ze=new Le.PerspectiveCamera(75,Ne.clientWidth/Ne.clientHeight,.1,1e3),He=new(Pe())(ze,Ne);function setSize(x,w){Ne.width=x,Ne.height=w,ze.aspect=x/w,ze.updateProjectionMatrix()}function makeRenderLoop(x){return function tick(){He.update(),We.begin(),x(),We.end(),Ie||requestAnimationFrame(tick)}}He.enableDamping=!0,He.enableZoom=!0,He.rotateSpeed=.3,He.zoomSpeed=1,He.panSpeed=2,setSize(Ne.clientWidth,Ne.clientHeight),window.addEventListener("resize",(function(){return setSize(Ne.clientWidth,Ne.clientHeight)})),S(539)},539:(x,w,S)=>{"use strict";S.r(w);var U=S(7943),G=S(5975),z=S(999),H=S.n(z),j=S(5108);function compileShader(x,w){var S=U.gl.createShader(w);return U.gl.shaderSource(S,x),U.gl.compileShader(S),U.gl.getShaderParameter(S,U.gl.COMPILE_STATUS)||(j.error(x),(0,U.JG)("shader compiler error:\n"+U.gl.getShaderInfoLog(S))),S}function linkShader(x,w){var S=U.gl.createProgram();return U.gl.attachShader(S,x),U.gl.attachShader(S,w),U.gl.linkProgram(S),U.gl.getProgramParameter(S,U.gl.LINK_STATUS)||(0,U.JG)("shader linker error:\n"+U.gl.getProgramInfoLog(S)),S}function loadShaderProgram(x,w,S){return function addShaderLocations(x,w){if(w&&w.uniforms&&w.uniforms.length)for(var S=0;S<w.uniforms.length;++S){var G;x=Object.assign(x,((G={})[w.uniforms[S]]=U.gl.getUniformLocation(x.glShaderProgram,w.uniforms[S]),G))}if(w&&w.attribs&&w.attribs.length)for(var z=0;z<w.attribs.length;++z){var H;x=Object.assign(x,((H={})[w.attribs[z]]=U.gl.getAttribLocation(x.glShaderProgram,w.attribs[z]),H))}return x}({glShaderProgram:linkShader(compileShader(x,U.gl.VERTEX_SHADER),compileShader(w,U.gl.FRAGMENT_SHADER))},S)}var X=new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),q=U.gl.createBuffer();U.gl.bindBuffer(U.gl.ARRAY_BUFFER,q),U.gl.bufferData(U.gl.ARRAY_BUFFER,X,U.gl.STATIC_DRAW);var K=S(4145),Y=[-14,0,-6],Z=[14,20,6],J=100,Q=function(){function Scene(){this.lights=[],this.models=[];for(var x=0;x<J;++x)this.lights.push({position:new Float32Array([Math.random()*(Z[0]-Y[0])+Y[0],Math.random()*(Z[1]-Y[1])+Y[1],Math.random()*(Z[2]-Y[2])+Y[2]]),color:new Float32Array([.5+.5*Math.random(),.5+.5*Math.random(),.5+Math.random()]),radius:5})}var x=Scene.prototype;return x.loadGLTF=function loadGLTF(x){var w=this;new K.glTFLoader(U.gl).loadGLTF(x,(function(x){var S,G,z,H,j,X,q,K,Y,Z,J,Q,ee,te,ne,re,ie,oe,ae=x.scenes[x.defaultScene],se={},le=0;for(var ce in x.json.textures){if(Y=(q=x.json.textures[ce]).target||U.gl.TEXTURE_2D,Z=q.format||U.gl.RGBA,J=q.format||U.gl.RGBA,Q=q.type||U.gl.UNSIGNED_BYTE,ie=x.images[q.source],oe=U.gl.createTexture(),U.gl.activeTexture(U.gl.TEXTURE0+le),U.gl.bindTexture(Y,oe),3553===Y)U.gl.texImage2D(Y,0,J,Z,Q,ie);te=(K=x.json.samplers[q.sampler]).minFilter||U.gl.NEAREST_MIPMAP_LINEAR,ee=K.magFilter||U.gl.LINEAR,ne=K.wrapS||U.gl.REPEAT,re=K.wrapT||U.gl.REPEAT,U.gl.texParameteri(Y,U.gl.TEXTURE_MIN_FILTER,te),U.gl.texParameteri(Y,U.gl.TEXTURE_MAG_FILTER,ee),U.gl.texParameteri(Y,U.gl.TEXTURE_WRAP_S,ne),U.gl.texParameteri(Y,U.gl.TEXTURE_WRAP_T,re),te!=U.gl.NEAREST_MIPMAP_NEAREST&&te!=U.gl.NEAREST_MIPMAP_LINEAR&&te!=U.gl.LINEAR_MIPMAP_NEAREST&&te!=U.gl.LINEAR_MIPMAP_LINEAR||U.gl.generateMipmap(Y),U.gl.bindTexture(Y,null),se[ce]={texture:oe,target:Y,id:le},le++}for(var ue in ae.meshes)for(S=0,G=(z=ae.meshes[ue]).primitives.length;S<G;++S){H=z.primitives[S],j=U.gl.createBuffer(),X=U.gl.createBuffer();var he=H.vertexBuffer;U.gl.bindBuffer(U.gl.ARRAY_BUFFER,j),U.gl.bufferData(U.gl.ARRAY_BUFFER,he,U.gl.STATIC_DRAW),U.gl.bindBuffer(U.gl.ARRAY_BUFFER,null);var de=H.indices;U.gl.bindBuffer(U.gl.ELEMENT_ARRAY_BUFFER,X),U.gl.bufferData(U.gl.ELEMENT_ARRAY_BUFFER,de,U.gl.STATIC_DRAW),U.gl.bindBuffer(U.gl.ELEMENT_ARRAY_BUFFER,null);var pe=H.attributes[H.technique.parameters.position.semantic],fe=H.attributes[H.technique.parameters.normal.semantic],me=H.attributes[H.technique.parameters.texcoord_0.semantic];w.models.push({gltf:H,idx:X,attributes:j,posInfo:{size:pe.size,type:pe.type,stride:pe.stride,offset:pe.offset},norInfo:{size:fe.size,type:fe.type,stride:fe.stride,offset:fe.offset},uvInfo:{size:me.size,type:me.type,stride:me.stride,offset:me.offset},colmap:se.texture_color.texture,normap:se.texture_normal.texture})}}))},x.update=function update(){for(var x=0;x<J;x++)this.lights[x].position[1]+=-.03,this.lights[x].position[1]=(this.lights[x].position[1]+Z[1]-Y[1])%Z[1]+Y[1]},x.draw=function draw(x){for(var w=0;w<this.models.length;++w){var S=this.models[w];S.colmap&&(U.gl.activeTexture(U.gl.TEXTURE0),U.gl.bindTexture(U.gl.TEXTURE_2D,S.colmap),U.gl.uniform1i(x.u_colmap,0)),S.normap&&(U.gl.activeTexture(U.gl.TEXTURE1),U.gl.bindTexture(U.gl.TEXTURE_2D,S.normap),U.gl.uniform1i(x.u_normap,1)),U.gl.bindBuffer(U.gl.ARRAY_BUFFER,S.attributes),U.gl.enableVertexAttribArray(x.a_position),U.gl.vertexAttribPointer(x.a_position,S.posInfo.size,S.posInfo.type,!1,S.posInfo.stride,S.posInfo.offset),U.gl.enableVertexAttribArray(x.a_normal),U.gl.vertexAttribPointer(x.a_normal,S.norInfo.size,S.norInfo.type,!1,S.norInfo.stride,S.norInfo.offset),U.gl.enableVertexAttribArray(x.a_uv),U.gl.vertexAttribPointer(x.a_uv,S.uvInfo.size,S.uvInfo.type,!1,S.uvInfo.stride,S.uvInfo.offset),U.gl.bindBuffer(U.gl.ELEMENT_ARRAY_BUFFER,S.idx),U.gl.drawElements(S.gltf.mode,S.gltf.indices.length,S.gltf.indicesComponentType,0)}},Scene}();const ee=Q;var te=S(1594),ne=S.n(te);function _defineProperties(x,w){for(var S=0;S<w.length;S++){var U=w[S];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(x,_toPropertyKey(U.key),U)}}function _toPropertyKey(x){var w=function _toPrimitive(x,w){if("object"!=typeof x||!x)return x;var S=x[Symbol.toPrimitive];if(void 0!==S){var U=S.call(x,w||"default");if("object"!=typeof U)return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===w?String:Number)(x)}(x,"string");return"symbol"==typeof w?w:String(w)}var re=function(){function TextureBuffer(x,w){this._glTexture=U.gl.createTexture(),U.gl.bindTexture(U.gl.TEXTURE_2D,this._glTexture),U.gl.texParameteri(U.gl.TEXTURE_2D,U.gl.TEXTURE_MIN_FILTER,U.gl.NEAREST),U.gl.texParameteri(U.gl.TEXTURE_2D,U.gl.TEXTURE_MAG_FILTER,U.gl.NEAREST),U.gl.texParameteri(U.gl.TEXTURE_2D,U.gl.TEXTURE_WRAP_S,U.gl.CLAMP_TO_EDGE),U.gl.texParameteri(U.gl.TEXTURE_2D,U.gl.TEXTURE_WRAP_T,U.gl.CLAMP_TO_EDGE),this._pixelsPerElement=Math.ceil(w/4),this._elementCount=x,U.gl.texImage2D(U.gl.TEXTURE_2D,0,U.gl.RGBA,x,this._pixelsPerElement,0,U.gl.RGBA,U.gl.FLOAT,null),U.gl.bindTexture(U.gl.TEXTURE_2D,null),this._buffer=new Float32Array(4*x*this._pixelsPerElement)}var x=TextureBuffer.prototype;return x.bufferIndex=function bufferIndex(x,w){return 4*x+4*w*this._elementCount},x.update=function update(){U.gl.bindTexture(U.gl.TEXTURE_2D,this._glTexture),U.gl.texSubImage2D(U.gl.TEXTURE_2D,0,0,0,this._elementCount,this._pixelsPerElement,U.gl.RGBA,U.gl.FLOAT,this._buffer),U.gl.bindTexture(U.gl.TEXTURE_2D,null)},function _createClass(x,w,S){return w&&_defineProperties(x.prototype,w),S&&_defineProperties(x,S),Object.defineProperty(x,"prototype",{writable:!1}),x}(TextureBuffer,[{key:"glTexture",get:function get(){return this._glTexture}},{key:"buffer",get:function get(){return this._buffer}}]),TextureBuffer}(),ie=function(){function ForwardRenderer(){this._lightTexture=new re(J,8),this._shaderProgram=loadShaderProgram(ne(),function forward_frag_glsl(x){return"\n  #version 100\n  precision highp float;\n\n  uniform sampler2D u_colmap;\n  uniform sampler2D u_normap;\n  uniform sampler2D u_lightbuffer;\n\n  varying vec3 v_position;\n  varying vec3 v_normal;\n  varying vec2 v_uv;\n\n  vec3 applyNormalMap(vec3 geomnor, vec3 normap) {\n    normap = normap * 2.0 - 1.0;\n    vec3 up = normalize(vec3(0.001, 1, 0.001));\n    vec3 surftan = normalize(cross(geomnor, up));\n    vec3 surfbinor = cross(geomnor, surftan);\n    return normap.y * surftan + normap.x * surfbinor + normap.z * geomnor;\n  }\n\n  struct Light {\n    vec3 position;\n    float radius;\n    vec3 color;\n  };\n\n  float ExtractFloat(sampler2D texture, int textureWidth, int textureHeight, int index, int component) {\n    float u = float(index + 1) / float(textureWidth + 1);\n    int pixel = component / 4;\n    float v = float(pixel + 1) / float(textureHeight + 1);\n    vec4 texel = texture2D(texture, vec2(u, v));\n    int pixelComponent = component - pixel * 4;\n    if (pixelComponent == 0) {\n      return texel[0];\n    } else if (pixelComponent == 1) {\n      return texel[1];\n    } else if (pixelComponent == 2) {\n      return texel[2];\n    } else if (pixelComponent == 3) {\n      return texel[3];\n    }\n  }\n\n  Light UnpackLight(int index) {\n    Light light;\n    float u = float(index + 1) / float("+(x.numLights+1)+");\n    vec4 v1 = texture2D(u_lightbuffer, vec2(u, 0.0));\n    vec4 v2 = texture2D(u_lightbuffer, vec2(u, 0.5));\n    light.position = v1.xyz;\n\n    // LOOK: This extracts the 4th float (radius) of the (index)th light in the buffer\n    // Note that this is just an example implementation to extract one float.\n    // There are more efficient ways if you need adjacent values\n    light.radius = ExtractFloat(u_lightbuffer, "+x.numLights+", 2, index, 3);\n\n    light.color = v2.rgb;\n    return light;\n  }\n\n  // Cubic approximation of gaussian curve so we falloff to exactly 0 at the light radius\n  float cubicGaussian(float h) {\n    if (h < 1.0) {\n      return 0.25 * pow(2.0 - h, 3.0) - pow(1.0 - h, 3.0);\n    } else if (h < 2.0) {\n      return 0.25 * pow(2.0 - h, 3.0);\n    } else {\n      return 0.0;\n    }\n  }\n\n  void main() {\n    vec3 albedo = texture2D(u_colmap, v_uv).rgb;\n    vec3 normap = texture2D(u_normap, v_uv).xyz;\n    vec3 normal = applyNormalMap(v_normal, normap);\n\n    vec3 fragColor = vec3(0.0);\n\n    for (int i = 0; i < "+x.numLights+"; ++i) {\n      Light light = UnpackLight(i);\n      float lightDistance = distance(light.position, v_position);\n      vec3 L = (light.position - v_position) / lightDistance;\n\n      float lightIntensity = cubicGaussian(2.0 * lightDistance / light.radius);\n      float lambertTerm = max(dot(L, normal), 0.0);\n\n      fragColor += albedo * lambertTerm * light.color * vec3(lightIntensity);\n    }\n\n    const vec3 ambientLight = vec3(0.025);\n    fragColor += albedo * ambientLight;\n\n    gl_FragColor = vec4(fragColor, 1.0);\n  }\n  "}({numLights:J}),{uniforms:["u_viewProjectionMatrix","u_colmap","u_normap","u_lightbuffer"],attribs:["a_position","a_normal","a_uv"]}),this._projectionMatrix=G.Ue(),this._viewMatrix=G.Ue(),this._viewProjectionMatrix=G.Ue()}return ForwardRenderer.prototype.render=function render(x,w){x.updateMatrixWorld(),G.U_(this._viewMatrix,x.matrixWorld.elements),G.JG(this._projectionMatrix,x.projectionMatrix.elements),G.Jp(this._viewProjectionMatrix,this._projectionMatrix,this._viewMatrix);for(var S=0;S<J;++S)this._lightTexture.buffer[this._lightTexture.bufferIndex(S,0)+0]=w.lights[S].position[0],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,0)+1]=w.lights[S].position[1],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,0)+2]=w.lights[S].position[2],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,0)+3]=w.lights[S].radius,this._lightTexture.buffer[this._lightTexture.bufferIndex(S,1)+0]=w.lights[S].color[0],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,1)+1]=w.lights[S].color[1],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,1)+2]=w.lights[S].color[2];this._lightTexture.update(),U.gl.bindFramebuffer(U.gl.FRAMEBUFFER,null),U.gl.viewport(0,0,canvas.width,canvas.height),U.gl.clear(U.gl.COLOR_BUFFER_BIT|U.gl.DEPTH_BUFFER_BIT),U.gl.useProgram(this._shaderProgram.glShaderProgram),U.gl.uniformMatrix4fv(this._shaderProgram.u_viewProjectionMatrix,!1,this._viewProjectionMatrix),U.gl.activeTexture(U.gl.TEXTURE2),U.gl.bindTexture(U.gl.TEXTURE_2D,this._lightTexture.glTexture),U.gl.uniform1i(this._shaderProgram.u_lightbuffer,2),w.draw(this._shaderProgram)},ForwardRenderer}(),oe=S(9685);function create(){var x=new oe.WT(2);return oe.WT!=Float32Array&&(x[0]=0,x[1]=0),x}ae=create();var ae,se=S(6863),le=S.n(se);const ce=function defined(x){return null!=x};function DeveloperError(x){let w;this.name="DeveloperError",this.message=x;try{throw new Error}catch(x){w=x.stack}this.stack=w}ce(Object.create)&&(DeveloperError.prototype=Object.create(Error.prototype),DeveloperError.prototype.constructor=DeveloperError),DeveloperError.prototype.toString=function(){let x=`${this.name}: ${this.message}`;return ce(this.stack)&&(x+=`\n${this.stack.toString()}`),x},DeveloperError.throwInstantiationError=function(){throw new DeveloperError("This function defines an interface and should not be called directly.")};const ue=DeveloperError,he={};function getFailedTypeErrorMessage(x,w,S){return`Expected ${S} to be typeof ${w}, actual typeof was ${x}`}he.typeOf={},he.defined=function(x,w){if(!ce(w))throw new ue(function getUndefinedErrorMessage(x){return`${x} is required, actual value was undefined`}(x))},he.typeOf.func=function(x,w){if("function"!=typeof w)throw new ue(getFailedTypeErrorMessage(typeof w,"function",x))},he.typeOf.string=function(x,w){if("string"!=typeof w)throw new ue(getFailedTypeErrorMessage(typeof w,"string",x))},he.typeOf.number=function(x,w){if("number"!=typeof w)throw new ue(getFailedTypeErrorMessage(typeof w,"number",x))},he.typeOf.number.lessThan=function(x,w,S){if(he.typeOf.number(x,w),w>=S)throw new ue(`Expected ${x} to be less than ${S}, actual value was ${w}`)},he.typeOf.number.lessThanOrEquals=function(x,w,S){if(he.typeOf.number(x,w),w>S)throw new ue(`Expected ${x} to be less than or equal to ${S}, actual value was ${w}`)},he.typeOf.number.greaterThan=function(x,w,S){if(he.typeOf.number(x,w),w<=S)throw new ue(`Expected ${x} to be greater than ${S}, actual value was ${w}`)},he.typeOf.number.greaterThanOrEquals=function(x,w,S){if(he.typeOf.number(x,w),w<S)throw new ue(`Expected ${x} to be greater than or equal to ${S}, actual value was ${w}`)},he.typeOf.object=function(x,w){if("object"!=typeof w)throw new ue(getFailedTypeErrorMessage(typeof w,"object",x))},he.typeOf.bool=function(x,w){if("boolean"!=typeof w)throw new ue(getFailedTypeErrorMessage(typeof w,"boolean",x))},he.typeOf.bigint=function(x,w){if("bigint"!=typeof w)throw new ue(getFailedTypeErrorMessage(typeof w,"bigint",x))},he.typeOf.number.equals=function(x,w,S,U){if(he.typeOf.number(x,S),he.typeOf.number(w,U),S!==U)throw new ue(`${x} must be equal to ${w}, the actual values are ${S} and ${U}`)};const de=he;function defaultValue(x,w){return null!=x?x:w}defaultValue.EMPTY_OBJECT=Object.freeze({});const pe=defaultValue;var fe=S(7996);const me={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296};me.sign=pe(Math.sign,(function sign(x){return 0===(x=+x)||x!=x?x:x>0?1:-1})),me.signNotZero=function(x){return x<0?-1:1},me.toSNorm=function(x,w){return w=pe(w,255),Math.round((.5*me.clamp(x,-1,1)+.5)*w)},me.fromSNorm=function(x,w){return w=pe(w,255),me.clamp(x,0,w)/w*2-1},me.normalize=function(x,w,S){return 0===(S=Math.max(S-w,0))?0:me.clamp((x-w)/S,0,1)},me.sinh=pe(Math.sinh,(function sinh(x){return(Math.exp(x)-Math.exp(-x))/2})),me.cosh=pe(Math.cosh,(function cosh(x){return(Math.exp(x)+Math.exp(-x))/2})),me.lerp=function(x,w,S){return(1-S)*x+S*w},me.PI=Math.PI,me.ONE_OVER_PI=1/Math.PI,me.PI_OVER_TWO=Math.PI/2,me.PI_OVER_THREE=Math.PI/3,me.PI_OVER_FOUR=Math.PI/4,me.PI_OVER_SIX=Math.PI/6,me.THREE_PI_OVER_TWO=3*Math.PI/2,me.TWO_PI=2*Math.PI,me.ONE_OVER_TWO_PI=1/(2*Math.PI),me.RADIANS_PER_DEGREE=Math.PI/180,me.DEGREES_PER_RADIAN=180/Math.PI,me.RADIANS_PER_ARCSECOND=me.RADIANS_PER_DEGREE/3600,me.toRadians=function(x){if(!ce(x))throw new ue("degrees is required.");return x*me.RADIANS_PER_DEGREE},me.toDegrees=function(x){if(!ce(x))throw new ue("radians is required.");return x*me.DEGREES_PER_RADIAN},me.convertLongitudeRange=function(x){if(!ce(x))throw new ue("angle is required.");const w=me.TWO_PI,S=x-Math.floor(x/w)*w;return S<-Math.PI?S+w:S>=Math.PI?S-w:S},me.clampToLatitudeRange=function(x){if(!ce(x))throw new ue("angle is required.");return me.clamp(x,-1*me.PI_OVER_TWO,me.PI_OVER_TWO)},me.negativePiToPi=function(x){if(!ce(x))throw new ue("angle is required.");return x>=-me.PI&&x<=me.PI?x:me.zeroToTwoPi(x+me.PI)-me.PI},me.zeroToTwoPi=function(x){if(!ce(x))throw new ue("angle is required.");if(x>=0&&x<=me.TWO_PI)return x;const w=me.mod(x,me.TWO_PI);return Math.abs(w)<me.EPSILON14&&Math.abs(x)>me.EPSILON14?me.TWO_PI:w},me.mod=function(x,w){if(!ce(x))throw new ue("m is required.");if(!ce(w))throw new ue("n is required.");if(0===w)throw new ue("divisor cannot be 0.");return me.sign(x)===me.sign(w)&&Math.abs(x)<Math.abs(w)?x:(x%w+w)%w},me.equalsEpsilon=function(x,w,S,U){if(!ce(x))throw new ue("left is required.");if(!ce(w))throw new ue("right is required.");S=pe(S,0),U=pe(U,S);const G=Math.abs(x-w);return G<=U||G<=S*Math.max(Math.abs(x),Math.abs(w))},me.lessThan=function(x,w,S){if(!ce(x))throw new ue("first is required.");if(!ce(w))throw new ue("second is required.");if(!ce(S))throw new ue("absoluteEpsilon is required.");return x-w<-S},me.lessThanOrEquals=function(x,w,S){if(!ce(x))throw new ue("first is required.");if(!ce(w))throw new ue("second is required.");if(!ce(S))throw new ue("absoluteEpsilon is required.");return x-w<S},me.greaterThan=function(x,w,S){if(!ce(x))throw new ue("first is required.");if(!ce(w))throw new ue("second is required.");if(!ce(S))throw new ue("absoluteEpsilon is required.");return x-w>S},me.greaterThanOrEquals=function(x,w,S){if(!ce(x))throw new ue("first is required.");if(!ce(w))throw new ue("second is required.");if(!ce(S))throw new ue("absoluteEpsilon is required.");return x-w>-S};const ge=[1];me.factorial=function(x){if("number"!=typeof x||x<0)throw new ue("A number greater than or equal to 0 is required.");const w=ge.length;if(x>=w){let S=ge[w-1];for(let U=w;U<=x;U++){const x=S*U;ge.push(x),S=x}}return ge[x]},me.incrementWrap=function(x,w,S){if(S=pe(S,0),!ce(x))throw new ue("n is required.");if(w<=S)throw new ue("maximumValue must be greater than minimumValue.");return++x>w&&(x=S),x},me.isPowerOfTwo=function(x){if("number"!=typeof x||x<0||x>4294967295)throw new ue("A number between 0 and (2^32)-1 is required.");return 0!==x&&0==(x&x-1)},me.nextPowerOfTwo=function(x){if("number"!=typeof x||x<0||x>2147483648)throw new ue("A number between 0 and 2^31 is required.");return--x,x|=x>>1,x|=x>>2,x|=x>>4,x|=x>>8,x|=x>>16,++x},me.previousPowerOfTwo=function(x){if("number"!=typeof x||x<0||x>4294967295)throw new ue("A number between 0 and (2^32)-1 is required.");return x|=x>>1,x|=x>>2,x|=x>>4,x|=x>>8,x|=x>>16,x=((x|=x>>32)>>>0)-(x>>>1)},me.clamp=function(x,w,S){return de.typeOf.number("value",x),de.typeOf.number("min",w),de.typeOf.number("max",S),x<w?w:x>S?S:x};let ve=new fe;me.setRandomNumberSeed=function(x){if(!ce(x))throw new ue("seed is required.");ve=new fe(x)},me.nextRandomNumber=function(){return ve.random()},me.randomBetween=function(x,w){return me.nextRandomNumber()*(w-x)+x},me.acosClamped=function(x){if(!ce(x))throw new ue("value is required.");return Math.acos(me.clamp(x,-1,1))},me.asinClamped=function(x){if(!ce(x))throw new ue("value is required.");return Math.asin(me.clamp(x,-1,1))},me.chordLength=function(x,w){if(!ce(x))throw new ue("angle is required.");if(!ce(w))throw new ue("radius is required.");return 2*w*Math.sin(.5*x)},me.logBase=function(x,w){if(!ce(x))throw new ue("number is required.");if(!ce(w))throw new ue("base is required.");return Math.log(x)/Math.log(w)},me.cbrt=pe(Math.cbrt,(function cbrt(x){const w=Math.pow(Math.abs(x),1/3);return x<0?-w:w})),me.log2=pe(Math.log2,(function log2(x){return Math.log(x)*Math.LOG2E})),me.fog=function(x,w){const S=x*w;return 1-Math.exp(-S*S)},me.fastApproximateAtan=function(x){return de.typeOf.number("x",x),x*(-.1784*Math.abs(x)-.0663*x*x+1.0301)},me.fastApproximateAtan2=function(x,w){let S;de.typeOf.number("x",x),de.typeOf.number("y",w);let U=Math.abs(x);S=Math.abs(w);const G=Math.max(U,S);S=Math.min(U,S);const z=S/G;if(isNaN(z))throw new ue("either x or y must be nonzero");return U=me.fastApproximateAtan(z),U=Math.abs(w)>Math.abs(x)?me.PI_OVER_TWO-U:U,U=x<0?me.PI-U:U,U=w<0?-U:U,U};const ye=me;function Cartesian3(x,w,S){this.x=pe(x,0),this.y=pe(w,0),this.z=pe(S,0)}Cartesian3.fromSpherical=function(x,w){de.typeOf.object("spherical",x),ce(w)||(w=new Cartesian3);const S=x.clock,U=x.cone,G=pe(x.magnitude,1),z=G*Math.sin(U);return w.x=z*Math.cos(S),w.y=z*Math.sin(S),w.z=G*Math.cos(U),w},Cartesian3.fromElements=function(x,w,S,U){return ce(U)?(U.x=x,U.y=w,U.z=S,U):new Cartesian3(x,w,S)},Cartesian3.clone=function(x,w){if(ce(x))return ce(w)?(w.x=x.x,w.y=x.y,w.z=x.z,w):new Cartesian3(x.x,x.y,x.z)},Cartesian3.fromCartesian4=Cartesian3.clone,Cartesian3.packedLength=3,Cartesian3.pack=function(x,w,S){return de.typeOf.object("value",x),de.defined("array",w),S=pe(S,0),w[S++]=x.x,w[S++]=x.y,w[S]=x.z,w},Cartesian3.unpack=function(x,w,S){return de.defined("array",x),w=pe(w,0),ce(S)||(S=new Cartesian3),S.x=x[w++],S.y=x[w++],S.z=x[w],S},Cartesian3.packArray=function(x,w){de.defined("array",x);const S=x.length,U=3*S;if(ce(w)){if(!Array.isArray(w)&&w.length!==U)throw new ue("If result is a typed array, it must have exactly array.length * 3 elements");w.length!==U&&(w.length=U)}else w=new Array(U);for(let U=0;U<S;++U)Cartesian3.pack(x[U],w,3*U);return w},Cartesian3.unpackArray=function(x,w){if(de.defined("array",x),de.typeOf.number.greaterThanOrEquals("array.length",x.length,3),x.length%3!=0)throw new ue("array length must be a multiple of 3.");const S=x.length;ce(w)?w.length=S/3:w=new Array(S/3);for(let U=0;U<S;U+=3){const S=U/3;w[S]=Cartesian3.unpack(x,U,w[S])}return w},Cartesian3.fromArray=Cartesian3.unpack,Cartesian3.maximumComponent=function(x){return de.typeOf.object("cartesian",x),Math.max(x.x,x.y,x.z)},Cartesian3.minimumComponent=function(x){return de.typeOf.object("cartesian",x),Math.min(x.x,x.y,x.z)},Cartesian3.minimumByComponent=function(x,w,S){return de.typeOf.object("first",x),de.typeOf.object("second",w),de.typeOf.object("result",S),S.x=Math.min(x.x,w.x),S.y=Math.min(x.y,w.y),S.z=Math.min(x.z,w.z),S},Cartesian3.maximumByComponent=function(x,w,S){return de.typeOf.object("first",x),de.typeOf.object("second",w),de.typeOf.object("result",S),S.x=Math.max(x.x,w.x),S.y=Math.max(x.y,w.y),S.z=Math.max(x.z,w.z),S},Cartesian3.clamp=function(x,w,S,U){de.typeOf.object("value",x),de.typeOf.object("min",w),de.typeOf.object("max",S),de.typeOf.object("result",U);const G=ye.clamp(x.x,w.x,S.x),z=ye.clamp(x.y,w.y,S.y),H=ye.clamp(x.z,w.z,S.z);return U.x=G,U.y=z,U.z=H,U},Cartesian3.magnitudeSquared=function(x){return de.typeOf.object("cartesian",x),x.x*x.x+x.y*x.y+x.z*x.z},Cartesian3.magnitude=function(x){return Math.sqrt(Cartesian3.magnitudeSquared(x))};const _e=new Cartesian3;Cartesian3.distance=function(x,w){return de.typeOf.object("left",x),de.typeOf.object("right",w),Cartesian3.subtract(x,w,_e),Cartesian3.magnitude(_e)},Cartesian3.distanceSquared=function(x,w){return de.typeOf.object("left",x),de.typeOf.object("right",w),Cartesian3.subtract(x,w,_e),Cartesian3.magnitudeSquared(_e)},Cartesian3.normalize=function(x,w){de.typeOf.object("cartesian",x),de.typeOf.object("result",w);const S=Cartesian3.magnitude(x);if(w.x=x.x/S,w.y=x.y/S,w.z=x.z/S,isNaN(w.x)||isNaN(w.y)||isNaN(w.z))throw new ue("normalized result is not a number");return w},Cartesian3.dot=function(x,w){return de.typeOf.object("left",x),de.typeOf.object("right",w),x.x*w.x+x.y*w.y+x.z*w.z},Cartesian3.multiplyComponents=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S.x=x.x*w.x,S.y=x.y*w.y,S.z=x.z*w.z,S},Cartesian3.divideComponents=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S.x=x.x/w.x,S.y=x.y/w.y,S.z=x.z/w.z,S},Cartesian3.add=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S.x=x.x+w.x,S.y=x.y+w.y,S.z=x.z+w.z,S},Cartesian3.subtract=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S.x=x.x-w.x,S.y=x.y-w.y,S.z=x.z-w.z,S},Cartesian3.multiplyByScalar=function(x,w,S){return de.typeOf.object("cartesian",x),de.typeOf.number("scalar",w),de.typeOf.object("result",S),S.x=x.x*w,S.y=x.y*w,S.z=x.z*w,S},Cartesian3.divideByScalar=function(x,w,S){return de.typeOf.object("cartesian",x),de.typeOf.number("scalar",w),de.typeOf.object("result",S),S.x=x.x/w,S.y=x.y/w,S.z=x.z/w,S},Cartesian3.negate=function(x,w){return de.typeOf.object("cartesian",x),de.typeOf.object("result",w),w.x=-x.x,w.y=-x.y,w.z=-x.z,w},Cartesian3.abs=function(x,w){return de.typeOf.object("cartesian",x),de.typeOf.object("result",w),w.x=Math.abs(x.x),w.y=Math.abs(x.y),w.z=Math.abs(x.z),w};const be=new Cartesian3;Cartesian3.lerp=function(x,w,S,U){return de.typeOf.object("start",x),de.typeOf.object("end",w),de.typeOf.number("t",S),de.typeOf.object("result",U),Cartesian3.multiplyByScalar(w,S,be),U=Cartesian3.multiplyByScalar(x,1-S,U),Cartesian3.add(be,U,U)};const xe=new Cartesian3,Ee=new Cartesian3;Cartesian3.angleBetween=function(x,w){de.typeOf.object("left",x),de.typeOf.object("right",w),Cartesian3.normalize(x,xe),Cartesian3.normalize(w,Ee);const S=Cartesian3.dot(xe,Ee),U=Cartesian3.magnitude(Cartesian3.cross(xe,Ee,xe));return Math.atan2(U,S)};const we=new Cartesian3;Cartesian3.mostOrthogonalAxis=function(x,w){de.typeOf.object("cartesian",x),de.typeOf.object("result",w);const S=Cartesian3.normalize(x,we);return Cartesian3.abs(S,S),w=S.x<=S.y?S.x<=S.z?Cartesian3.clone(Cartesian3.UNIT_X,w):Cartesian3.clone(Cartesian3.UNIT_Z,w):S.y<=S.z?Cartesian3.clone(Cartesian3.UNIT_Y,w):Cartesian3.clone(Cartesian3.UNIT_Z,w)},Cartesian3.projectVector=function(x,w,S){de.defined("a",x),de.defined("b",w),de.defined("result",S);const U=Cartesian3.dot(x,w)/Cartesian3.dot(w,w);return Cartesian3.multiplyByScalar(w,U,S)},Cartesian3.equals=function(x,w){return x===w||ce(x)&&ce(w)&&x.x===w.x&&x.y===w.y&&x.z===w.z},Cartesian3.equalsArray=function(x,w,S){return x.x===w[S]&&x.y===w[S+1]&&x.z===w[S+2]},Cartesian3.equalsEpsilon=function(x,w,S,U){return x===w||ce(x)&&ce(w)&&ye.equalsEpsilon(x.x,w.x,S,U)&&ye.equalsEpsilon(x.y,w.y,S,U)&&ye.equalsEpsilon(x.z,w.z,S,U)},Cartesian3.cross=function(x,w,S){de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S);const U=x.x,G=x.y,z=x.z,H=w.x,j=w.y,X=w.z,q=G*X-z*j,K=z*H-U*X,Y=U*j-G*H;return S.x=q,S.y=K,S.z=Y,S},Cartesian3.midpoint=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S.x=.5*(x.x+w.x),S.y=.5*(x.y+w.y),S.z=.5*(x.z+w.z),S},Cartesian3.fromDegrees=function(x,w,S,U,G){return de.typeOf.number("longitude",x),de.typeOf.number("latitude",w),x=ye.toRadians(x),w=ye.toRadians(w),Cartesian3.fromRadians(x,w,S,U,G)};let Se=new Cartesian3,Te=new Cartesian3;const Ce=new Cartesian3(40680631590769,40680631590769,40408299984661.445);Cartesian3.fromRadians=function(x,w,S,U,G){de.typeOf.number("longitude",x),de.typeOf.number("latitude",w),S=pe(S,0);const z=ce(U)?U.radiiSquared:Ce,H=Math.cos(w);Se.x=H*Math.cos(x),Se.y=H*Math.sin(x),Se.z=Math.sin(w),Se=Cartesian3.normalize(Se,Se),Cartesian3.multiplyComponents(z,Se,Te);const j=Math.sqrt(Cartesian3.dot(Se,Te));return Te=Cartesian3.divideByScalar(Te,j,Te),Se=Cartesian3.multiplyByScalar(Se,S,Se),ce(G)||(G=new Cartesian3),Cartesian3.add(Te,Se,G)},Cartesian3.fromDegreesArray=function(x,w,S){if(de.defined("coordinates",x),x.length<2||x.length%2!=0)throw new ue("the number of coordinates must be a multiple of 2 and at least 2");const U=x.length;ce(S)?S.length=U/2:S=new Array(U/2);for(let G=0;G<U;G+=2){const U=x[G],z=x[G+1],H=G/2;S[H]=Cartesian3.fromDegrees(U,z,0,w,S[H])}return S},Cartesian3.fromRadiansArray=function(x,w,S){if(de.defined("coordinates",x),x.length<2||x.length%2!=0)throw new ue("the number of coordinates must be a multiple of 2 and at least 2");const U=x.length;ce(S)?S.length=U/2:S=new Array(U/2);for(let G=0;G<U;G+=2){const U=x[G],z=x[G+1],H=G/2;S[H]=Cartesian3.fromRadians(U,z,0,w,S[H])}return S},Cartesian3.fromDegreesArrayHeights=function(x,w,S){if(de.defined("coordinates",x),x.length<3||x.length%3!=0)throw new ue("the number of coordinates must be a multiple of 3 and at least 3");const U=x.length;ce(S)?S.length=U/3:S=new Array(U/3);for(let G=0;G<U;G+=3){const U=x[G],z=x[G+1],H=x[G+2],j=G/3;S[j]=Cartesian3.fromDegrees(U,z,H,w,S[j])}return S},Cartesian3.fromRadiansArrayHeights=function(x,w,S){if(de.defined("coordinates",x),x.length<3||x.length%3!=0)throw new ue("the number of coordinates must be a multiple of 3 and at least 3");const U=x.length;ce(S)?S.length=U/3:S=new Array(U/3);for(let G=0;G<U;G+=3){const U=x[G],z=x[G+1],H=x[G+2],j=G/3;S[j]=Cartesian3.fromRadians(U,z,H,w,S[j])}return S},Cartesian3.ZERO=Object.freeze(new Cartesian3(0,0,0)),Cartesian3.ONE=Object.freeze(new Cartesian3(1,1,1)),Cartesian3.UNIT_X=Object.freeze(new Cartesian3(1,0,0)),Cartesian3.UNIT_Y=Object.freeze(new Cartesian3(0,1,0)),Cartesian3.UNIT_Z=Object.freeze(new Cartesian3(0,0,1)),Cartesian3.prototype.clone=function(x){return Cartesian3.clone(this,x)},Cartesian3.prototype.equals=function(x){return Cartesian3.equals(this,x)},Cartesian3.prototype.equalsEpsilon=function(x,w,S){return Cartesian3.equalsEpsilon(this,x,w,S)},Cartesian3.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z})`};const Ae=Cartesian3,Me=new Ae,Re=new Ae;const Le=function scaleToGeodeticSurface(x,w,S,U,G){if(!ce(x))throw new ue("cartesian is required.");if(!ce(w))throw new ue("oneOverRadii is required.");if(!ce(S))throw new ue("oneOverRadiiSquared is required.");if(!ce(U))throw new ue("centerToleranceSquared is required.");const z=x.x,H=x.y,j=x.z,X=w.x,q=w.y,K=w.z,Y=z*z*X*X,Z=H*H*q*q,J=j*j*K*K,Q=Y+Z+J,ee=Math.sqrt(1/Q),te=Ae.multiplyByScalar(x,ee,Me);if(Q<U)return isFinite(ee)?Ae.clone(te,G):void 0;const ne=S.x,re=S.y,ie=S.z,oe=Re;oe.x=te.x*ne*2,oe.y=te.y*re*2,oe.z=te.z*ie*2;let ae,se,le,he,de,pe,fe,me,ge,ve,_e,be=(1-ee)*Ae.magnitude(x)/(.5*Ae.magnitude(oe)),xe=0;do{be-=xe,le=1/(1+be*ne),he=1/(1+be*re),de=1/(1+be*ie),pe=le*le,fe=he*he,me=de*de,ge=pe*le,ve=fe*he,_e=me*de,ae=Y*pe+Z*fe+J*me-1,se=Y*ge*ne+Z*ve*re+J*_e*ie;xe=ae/(-2*se)}while(Math.abs(ae)>ye.EPSILON12);return ce(G)?(G.x=z*le,G.y=H*he,G.z=j*de,G):new Ae(z*le,H*he,j*de)};function Cartographic(x,w,S){this.longitude=pe(x,0),this.latitude=pe(w,0),this.height=pe(S,0)}Cartographic.fromRadians=function(x,w,S,U){return de.typeOf.number("longitude",x),de.typeOf.number("latitude",w),S=pe(S,0),ce(U)?(U.longitude=x,U.latitude=w,U.height=S,U):new Cartographic(x,w,S)},Cartographic.fromDegrees=function(x,w,S,U){return de.typeOf.number("longitude",x),de.typeOf.number("latitude",w),x=ye.toRadians(x),w=ye.toRadians(w),Cartographic.fromRadians(x,w,S,U)};const Oe=new Ae,Pe=new Ae,Ie=new Ae,Ne=new Ae(1/6378137,1/6378137,1/6356752.314245179),Fe=new Ae(1/40680631590769,1/40680631590769,1/40408299984661.445),Be=ye.EPSILON1;Cartographic.fromCartesian=function(x,w,S){const U=ce(w)?w.oneOverRadii:Ne,G=ce(w)?w.oneOverRadiiSquared:Fe,z=ce(w)?w._centerToleranceSquared:Be,H=Le(x,U,G,z,Pe);if(!ce(H))return;let j=Ae.multiplyComponents(H,G,Oe);j=Ae.normalize(j,j);const X=Ae.subtract(x,H,Ie),q=Math.atan2(j.y,j.x),K=Math.asin(j.z),Y=ye.sign(Ae.dot(X,x))*Ae.magnitude(X);return ce(S)?(S.longitude=q,S.latitude=K,S.height=Y,S):new Cartographic(q,K,Y)},Cartographic.toCartesian=function(x,w,S){return de.defined("cartographic",x),Ae.fromRadians(x.longitude,x.latitude,x.height,w,S)},Cartographic.clone=function(x,w){if(ce(x))return ce(w)?(w.longitude=x.longitude,w.latitude=x.latitude,w.height=x.height,w):new Cartographic(x.longitude,x.latitude,x.height)},Cartographic.equals=function(x,w){return x===w||ce(x)&&ce(w)&&x.longitude===w.longitude&&x.latitude===w.latitude&&x.height===w.height},Cartographic.equalsEpsilon=function(x,w,S){return S=pe(S,0),x===w||ce(x)&&ce(w)&&Math.abs(x.longitude-w.longitude)<=S&&Math.abs(x.latitude-w.latitude)<=S&&Math.abs(x.height-w.height)<=S},Cartographic.ZERO=Object.freeze(new Cartographic(0,0,0)),Cartographic.prototype.clone=function(x){return Cartographic.clone(this,x)},Cartographic.prototype.equals=function(x){return Cartographic.equals(this,x)},Cartographic.prototype.equalsEpsilon=function(x,w){return Cartographic.equalsEpsilon(this,x,w)},Cartographic.prototype.toString=function(){return`(${this.longitude}, ${this.latitude}, ${this.height})`};const De=Cartographic;function Cartesian2(x,w){this.x=pe(x,0),this.y=pe(w,0)}Cartesian2.fromElements=function(x,w,S){return ce(S)?(S.x=x,S.y=w,S):new Cartesian2(x,w)},Cartesian2.clone=function(x,w){if(ce(x))return ce(w)?(w.x=x.x,w.y=x.y,w):new Cartesian2(x.x,x.y)},Cartesian2.fromCartesian3=Cartesian2.clone,Cartesian2.fromCartesian4=Cartesian2.clone,Cartesian2.packedLength=2,Cartesian2.pack=function(x,w,S){return de.typeOf.object("value",x),de.defined("array",w),S=pe(S,0),w[S++]=x.x,w[S]=x.y,w},Cartesian2.unpack=function(x,w,S){return de.defined("array",x),w=pe(w,0),ce(S)||(S=new Cartesian2),S.x=x[w++],S.y=x[w],S},Cartesian2.packArray=function(x,w){de.defined("array",x);const S=x.length,U=2*S;if(ce(w)){if(!Array.isArray(w)&&w.length!==U)throw new ue("If result is a typed array, it must have exactly array.length * 2 elements");w.length!==U&&(w.length=U)}else w=new Array(U);for(let U=0;U<S;++U)Cartesian2.pack(x[U],w,2*U);return w},Cartesian2.unpackArray=function(x,w){if(de.defined("array",x),de.typeOf.number.greaterThanOrEquals("array.length",x.length,2),x.length%2!=0)throw new ue("array length must be a multiple of 2.");const S=x.length;ce(w)?w.length=S/2:w=new Array(S/2);for(let U=0;U<S;U+=2){const S=U/2;w[S]=Cartesian2.unpack(x,U,w[S])}return w},Cartesian2.fromArray=Cartesian2.unpack,Cartesian2.maximumComponent=function(x){return de.typeOf.object("cartesian",x),Math.max(x.x,x.y)},Cartesian2.minimumComponent=function(x){return de.typeOf.object("cartesian",x),Math.min(x.x,x.y)},Cartesian2.minimumByComponent=function(x,w,S){return de.typeOf.object("first",x),de.typeOf.object("second",w),de.typeOf.object("result",S),S.x=Math.min(x.x,w.x),S.y=Math.min(x.y,w.y),S},Cartesian2.maximumByComponent=function(x,w,S){return de.typeOf.object("first",x),de.typeOf.object("second",w),de.typeOf.object("result",S),S.x=Math.max(x.x,w.x),S.y=Math.max(x.y,w.y),S},Cartesian2.clamp=function(x,w,S,U){de.typeOf.object("value",x),de.typeOf.object("min",w),de.typeOf.object("max",S),de.typeOf.object("result",U);const G=ye.clamp(x.x,w.x,S.x),z=ye.clamp(x.y,w.y,S.y);return U.x=G,U.y=z,U},Cartesian2.magnitudeSquared=function(x){return de.typeOf.object("cartesian",x),x.x*x.x+x.y*x.y},Cartesian2.magnitude=function(x){return Math.sqrt(Cartesian2.magnitudeSquared(x))};const ke=new Cartesian2;Cartesian2.distance=function(x,w){return de.typeOf.object("left",x),de.typeOf.object("right",w),Cartesian2.subtract(x,w,ke),Cartesian2.magnitude(ke)},Cartesian2.distanceSquared=function(x,w){return de.typeOf.object("left",x),de.typeOf.object("right",w),Cartesian2.subtract(x,w,ke),Cartesian2.magnitudeSquared(ke)},Cartesian2.normalize=function(x,w){de.typeOf.object("cartesian",x),de.typeOf.object("result",w);const S=Cartesian2.magnitude(x);if(w.x=x.x/S,w.y=x.y/S,isNaN(w.x)||isNaN(w.y))throw new ue("normalized result is not a number");return w},Cartesian2.dot=function(x,w){return de.typeOf.object("left",x),de.typeOf.object("right",w),x.x*w.x+x.y*w.y},Cartesian2.cross=function(x,w){return de.typeOf.object("left",x),de.typeOf.object("right",w),x.x*w.y-x.y*w.x},Cartesian2.multiplyComponents=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S.x=x.x*w.x,S.y=x.y*w.y,S},Cartesian2.divideComponents=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S.x=x.x/w.x,S.y=x.y/w.y,S},Cartesian2.add=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S.x=x.x+w.x,S.y=x.y+w.y,S},Cartesian2.subtract=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S.x=x.x-w.x,S.y=x.y-w.y,S},Cartesian2.multiplyByScalar=function(x,w,S){return de.typeOf.object("cartesian",x),de.typeOf.number("scalar",w),de.typeOf.object("result",S),S.x=x.x*w,S.y=x.y*w,S},Cartesian2.divideByScalar=function(x,w,S){return de.typeOf.object("cartesian",x),de.typeOf.number("scalar",w),de.typeOf.object("result",S),S.x=x.x/w,S.y=x.y/w,S},Cartesian2.negate=function(x,w){return de.typeOf.object("cartesian",x),de.typeOf.object("result",w),w.x=-x.x,w.y=-x.y,w},Cartesian2.abs=function(x,w){return de.typeOf.object("cartesian",x),de.typeOf.object("result",w),w.x=Math.abs(x.x),w.y=Math.abs(x.y),w};const Ue=new Cartesian2;Cartesian2.lerp=function(x,w,S,U){return de.typeOf.object("start",x),de.typeOf.object("end",w),de.typeOf.number("t",S),de.typeOf.object("result",U),Cartesian2.multiplyByScalar(w,S,Ue),U=Cartesian2.multiplyByScalar(x,1-S,U),Cartesian2.add(Ue,U,U)};const Ge=new Cartesian2,Ve=new Cartesian2;Cartesian2.angleBetween=function(x,w){return de.typeOf.object("left",x),de.typeOf.object("right",w),Cartesian2.normalize(x,Ge),Cartesian2.normalize(w,Ve),ye.acosClamped(Cartesian2.dot(Ge,Ve))};const We=new Cartesian2;Cartesian2.mostOrthogonalAxis=function(x,w){de.typeOf.object("cartesian",x),de.typeOf.object("result",w);const S=Cartesian2.normalize(x,We);return Cartesian2.abs(S,S),w=S.x<=S.y?Cartesian2.clone(Cartesian2.UNIT_X,w):Cartesian2.clone(Cartesian2.UNIT_Y,w)},Cartesian2.equals=function(x,w){return x===w||ce(x)&&ce(w)&&x.x===w.x&&x.y===w.y},Cartesian2.equalsArray=function(x,w,S){return x.x===w[S]&&x.y===w[S+1]},Cartesian2.equalsEpsilon=function(x,w,S,U){return x===w||ce(x)&&ce(w)&&ye.equalsEpsilon(x.x,w.x,S,U)&&ye.equalsEpsilon(x.y,w.y,S,U)},Cartesian2.ZERO=Object.freeze(new Cartesian2(0,0)),Cartesian2.ONE=Object.freeze(new Cartesian2(1,1)),Cartesian2.UNIT_X=Object.freeze(new Cartesian2(1,0)),Cartesian2.UNIT_Y=Object.freeze(new Cartesian2(0,1)),Cartesian2.prototype.clone=function(x){return Cartesian2.clone(this,x)},Cartesian2.prototype.equals=function(x){return Cartesian2.equals(this,x)},Cartesian2.prototype.equalsEpsilon=function(x,w,S){return Cartesian2.equalsEpsilon(this,x,w,S)},Cartesian2.prototype.toString=function(){return`(${this.x}, ${this.y})`};const ze=Cartesian2;function initialize(x,w,S,U){w=pe(w,0),S=pe(S,0),U=pe(U,0),de.typeOf.number.greaterThanOrEquals("x",w,0),de.typeOf.number.greaterThanOrEquals("y",S,0),de.typeOf.number.greaterThanOrEquals("z",U,0),x._radii=new Ae(w,S,U),x._radiiSquared=new Ae(w*w,S*S,U*U),x._radiiToTheFourth=new Ae(w*w*w*w,S*S*S*S,U*U*U*U),x._oneOverRadii=new Ae(0===w?0:1/w,0===S?0:1/S,0===U?0:1/U),x._oneOverRadiiSquared=new Ae(0===w?0:1/(w*w),0===S?0:1/(S*S),0===U?0:1/(U*U)),x._minimumRadius=Math.min(w,S,U),x._maximumRadius=Math.max(w,S,U),x._centerToleranceSquared=ye.EPSILON1,0!==x._radiiSquared.z&&(x._squaredXOverSquaredZ=x._radiiSquared.x/x._radiiSquared.z)}function Ellipsoid(x,w,S){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,initialize(this,x,w,S)}Object.defineProperties(Ellipsoid.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),Ellipsoid.clone=function(x,w){if(!ce(x))return;const S=x._radii;return ce(w)?(Ae.clone(S,w._radii),Ae.clone(x._radiiSquared,w._radiiSquared),Ae.clone(x._radiiToTheFourth,w._radiiToTheFourth),Ae.clone(x._oneOverRadii,w._oneOverRadii),Ae.clone(x._oneOverRadiiSquared,w._oneOverRadiiSquared),w._minimumRadius=x._minimumRadius,w._maximumRadius=x._maximumRadius,w._centerToleranceSquared=x._centerToleranceSquared,w):new Ellipsoid(S.x,S.y,S.z)},Ellipsoid.fromCartesian3=function(x,w){return ce(w)||(w=new Ellipsoid),ce(x)?(initialize(w,x.x,x.y,x.z),w):w},Ellipsoid.WGS84=Object.freeze(new Ellipsoid(6378137,6378137,6356752.314245179)),Ellipsoid.UNIT_SPHERE=Object.freeze(new Ellipsoid(1,1,1)),Ellipsoid.MOON=Object.freeze(new Ellipsoid(ye.LUNAR_RADIUS,ye.LUNAR_RADIUS,ye.LUNAR_RADIUS)),Ellipsoid.prototype.clone=function(x){return Ellipsoid.clone(this,x)},Ellipsoid.packedLength=Ae.packedLength,Ellipsoid.pack=function(x,w,S){return de.typeOf.object("value",x),de.defined("array",w),S=pe(S,0),Ae.pack(x._radii,w,S),w},Ellipsoid.unpack=function(x,w,S){de.defined("array",x),w=pe(w,0);const U=Ae.unpack(x,w);return Ellipsoid.fromCartesian3(U,S)},Ellipsoid.prototype.geocentricSurfaceNormal=Ae.normalize,Ellipsoid.prototype.geodeticSurfaceNormalCartographic=function(x,w){de.typeOf.object("cartographic",x);const S=x.longitude,U=x.latitude,G=Math.cos(U),z=G*Math.cos(S),H=G*Math.sin(S),j=Math.sin(U);return ce(w)||(w=new Ae),w.x=z,w.y=H,w.z=j,Ae.normalize(w,w)},Ellipsoid.prototype.geodeticSurfaceNormal=function(x,w){if(!Ae.equalsEpsilon(x,Ae.ZERO,ye.EPSILON14))return ce(w)||(w=new Ae),w=Ae.multiplyComponents(x,this._oneOverRadiiSquared,w),Ae.normalize(w,w)};const He=new Ae,$e=new Ae;Ellipsoid.prototype.cartographicToCartesian=function(x,w){const S=He,U=$e;this.geodeticSurfaceNormalCartographic(x,S),Ae.multiplyComponents(this._radiiSquared,S,U);const G=Math.sqrt(Ae.dot(S,U));return Ae.divideByScalar(U,G,U),Ae.multiplyByScalar(S,x.height,S),ce(w)||(w=new Ae),Ae.add(U,S,w)},Ellipsoid.prototype.cartographicArrayToCartesianArray=function(x,w){de.defined("cartographics",x);const S=x.length;ce(w)?w.length=S:w=new Array(S);for(let U=0;U<S;U++)w[U]=this.cartographicToCartesian(x[U],w[U]);return w};const je=new Ae,Xe=new Ae,qe=new Ae;Ellipsoid.prototype.cartesianToCartographic=function(x,w){const S=this.scaleToGeodeticSurface(x,Xe);if(!ce(S))return;const U=this.geodeticSurfaceNormal(S,je),G=Ae.subtract(x,S,qe),z=Math.atan2(U.y,U.x),H=Math.asin(U.z),j=ye.sign(Ae.dot(G,x))*Ae.magnitude(G);return ce(w)?(w.longitude=z,w.latitude=H,w.height=j,w):new De(z,H,j)},Ellipsoid.prototype.cartesianArrayToCartographicArray=function(x,w){de.defined("cartesians",x);const S=x.length;ce(w)?w.length=S:w=new Array(S);for(let U=0;U<S;++U)w[U]=this.cartesianToCartographic(x[U],w[U]);return w},Ellipsoid.prototype.scaleToGeodeticSurface=function(x,w){return Le(x,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,w)},Ellipsoid.prototype.scaleToGeocentricSurface=function(x,w){de.typeOf.object("cartesian",x),ce(w)||(w=new Ae);const S=x.x,U=x.y,G=x.z,z=this._oneOverRadiiSquared,H=1/Math.sqrt(S*S*z.x+U*U*z.y+G*G*z.z);return Ae.multiplyByScalar(x,H,w)},Ellipsoid.prototype.transformPositionToScaledSpace=function(x,w){return ce(w)||(w=new Ae),Ae.multiplyComponents(x,this._oneOverRadii,w)},Ellipsoid.prototype.transformPositionFromScaledSpace=function(x,w){return ce(w)||(w=new Ae),Ae.multiplyComponents(x,this._radii,w)},Ellipsoid.prototype.equals=function(x){return this===x||ce(x)&&Ae.equals(this._radii,x._radii)},Ellipsoid.prototype.toString=function(){return this._radii.toString()},Ellipsoid.prototype.getSurfaceNormalIntersectionWithZAxis=function(x,w,S){if(de.typeOf.object("position",x),!ye.equalsEpsilon(this._radii.x,this._radii.y,ye.EPSILON15))throw new ue("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");de.typeOf.number.greaterThan("Ellipsoid.radii.z",this._radii.z,0),w=pe(w,0);const U=this._squaredXOverSquaredZ;if(ce(S)||(S=new Ae),S.x=0,S.y=0,S.z=x.z*(1-U),!(Math.abs(S.z)>=this._radii.z-w))return S};const Ke=new Ae;Ellipsoid.prototype.getLocalCurvature=function(x,w){de.typeOf.object("surfacePosition",x),ce(w)||(w=new ze);const S=this.getSurfaceNormalIntersectionWithZAxis(x,0,Ke),U=Ae.distance(x,S),G=U*(this.minimumRadius*U/this.maximumRadius**2)**2;return ze.fromElements(1/U,1/G,w)};const Ye=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],Ze=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function gaussLegendreQuadrature(x,w,S){de.typeOf.number("a",x),de.typeOf.number("b",w),de.typeOf.func("func",S);const U=.5*(w+x),G=.5*(w-x);let z=0;for(let x=0;x<5;x++){const w=G*Ye[x];z+=Ze[x]*(S(U+w)+S(U-w))}return z*=G,z}Ellipsoid.prototype.surfaceArea=function(x){de.typeOf.object("rectangle",x);const w=x.west;let S=x.east;const U=x.south,G=x.north;for(;S<w;)S+=ye.TWO_PI;const z=this._radiiSquared,H=z.x,j=z.y,X=z.z,q=H*j;return gaussLegendreQuadrature(U,G,(function(x){const U=Math.cos(x),G=Math.sin(x);return Math.cos(x)*gaussLegendreQuadrature(w,S,(function(x){const w=Math.cos(x),S=Math.sin(x);return Math.sqrt(q*G*G+X*(j*w*w+H*S*S)*U*U)}))}))};const Je=Ellipsoid;function GeographicProjection(x){this._ellipsoid=pe(x,Je.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(GeographicProjection.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),GeographicProjection.prototype.project=function(x,w){const S=this._semimajorAxis,U=x.longitude*S,G=x.latitude*S,z=x.height;return ce(w)?(w.x=U,w.y=G,w.z=z,w):new Ae(U,G,z)},GeographicProjection.prototype.unproject=function(x,w){if(!ce(x))throw new ue("cartesian is required");const S=this._oneOverSemimajorAxis,U=x.x*S,G=x.y*S,z=x.z;return ce(w)?(w.longitude=U,w.latitude=G,w.height=z,w):new De(U,G,z)};const Qe=GeographicProjection,et=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});const tt=function Interval(x,w){this.start=pe(x,0),this.stop=pe(w,0)};function Matrix3(x,w,S,U,G,z,H,j,X){this[0]=pe(x,0),this[1]=pe(U,0),this[2]=pe(H,0),this[3]=pe(w,0),this[4]=pe(G,0),this[5]=pe(j,0),this[6]=pe(S,0),this[7]=pe(z,0),this[8]=pe(X,0)}Matrix3.packedLength=9,Matrix3.pack=function(x,w,S){return de.typeOf.object("value",x),de.defined("array",w),S=pe(S,0),w[S++]=x[0],w[S++]=x[1],w[S++]=x[2],w[S++]=x[3],w[S++]=x[4],w[S++]=x[5],w[S++]=x[6],w[S++]=x[7],w[S++]=x[8],w},Matrix3.unpack=function(x,w,S){return de.defined("array",x),w=pe(w,0),ce(S)||(S=new Matrix3),S[0]=x[w++],S[1]=x[w++],S[2]=x[w++],S[3]=x[w++],S[4]=x[w++],S[5]=x[w++],S[6]=x[w++],S[7]=x[w++],S[8]=x[w++],S},Matrix3.packArray=function(x,w){de.defined("array",x);const S=x.length,U=9*S;if(ce(w)){if(!Array.isArray(w)&&w.length!==U)throw new ue("If result is a typed array, it must have exactly array.length * 9 elements");w.length!==U&&(w.length=U)}else w=new Array(U);for(let U=0;U<S;++U)Matrix3.pack(x[U],w,9*U);return w},Matrix3.unpackArray=function(x,w){if(de.defined("array",x),de.typeOf.number.greaterThanOrEquals("array.length",x.length,9),x.length%9!=0)throw new ue("array length must be a multiple of 9.");const S=x.length;ce(w)?w.length=S/9:w=new Array(S/9);for(let U=0;U<S;U+=9){const S=U/9;w[S]=Matrix3.unpack(x,U,w[S])}return w},Matrix3.clone=function(x,w){if(ce(x))return ce(w)?(w[0]=x[0],w[1]=x[1],w[2]=x[2],w[3]=x[3],w[4]=x[4],w[5]=x[5],w[6]=x[6],w[7]=x[7],w[8]=x[8],w):new Matrix3(x[0],x[3],x[6],x[1],x[4],x[7],x[2],x[5],x[8])},Matrix3.fromArray=Matrix3.unpack,Matrix3.fromColumnMajorArray=function(x,w){return de.defined("values",x),Matrix3.clone(x,w)},Matrix3.fromRowMajorArray=function(x,w){return de.defined("values",x),ce(w)?(w[0]=x[0],w[1]=x[3],w[2]=x[6],w[3]=x[1],w[4]=x[4],w[5]=x[7],w[6]=x[2],w[7]=x[5],w[8]=x[8],w):new Matrix3(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8])},Matrix3.fromQuaternion=function(x,w){de.typeOf.object("quaternion",x);const S=x.x*x.x,U=x.x*x.y,G=x.x*x.z,z=x.x*x.w,H=x.y*x.y,j=x.y*x.z,X=x.y*x.w,q=x.z*x.z,K=x.z*x.w,Y=x.w*x.w,Z=S-H-q+Y,J=2*(U-K),Q=2*(G+X),ee=2*(U+K),te=-S+H-q+Y,ne=2*(j-z),re=2*(G-X),ie=2*(j+z),oe=-S-H+q+Y;return ce(w)?(w[0]=Z,w[1]=ee,w[2]=re,w[3]=J,w[4]=te,w[5]=ie,w[6]=Q,w[7]=ne,w[8]=oe,w):new Matrix3(Z,J,Q,ee,te,ne,re,ie,oe)},Matrix3.fromHeadingPitchRoll=function(x,w){de.typeOf.object("headingPitchRoll",x);const S=Math.cos(-x.pitch),U=Math.cos(-x.heading),G=Math.cos(x.roll),z=Math.sin(-x.pitch),H=Math.sin(-x.heading),j=Math.sin(x.roll),X=S*U,q=-G*H+j*z*U,K=j*H+G*z*U,Y=S*H,Z=G*U+j*z*H,J=-j*U+G*z*H,Q=-z,ee=j*S,te=G*S;return ce(w)?(w[0]=X,w[1]=Y,w[2]=Q,w[3]=q,w[4]=Z,w[5]=ee,w[6]=K,w[7]=J,w[8]=te,w):new Matrix3(X,q,K,Y,Z,J,Q,ee,te)},Matrix3.fromScale=function(x,w){return de.typeOf.object("scale",x),ce(w)?(w[0]=x.x,w[1]=0,w[2]=0,w[3]=0,w[4]=x.y,w[5]=0,w[6]=0,w[7]=0,w[8]=x.z,w):new Matrix3(x.x,0,0,0,x.y,0,0,0,x.z)},Matrix3.fromUniformScale=function(x,w){return de.typeOf.number("scale",x),ce(w)?(w[0]=x,w[1]=0,w[2]=0,w[3]=0,w[4]=x,w[5]=0,w[6]=0,w[7]=0,w[8]=x,w):new Matrix3(x,0,0,0,x,0,0,0,x)},Matrix3.fromCrossProduct=function(x,w){return de.typeOf.object("vector",x),ce(w)?(w[0]=0,w[1]=x.z,w[2]=-x.y,w[3]=-x.z,w[4]=0,w[5]=x.x,w[6]=x.y,w[7]=-x.x,w[8]=0,w):new Matrix3(0,-x.z,x.y,x.z,0,-x.x,-x.y,x.x,0)},Matrix3.fromRotationX=function(x,w){de.typeOf.number("angle",x);const S=Math.cos(x),U=Math.sin(x);return ce(w)?(w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=S,w[5]=U,w[6]=0,w[7]=-U,w[8]=S,w):new Matrix3(1,0,0,0,S,-U,0,U,S)},Matrix3.fromRotationY=function(x,w){de.typeOf.number("angle",x);const S=Math.cos(x),U=Math.sin(x);return ce(w)?(w[0]=S,w[1]=0,w[2]=-U,w[3]=0,w[4]=1,w[5]=0,w[6]=U,w[7]=0,w[8]=S,w):new Matrix3(S,0,U,0,1,0,-U,0,S)},Matrix3.fromRotationZ=function(x,w){de.typeOf.number("angle",x);const S=Math.cos(x),U=Math.sin(x);return ce(w)?(w[0]=S,w[1]=U,w[2]=0,w[3]=-U,w[4]=S,w[5]=0,w[6]=0,w[7]=0,w[8]=1,w):new Matrix3(S,-U,0,U,S,0,0,0,1)},Matrix3.toArray=function(x,w){return de.typeOf.object("matrix",x),ce(w)?(w[0]=x[0],w[1]=x[1],w[2]=x[2],w[3]=x[3],w[4]=x[4],w[5]=x[5],w[6]=x[6],w[7]=x[7],w[8]=x[8],w):[x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8]]},Matrix3.getElementIndex=function(x,w){return de.typeOf.number.greaterThanOrEquals("row",w,0),de.typeOf.number.lessThanOrEquals("row",w,2),de.typeOf.number.greaterThanOrEquals("column",x,0),de.typeOf.number.lessThanOrEquals("column",x,2),3*x+w},Matrix3.getColumn=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.number.greaterThanOrEquals("index",w,0),de.typeOf.number.lessThanOrEquals("index",w,2),de.typeOf.object("result",S);const U=3*w,G=x[U],z=x[U+1],H=x[U+2];return S.x=G,S.y=z,S.z=H,S},Matrix3.setColumn=function(x,w,S,U){de.typeOf.object("matrix",x),de.typeOf.number.greaterThanOrEquals("index",w,0),de.typeOf.number.lessThanOrEquals("index",w,2),de.typeOf.object("cartesian",S),de.typeOf.object("result",U);const G=3*w;return(U=Matrix3.clone(x,U))[G]=S.x,U[G+1]=S.y,U[G+2]=S.z,U},Matrix3.getRow=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.number.greaterThanOrEquals("index",w,0),de.typeOf.number.lessThanOrEquals("index",w,2),de.typeOf.object("result",S);const U=x[w],G=x[w+3],z=x[w+6];return S.x=U,S.y=G,S.z=z,S},Matrix3.setRow=function(x,w,S,U){return de.typeOf.object("matrix",x),de.typeOf.number.greaterThanOrEquals("index",w,0),de.typeOf.number.lessThanOrEquals("index",w,2),de.typeOf.object("cartesian",S),de.typeOf.object("result",U),(U=Matrix3.clone(x,U))[w]=S.x,U[w+3]=S.y,U[w+6]=S.z,U};const nt=new Ae;Matrix3.setScale=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.object("scale",w),de.typeOf.object("result",S);const U=Matrix3.getScale(x,nt),G=w.x/U.x,z=w.y/U.y,H=w.z/U.z;return S[0]=x[0]*G,S[1]=x[1]*G,S[2]=x[2]*G,S[3]=x[3]*z,S[4]=x[4]*z,S[5]=x[5]*z,S[6]=x[6]*H,S[7]=x[7]*H,S[8]=x[8]*H,S};const rt=new Ae;Matrix3.setUniformScale=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.number("scale",w),de.typeOf.object("result",S);const U=Matrix3.getScale(x,rt),G=w/U.x,z=w/U.y,H=w/U.z;return S[0]=x[0]*G,S[1]=x[1]*G,S[2]=x[2]*G,S[3]=x[3]*z,S[4]=x[4]*z,S[5]=x[5]*z,S[6]=x[6]*H,S[7]=x[7]*H,S[8]=x[8]*H,S};const it=new Ae;Matrix3.getScale=function(x,w){return de.typeOf.object("matrix",x),de.typeOf.object("result",w),w.x=Ae.magnitude(Ae.fromElements(x[0],x[1],x[2],it)),w.y=Ae.magnitude(Ae.fromElements(x[3],x[4],x[5],it)),w.z=Ae.magnitude(Ae.fromElements(x[6],x[7],x[8],it)),w};const ot=new Ae;Matrix3.getMaximumScale=function(x){return Matrix3.getScale(x,ot),Ae.maximumComponent(ot)};const at=new Ae;Matrix3.setRotation=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.object("result",S);const U=Matrix3.getScale(x,at);return S[0]=w[0]*U.x,S[1]=w[1]*U.x,S[2]=w[2]*U.x,S[3]=w[3]*U.y,S[4]=w[4]*U.y,S[5]=w[5]*U.y,S[6]=w[6]*U.z,S[7]=w[7]*U.z,S[8]=w[8]*U.z,S};const st=new Ae;Matrix3.getRotation=function(x,w){de.typeOf.object("matrix",x),de.typeOf.object("result",w);const S=Matrix3.getScale(x,st);return w[0]=x[0]/S.x,w[1]=x[1]/S.x,w[2]=x[2]/S.x,w[3]=x[3]/S.y,w[4]=x[4]/S.y,w[5]=x[5]/S.y,w[6]=x[6]/S.z,w[7]=x[7]/S.z,w[8]=x[8]/S.z,w},Matrix3.multiply=function(x,w,S){de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S);const U=x[0]*w[0]+x[3]*w[1]+x[6]*w[2],G=x[1]*w[0]+x[4]*w[1]+x[7]*w[2],z=x[2]*w[0]+x[5]*w[1]+x[8]*w[2],H=x[0]*w[3]+x[3]*w[4]+x[6]*w[5],j=x[1]*w[3]+x[4]*w[4]+x[7]*w[5],X=x[2]*w[3]+x[5]*w[4]+x[8]*w[5],q=x[0]*w[6]+x[3]*w[7]+x[6]*w[8],K=x[1]*w[6]+x[4]*w[7]+x[7]*w[8],Y=x[2]*w[6]+x[5]*w[7]+x[8]*w[8];return S[0]=U,S[1]=G,S[2]=z,S[3]=H,S[4]=j,S[5]=X,S[6]=q,S[7]=K,S[8]=Y,S},Matrix3.add=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S[0]=x[0]+w[0],S[1]=x[1]+w[1],S[2]=x[2]+w[2],S[3]=x[3]+w[3],S[4]=x[4]+w[4],S[5]=x[5]+w[5],S[6]=x[6]+w[6],S[7]=x[7]+w[7],S[8]=x[8]+w[8],S},Matrix3.subtract=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S[0]=x[0]-w[0],S[1]=x[1]-w[1],S[2]=x[2]-w[2],S[3]=x[3]-w[3],S[4]=x[4]-w[4],S[5]=x[5]-w[5],S[6]=x[6]-w[6],S[7]=x[7]-w[7],S[8]=x[8]-w[8],S},Matrix3.multiplyByVector=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.object("cartesian",w),de.typeOf.object("result",S);const U=w.x,G=w.y,z=w.z,H=x[0]*U+x[3]*G+x[6]*z,j=x[1]*U+x[4]*G+x[7]*z,X=x[2]*U+x[5]*G+x[8]*z;return S.x=H,S.y=j,S.z=X,S},Matrix3.multiplyByScalar=function(x,w,S){return de.typeOf.object("matrix",x),de.typeOf.number("scalar",w),de.typeOf.object("result",S),S[0]=x[0]*w,S[1]=x[1]*w,S[2]=x[2]*w,S[3]=x[3]*w,S[4]=x[4]*w,S[5]=x[5]*w,S[6]=x[6]*w,S[7]=x[7]*w,S[8]=x[8]*w,S},Matrix3.multiplyByScale=function(x,w,S){return de.typeOf.object("matrix",x),de.typeOf.object("scale",w),de.typeOf.object("result",S),S[0]=x[0]*w.x,S[1]=x[1]*w.x,S[2]=x[2]*w.x,S[3]=x[3]*w.y,S[4]=x[4]*w.y,S[5]=x[5]*w.y,S[6]=x[6]*w.z,S[7]=x[7]*w.z,S[8]=x[8]*w.z,S},Matrix3.multiplyByUniformScale=function(x,w,S){return de.typeOf.object("matrix",x),de.typeOf.number("scale",w),de.typeOf.object("result",S),S[0]=x[0]*w,S[1]=x[1]*w,S[2]=x[2]*w,S[3]=x[3]*w,S[4]=x[4]*w,S[5]=x[5]*w,S[6]=x[6]*w,S[7]=x[7]*w,S[8]=x[8]*w,S},Matrix3.negate=function(x,w){return de.typeOf.object("matrix",x),de.typeOf.object("result",w),w[0]=-x[0],w[1]=-x[1],w[2]=-x[2],w[3]=-x[3],w[4]=-x[4],w[5]=-x[5],w[6]=-x[6],w[7]=-x[7],w[8]=-x[8],w},Matrix3.transpose=function(x,w){de.typeOf.object("matrix",x),de.typeOf.object("result",w);const S=x[0],U=x[3],G=x[6],z=x[1],H=x[4],j=x[7],X=x[2],q=x[5],K=x[8];return w[0]=S,w[1]=U,w[2]=G,w[3]=z,w[4]=H,w[5]=j,w[6]=X,w[7]=q,w[8]=K,w};const lt=[1,0,0],ct=[2,2,1];function offDiagonalFrobeniusNorm(x){let w=0;for(let S=0;S<3;++S){const U=x[Matrix3.getElementIndex(ct[S],lt[S])];w+=2*U*U}return Math.sqrt(w)}function shurDecomposition(x,w){const S=ye.EPSILON15;let U=0,G=1;for(let w=0;w<3;++w){const S=Math.abs(x[Matrix3.getElementIndex(ct[w],lt[w])]);S>U&&(G=w,U=S)}let z=1,H=0;const j=lt[G],X=ct[G];if(Math.abs(x[Matrix3.getElementIndex(X,j)])>S){const w=(x[Matrix3.getElementIndex(X,X)]-x[Matrix3.getElementIndex(j,j)])/2/x[Matrix3.getElementIndex(X,j)];let S;S=w<0?-1/(-w+Math.sqrt(1+w*w)):1/(w+Math.sqrt(1+w*w)),z=1/Math.sqrt(1+S*S),H=S*z}return(w=Matrix3.clone(Matrix3.IDENTITY,w))[Matrix3.getElementIndex(j,j)]=w[Matrix3.getElementIndex(X,X)]=z,w[Matrix3.getElementIndex(X,j)]=H,w[Matrix3.getElementIndex(j,X)]=-H,w}const ut=new Matrix3,ht=new Matrix3;Matrix3.computeEigenDecomposition=function(x,w){de.typeOf.object("matrix",x);const S=ye.EPSILON20;let U=0,G=0;ce(w)||(w={});const z=w.unitary=Matrix3.clone(Matrix3.IDENTITY,w.unitary),H=w.diagonal=Matrix3.clone(x,w.diagonal),j=S*function computeFrobeniusNorm(x){let w=0;for(let S=0;S<9;++S){const U=x[S];w+=U*U}return Math.sqrt(w)}(H);for(;G<10&&offDiagonalFrobeniusNorm(H)>j;)shurDecomposition(H,ut),Matrix3.transpose(ut,ht),Matrix3.multiply(H,ut,H),Matrix3.multiply(ht,H,H),Matrix3.multiply(z,ut,z),++U>2&&(++G,U=0);return w},Matrix3.abs=function(x,w){return de.typeOf.object("matrix",x),de.typeOf.object("result",w),w[0]=Math.abs(x[0]),w[1]=Math.abs(x[1]),w[2]=Math.abs(x[2]),w[3]=Math.abs(x[3]),w[4]=Math.abs(x[4]),w[5]=Math.abs(x[5]),w[6]=Math.abs(x[6]),w[7]=Math.abs(x[7]),w[8]=Math.abs(x[8]),w},Matrix3.determinant=function(x){de.typeOf.object("matrix",x);const w=x[0],S=x[3],U=x[6],G=x[1],z=x[4],H=x[7],j=x[2],X=x[5],q=x[8];return w*(z*q-X*H)+G*(X*U-S*q)+j*(S*H-z*U)},Matrix3.inverse=function(x,w){de.typeOf.object("matrix",x),de.typeOf.object("result",w);const S=x[0],U=x[1],G=x[2],z=x[3],H=x[4],j=x[5],X=x[6],q=x[7],K=x[8],Y=Matrix3.determinant(x);if(Math.abs(Y)<=ye.EPSILON15)throw new ue("matrix is not invertible");w[0]=H*K-q*j,w[1]=q*G-U*K,w[2]=U*j-H*G,w[3]=X*j-z*K,w[4]=S*K-X*G,w[5]=z*G-S*j,w[6]=z*q-X*H,w[7]=X*U-S*q,w[8]=S*H-z*U;const Z=1/Y;return Matrix3.multiplyByScalar(w,Z,w)};const pt=new Matrix3;Matrix3.inverseTranspose=function(x,w){return de.typeOf.object("matrix",x),de.typeOf.object("result",w),Matrix3.inverse(Matrix3.transpose(x,pt),w)},Matrix3.equals=function(x,w){return x===w||ce(x)&&ce(w)&&x[0]===w[0]&&x[1]===w[1]&&x[2]===w[2]&&x[3]===w[3]&&x[4]===w[4]&&x[5]===w[5]&&x[6]===w[6]&&x[7]===w[7]&&x[8]===w[8]},Matrix3.equalsEpsilon=function(x,w,S){return S=pe(S,0),x===w||ce(x)&&ce(w)&&Math.abs(x[0]-w[0])<=S&&Math.abs(x[1]-w[1])<=S&&Math.abs(x[2]-w[2])<=S&&Math.abs(x[3]-w[3])<=S&&Math.abs(x[4]-w[4])<=S&&Math.abs(x[5]-w[5])<=S&&Math.abs(x[6]-w[6])<=S&&Math.abs(x[7]-w[7])<=S&&Math.abs(x[8]-w[8])<=S},Matrix3.IDENTITY=Object.freeze(new Matrix3(1,0,0,0,1,0,0,0,1)),Matrix3.ZERO=Object.freeze(new Matrix3(0,0,0,0,0,0,0,0,0)),Matrix3.COLUMN0ROW0=0,Matrix3.COLUMN0ROW1=1,Matrix3.COLUMN0ROW2=2,Matrix3.COLUMN1ROW0=3,Matrix3.COLUMN1ROW1=4,Matrix3.COLUMN1ROW2=5,Matrix3.COLUMN2ROW0=6,Matrix3.COLUMN2ROW1=7,Matrix3.COLUMN2ROW2=8,Object.defineProperties(Matrix3.prototype,{length:{get:function(){return Matrix3.packedLength}}}),Matrix3.prototype.clone=function(x){return Matrix3.clone(this,x)},Matrix3.prototype.equals=function(x){return Matrix3.equals(this,x)},Matrix3.equalsArray=function(x,w,S){return x[0]===w[S]&&x[1]===w[S+1]&&x[2]===w[S+2]&&x[3]===w[S+3]&&x[4]===w[S+4]&&x[5]===w[S+5]&&x[6]===w[S+6]&&x[7]===w[S+7]&&x[8]===w[S+8]},Matrix3.prototype.equalsEpsilon=function(x,w){return Matrix3.equalsEpsilon(this,x,w)},Matrix3.prototype.toString=function(){return`(${this[0]}, ${this[3]}, ${this[6]})\n(${this[1]}, ${this[4]}, ${this[7]})\n(${this[2]}, ${this[5]}, ${this[8]})`};const ft=Matrix3;function Cartesian4(x,w,S,U){this.x=pe(x,0),this.y=pe(w,0),this.z=pe(S,0),this.w=pe(U,0)}Cartesian4.fromElements=function(x,w,S,U,G){return ce(G)?(G.x=x,G.y=w,G.z=S,G.w=U,G):new Cartesian4(x,w,S,U)},Cartesian4.fromColor=function(x,w){return de.typeOf.object("color",x),ce(w)?(w.x=x.red,w.y=x.green,w.z=x.blue,w.w=x.alpha,w):new Cartesian4(x.red,x.green,x.blue,x.alpha)},Cartesian4.clone=function(x,w){if(ce(x))return ce(w)?(w.x=x.x,w.y=x.y,w.z=x.z,w.w=x.w,w):new Cartesian4(x.x,x.y,x.z,x.w)},Cartesian4.packedLength=4,Cartesian4.pack=function(x,w,S){return de.typeOf.object("value",x),de.defined("array",w),S=pe(S,0),w[S++]=x.x,w[S++]=x.y,w[S++]=x.z,w[S]=x.w,w},Cartesian4.unpack=function(x,w,S){return de.defined("array",x),w=pe(w,0),ce(S)||(S=new Cartesian4),S.x=x[w++],S.y=x[w++],S.z=x[w++],S.w=x[w],S},Cartesian4.packArray=function(x,w){de.defined("array",x);const S=x.length,U=4*S;if(ce(w)){if(!Array.isArray(w)&&w.length!==U)throw new ue("If result is a typed array, it must have exactly array.length * 4 elements");w.length!==U&&(w.length=U)}else w=new Array(U);for(let U=0;U<S;++U)Cartesian4.pack(x[U],w,4*U);return w},Cartesian4.unpackArray=function(x,w){if(de.defined("array",x),de.typeOf.number.greaterThanOrEquals("array.length",x.length,4),x.length%4!=0)throw new ue("array length must be a multiple of 4.");const S=x.length;ce(w)?w.length=S/4:w=new Array(S/4);for(let U=0;U<S;U+=4){const S=U/4;w[S]=Cartesian4.unpack(x,U,w[S])}return w},Cartesian4.fromArray=Cartesian4.unpack,Cartesian4.maximumComponent=function(x){return de.typeOf.object("cartesian",x),Math.max(x.x,x.y,x.z,x.w)},Cartesian4.minimumComponent=function(x){return de.typeOf.object("cartesian",x),Math.min(x.x,x.y,x.z,x.w)},Cartesian4.minimumByComponent=function(x,w,S){return de.typeOf.object("first",x),de.typeOf.object("second",w),de.typeOf.object("result",S),S.x=Math.min(x.x,w.x),S.y=Math.min(x.y,w.y),S.z=Math.min(x.z,w.z),S.w=Math.min(x.w,w.w),S},Cartesian4.maximumByComponent=function(x,w,S){return de.typeOf.object("first",x),de.typeOf.object("second",w),de.typeOf.object("result",S),S.x=Math.max(x.x,w.x),S.y=Math.max(x.y,w.y),S.z=Math.max(x.z,w.z),S.w=Math.max(x.w,w.w),S},Cartesian4.clamp=function(x,w,S,U){de.typeOf.object("value",x),de.typeOf.object("min",w),de.typeOf.object("max",S),de.typeOf.object("result",U);const G=ye.clamp(x.x,w.x,S.x),z=ye.clamp(x.y,w.y,S.y),H=ye.clamp(x.z,w.z,S.z),j=ye.clamp(x.w,w.w,S.w);return U.x=G,U.y=z,U.z=H,U.w=j,U},Cartesian4.magnitudeSquared=function(x){return de.typeOf.object("cartesian",x),x.x*x.x+x.y*x.y+x.z*x.z+x.w*x.w},Cartesian4.magnitude=function(x){return Math.sqrt(Cartesian4.magnitudeSquared(x))};const mt=new Cartesian4;Cartesian4.distance=function(x,w){return de.typeOf.object("left",x),de.typeOf.object("right",w),Cartesian4.subtract(x,w,mt),Cartesian4.magnitude(mt)},Cartesian4.distanceSquared=function(x,w){return de.typeOf.object("left",x),de.typeOf.object("right",w),Cartesian4.subtract(x,w,mt),Cartesian4.magnitudeSquared(mt)},Cartesian4.normalize=function(x,w){de.typeOf.object("cartesian",x),de.typeOf.object("result",w);const S=Cartesian4.magnitude(x);if(w.x=x.x/S,w.y=x.y/S,w.z=x.z/S,w.w=x.w/S,isNaN(w.x)||isNaN(w.y)||isNaN(w.z)||isNaN(w.w))throw new ue("normalized result is not a number");return w},Cartesian4.dot=function(x,w){return de.typeOf.object("left",x),de.typeOf.object("right",w),x.x*w.x+x.y*w.y+x.z*w.z+x.w*w.w},Cartesian4.multiplyComponents=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S.x=x.x*w.x,S.y=x.y*w.y,S.z=x.z*w.z,S.w=x.w*w.w,S},Cartesian4.divideComponents=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S.x=x.x/w.x,S.y=x.y/w.y,S.z=x.z/w.z,S.w=x.w/w.w,S},Cartesian4.add=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S.x=x.x+w.x,S.y=x.y+w.y,S.z=x.z+w.z,S.w=x.w+w.w,S},Cartesian4.subtract=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S.x=x.x-w.x,S.y=x.y-w.y,S.z=x.z-w.z,S.w=x.w-w.w,S},Cartesian4.multiplyByScalar=function(x,w,S){return de.typeOf.object("cartesian",x),de.typeOf.number("scalar",w),de.typeOf.object("result",S),S.x=x.x*w,S.y=x.y*w,S.z=x.z*w,S.w=x.w*w,S},Cartesian4.divideByScalar=function(x,w,S){return de.typeOf.object("cartesian",x),de.typeOf.number("scalar",w),de.typeOf.object("result",S),S.x=x.x/w,S.y=x.y/w,S.z=x.z/w,S.w=x.w/w,S},Cartesian4.negate=function(x,w){return de.typeOf.object("cartesian",x),de.typeOf.object("result",w),w.x=-x.x,w.y=-x.y,w.z=-x.z,w.w=-x.w,w},Cartesian4.abs=function(x,w){return de.typeOf.object("cartesian",x),de.typeOf.object("result",w),w.x=Math.abs(x.x),w.y=Math.abs(x.y),w.z=Math.abs(x.z),w.w=Math.abs(x.w),w};const gt=new Cartesian4;Cartesian4.lerp=function(x,w,S,U){return de.typeOf.object("start",x),de.typeOf.object("end",w),de.typeOf.number("t",S),de.typeOf.object("result",U),Cartesian4.multiplyByScalar(w,S,gt),U=Cartesian4.multiplyByScalar(x,1-S,U),Cartesian4.add(gt,U,U)};const vt=new Cartesian4;Cartesian4.mostOrthogonalAxis=function(x,w){de.typeOf.object("cartesian",x),de.typeOf.object("result",w);const S=Cartesian4.normalize(x,vt);return Cartesian4.abs(S,S),w=S.x<=S.y?S.x<=S.z?S.x<=S.w?Cartesian4.clone(Cartesian4.UNIT_X,w):Cartesian4.clone(Cartesian4.UNIT_W,w):S.z<=S.w?Cartesian4.clone(Cartesian4.UNIT_Z,w):Cartesian4.clone(Cartesian4.UNIT_W,w):S.y<=S.z?S.y<=S.w?Cartesian4.clone(Cartesian4.UNIT_Y,w):Cartesian4.clone(Cartesian4.UNIT_W,w):S.z<=S.w?Cartesian4.clone(Cartesian4.UNIT_Z,w):Cartesian4.clone(Cartesian4.UNIT_W,w)},Cartesian4.equals=function(x,w){return x===w||ce(x)&&ce(w)&&x.x===w.x&&x.y===w.y&&x.z===w.z&&x.w===w.w},Cartesian4.equalsArray=function(x,w,S){return x.x===w[S]&&x.y===w[S+1]&&x.z===w[S+2]&&x.w===w[S+3]},Cartesian4.equalsEpsilon=function(x,w,S,U){return x===w||ce(x)&&ce(w)&&ye.equalsEpsilon(x.x,w.x,S,U)&&ye.equalsEpsilon(x.y,w.y,S,U)&&ye.equalsEpsilon(x.z,w.z,S,U)&&ye.equalsEpsilon(x.w,w.w,S,U)},Cartesian4.ZERO=Object.freeze(new Cartesian4(0,0,0,0)),Cartesian4.ONE=Object.freeze(new Cartesian4(1,1,1,1)),Cartesian4.UNIT_X=Object.freeze(new Cartesian4(1,0,0,0)),Cartesian4.UNIT_Y=Object.freeze(new Cartesian4(0,1,0,0)),Cartesian4.UNIT_Z=Object.freeze(new Cartesian4(0,0,1,0)),Cartesian4.UNIT_W=Object.freeze(new Cartesian4(0,0,0,1)),Cartesian4.prototype.clone=function(x){return Cartesian4.clone(this,x)},Cartesian4.prototype.equals=function(x){return Cartesian4.equals(this,x)},Cartesian4.prototype.equalsEpsilon=function(x,w,S){return Cartesian4.equalsEpsilon(this,x,w,S)},Cartesian4.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};const yt=new Float32Array(1),_t=new Uint8Array(yt.buffer),bt=new Uint32Array([287454020]),xt=68===new Uint8Array(bt.buffer)[0];Cartesian4.packFloat=function(x,w){return de.typeOf.number("value",x),ce(w)||(w=new Cartesian4),yt[0]=x,xt?(w.x=_t[0],w.y=_t[1],w.z=_t[2],w.w=_t[3]):(w.x=_t[3],w.y=_t[2],w.z=_t[1],w.w=_t[0]),w},Cartesian4.unpackFloat=function(x){return de.typeOf.object("packedFloat",x),xt?(_t[0]=x.x,_t[1]=x.y,_t[2]=x.z,_t[3]=x.w):(_t[0]=x.w,_t[1]=x.z,_t[2]=x.y,_t[3]=x.x),yt[0]};const Et=Cartesian4;function RuntimeError(x){let w;this.name="RuntimeError",this.message=x;try{throw new Error}catch(x){w=x.stack}this.stack=w}ce(Object.create)&&(RuntimeError.prototype=Object.create(Error.prototype),RuntimeError.prototype.constructor=RuntimeError),RuntimeError.prototype.toString=function(){let x=`${this.name}: ${this.message}`;return ce(this.stack)&&(x+=`\n${this.stack.toString()}`),x};const wt=RuntimeError;function Matrix4(x,w,S,U,G,z,H,j,X,q,K,Y,Z,J,Q,ee){this[0]=pe(x,0),this[1]=pe(G,0),this[2]=pe(X,0),this[3]=pe(Z,0),this[4]=pe(w,0),this[5]=pe(z,0),this[6]=pe(q,0),this[7]=pe(J,0),this[8]=pe(S,0),this[9]=pe(H,0),this[10]=pe(K,0),this[11]=pe(Q,0),this[12]=pe(U,0),this[13]=pe(j,0),this[14]=pe(Y,0),this[15]=pe(ee,0)}Matrix4.packedLength=16,Matrix4.pack=function(x,w,S){return de.typeOf.object("value",x),de.defined("array",w),S=pe(S,0),w[S++]=x[0],w[S++]=x[1],w[S++]=x[2],w[S++]=x[3],w[S++]=x[4],w[S++]=x[5],w[S++]=x[6],w[S++]=x[7],w[S++]=x[8],w[S++]=x[9],w[S++]=x[10],w[S++]=x[11],w[S++]=x[12],w[S++]=x[13],w[S++]=x[14],w[S]=x[15],w},Matrix4.unpack=function(x,w,S){return de.defined("array",x),w=pe(w,0),ce(S)||(S=new Matrix4),S[0]=x[w++],S[1]=x[w++],S[2]=x[w++],S[3]=x[w++],S[4]=x[w++],S[5]=x[w++],S[6]=x[w++],S[7]=x[w++],S[8]=x[w++],S[9]=x[w++],S[10]=x[w++],S[11]=x[w++],S[12]=x[w++],S[13]=x[w++],S[14]=x[w++],S[15]=x[w],S},Matrix4.packArray=function(x,w){de.defined("array",x);const S=x.length,U=16*S;if(ce(w)){if(!Array.isArray(w)&&w.length!==U)throw new ue("If result is a typed array, it must have exactly array.length * 16 elements");w.length!==U&&(w.length=U)}else w=new Array(U);for(let U=0;U<S;++U)Matrix4.pack(x[U],w,16*U);return w},Matrix4.unpackArray=function(x,w){if(de.defined("array",x),de.typeOf.number.greaterThanOrEquals("array.length",x.length,16),x.length%16!=0)throw new ue("array length must be a multiple of 16.");const S=x.length;ce(w)?w.length=S/16:w=new Array(S/16);for(let U=0;U<S;U+=16){const S=U/16;w[S]=Matrix4.unpack(x,U,w[S])}return w},Matrix4.clone=function(x,w){if(ce(x))return ce(w)?(w[0]=x[0],w[1]=x[1],w[2]=x[2],w[3]=x[3],w[4]=x[4],w[5]=x[5],w[6]=x[6],w[7]=x[7],w[8]=x[8],w[9]=x[9],w[10]=x[10],w[11]=x[11],w[12]=x[12],w[13]=x[13],w[14]=x[14],w[15]=x[15],w):new Matrix4(x[0],x[4],x[8],x[12],x[1],x[5],x[9],x[13],x[2],x[6],x[10],x[14],x[3],x[7],x[11],x[15])},Matrix4.fromArray=Matrix4.unpack,Matrix4.fromColumnMajorArray=function(x,w){return de.defined("values",x),Matrix4.clone(x,w)},Matrix4.fromRowMajorArray=function(x,w){return de.defined("values",x),ce(w)?(w[0]=x[0],w[1]=x[4],w[2]=x[8],w[3]=x[12],w[4]=x[1],w[5]=x[5],w[6]=x[9],w[7]=x[13],w[8]=x[2],w[9]=x[6],w[10]=x[10],w[11]=x[14],w[12]=x[3],w[13]=x[7],w[14]=x[11],w[15]=x[15],w):new Matrix4(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15])},Matrix4.fromRotationTranslation=function(x,w,S){return de.typeOf.object("rotation",x),w=pe(w,Ae.ZERO),ce(S)?(S[0]=x[0],S[1]=x[1],S[2]=x[2],S[3]=0,S[4]=x[3],S[5]=x[4],S[6]=x[5],S[7]=0,S[8]=x[6],S[9]=x[7],S[10]=x[8],S[11]=0,S[12]=w.x,S[13]=w.y,S[14]=w.z,S[15]=1,S):new Matrix4(x[0],x[3],x[6],w.x,x[1],x[4],x[7],w.y,x[2],x[5],x[8],w.z,0,0,0,1)},Matrix4.fromTranslationQuaternionRotationScale=function(x,w,S,U){de.typeOf.object("translation",x),de.typeOf.object("rotation",w),de.typeOf.object("scale",S),ce(U)||(U=new Matrix4);const G=S.x,z=S.y,H=S.z,j=w.x*w.x,X=w.x*w.y,q=w.x*w.z,K=w.x*w.w,Y=w.y*w.y,Z=w.y*w.z,J=w.y*w.w,Q=w.z*w.z,ee=w.z*w.w,te=w.w*w.w,ne=j-Y-Q+te,re=2*(X-ee),ie=2*(q+J),oe=2*(X+ee),ae=-j+Y-Q+te,se=2*(Z-K),le=2*(q-J),ue=2*(Z+K),he=-j-Y+Q+te;return U[0]=ne*G,U[1]=oe*G,U[2]=le*G,U[3]=0,U[4]=re*z,U[5]=ae*z,U[6]=ue*z,U[7]=0,U[8]=ie*H,U[9]=se*H,U[10]=he*H,U[11]=0,U[12]=x.x,U[13]=x.y,U[14]=x.z,U[15]=1,U},Matrix4.fromTranslationRotationScale=function(x,w){return de.typeOf.object("translationRotationScale",x),Matrix4.fromTranslationQuaternionRotationScale(x.translation,x.rotation,x.scale,w)},Matrix4.fromTranslation=function(x,w){return de.typeOf.object("translation",x),Matrix4.fromRotationTranslation(ft.IDENTITY,x,w)},Matrix4.fromScale=function(x,w){return de.typeOf.object("scale",x),ce(w)?(w[0]=x.x,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=x.y,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=x.z,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w):new Matrix4(x.x,0,0,0,0,x.y,0,0,0,0,x.z,0,0,0,0,1)},Matrix4.fromUniformScale=function(x,w){return de.typeOf.number("scale",x),ce(w)?(w[0]=x,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=x,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=x,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w):new Matrix4(x,0,0,0,0,x,0,0,0,0,x,0,0,0,0,1)},Matrix4.fromRotation=function(x,w){return de.typeOf.object("rotation",x),ce(w)||(w=new Matrix4),w[0]=x[0],w[1]=x[1],w[2]=x[2],w[3]=0,w[4]=x[3],w[5]=x[4],w[6]=x[5],w[7]=0,w[8]=x[6],w[9]=x[7],w[10]=x[8],w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w};const St=new Ae,Tt=new Ae,Ct=new Ae;Matrix4.fromCamera=function(x,w){de.typeOf.object("camera",x);const S=x.position,U=x.direction,G=x.up;de.typeOf.object("camera.position",S),de.typeOf.object("camera.direction",U),de.typeOf.object("camera.up",G),Ae.normalize(U,St),Ae.normalize(Ae.cross(St,G,Tt),Tt),Ae.normalize(Ae.cross(Tt,St,Ct),Ct);const z=Tt.x,H=Tt.y,j=Tt.z,X=St.x,q=St.y,K=St.z,Y=Ct.x,Z=Ct.y,J=Ct.z,Q=S.x,ee=S.y,te=S.z,ne=z*-Q+H*-ee+j*-te,re=Y*-Q+Z*-ee+J*-te,ie=X*Q+q*ee+K*te;return ce(w)?(w[0]=z,w[1]=Y,w[2]=-X,w[3]=0,w[4]=H,w[5]=Z,w[6]=-q,w[7]=0,w[8]=j,w[9]=J,w[10]=-K,w[11]=0,w[12]=ne,w[13]=re,w[14]=ie,w[15]=1,w):new Matrix4(z,H,j,ne,Y,Z,J,re,-X,-q,-K,ie,0,0,0,1)},Matrix4.computePerspectiveFieldOfView=function(x,w,S,U,G){de.typeOf.number.greaterThan("fovY",x,0),de.typeOf.number.lessThan("fovY",x,Math.PI),de.typeOf.number.greaterThan("near",S,0),de.typeOf.number.greaterThan("far",U,0),de.typeOf.object("result",G);const z=1/Math.tan(.5*x),H=z/w,j=(U+S)/(S-U),X=2*U*S/(S-U);return G[0]=H,G[1]=0,G[2]=0,G[3]=0,G[4]=0,G[5]=z,G[6]=0,G[7]=0,G[8]=0,G[9]=0,G[10]=j,G[11]=-1,G[12]=0,G[13]=0,G[14]=X,G[15]=0,G},Matrix4.computeOrthographicOffCenter=function(x,w,S,U,G,z,H){de.typeOf.number("left",x),de.typeOf.number("right",w),de.typeOf.number("bottom",S),de.typeOf.number("top",U),de.typeOf.number("near",G),de.typeOf.number("far",z),de.typeOf.object("result",H);let j=1/(w-x),X=1/(U-S),q=1/(z-G);const K=-(w+x)*j,Y=-(U+S)*X,Z=-(z+G)*q;return j*=2,X*=2,q*=-2,H[0]=j,H[1]=0,H[2]=0,H[3]=0,H[4]=0,H[5]=X,H[6]=0,H[7]=0,H[8]=0,H[9]=0,H[10]=q,H[11]=0,H[12]=K,H[13]=Y,H[14]=Z,H[15]=1,H},Matrix4.computePerspectiveOffCenter=function(x,w,S,U,G,z,H){de.typeOf.number("left",x),de.typeOf.number("right",w),de.typeOf.number("bottom",S),de.typeOf.number("top",U),de.typeOf.number("near",G),de.typeOf.number("far",z),de.typeOf.object("result",H);const j=2*G/(w-x),X=2*G/(U-S),q=(w+x)/(w-x),K=(U+S)/(U-S),Y=-(z+G)/(z-G),Z=-2*z*G/(z-G);return H[0]=j,H[1]=0,H[2]=0,H[3]=0,H[4]=0,H[5]=X,H[6]=0,H[7]=0,H[8]=q,H[9]=K,H[10]=Y,H[11]=-1,H[12]=0,H[13]=0,H[14]=Z,H[15]=0,H},Matrix4.computeInfinitePerspectiveOffCenter=function(x,w,S,U,G,z){de.typeOf.number("left",x),de.typeOf.number("right",w),de.typeOf.number("bottom",S),de.typeOf.number("top",U),de.typeOf.number("near",G),de.typeOf.object("result",z);const H=2*G/(w-x),j=2*G/(U-S),X=(w+x)/(w-x),q=(U+S)/(U-S),K=-2*G;return z[0]=H,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=j,z[6]=0,z[7]=0,z[8]=X,z[9]=q,z[10]=-1,z[11]=-1,z[12]=0,z[13]=0,z[14]=K,z[15]=0,z},Matrix4.computeViewportTransformation=function(x,w,S,U){ce(U)||(U=new Matrix4),x=pe(x,pe.EMPTY_OBJECT);const G=pe(x.x,0),z=pe(x.y,0),H=pe(x.width,0),j=pe(x.height,0);w=pe(w,0);const X=.5*H,q=.5*j,K=.5*((S=pe(S,1))-w),Y=X,Z=q,J=K,Q=G+X,ee=z+q,te=w+K;return U[0]=Y,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=Z,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=J,U[11]=0,U[12]=Q,U[13]=ee,U[14]=te,U[15]=1,U},Matrix4.computeView=function(x,w,S,U,G){return de.typeOf.object("position",x),de.typeOf.object("direction",w),de.typeOf.object("up",S),de.typeOf.object("right",U),de.typeOf.object("result",G),G[0]=U.x,G[1]=S.x,G[2]=-w.x,G[3]=0,G[4]=U.y,G[5]=S.y,G[6]=-w.y,G[7]=0,G[8]=U.z,G[9]=S.z,G[10]=-w.z,G[11]=0,G[12]=-Ae.dot(U,x),G[13]=-Ae.dot(S,x),G[14]=Ae.dot(w,x),G[15]=1,G},Matrix4.toArray=function(x,w){return de.typeOf.object("matrix",x),ce(w)?(w[0]=x[0],w[1]=x[1],w[2]=x[2],w[3]=x[3],w[4]=x[4],w[5]=x[5],w[6]=x[6],w[7]=x[7],w[8]=x[8],w[9]=x[9],w[10]=x[10],w[11]=x[11],w[12]=x[12],w[13]=x[13],w[14]=x[14],w[15]=x[15],w):[x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15]]},Matrix4.getElementIndex=function(x,w){return de.typeOf.number.greaterThanOrEquals("row",w,0),de.typeOf.number.lessThanOrEquals("row",w,3),de.typeOf.number.greaterThanOrEquals("column",x,0),de.typeOf.number.lessThanOrEquals("column",x,3),4*x+w},Matrix4.getColumn=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.number.greaterThanOrEquals("index",w,0),de.typeOf.number.lessThanOrEquals("index",w,3),de.typeOf.object("result",S);const U=4*w,G=x[U],z=x[U+1],H=x[U+2],j=x[U+3];return S.x=G,S.y=z,S.z=H,S.w=j,S},Matrix4.setColumn=function(x,w,S,U){de.typeOf.object("matrix",x),de.typeOf.number.greaterThanOrEquals("index",w,0),de.typeOf.number.lessThanOrEquals("index",w,3),de.typeOf.object("cartesian",S),de.typeOf.object("result",U);const G=4*w;return(U=Matrix4.clone(x,U))[G]=S.x,U[G+1]=S.y,U[G+2]=S.z,U[G+3]=S.w,U},Matrix4.getRow=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.number.greaterThanOrEquals("index",w,0),de.typeOf.number.lessThanOrEquals("index",w,3),de.typeOf.object("result",S);const U=x[w],G=x[w+4],z=x[w+8],H=x[w+12];return S.x=U,S.y=G,S.z=z,S.w=H,S},Matrix4.setRow=function(x,w,S,U){return de.typeOf.object("matrix",x),de.typeOf.number.greaterThanOrEquals("index",w,0),de.typeOf.number.lessThanOrEquals("index",w,3),de.typeOf.object("cartesian",S),de.typeOf.object("result",U),(U=Matrix4.clone(x,U))[w]=S.x,U[w+4]=S.y,U[w+8]=S.z,U[w+12]=S.w,U},Matrix4.setTranslation=function(x,w,S){return de.typeOf.object("matrix",x),de.typeOf.object("translation",w),de.typeOf.object("result",S),S[0]=x[0],S[1]=x[1],S[2]=x[2],S[3]=x[3],S[4]=x[4],S[5]=x[5],S[6]=x[6],S[7]=x[7],S[8]=x[8],S[9]=x[9],S[10]=x[10],S[11]=x[11],S[12]=w.x,S[13]=w.y,S[14]=w.z,S[15]=x[15],S};const At=new Ae;Matrix4.setScale=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.object("scale",w),de.typeOf.object("result",S);const U=Matrix4.getScale(x,At),G=w.x/U.x,z=w.y/U.y,H=w.z/U.z;return S[0]=x[0]*G,S[1]=x[1]*G,S[2]=x[2]*G,S[3]=x[3],S[4]=x[4]*z,S[5]=x[5]*z,S[6]=x[6]*z,S[7]=x[7],S[8]=x[8]*H,S[9]=x[9]*H,S[10]=x[10]*H,S[11]=x[11],S[12]=x[12],S[13]=x[13],S[14]=x[14],S[15]=x[15],S};const Mt=new Ae;Matrix4.setUniformScale=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.number("scale",w),de.typeOf.object("result",S);const U=Matrix4.getScale(x,Mt),G=w/U.x,z=w/U.y,H=w/U.z;return S[0]=x[0]*G,S[1]=x[1]*G,S[2]=x[2]*G,S[3]=x[3],S[4]=x[4]*z,S[5]=x[5]*z,S[6]=x[6]*z,S[7]=x[7],S[8]=x[8]*H,S[9]=x[9]*H,S[10]=x[10]*H,S[11]=x[11],S[12]=x[12],S[13]=x[13],S[14]=x[14],S[15]=x[15],S};const Rt=new Ae;Matrix4.getScale=function(x,w){return de.typeOf.object("matrix",x),de.typeOf.object("result",w),w.x=Ae.magnitude(Ae.fromElements(x[0],x[1],x[2],Rt)),w.y=Ae.magnitude(Ae.fromElements(x[4],x[5],x[6],Rt)),w.z=Ae.magnitude(Ae.fromElements(x[8],x[9],x[10],Rt)),w};const Lt=new Ae;Matrix4.getMaximumScale=function(x){return Matrix4.getScale(x,Lt),Ae.maximumComponent(Lt)};const Pt=new Ae;Matrix4.setRotation=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.object("result",S);const U=Matrix4.getScale(x,Pt);return S[0]=w[0]*U.x,S[1]=w[1]*U.x,S[2]=w[2]*U.x,S[3]=x[3],S[4]=w[3]*U.y,S[5]=w[4]*U.y,S[6]=w[5]*U.y,S[7]=x[7],S[8]=w[6]*U.z,S[9]=w[7]*U.z,S[10]=w[8]*U.z,S[11]=x[11],S[12]=x[12],S[13]=x[13],S[14]=x[14],S[15]=x[15],S};const It=new Ae;Matrix4.getRotation=function(x,w){de.typeOf.object("matrix",x),de.typeOf.object("result",w);const S=Matrix4.getScale(x,It);return w[0]=x[0]/S.x,w[1]=x[1]/S.x,w[2]=x[2]/S.x,w[3]=x[4]/S.y,w[4]=x[5]/S.y,w[5]=x[6]/S.y,w[6]=x[8]/S.z,w[7]=x[9]/S.z,w[8]=x[10]/S.z,w},Matrix4.multiply=function(x,w,S){de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S);const U=x[0],G=x[1],z=x[2],H=x[3],j=x[4],X=x[5],q=x[6],K=x[7],Y=x[8],Z=x[9],J=x[10],Q=x[11],ee=x[12],te=x[13],ne=x[14],re=x[15],ie=w[0],oe=w[1],ae=w[2],se=w[3],le=w[4],ce=w[5],ue=w[6],he=w[7],pe=w[8],fe=w[9],me=w[10],ge=w[11],ve=w[12],ye=w[13],_e=w[14],be=w[15],xe=U*ie+j*oe+Y*ae+ee*se,Ee=G*ie+X*oe+Z*ae+te*se,we=z*ie+q*oe+J*ae+ne*se,Se=H*ie+K*oe+Q*ae+re*se,Te=U*le+j*ce+Y*ue+ee*he,Ce=G*le+X*ce+Z*ue+te*he,Ae=z*le+q*ce+J*ue+ne*he,Me=H*le+K*ce+Q*ue+re*he,Re=U*pe+j*fe+Y*me+ee*ge,Le=G*pe+X*fe+Z*me+te*ge,Oe=z*pe+q*fe+J*me+ne*ge,Pe=H*pe+K*fe+Q*me+re*ge,Ie=U*ve+j*ye+Y*_e+ee*be,Ne=G*ve+X*ye+Z*_e+te*be,Fe=z*ve+q*ye+J*_e+ne*be,Be=H*ve+K*ye+Q*_e+re*be;return S[0]=xe,S[1]=Ee,S[2]=we,S[3]=Se,S[4]=Te,S[5]=Ce,S[6]=Ae,S[7]=Me,S[8]=Re,S[9]=Le,S[10]=Oe,S[11]=Pe,S[12]=Ie,S[13]=Ne,S[14]=Fe,S[15]=Be,S},Matrix4.add=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S[0]=x[0]+w[0],S[1]=x[1]+w[1],S[2]=x[2]+w[2],S[3]=x[3]+w[3],S[4]=x[4]+w[4],S[5]=x[5]+w[5],S[6]=x[6]+w[6],S[7]=x[7]+w[7],S[8]=x[8]+w[8],S[9]=x[9]+w[9],S[10]=x[10]+w[10],S[11]=x[11]+w[11],S[12]=x[12]+w[12],S[13]=x[13]+w[13],S[14]=x[14]+w[14],S[15]=x[15]+w[15],S},Matrix4.subtract=function(x,w,S){return de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S),S[0]=x[0]-w[0],S[1]=x[1]-w[1],S[2]=x[2]-w[2],S[3]=x[3]-w[3],S[4]=x[4]-w[4],S[5]=x[5]-w[5],S[6]=x[6]-w[6],S[7]=x[7]-w[7],S[8]=x[8]-w[8],S[9]=x[9]-w[9],S[10]=x[10]-w[10],S[11]=x[11]-w[11],S[12]=x[12]-w[12],S[13]=x[13]-w[13],S[14]=x[14]-w[14],S[15]=x[15]-w[15],S},Matrix4.multiplyTransformation=function(x,w,S){de.typeOf.object("left",x),de.typeOf.object("right",w),de.typeOf.object("result",S);const U=x[0],G=x[1],z=x[2],H=x[4],j=x[5],X=x[6],q=x[8],K=x[9],Y=x[10],Z=x[12],J=x[13],Q=x[14],ee=w[0],te=w[1],ne=w[2],re=w[4],ie=w[5],oe=w[6],ae=w[8],se=w[9],le=w[10],ce=w[12],ue=w[13],he=w[14],pe=U*ee+H*te+q*ne,fe=G*ee+j*te+K*ne,me=z*ee+X*te+Y*ne,ge=U*re+H*ie+q*oe,ve=G*re+j*ie+K*oe,ye=z*re+X*ie+Y*oe,_e=U*ae+H*se+q*le,be=G*ae+j*se+K*le,xe=z*ae+X*se+Y*le,Ee=U*ce+H*ue+q*he+Z,we=G*ce+j*ue+K*he+J,Se=z*ce+X*ue+Y*he+Q;return S[0]=pe,S[1]=fe,S[2]=me,S[3]=0,S[4]=ge,S[5]=ve,S[6]=ye,S[7]=0,S[8]=_e,S[9]=be,S[10]=xe,S[11]=0,S[12]=Ee,S[13]=we,S[14]=Se,S[15]=1,S},Matrix4.multiplyByMatrix3=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.object("rotation",w),de.typeOf.object("result",S);const U=x[0],G=x[1],z=x[2],H=x[4],j=x[5],X=x[6],q=x[8],K=x[9],Y=x[10],Z=w[0],J=w[1],Q=w[2],ee=w[3],te=w[4],ne=w[5],re=w[6],ie=w[7],oe=w[8],ae=U*Z+H*J+q*Q,se=G*Z+j*J+K*Q,le=z*Z+X*J+Y*Q,ce=U*ee+H*te+q*ne,ue=G*ee+j*te+K*ne,he=z*ee+X*te+Y*ne,pe=U*re+H*ie+q*oe,fe=G*re+j*ie+K*oe,me=z*re+X*ie+Y*oe;return S[0]=ae,S[1]=se,S[2]=le,S[3]=0,S[4]=ce,S[5]=ue,S[6]=he,S[7]=0,S[8]=pe,S[9]=fe,S[10]=me,S[11]=0,S[12]=x[12],S[13]=x[13],S[14]=x[14],S[15]=x[15],S},Matrix4.multiplyByTranslation=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.object("translation",w),de.typeOf.object("result",S);const U=w.x,G=w.y,z=w.z,H=U*x[0]+G*x[4]+z*x[8]+x[12],j=U*x[1]+G*x[5]+z*x[9]+x[13],X=U*x[2]+G*x[6]+z*x[10]+x[14];return S[0]=x[0],S[1]=x[1],S[2]=x[2],S[3]=x[3],S[4]=x[4],S[5]=x[5],S[6]=x[6],S[7]=x[7],S[8]=x[8],S[9]=x[9],S[10]=x[10],S[11]=x[11],S[12]=H,S[13]=j,S[14]=X,S[15]=x[15],S},Matrix4.multiplyByScale=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.object("scale",w),de.typeOf.object("result",S);const U=w.x,G=w.y,z=w.z;return 1===U&&1===G&&1===z?Matrix4.clone(x,S):(S[0]=U*x[0],S[1]=U*x[1],S[2]=U*x[2],S[3]=x[3],S[4]=G*x[4],S[5]=G*x[5],S[6]=G*x[6],S[7]=x[7],S[8]=z*x[8],S[9]=z*x[9],S[10]=z*x[10],S[11]=x[11],S[12]=x[12],S[13]=x[13],S[14]=x[14],S[15]=x[15],S)},Matrix4.multiplyByUniformScale=function(x,w,S){return de.typeOf.object("matrix",x),de.typeOf.number("scale",w),de.typeOf.object("result",S),S[0]=x[0]*w,S[1]=x[1]*w,S[2]=x[2]*w,S[3]=x[3],S[4]=x[4]*w,S[5]=x[5]*w,S[6]=x[6]*w,S[7]=x[7],S[8]=x[8]*w,S[9]=x[9]*w,S[10]=x[10]*w,S[11]=x[11],S[12]=x[12],S[13]=x[13],S[14]=x[14],S[15]=x[15],S},Matrix4.multiplyByVector=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.object("cartesian",w),de.typeOf.object("result",S);const U=w.x,G=w.y,z=w.z,H=w.w,j=x[0]*U+x[4]*G+x[8]*z+x[12]*H,X=x[1]*U+x[5]*G+x[9]*z+x[13]*H,q=x[2]*U+x[6]*G+x[10]*z+x[14]*H,K=x[3]*U+x[7]*G+x[11]*z+x[15]*H;return S.x=j,S.y=X,S.z=q,S.w=K,S},Matrix4.multiplyByPointAsVector=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.object("cartesian",w),de.typeOf.object("result",S);const U=w.x,G=w.y,z=w.z,H=x[0]*U+x[4]*G+x[8]*z,j=x[1]*U+x[5]*G+x[9]*z,X=x[2]*U+x[6]*G+x[10]*z;return S.x=H,S.y=j,S.z=X,S},Matrix4.multiplyByPoint=function(x,w,S){de.typeOf.object("matrix",x),de.typeOf.object("cartesian",w),de.typeOf.object("result",S);const U=w.x,G=w.y,z=w.z,H=x[0]*U+x[4]*G+x[8]*z+x[12],j=x[1]*U+x[5]*G+x[9]*z+x[13],X=x[2]*U+x[6]*G+x[10]*z+x[14];return S.x=H,S.y=j,S.z=X,S},Matrix4.multiplyByScalar=function(x,w,S){return de.typeOf.object("matrix",x),de.typeOf.number("scalar",w),de.typeOf.object("result",S),S[0]=x[0]*w,S[1]=x[1]*w,S[2]=x[2]*w,S[3]=x[3]*w,S[4]=x[4]*w,S[5]=x[5]*w,S[6]=x[6]*w,S[7]=x[7]*w,S[8]=x[8]*w,S[9]=x[9]*w,S[10]=x[10]*w,S[11]=x[11]*w,S[12]=x[12]*w,S[13]=x[13]*w,S[14]=x[14]*w,S[15]=x[15]*w,S},Matrix4.negate=function(x,w){return de.typeOf.object("matrix",x),de.typeOf.object("result",w),w[0]=-x[0],w[1]=-x[1],w[2]=-x[2],w[3]=-x[3],w[4]=-x[4],w[5]=-x[5],w[6]=-x[6],w[7]=-x[7],w[8]=-x[8],w[9]=-x[9],w[10]=-x[10],w[11]=-x[11],w[12]=-x[12],w[13]=-x[13],w[14]=-x[14],w[15]=-x[15],w},Matrix4.transpose=function(x,w){de.typeOf.object("matrix",x),de.typeOf.object("result",w);const S=x[1],U=x[2],G=x[3],z=x[6],H=x[7],j=x[11];return w[0]=x[0],w[1]=x[4],w[2]=x[8],w[3]=x[12],w[4]=S,w[5]=x[5],w[6]=x[9],w[7]=x[13],w[8]=U,w[9]=z,w[10]=x[10],w[11]=x[14],w[12]=G,w[13]=H,w[14]=j,w[15]=x[15],w},Matrix4.abs=function(x,w){return de.typeOf.object("matrix",x),de.typeOf.object("result",w),w[0]=Math.abs(x[0]),w[1]=Math.abs(x[1]),w[2]=Math.abs(x[2]),w[3]=Math.abs(x[3]),w[4]=Math.abs(x[4]),w[5]=Math.abs(x[5]),w[6]=Math.abs(x[6]),w[7]=Math.abs(x[7]),w[8]=Math.abs(x[8]),w[9]=Math.abs(x[9]),w[10]=Math.abs(x[10]),w[11]=Math.abs(x[11]),w[12]=Math.abs(x[12]),w[13]=Math.abs(x[13]),w[14]=Math.abs(x[14]),w[15]=Math.abs(x[15]),w},Matrix4.equals=function(x,w){return x===w||ce(x)&&ce(w)&&x[12]===w[12]&&x[13]===w[13]&&x[14]===w[14]&&x[0]===w[0]&&x[1]===w[1]&&x[2]===w[2]&&x[4]===w[4]&&x[5]===w[5]&&x[6]===w[6]&&x[8]===w[8]&&x[9]===w[9]&&x[10]===w[10]&&x[3]===w[3]&&x[7]===w[7]&&x[11]===w[11]&&x[15]===w[15]},Matrix4.equalsEpsilon=function(x,w,S){return S=pe(S,0),x===w||ce(x)&&ce(w)&&Math.abs(x[0]-w[0])<=S&&Math.abs(x[1]-w[1])<=S&&Math.abs(x[2]-w[2])<=S&&Math.abs(x[3]-w[3])<=S&&Math.abs(x[4]-w[4])<=S&&Math.abs(x[5]-w[5])<=S&&Math.abs(x[6]-w[6])<=S&&Math.abs(x[7]-w[7])<=S&&Math.abs(x[8]-w[8])<=S&&Math.abs(x[9]-w[9])<=S&&Math.abs(x[10]-w[10])<=S&&Math.abs(x[11]-w[11])<=S&&Math.abs(x[12]-w[12])<=S&&Math.abs(x[13]-w[13])<=S&&Math.abs(x[14]-w[14])<=S&&Math.abs(x[15]-w[15])<=S},Matrix4.getTranslation=function(x,w){return de.typeOf.object("matrix",x),de.typeOf.object("result",w),w.x=x[12],w.y=x[13],w.z=x[14],w},Matrix4.getMatrix3=function(x,w){return de.typeOf.object("matrix",x),de.typeOf.object("result",w),w[0]=x[0],w[1]=x[1],w[2]=x[2],w[3]=x[4],w[4]=x[5],w[5]=x[6],w[6]=x[8],w[7]=x[9],w[8]=x[10],w};const Nt=new ft,Ft=new ft,Bt=new Et,Dt=new Et(0,0,0,1);Matrix4.inverse=function(x,w){de.typeOf.object("matrix",x),de.typeOf.object("result",w);const S=x[0],U=x[4],G=x[8],z=x[12],H=x[1],j=x[5],X=x[9],q=x[13],K=x[2],Y=x[6],Z=x[10],J=x[14],Q=x[3],ee=x[7],te=x[11],ne=x[15];let re=Z*ne,ie=J*te,oe=Y*ne,ae=J*ee,se=Y*te,le=Z*ee,ce=K*ne,ue=J*Q,he=K*te,pe=Z*Q,fe=K*ee,me=Y*Q;const ge=re*j+ae*X+se*q-(ie*j+oe*X+le*q),ve=ie*H+ce*X+pe*q-(re*H+ue*X+he*q),_e=oe*H+ue*j+fe*q-(ae*H+ce*j+me*q),be=le*H+he*j+me*X-(se*H+pe*j+fe*X),xe=ie*U+oe*G+le*z-(re*U+ae*G+se*z),Ee=re*S+ue*G+he*z-(ie*S+ce*G+pe*z),we=ae*S+ce*U+me*z-(oe*S+ue*U+fe*z),Se=se*S+pe*U+fe*G-(le*S+he*U+me*G);re=G*q,ie=z*X,oe=U*q,ae=z*j,se=U*X,le=G*j,ce=S*q,ue=z*H,he=S*X,pe=G*H,fe=S*j,me=U*H;const Te=re*ee+ae*te+se*ne-(ie*ee+oe*te+le*ne),Ce=ie*Q+ce*te+pe*ne-(re*Q+ue*te+he*ne),Ae=oe*Q+ue*ee+fe*ne-(ae*Q+ce*ee+me*ne),Me=le*Q+he*ee+me*te-(se*Q+pe*ee+fe*te),Re=oe*Z+le*J+ie*Y-(se*J+re*Y+ae*Z),Le=he*J+re*K+ue*Z-(ce*Z+pe*J+ie*K),Oe=ce*Y+me*J+ae*K-(fe*J+oe*K+ue*Y),Pe=fe*Z+se*K+pe*Y-(he*Y+me*Z+le*K);let Ie=S*ge+U*ve+G*_e+z*be;if(Math.abs(Ie)<ye.EPSILON21){if(ft.equalsEpsilon(Matrix4.getMatrix3(x,Nt),Ft,ye.EPSILON7)&&Et.equals(Matrix4.getRow(x,3,Bt),Dt))return w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=0,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=0,w[11]=0,w[12]=-x[12],w[13]=-x[13],w[14]=-x[14],w[15]=1,w;throw new wt("matrix is not invertible because its determinate is zero.")}return Ie=1/Ie,w[0]=ge*Ie,w[1]=ve*Ie,w[2]=_e*Ie,w[3]=be*Ie,w[4]=xe*Ie,w[5]=Ee*Ie,w[6]=we*Ie,w[7]=Se*Ie,w[8]=Te*Ie,w[9]=Ce*Ie,w[10]=Ae*Ie,w[11]=Me*Ie,w[12]=Re*Ie,w[13]=Le*Ie,w[14]=Oe*Ie,w[15]=Pe*Ie,w},Matrix4.inverseTransformation=function(x,w){de.typeOf.object("matrix",x),de.typeOf.object("result",w);const S=x[0],U=x[1],G=x[2],z=x[4],H=x[5],j=x[6],X=x[8],q=x[9],K=x[10],Y=x[12],Z=x[13],J=x[14],Q=-S*Y-U*Z-G*J,ee=-z*Y-H*Z-j*J,te=-X*Y-q*Z-K*J;return w[0]=S,w[1]=z,w[2]=X,w[3]=0,w[4]=U,w[5]=H,w[6]=q,w[7]=0,w[8]=G,w[9]=j,w[10]=K,w[11]=0,w[12]=Q,w[13]=ee,w[14]=te,w[15]=1,w};const kt=new Matrix4;Matrix4.inverseTranspose=function(x,w){return de.typeOf.object("matrix",x),de.typeOf.object("result",w),Matrix4.inverse(Matrix4.transpose(x,kt),w)},Matrix4.IDENTITY=Object.freeze(new Matrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),Matrix4.ZERO=Object.freeze(new Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),Matrix4.COLUMN0ROW0=0,Matrix4.COLUMN0ROW1=1,Matrix4.COLUMN0ROW2=2,Matrix4.COLUMN0ROW3=3,Matrix4.COLUMN1ROW0=4,Matrix4.COLUMN1ROW1=5,Matrix4.COLUMN1ROW2=6,Matrix4.COLUMN1ROW3=7,Matrix4.COLUMN2ROW0=8,Matrix4.COLUMN2ROW1=9,Matrix4.COLUMN2ROW2=10,Matrix4.COLUMN2ROW3=11,Matrix4.COLUMN3ROW0=12,Matrix4.COLUMN3ROW1=13,Matrix4.COLUMN3ROW2=14,Matrix4.COLUMN3ROW3=15,Object.defineProperties(Matrix4.prototype,{length:{get:function(){return Matrix4.packedLength}}}),Matrix4.prototype.clone=function(x){return Matrix4.clone(this,x)},Matrix4.prototype.equals=function(x){return Matrix4.equals(this,x)},Matrix4.equalsArray=function(x,w,S){return x[0]===w[S]&&x[1]===w[S+1]&&x[2]===w[S+2]&&x[3]===w[S+3]&&x[4]===w[S+4]&&x[5]===w[S+5]&&x[6]===w[S+6]&&x[7]===w[S+7]&&x[8]===w[S+8]&&x[9]===w[S+9]&&x[10]===w[S+10]&&x[11]===w[S+11]&&x[12]===w[S+12]&&x[13]===w[S+13]&&x[14]===w[S+14]&&x[15]===w[S+15]},Matrix4.prototype.equalsEpsilon=function(x,w){return Matrix4.equalsEpsilon(this,x,w)},Matrix4.prototype.toString=function(){return`(${this[0]}, ${this[4]}, ${this[8]}, ${this[12]})\n(${this[1]}, ${this[5]}, ${this[9]}, ${this[13]})\n(${this[2]}, ${this[6]}, ${this[10]}, ${this[14]})\n(${this[3]}, ${this[7]}, ${this[11]}, ${this[15]})`};const Ut=Matrix4;function Rectangle(x,w,S,U){this.west=pe(x,0),this.south=pe(w,0),this.east=pe(S,0),this.north=pe(U,0)}Object.defineProperties(Rectangle.prototype,{width:{get:function(){return Rectangle.computeWidth(this)}},height:{get:function(){return Rectangle.computeHeight(this)}}}),Rectangle.packedLength=4,Rectangle.pack=function(x,w,S){return de.typeOf.object("value",x),de.defined("array",w),S=pe(S,0),w[S++]=x.west,w[S++]=x.south,w[S++]=x.east,w[S]=x.north,w},Rectangle.unpack=function(x,w,S){return de.defined("array",x),w=pe(w,0),ce(S)||(S=new Rectangle),S.west=x[w++],S.south=x[w++],S.east=x[w++],S.north=x[w],S},Rectangle.computeWidth=function(x){de.typeOf.object("rectangle",x);let w=x.east;const S=x.west;return w<S&&(w+=ye.TWO_PI),w-S},Rectangle.computeHeight=function(x){return de.typeOf.object("rectangle",x),x.north-x.south},Rectangle.fromDegrees=function(x,w,S,U,G){return x=ye.toRadians(pe(x,0)),w=ye.toRadians(pe(w,0)),S=ye.toRadians(pe(S,0)),U=ye.toRadians(pe(U,0)),ce(G)?(G.west=x,G.south=w,G.east=S,G.north=U,G):new Rectangle(x,w,S,U)},Rectangle.fromRadians=function(x,w,S,U,G){return ce(G)?(G.west=pe(x,0),G.south=pe(w,0),G.east=pe(S,0),G.north=pe(U,0),G):new Rectangle(x,w,S,U)},Rectangle.fromCartographicArray=function(x,w){de.defined("cartographics",x);let S=Number.MAX_VALUE,U=-Number.MAX_VALUE,G=Number.MAX_VALUE,z=-Number.MAX_VALUE,H=Number.MAX_VALUE,j=-Number.MAX_VALUE;for(let w=0,X=x.length;w<X;w++){const X=x[w];S=Math.min(S,X.longitude),U=Math.max(U,X.longitude),H=Math.min(H,X.latitude),j=Math.max(j,X.latitude);const q=X.longitude>=0?X.longitude:X.longitude+ye.TWO_PI;G=Math.min(G,q),z=Math.max(z,q)}return U-S>z-G&&(S=G,U=z,U>ye.PI&&(U-=ye.TWO_PI),S>ye.PI&&(S-=ye.TWO_PI)),ce(w)?(w.west=S,w.south=H,w.east=U,w.north=j,w):new Rectangle(S,H,U,j)},Rectangle.fromCartesianArray=function(x,w,S){de.defined("cartesians",x),w=pe(w,Je.WGS84);let U=Number.MAX_VALUE,G=-Number.MAX_VALUE,z=Number.MAX_VALUE,H=-Number.MAX_VALUE,j=Number.MAX_VALUE,X=-Number.MAX_VALUE;for(let S=0,q=x.length;S<q;S++){const q=w.cartesianToCartographic(x[S]);U=Math.min(U,q.longitude),G=Math.max(G,q.longitude),j=Math.min(j,q.latitude),X=Math.max(X,q.latitude);const K=q.longitude>=0?q.longitude:q.longitude+ye.TWO_PI;z=Math.min(z,K),H=Math.max(H,K)}return G-U>H-z&&(U=z,G=H,G>ye.PI&&(G-=ye.TWO_PI),U>ye.PI&&(U-=ye.TWO_PI)),ce(S)?(S.west=U,S.south=j,S.east=G,S.north=X,S):new Rectangle(U,j,G,X)},Rectangle.clone=function(x,w){if(ce(x))return ce(w)?(w.west=x.west,w.south=x.south,w.east=x.east,w.north=x.north,w):new Rectangle(x.west,x.south,x.east,x.north)},Rectangle.equalsEpsilon=function(x,w,S){return S=pe(S,0),x===w||ce(x)&&ce(w)&&Math.abs(x.west-w.west)<=S&&Math.abs(x.south-w.south)<=S&&Math.abs(x.east-w.east)<=S&&Math.abs(x.north-w.north)<=S},Rectangle.prototype.clone=function(x){return Rectangle.clone(this,x)},Rectangle.prototype.equals=function(x){return Rectangle.equals(this,x)},Rectangle.equals=function(x,w){return x===w||ce(x)&&ce(w)&&x.west===w.west&&x.south===w.south&&x.east===w.east&&x.north===w.north},Rectangle.prototype.equalsEpsilon=function(x,w){return Rectangle.equalsEpsilon(this,x,w)},Rectangle.validate=function(x){de.typeOf.object("rectangle",x);const w=x.north;de.typeOf.number.greaterThanOrEquals("north",w,-ye.PI_OVER_TWO),de.typeOf.number.lessThanOrEquals("north",w,ye.PI_OVER_TWO);const S=x.south;de.typeOf.number.greaterThanOrEquals("south",S,-ye.PI_OVER_TWO),de.typeOf.number.lessThanOrEquals("south",S,ye.PI_OVER_TWO);const U=x.west;de.typeOf.number.greaterThanOrEquals("west",U,-Math.PI),de.typeOf.number.lessThanOrEquals("west",U,Math.PI);const G=x.east;de.typeOf.number.greaterThanOrEquals("east",G,-Math.PI),de.typeOf.number.lessThanOrEquals("east",G,Math.PI)},Rectangle.southwest=function(x,w){return de.typeOf.object("rectangle",x),ce(w)?(w.longitude=x.west,w.latitude=x.south,w.height=0,w):new De(x.west,x.south)},Rectangle.northwest=function(x,w){return de.typeOf.object("rectangle",x),ce(w)?(w.longitude=x.west,w.latitude=x.north,w.height=0,w):new De(x.west,x.north)},Rectangle.northeast=function(x,w){return de.typeOf.object("rectangle",x),ce(w)?(w.longitude=x.east,w.latitude=x.north,w.height=0,w):new De(x.east,x.north)},Rectangle.southeast=function(x,w){return de.typeOf.object("rectangle",x),ce(w)?(w.longitude=x.east,w.latitude=x.south,w.height=0,w):new De(x.east,x.south)},Rectangle.center=function(x,w){de.typeOf.object("rectangle",x);let S=x.east;const U=x.west;S<U&&(S+=ye.TWO_PI);const G=ye.negativePiToPi(.5*(U+S)),z=.5*(x.south+x.north);return ce(w)?(w.longitude=G,w.latitude=z,w.height=0,w):new De(G,z)},Rectangle.intersection=function(x,w,S){de.typeOf.object("rectangle",x),de.typeOf.object("otherRectangle",w);let U=x.east,G=x.west,z=w.east,H=w.west;U<G&&z>0?U+=ye.TWO_PI:z<H&&U>0&&(z+=ye.TWO_PI),U<G&&H<0?H+=ye.TWO_PI:z<H&&G<0&&(G+=ye.TWO_PI);const j=ye.negativePiToPi(Math.max(G,H)),X=ye.negativePiToPi(Math.min(U,z));if((x.west<x.east||w.west<w.east)&&X<=j)return;const q=Math.max(x.south,w.south),K=Math.min(x.north,w.north);return q>=K?void 0:ce(S)?(S.west=j,S.south=q,S.east=X,S.north=K,S):new Rectangle(j,q,X,K)},Rectangle.simpleIntersection=function(x,w,S){de.typeOf.object("rectangle",x),de.typeOf.object("otherRectangle",w);const U=Math.max(x.west,w.west),G=Math.max(x.south,w.south),z=Math.min(x.east,w.east),H=Math.min(x.north,w.north);if(!(G>=H||U>=z))return ce(S)?(S.west=U,S.south=G,S.east=z,S.north=H,S):new Rectangle(U,G,z,H)},Rectangle.union=function(x,w,S){de.typeOf.object("rectangle",x),de.typeOf.object("otherRectangle",w),ce(S)||(S=new Rectangle);let U=x.east,G=x.west,z=w.east,H=w.west;U<G&&z>0?U+=ye.TWO_PI:z<H&&U>0&&(z+=ye.TWO_PI),U<G&&H<0?H+=ye.TWO_PI:z<H&&G<0&&(G+=ye.TWO_PI);const j=ye.negativePiToPi(Math.min(G,H)),X=ye.negativePiToPi(Math.max(U,z));return S.west=j,S.south=Math.min(x.south,w.south),S.east=X,S.north=Math.max(x.north,w.north),S},Rectangle.expand=function(x,w,S){return de.typeOf.object("rectangle",x),de.typeOf.object("cartographic",w),ce(S)||(S=new Rectangle),S.west=Math.min(x.west,w.longitude),S.south=Math.min(x.south,w.latitude),S.east=Math.max(x.east,w.longitude),S.north=Math.max(x.north,w.latitude),S},Rectangle.contains=function(x,w){de.typeOf.object("rectangle",x),de.typeOf.object("cartographic",w);let S=w.longitude;const U=w.latitude,G=x.west;let z=x.east;return z<G&&(z+=ye.TWO_PI,S<0&&(S+=ye.TWO_PI)),(S>G||ye.equalsEpsilon(S,G,ye.EPSILON14))&&(S<z||ye.equalsEpsilon(S,z,ye.EPSILON14))&&U>=x.south&&U<=x.north};const Gt=new De;Rectangle.subsample=function(x,w,S,U){de.typeOf.object("rectangle",x),w=pe(w,Je.WGS84),S=pe(S,0),ce(U)||(U=[]);let G=0;const z=x.north,H=x.south,j=x.east,X=x.west,q=Gt;q.height=S,q.longitude=X,q.latitude=z,U[G]=w.cartographicToCartesian(q,U[G]),G++,q.longitude=j,U[G]=w.cartographicToCartesian(q,U[G]),G++,q.latitude=H,U[G]=w.cartographicToCartesian(q,U[G]),G++,q.longitude=X,U[G]=w.cartographicToCartesian(q,U[G]),G++,q.latitude=z<0?z:H>0?H:0;for(let S=1;S<8;++S)q.longitude=-Math.PI+S*ye.PI_OVER_TWO,Rectangle.contains(x,q)&&(U[G]=w.cartographicToCartesian(q,U[G]),G++);return 0===q.latitude&&(q.longitude=X,U[G]=w.cartographicToCartesian(q,U[G]),G++,q.longitude=j,U[G]=w.cartographicToCartesian(q,U[G]),G++),U.length=G,U},Rectangle.subsection=function(x,w,S,U,G,z){if(de.typeOf.object("rectangle",x),de.typeOf.number.greaterThanOrEquals("westLerp",w,0),de.typeOf.number.lessThanOrEquals("westLerp",w,1),de.typeOf.number.greaterThanOrEquals("southLerp",S,0),de.typeOf.number.lessThanOrEquals("southLerp",S,1),de.typeOf.number.greaterThanOrEquals("eastLerp",U,0),de.typeOf.number.lessThanOrEquals("eastLerp",U,1),de.typeOf.number.greaterThanOrEquals("northLerp",G,0),de.typeOf.number.lessThanOrEquals("northLerp",G,1),de.typeOf.number.lessThanOrEquals("westLerp",w,U),de.typeOf.number.lessThanOrEquals("southLerp",S,G),ce(z)||(z=new Rectangle),x.west<=x.east){const S=x.east-x.west;z.west=x.west+w*S,z.east=x.west+U*S}else{const S=ye.TWO_PI+x.east-x.west;z.west=ye.negativePiToPi(x.west+w*S),z.east=ye.negativePiToPi(x.west+U*S)}const H=x.north-x.south;return z.south=x.south+S*H,z.north=x.south+G*H,1===w&&(z.west=x.east),1===U&&(z.east=x.east),1===S&&(z.south=x.north),1===G&&(z.north=x.north),z},Rectangle.MAX_VALUE=Object.freeze(new Rectangle(-Math.PI,-ye.PI_OVER_TWO,Math.PI,ye.PI_OVER_TWO));const Vt=Rectangle;function BoundingSphere(x,w){this.center=Ae.clone(pe(x,Ae.ZERO)),this.radius=pe(w,0)}const Wt=new Ae,zt=new Ae,Ht=new Ae,$t=new Ae,jt=new Ae,Xt=new Ae,qt=new Ae,Kt=new Ae,Yt=new Ae,Zt=new Ae,Jt=new Ae,Qt=new Ae,en=4/3*ye.PI;BoundingSphere.fromPoints=function(x,w){if(ce(w)||(w=new BoundingSphere),!ce(x)||0===x.length)return w.center=Ae.clone(Ae.ZERO,w.center),w.radius=0,w;const S=Ae.clone(x[0],qt),U=Ae.clone(S,Wt),G=Ae.clone(S,zt),z=Ae.clone(S,Ht),H=Ae.clone(S,$t),j=Ae.clone(S,jt),X=Ae.clone(S,Xt),q=x.length;let K;for(K=1;K<q;K++){Ae.clone(x[K],S);const w=S.x,q=S.y,Y=S.z;w<U.x&&Ae.clone(S,U),w>H.x&&Ae.clone(S,H),q<G.y&&Ae.clone(S,G),q>j.y&&Ae.clone(S,j),Y<z.z&&Ae.clone(S,z),Y>X.z&&Ae.clone(S,X)}const Y=Ae.magnitudeSquared(Ae.subtract(H,U,Kt)),Z=Ae.magnitudeSquared(Ae.subtract(j,G,Kt)),J=Ae.magnitudeSquared(Ae.subtract(X,z,Kt));let Q=U,ee=H,te=Y;Z>te&&(te=Z,Q=G,ee=j),J>te&&(te=J,Q=z,ee=X);const ne=Yt;ne.x=.5*(Q.x+ee.x),ne.y=.5*(Q.y+ee.y),ne.z=.5*(Q.z+ee.z);let re=Ae.magnitudeSquared(Ae.subtract(ee,ne,Kt)),ie=Math.sqrt(re);const oe=Zt;oe.x=U.x,oe.y=G.y,oe.z=z.z;const ae=Jt;ae.x=H.x,ae.y=j.y,ae.z=X.z;const se=Ae.midpoint(oe,ae,Qt);let le=0;for(K=0;K<q;K++){Ae.clone(x[K],S);const w=Ae.magnitude(Ae.subtract(S,se,Kt));w>le&&(le=w);const U=Ae.magnitudeSquared(Ae.subtract(S,ne,Kt));if(U>re){const x=Math.sqrt(U);ie=.5*(ie+x),re=ie*ie;const w=x-ie;ne.x=(ie*ne.x+w*S.x)/x,ne.y=(ie*ne.y+w*S.y)/x,ne.z=(ie*ne.z+w*S.z)/x}}return ie<le?(Ae.clone(ne,w.center),w.radius=ie):(Ae.clone(se,w.center),w.radius=le),w};const tn=new Qe,nn=new Ae,rn=new Ae,on=new De,an=new De;BoundingSphere.fromRectangle2D=function(x,w,S){return BoundingSphere.fromRectangleWithHeights2D(x,w,0,0,S)},BoundingSphere.fromRectangleWithHeights2D=function(x,w,S,U,G){if(ce(G)||(G=new BoundingSphere),!ce(x))return G.center=Ae.clone(Ae.ZERO,G.center),G.radius=0,G;w=pe(w,tn),Vt.southwest(x,on),on.height=S,Vt.northeast(x,an),an.height=U;const z=w.project(on,nn),H=w.project(an,rn),j=H.x-z.x,X=H.y-z.y,q=H.z-z.z;G.radius=.5*Math.sqrt(j*j+X*X+q*q);const K=G.center;return K.x=z.x+.5*j,K.y=z.y+.5*X,K.z=z.z+.5*q,G};const sn=[];BoundingSphere.fromRectangle3D=function(x,w,S,U){if(w=pe(w,Je.WGS84),S=pe(S,0),ce(U)||(U=new BoundingSphere),!ce(x))return U.center=Ae.clone(Ae.ZERO,U.center),U.radius=0,U;const G=Vt.subsample(x,w,S,sn);return BoundingSphere.fromPoints(G,U)},BoundingSphere.fromVertices=function(x,w,S,U){if(ce(U)||(U=new BoundingSphere),!ce(x)||0===x.length)return U.center=Ae.clone(Ae.ZERO,U.center),U.radius=0,U;w=pe(w,Ae.ZERO),S=pe(S,3),de.typeOf.number.greaterThanOrEquals("stride",S,3);const G=qt;G.x=x[0]+w.x,G.y=x[1]+w.y,G.z=x[2]+w.z;const z=Ae.clone(G,Wt),H=Ae.clone(G,zt),j=Ae.clone(G,Ht),X=Ae.clone(G,$t),q=Ae.clone(G,jt),K=Ae.clone(G,Xt),Y=x.length;let Z;for(Z=0;Z<Y;Z+=S){const S=x[Z]+w.x,U=x[Z+1]+w.y,Y=x[Z+2]+w.z;G.x=S,G.y=U,G.z=Y,S<z.x&&Ae.clone(G,z),S>X.x&&Ae.clone(G,X),U<H.y&&Ae.clone(G,H),U>q.y&&Ae.clone(G,q),Y<j.z&&Ae.clone(G,j),Y>K.z&&Ae.clone(G,K)}const J=Ae.magnitudeSquared(Ae.subtract(X,z,Kt)),Q=Ae.magnitudeSquared(Ae.subtract(q,H,Kt)),ee=Ae.magnitudeSquared(Ae.subtract(K,j,Kt));let te=z,ne=X,re=J;Q>re&&(re=Q,te=H,ne=q),ee>re&&(re=ee,te=j,ne=K);const ie=Yt;ie.x=.5*(te.x+ne.x),ie.y=.5*(te.y+ne.y),ie.z=.5*(te.z+ne.z);let oe=Ae.magnitudeSquared(Ae.subtract(ne,ie,Kt)),ae=Math.sqrt(oe);const se=Zt;se.x=z.x,se.y=H.y,se.z=j.z;const le=Jt;le.x=X.x,le.y=q.y,le.z=K.z;const ue=Ae.midpoint(se,le,Qt);let he=0;for(Z=0;Z<Y;Z+=S){G.x=x[Z]+w.x,G.y=x[Z+1]+w.y,G.z=x[Z+2]+w.z;const S=Ae.magnitude(Ae.subtract(G,ue,Kt));S>he&&(he=S);const U=Ae.magnitudeSquared(Ae.subtract(G,ie,Kt));if(U>oe){const x=Math.sqrt(U);ae=.5*(ae+x),oe=ae*ae;const w=x-ae;ie.x=(ae*ie.x+w*G.x)/x,ie.y=(ae*ie.y+w*G.y)/x,ie.z=(ae*ie.z+w*G.z)/x}}return ae<he?(Ae.clone(ie,U.center),U.radius=ae):(Ae.clone(ue,U.center),U.radius=he),U},BoundingSphere.fromEncodedCartesianVertices=function(x,w,S){if(ce(S)||(S=new BoundingSphere),!ce(x)||!ce(w)||x.length!==w.length||0===x.length)return S.center=Ae.clone(Ae.ZERO,S.center),S.radius=0,S;const U=qt;U.x=x[0]+w[0],U.y=x[1]+w[1],U.z=x[2]+w[2];const G=Ae.clone(U,Wt),z=Ae.clone(U,zt),H=Ae.clone(U,Ht),j=Ae.clone(U,$t),X=Ae.clone(U,jt),q=Ae.clone(U,Xt),K=x.length;let Y;for(Y=0;Y<K;Y+=3){const S=x[Y]+w[Y],K=x[Y+1]+w[Y+1],Z=x[Y+2]+w[Y+2];U.x=S,U.y=K,U.z=Z,S<G.x&&Ae.clone(U,G),S>j.x&&Ae.clone(U,j),K<z.y&&Ae.clone(U,z),K>X.y&&Ae.clone(U,X),Z<H.z&&Ae.clone(U,H),Z>q.z&&Ae.clone(U,q)}const Z=Ae.magnitudeSquared(Ae.subtract(j,G,Kt)),J=Ae.magnitudeSquared(Ae.subtract(X,z,Kt)),Q=Ae.magnitudeSquared(Ae.subtract(q,H,Kt));let ee=G,te=j,ne=Z;J>ne&&(ne=J,ee=z,te=X),Q>ne&&(ne=Q,ee=H,te=q);const re=Yt;re.x=.5*(ee.x+te.x),re.y=.5*(ee.y+te.y),re.z=.5*(ee.z+te.z);let ie=Ae.magnitudeSquared(Ae.subtract(te,re,Kt)),oe=Math.sqrt(ie);const ae=Zt;ae.x=G.x,ae.y=z.y,ae.z=H.z;const se=Jt;se.x=j.x,se.y=X.y,se.z=q.z;const le=Ae.midpoint(ae,se,Qt);let ue=0;for(Y=0;Y<K;Y+=3){U.x=x[Y]+w[Y],U.y=x[Y+1]+w[Y+1],U.z=x[Y+2]+w[Y+2];const S=Ae.magnitude(Ae.subtract(U,le,Kt));S>ue&&(ue=S);const G=Ae.magnitudeSquared(Ae.subtract(U,re,Kt));if(G>ie){const x=Math.sqrt(G);oe=.5*(oe+x),ie=oe*oe;const w=x-oe;re.x=(oe*re.x+w*U.x)/x,re.y=(oe*re.y+w*U.y)/x,re.z=(oe*re.z+w*U.z)/x}}return oe<ue?(Ae.clone(re,S.center),S.radius=oe):(Ae.clone(le,S.center),S.radius=ue),S},BoundingSphere.fromCornerPoints=function(x,w,S){de.typeOf.object("corner",x),de.typeOf.object("oppositeCorner",w),ce(S)||(S=new BoundingSphere);const U=Ae.midpoint(x,w,S.center);return S.radius=Ae.distance(U,w),S},BoundingSphere.fromEllipsoid=function(x,w){return de.typeOf.object("ellipsoid",x),ce(w)||(w=new BoundingSphere),Ae.clone(Ae.ZERO,w.center),w.radius=x.maximumRadius,w};const ln=new Ae;BoundingSphere.fromBoundingSpheres=function(x,w){if(ce(w)||(w=new BoundingSphere),!ce(x)||0===x.length)return w.center=Ae.clone(Ae.ZERO,w.center),w.radius=0,w;const S=x.length;if(1===S)return BoundingSphere.clone(x[0],w);if(2===S)return BoundingSphere.union(x[0],x[1],w);const U=[];let G;for(G=0;G<S;G++)U.push(x[G].center);const z=(w=BoundingSphere.fromPoints(U,w)).center;let H=w.radius;for(G=0;G<S;G++){const w=x[G];H=Math.max(H,Ae.distance(z,w.center,ln)+w.radius)}return w.radius=H,w};const cn=new Ae,hn=new Ae,dn=new Ae;BoundingSphere.fromOrientedBoundingBox=function(x,w){de.defined("orientedBoundingBox",x),ce(w)||(w=new BoundingSphere);const S=x.halfAxes,U=ft.getColumn(S,0,cn),G=ft.getColumn(S,1,hn),z=ft.getColumn(S,2,dn);return Ae.add(U,G,U),Ae.add(U,z,U),w.center=Ae.clone(x.center,w.center),w.radius=Ae.magnitude(U),w};const pn=new Ae,mn=new Ae;BoundingSphere.fromTransformation=function(x,w){de.typeOf.object("transformation",x),ce(w)||(w=new BoundingSphere);const S=Ut.getTranslation(x,pn),U=Ut.getScale(x,mn),G=.5*Ae.magnitude(U);return w.center=Ae.clone(S,w.center),w.radius=G,w},BoundingSphere.clone=function(x,w){if(ce(x))return ce(w)?(w.center=Ae.clone(x.center,w.center),w.radius=x.radius,w):new BoundingSphere(x.center,x.radius)},BoundingSphere.packedLength=4,BoundingSphere.pack=function(x,w,S){de.typeOf.object("value",x),de.defined("array",w),S=pe(S,0);const U=x.center;return w[S++]=U.x,w[S++]=U.y,w[S++]=U.z,w[S]=x.radius,w},BoundingSphere.unpack=function(x,w,S){de.defined("array",x),w=pe(w,0),ce(S)||(S=new BoundingSphere);const U=S.center;return U.x=x[w++],U.y=x[w++],U.z=x[w++],S.radius=x[w],S};const gn=new Ae,vn=new Ae;BoundingSphere.union=function(x,w,S){de.typeOf.object("left",x),de.typeOf.object("right",w),ce(S)||(S=new BoundingSphere);const U=x.center,G=x.radius,z=w.center,H=w.radius,j=Ae.subtract(z,U,gn),X=Ae.magnitude(j);if(G>=X+H)return x.clone(S),S;if(H>=X+G)return w.clone(S),S;const q=.5*(G+X+H),K=Ae.multiplyByScalar(j,(-G+q)/X,vn);return Ae.add(K,U,K),Ae.clone(K,S.center),S.radius=q,S};const bn=new Ae;BoundingSphere.expand=function(x,w,S){de.typeOf.object("sphere",x),de.typeOf.object("point",w),S=BoundingSphere.clone(x,S);const U=Ae.magnitude(Ae.subtract(w,S.center,bn));return U>S.radius&&(S.radius=U),S},BoundingSphere.intersectPlane=function(x,w){de.typeOf.object("sphere",x),de.typeOf.object("plane",w);const S=x.center,U=x.radius,G=w.normal,z=Ae.dot(G,S)+w.distance;return z<-U?et.OUTSIDE:z<U?et.INTERSECTING:et.INSIDE},BoundingSphere.transform=function(x,w,S){return de.typeOf.object("sphere",x),de.typeOf.object("transform",w),ce(S)||(S=new BoundingSphere),S.center=Ut.multiplyByPoint(w,x.center,S.center),S.radius=Ut.getMaximumScale(w)*x.radius,S};const xn=new Ae;BoundingSphere.distanceSquaredTo=function(x,w){de.typeOf.object("sphere",x),de.typeOf.object("cartesian",w);const S=Ae.subtract(x.center,w,xn),U=Ae.magnitude(S)-x.radius;return U<=0?0:U*U},BoundingSphere.transformWithoutScale=function(x,w,S){return de.typeOf.object("sphere",x),de.typeOf.object("transform",w),ce(S)||(S=new BoundingSphere),S.center=Ut.multiplyByPoint(w,x.center,S.center),S.radius=x.radius,S};const En=new Ae;BoundingSphere.computePlaneDistances=function(x,w,S,U){de.typeOf.object("sphere",x),de.typeOf.object("position",w),de.typeOf.object("direction",S),ce(U)||(U=new tt);const G=Ae.subtract(x.center,w,En),z=Ae.dot(S,G);return U.start=z-x.radius,U.stop=z+x.radius,U};const wn=new Ae,Sn=new Ae,Tn=new Ae,Cn=new Ae,An=new Ae,Mn=new De,Rn=new Array(8);for(let x=0;x<8;++x)Rn[x]=new Ae;const On=new Qe;BoundingSphere.projectTo2D=function(x,w,S){de.typeOf.object("sphere",x);const U=(w=pe(w,On)).ellipsoid;let G=x.center;const z=x.radius;let H;H=Ae.equals(G,Ae.ZERO)?Ae.clone(Ae.UNIT_X,wn):U.geodeticSurfaceNormal(G,wn);const j=Ae.cross(Ae.UNIT_Z,H,Sn);Ae.normalize(j,j);const X=Ae.cross(H,j,Tn);Ae.normalize(X,X),Ae.multiplyByScalar(H,z,H),Ae.multiplyByScalar(X,z,X),Ae.multiplyByScalar(j,z,j);const q=Ae.negate(X,An),K=Ae.negate(j,Cn),Y=Rn;let Z=Y[0];Ae.add(H,X,Z),Ae.add(Z,j,Z),Z=Y[1],Ae.add(H,X,Z),Ae.add(Z,K,Z),Z=Y[2],Ae.add(H,q,Z),Ae.add(Z,K,Z),Z=Y[3],Ae.add(H,q,Z),Ae.add(Z,j,Z),Ae.negate(H,H),Z=Y[4],Ae.add(H,X,Z),Ae.add(Z,j,Z),Z=Y[5],Ae.add(H,X,Z),Ae.add(Z,K,Z),Z=Y[6],Ae.add(H,q,Z),Ae.add(Z,K,Z),Z=Y[7],Ae.add(H,q,Z),Ae.add(Z,j,Z);const J=Y.length;for(let x=0;x<J;++x){const S=Y[x];Ae.add(G,S,S);const z=U.cartesianToCartographic(S,Mn);w.project(z,S)}G=(S=BoundingSphere.fromPoints(Y,S)).center;const Q=G.x,ee=G.y,te=G.z;return G.x=te,G.y=Q,G.z=ee,S},BoundingSphere.isOccluded=function(x,w){return de.typeOf.object("sphere",x),de.typeOf.object("occluder",w),!w.isBoundingSphereVisible(x)},BoundingSphere.equals=function(x,w){return x===w||ce(x)&&ce(w)&&Ae.equals(x.center,w.center)&&x.radius===w.radius},BoundingSphere.prototype.intersectPlane=function(x){return BoundingSphere.intersectPlane(this,x)},BoundingSphere.prototype.distanceSquaredTo=function(x){return BoundingSphere.distanceSquaredTo(this,x)},BoundingSphere.prototype.computePlaneDistances=function(x,w,S){return BoundingSphere.computePlaneDistances(this,x,w,S)},BoundingSphere.prototype.isOccluded=function(x){return BoundingSphere.isOccluded(this,x)},BoundingSphere.prototype.equals=function(x){return BoundingSphere.equals(this,x)},BoundingSphere.prototype.clone=function(x){return BoundingSphere.clone(this,x)},BoundingSphere.prototype.volume=function(){const x=this.radius;return en*x*x*x};const In=BoundingSphere;function Plane(x,w){if(de.typeOf.object("normal",x),!ye.equalsEpsilon(Ae.magnitude(x),1,ye.EPSILON6))throw new ue("normal must be normalized.");de.typeOf.number("distance",w),this.normal=Ae.clone(x),this.distance=w}Plane.fromPointNormal=function(x,w,S){if(de.typeOf.object("point",x),de.typeOf.object("normal",w),!ye.equalsEpsilon(Ae.magnitude(w),1,ye.EPSILON6))throw new ue("normal must be normalized.");const U=-Ae.dot(w,x);return ce(S)?(Ae.clone(w,S.normal),S.distance=U,S):new Plane(w,U)};const Nn=new Ae;Plane.fromCartesian4=function(x,w){de.typeOf.object("coefficients",x);const S=Ae.fromCartesian4(x,Nn),U=x.w;if(!ye.equalsEpsilon(Ae.magnitude(S),1,ye.EPSILON6))throw new ue("normal must be normalized.");return ce(w)?(Ae.clone(S,w.normal),w.distance=U,w):new Plane(S,U)},Plane.getPointDistance=function(x,w){return de.typeOf.object("plane",x),de.typeOf.object("point",w),Ae.dot(x.normal,w)+x.distance};const Fn=new Ae;Plane.projectPointOntoPlane=function(x,w,S){de.typeOf.object("plane",x),de.typeOf.object("point",w),ce(S)||(S=new Ae);const U=Plane.getPointDistance(x,w),G=Ae.multiplyByScalar(x.normal,U,Fn);return Ae.subtract(w,G,S)};const Bn=new Ut,Dn=new Et,kn=new Ae;Plane.transform=function(x,w,S){de.typeOf.object("plane",x),de.typeOf.object("transform",w);const U=x.normal,G=x.distance,z=Ut.inverseTranspose(w,Bn);let H=Et.fromElements(U.x,U.y,U.z,G,Dn);H=Ut.multiplyByVector(z,H,H);const j=Ae.fromCartesian4(H,kn);return H=Et.divideByScalar(H,Ae.magnitude(j),H),Plane.fromCartesian4(H,S)},Plane.clone=function(x,w){return de.typeOf.object("plane",x),ce(w)?(Ae.clone(x.normal,w.normal),w.distance=x.distance,w):new Plane(x.normal,x.distance)},Plane.equals=function(x,w){return de.typeOf.object("left",x),de.typeOf.object("right",w),x.distance===w.distance&&Ae.equals(x.normal,w.normal)},Plane.ORIGIN_XY_PLANE=Object.freeze(new Plane(Ae.UNIT_Z,0)),Plane.ORIGIN_YZ_PLANE=Object.freeze(new Plane(Ae.UNIT_X,0)),Plane.ORIGIN_ZX_PLANE=Object.freeze(new Plane(Ae.UNIT_Y,0));const Gn=Plane;function CullingVolume(x){this.planes=pe(x,[])}const Wn=[new Ae,new Ae,new Ae];Ae.clone(Ae.UNIT_X,Wn[0]),Ae.clone(Ae.UNIT_Y,Wn[1]),Ae.clone(Ae.UNIT_Z,Wn[2]);const zn=new Ae,Hn=new Ae,$n=new Gn(new Ae(1,0,0),0);CullingVolume.fromBoundingSphere=function(x,w){if(!ce(x))throw new ue("boundingSphere is required.");ce(w)||(w=new CullingVolume);const S=Wn.length,U=w.planes;U.length=2*S;const G=x.center,z=x.radius;let H=0;for(let x=0;x<S;++x){const w=Wn[x];let S=U[H],j=U[H+1];ce(S)||(S=U[H]=new Et),ce(j)||(j=U[H+1]=new Et),Ae.multiplyByScalar(w,-z,zn),Ae.add(G,zn,zn),S.x=w.x,S.y=w.y,S.z=w.z,S.w=-Ae.dot(w,zn),Ae.multiplyByScalar(w,z,zn),Ae.add(G,zn,zn),j.x=-w.x,j.y=-w.y,j.z=-w.z,j.w=-Ae.dot(Ae.negate(w,Hn),zn),H+=2}return w},CullingVolume.prototype.computeVisibility=function(x){if(!ce(x))throw new ue("boundingVolume is required.");const w=this.planes;let S=!1;for(let U=0,G=w.length;U<G;++U){const G=x.intersectPlane(Gn.fromCartesian4(w[U],$n));if(G===et.OUTSIDE)return et.OUTSIDE;G===et.INTERSECTING&&(S=!0)}return S?et.INTERSECTING:et.INSIDE},CullingVolume.prototype.computeVisibilityWithPlaneMask=function(x,w){if(!ce(x))throw new ue("boundingVolume is required.");if(!ce(w))throw new ue("parentPlaneMask is required.");if(w===CullingVolume.MASK_OUTSIDE||w===CullingVolume.MASK_INSIDE)return w;let S=CullingVolume.MASK_INSIDE;const U=this.planes;for(let G=0,z=U.length;G<z;++G){const z=G<31?1<<G:0;if(G<31&&0==(w&z))continue;const H=x.intersectPlane(Gn.fromCartesian4(U[G],$n));if(H===et.OUTSIDE)return CullingVolume.MASK_OUTSIDE;H===et.INTERSECTING&&(S|=z)}return S},CullingVolume.MASK_OUTSIDE=4294967295,CullingVolume.MASK_INSIDE=0,CullingVolume.MASK_INDETERMINATE=2147483647;const Xn=CullingVolume;function PerspectiveOffCenterFrustum(x){x=pe(x,pe.EMPTY_OBJECT),this.left=x.left,this._left=void 0,this.right=x.right,this._right=void 0,this.top=x.top,this._top=void 0,this.bottom=x.bottom,this._bottom=void 0,this.near=pe(x.near,1),this._near=this.near,this.far=pe(x.far,5e8),this._far=this.far,this._cullingVolume=new Xn,this._perspectiveMatrix=new Ut,this._infinitePerspective=new Ut}function update(x){if(!(ce(x.right)&&ce(x.left)&&ce(x.top)&&ce(x.bottom)&&ce(x.near)&&ce(x.far)))throw new ue("right, left, top, bottom, near, or far parameters are not set.");const w=x.top,S=x.bottom,U=x.right,G=x.left,z=x.near,H=x.far;if(w!==x._top||S!==x._bottom||G!==x._left||U!==x._right||z!==x._near||H!==x._far){if(x.near<=0||x.near>x.far)throw new ue("near must be greater than zero and less than far.");x._left=G,x._right=U,x._top=w,x._bottom=S,x._near=z,x._far=H,x._perspectiveMatrix=Ut.computePerspectiveOffCenter(G,U,S,w,z,H,x._perspectiveMatrix),x._infinitePerspective=Ut.computeInfinitePerspectiveOffCenter(G,U,S,w,z,x._infinitePerspective)}}Object.defineProperties(PerspectiveOffCenterFrustum.prototype,{projectionMatrix:{get:function(){return update(this),this._perspectiveMatrix}},infiniteProjectionMatrix:{get:function(){return update(this),this._infinitePerspective}}});const qn=new Ae,Kn=new Ae,Zn=new Ae,Jn=new Ae;PerspectiveOffCenterFrustum.prototype.computeCullingVolume=function(x,w,S){if(!ce(x))throw new ue("position is required.");if(!ce(w))throw new ue("direction is required.");if(!ce(S))throw new ue("up is required.");const U=this._cullingVolume.planes,G=this.top,z=this.bottom,H=this.right,j=this.left,X=this.near,q=this.far,K=Ae.cross(w,S,qn),Y=Kn;Ae.multiplyByScalar(w,X,Y),Ae.add(x,Y,Y);const Z=Zn;Ae.multiplyByScalar(w,q,Z),Ae.add(x,Z,Z);const J=Jn;Ae.multiplyByScalar(K,j,J),Ae.add(Y,J,J),Ae.subtract(J,x,J),Ae.normalize(J,J),Ae.cross(J,S,J),Ae.normalize(J,J);let Q=U[0];return ce(Q)||(Q=U[0]=new Et),Q.x=J.x,Q.y=J.y,Q.z=J.z,Q.w=-Ae.dot(J,x),Ae.multiplyByScalar(K,H,J),Ae.add(Y,J,J),Ae.subtract(J,x,J),Ae.cross(S,J,J),Ae.normalize(J,J),Q=U[1],ce(Q)||(Q=U[1]=new Et),Q.x=J.x,Q.y=J.y,Q.z=J.z,Q.w=-Ae.dot(J,x),Ae.multiplyByScalar(S,z,J),Ae.add(Y,J,J),Ae.subtract(J,x,J),Ae.cross(K,J,J),Ae.normalize(J,J),Q=U[2],ce(Q)||(Q=U[2]=new Et),Q.x=J.x,Q.y=J.y,Q.z=J.z,Q.w=-Ae.dot(J,x),Ae.multiplyByScalar(S,G,J),Ae.add(Y,J,J),Ae.subtract(J,x,J),Ae.cross(J,K,J),Ae.normalize(J,J),Q=U[3],ce(Q)||(Q=U[3]=new Et),Q.x=J.x,Q.y=J.y,Q.z=J.z,Q.w=-Ae.dot(J,x),Q=U[4],ce(Q)||(Q=U[4]=new Et),Q.x=w.x,Q.y=w.y,Q.z=w.z,Q.w=-Ae.dot(w,Y),Ae.negate(w,J),Q=U[5],ce(Q)||(Q=U[5]=new Et),Q.x=J.x,Q.y=J.y,Q.z=J.z,Q.w=-Ae.dot(J,Z),this._cullingVolume},PerspectiveOffCenterFrustum.prototype.getPixelDimensions=function(x,w,S,U,G){if(update(this),!ce(x)||!ce(w))throw new ue("Both drawingBufferWidth and drawingBufferHeight are required.");if(x<=0)throw new ue("drawingBufferWidth must be greater than zero.");if(w<=0)throw new ue("drawingBufferHeight must be greater than zero.");if(!ce(S))throw new ue("distance is required.");if(!ce(U))throw new ue("pixelRatio is required");if(U<=0)throw new ue("pixelRatio must be greater than zero.");if(!ce(G))throw new ue("A result object is required.");const z=1/this.near;let H=this.top*z;const j=2*U*S*H/w;H=this.right*z;const X=2*U*S*H/x;return G.x=X,G.y=j,G},PerspectiveOffCenterFrustum.prototype.clone=function(x){return ce(x)||(x=new PerspectiveOffCenterFrustum),x.right=this.right,x.left=this.left,x.top=this.top,x.bottom=this.bottom,x.near=this.near,x.far=this.far,x._left=void 0,x._right=void 0,x._top=void 0,x._bottom=void 0,x._near=void 0,x._far=void 0,x},PerspectiveOffCenterFrustum.prototype.equals=function(x){return ce(x)&&x instanceof PerspectiveOffCenterFrustum&&this.right===x.right&&this.left===x.left&&this.top===x.top&&this.bottom===x.bottom&&this.near===x.near&&this.far===x.far},PerspectiveOffCenterFrustum.prototype.equalsEpsilon=function(x,w,S){return x===this||ce(x)&&x instanceof PerspectiveOffCenterFrustum&&ye.equalsEpsilon(this.right,x.right,w,S)&&ye.equalsEpsilon(this.left,x.left,w,S)&&ye.equalsEpsilon(this.top,x.top,w,S)&&ye.equalsEpsilon(this.bottom,x.bottom,w,S)&&ye.equalsEpsilon(this.near,x.near,w,S)&&ye.equalsEpsilon(this.far,x.far,w,S)};const er=PerspectiveOffCenterFrustum;var tr=S(2212),nr=function(){function BaseRenderer(x,w,S){this._clusterTexture=new re(x*w*S,101),this._xSlices=x,this._ySlices=w,this._zSlices=S}return BaseRenderer.prototype.updateClusters=function updateClusters(x,w,S){for(var U=0;U<this._zSlices;++U)for(var G=0;G<this._ySlices;++G)for(var z=0;z<this._xSlices;++z){var H=z+G*this._xSlices+U*this._xSlices*this._ySlices;this._clusterTexture.buffer[this._clusterTexture.bufferIndex(H,0)]=0}for(var j=[],X=0;X<J;++X){var q=new Ae(S.lights[X].position[0],S.lights[X].position[1],S.lights[X].position[2]);j.push(new In(q,S.lights[X].radius))}var K=x.fov/2*Math.PI/180,Y=Math.tan(K)*x.near,Z=x.aspect*Y,Q=2*Y,ee=2*Z,te=new tr.Vector3;x.getWorldDirection(te);for(var ne=-Z,re=-Y,ie=x.near,oe=ee/this._xSlices,ae=Q/this._ySlices,se=(x.far-x.near)/this._zSlices,le=0;le<this._zSlices;++le)for(var ce=0;ce<this._ySlices;++ce)for(var ue=0;ue<this._xSlices;++ue){for(var he=new er({left:ne+ue*oe,right:ne+(ue+1)*oe,top:re+ce*ae,bottom:re+(ce+1)*ae,near:ie+le*se,far:ie+(le+1)*se}).computeCullingVolume(x.position,te,x.up),de=0,pe=[],fe=0;fe<J;++fe){he.computeVisibility(j[fe])!=et.OUTSIDE&&(de+=1,pe.push(fe))}var me=ue+ce*this._xSlices+le*this._xSlices*this._ySlices;this._clusterTexture.buffer[this._clusterTexture.bufferIndex(me,0)]=de;for(var ge=1;ge<=de;++ge){var ve=ge%4,ye=(ge-ve)/4;this._clusterTexture.buffer[this._clusterTexture.bufferIndex(me,ye)+ve]=pe[ge-1]}}this._clusterTexture.update()},BaseRenderer}();function _setPrototypeOf(x,w){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(x,w){return x.__proto__=w,x},_setPrototypeOf(x,w)}var rr=function(x){function ForwardPlusRenderer(w,S,U){var z;return(z=x.call(this,w,S,U)||this)._lightTexture=new re(J,8),z._shaderProgram=loadShaderProgram(le(),function forwardPlus_frag_glsl(x){return"\n  // TODO: This is pretty much just a clone of forward.frag.glsl.js\n\n  #version 100\n  precision highp float;\n\n  uniform sampler2D u_colmap;\n  uniform sampler2D u_normap;\n  uniform sampler2D u_lightbuffer;\n\n  // TODO: Read this buffer to determine the lights influencing a cluster\n  uniform sampler2D u_clusterbuffer;\n  uniform vec2 u_cameraNF;\n  uniform mat4 u_viewProjectionMatrix;\n\n  varying vec3 v_position;\n  varying vec3 v_normal;\n  varying vec2 v_uv;\n\n  vec3 applyNormalMap(vec3 geomnor, vec3 normap) {\n    normap = normap * 2.0 - 1.0;\n    vec3 up = normalize(vec3(0.001, 1, 0.001));\n    vec3 surftan = normalize(cross(geomnor, up));\n    vec3 surfbinor = cross(geomnor, surftan);\n    return normap.y * surftan + normap.x * surfbinor + normap.z * geomnor;\n  }\n\n  struct Light {\n    vec3 position;\n    float radius;\n    vec3 color;\n  };\n\n  float ExtractFloat(sampler2D texture, int textureWidth, int textureHeight, int index, int component) {\n    float u = float(index + 1) / float(textureWidth + 1);\n    int pixel = component / 4;\n    float v = float(pixel + 1) / float(textureHeight + 1);\n    vec4 texel = texture2D(texture, vec2(u, v));\n    int pixelComponent = component - pixel * 4;\n    if (pixelComponent == 0) {\n      return texel[0];\n    } else if (pixelComponent == 1) {\n      return texel[1];\n    } else if (pixelComponent == 2) {\n      return texel[2];\n    } else if (pixelComponent == 3) {\n      return texel[3];\n    }\n  }\n\n  Light UnpackLight(int index) {\n    Light light;\n    float u = float(index + 1) / float("+(x.numLights+1)+");\n    vec4 v1 = texture2D(u_lightbuffer, vec2(u, 0.3));\n    vec4 v2 = texture2D(u_lightbuffer, vec2(u, 0.6));\n    light.position = v1.xyz;\n\n    // LOOK: This extracts the 4th float (radius) of the (index)th light in the buffer\n    // Note that this is just an example implementation to extract one float.\n    // There are more efficient ways if you need adjacent values\n    light.radius = ExtractFloat(u_lightbuffer, "+x.numLights+", 2, index, 3);\n\n    light.color = v2.rgb;\n    return light;\n  }\n\n  // Cubic approximation of gaussian curve so we falloff to exactly 0 at the light radius\n  float cubicGaussian(float h) {\n    if (h < 1.0) {\n      return 0.25 * pow(2.0 - h, 3.0) - pow(1.0 - h, 3.0);\n    } else if (h < 2.0) {\n      return 0.25 * pow(2.0 - h, 3.0);\n    } else {\n      return 0.0;\n    }\n  }\n\n  int computeClusterIndex()\n  {\n    float near = u_cameraNF.x;\n    float far = u_cameraNF.y;\n\n    float dx = 2.0 / float("+x.xSlices+");\n    float dy = 2.0 / float("+x.ySlices+");\n    float dz = (far - near) / float("+x.zSlices+");\n\n    vec4 transformed = u_viewProjectionMatrix * vec4(v_position, 1.0);\n    vec4 ndc = transformed / transformed.w;\n\n    // (ndc + 1.0) convert 2D points to [0, 2] space\n    int kx = int(floor((ndc.x + 1.0) / dx));\n    int ky = int(floor((ndc.y + 1.0) / dy));\n    int kz = int(floor((transformed.z - near) / dz));\n    return kx + ky * "+x.xSlices+" + kz * "+x.xSlices+" * "+x.ySlices+";\n  }\n\n  void main() {\n    vec3 albedo = texture2D(u_colmap, v_uv).rgb;\n    vec3 normap = texture2D(u_normap, v_uv).xyz;\n    vec3 normal = applyNormalMap(v_normal, normap);\n\n    vec3 fragColor = vec3(0.0);\n    \n    int clusterIndex = computeClusterIndex();\n\n    int numClusters = int("+x.xSlices+" * "+x.ySlices+" * "+x.zSlices+");\n\n    int lightCount = int(ExtractFloat(u_clusterbuffer, numClusters, "+x.clusterWidth+", clusterIndex, 0));\n\n    const int maxLightPerCluster = "+x.clusterWidth+" * 4;\n\n    for (int i = 1; i < maxLightPerCluster; ++i) {\n      if (i > lightCount) {\n        break;\n      }\n      int lidx = int(ExtractFloat(u_clusterbuffer, numClusters, "+x.clusterWidth+", clusterIndex, i));\n      Light light = UnpackLight(lidx);\n\n      float lightDistance = distance(light.position, v_position);\n      vec3 L = (light.position - v_position) / lightDistance;\n\n      float lightIntensity = cubicGaussian(2.0 * lightDistance / light.radius);\n      float lambertTerm = max(dot(L, normal), 0.0);\n\n      fragColor += albedo * lambertTerm * light.color * vec3(lightIntensity);\n    }\n\n    const vec3 ambientLight = vec3(0.025);\n    fragColor += albedo * ambientLight;\n\n    gl_FragColor = vec4(fragColor, 1.0);\n  }\n  "}({numLights:J,xSlices:w,ySlices:S,zSlices:U,clusterWidth:Math.ceil(25.25)}),{uniforms:["u_viewProjectionMatrix","u_colmap","u_normap","u_lightbuffer","u_clusterbuffer","u_cameraNF"],attribs:["a_position","a_normal","a_uv"]}),z._projectionMatrix=G.Ue(),z._viewMatrix=G.Ue(),z._viewProjectionMatrix=G.Ue(),z}return function _inheritsLoose(x,w){x.prototype=Object.create(w.prototype),x.prototype.constructor=x,_setPrototypeOf(x,w)}(ForwardPlusRenderer,x),ForwardPlusRenderer.prototype.render=function render(x,w){x.updateMatrixWorld(),G.U_(this._viewMatrix,x.matrixWorld.elements),G.JG(this._projectionMatrix,x.projectionMatrix.elements),G.Jp(this._viewProjectionMatrix,this._projectionMatrix,this._viewMatrix),this.updateClusters(x,this._viewMatrix,w);for(var S=0;S<J;++S)this._lightTexture.buffer[this._lightTexture.bufferIndex(S,0)+0]=w.lights[S].position[0],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,0)+1]=w.lights[S].position[1],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,0)+2]=w.lights[S].position[2],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,0)+3]=w.lights[S].radius,this._lightTexture.buffer[this._lightTexture.bufferIndex(S,1)+0]=w.lights[S].color[0],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,1)+1]=w.lights[S].color[1],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,1)+2]=w.lights[S].color[2];this._lightTexture.update(),U.gl.bindFramebuffer(U.gl.FRAMEBUFFER,null),U.gl.viewport(0,0,canvas.width,canvas.height),U.gl.clear(U.gl.COLOR_BUFFER_BIT|U.gl.DEPTH_BUFFER_BIT),U.gl.useProgram(this._shaderProgram.glShaderProgram),U.gl.uniformMatrix4fv(this._shaderProgram.u_viewProjectionMatrix,!1,this._viewProjectionMatrix),U.gl.activeTexture(U.gl.TEXTURE2),U.gl.bindTexture(U.gl.TEXTURE_2D,this._lightTexture.glTexture),U.gl.uniform1i(this._shaderProgram.u_lightbuffer,2),U.gl.activeTexture(U.gl.TEXTURE3),U.gl.bindTexture(U.gl.TEXTURE_2D,this._clusterTexture.glTexture),U.gl.uniform1i(this._shaderProgram.u_clusterbuffer,3);var z=create();z[0]=x.near,z[1]=x.far,U.gl.uniform2fv(this._shaderProgram.u_cameraNF,z),w.draw(this._shaderProgram)},ForwardPlusRenderer}(nr),ir=S(4864),or=S.n(ir),ar=S(745),sr=S.n(ar);function clusteredDeferred_setPrototypeOf(x,w){return clusteredDeferred_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(x,w){return x.__proto__=w,x},clusteredDeferred_setPrototypeOf(x,w)}var lr=function(x){function ClusteredDeferredRenderer(w,S,z){var j;return(j=x.call(this,w,S,z)||this).setupDrawBuffers(U.JQ.width,U.JQ.height),j._lightTexture=new re(J,8),j._progCopy=loadShaderProgram(or(),sr(),{uniforms:["u_viewProjectionMatrix","u_colmap","u_normap"],attribs:["a_position","a_normal","a_uv"]}),j._progShade=loadShaderProgram(H(),function deferred_frag_glsl(x){return"\n  #version 100\n  precision highp float;\n  \n  uniform sampler2D u_gbuffers["+x.numGBuffers+"];\n  \n  varying vec2 v_uv;\n  \n  void main() {\n    // TODO: extract data from g buffers and do lighting\n    // vec4 gb0 = texture2D(u_gbuffers[0], v_uv);\n    // vec4 gb1 = texture2D(u_gbuffers[1], v_uv);\n    // vec4 gb2 = texture2D(u_gbuffers[2], v_uv);\n    // vec4 gb3 = texture2D(u_gbuffers[3], v_uv);\n\n    gl_FragColor = vec4(v_uv, 0.0, 1.0);\n  }\n  "}({numLights:J,numGBuffers:4}),{uniforms:["u_gbuffers[0]","u_gbuffers[1]","u_gbuffers[2]","u_gbuffers[3]"],attribs:["a_uv"]}),j._projectionMatrix=G.Ue(),j._viewMatrix=G.Ue(),j._viewProjectionMatrix=G.Ue(),j}!function clusteredDeferred_inheritsLoose(x,w){x.prototype=Object.create(w.prototype),x.prototype.constructor=x,clusteredDeferred_setPrototypeOf(x,w)}(ClusteredDeferredRenderer,x);var w=ClusteredDeferredRenderer.prototype;return w.setupDrawBuffers=function setupDrawBuffers(x,w){this._width=x,this._height=w,this._fbo=U.gl.createFramebuffer(),this._depthTex=U.gl.createTexture(),U.gl.bindTexture(U.gl.TEXTURE_2D,this._depthTex),U.gl.texParameteri(U.gl.TEXTURE_2D,U.gl.TEXTURE_MAG_FILTER,U.gl.NEAREST),U.gl.texParameteri(U.gl.TEXTURE_2D,U.gl.TEXTURE_MIN_FILTER,U.gl.NEAREST),U.gl.texParameteri(U.gl.TEXTURE_2D,U.gl.TEXTURE_WRAP_S,U.gl.CLAMP_TO_EDGE),U.gl.texParameteri(U.gl.TEXTURE_2D,U.gl.TEXTURE_WRAP_T,U.gl.CLAMP_TO_EDGE),U.gl.texImage2D(U.gl.TEXTURE_2D,0,U.gl.DEPTH_COMPONENT,x,w,0,U.gl.DEPTH_COMPONENT,U.gl.UNSIGNED_SHORT,null),U.gl.bindTexture(U.gl.TEXTURE_2D,null),U.gl.bindFramebuffer(U.gl.FRAMEBUFFER,this._fbo),U.gl.framebufferTexture2D(U.gl.FRAMEBUFFER,U.gl.DEPTH_ATTACHMENT,U.gl.TEXTURE_2D,this._depthTex,0),this._gbuffers=new Array(4);for(var S=new Array(4),G=0;G<4;G++)S[G]=U.BJ["COLOR_ATTACHMENT"+G+"_WEBGL"],this._gbuffers[G]=U.gl.createTexture(),U.gl.bindTexture(U.gl.TEXTURE_2D,this._gbuffers[G]),U.gl.texParameteri(U.gl.TEXTURE_2D,U.gl.TEXTURE_MAG_FILTER,U.gl.NEAREST),U.gl.texParameteri(U.gl.TEXTURE_2D,U.gl.TEXTURE_MIN_FILTER,U.gl.NEAREST),U.gl.texParameteri(U.gl.TEXTURE_2D,U.gl.TEXTURE_WRAP_S,U.gl.CLAMP_TO_EDGE),U.gl.texParameteri(U.gl.TEXTURE_2D,U.gl.TEXTURE_WRAP_T,U.gl.CLAMP_TO_EDGE),U.gl.texImage2D(U.gl.TEXTURE_2D,0,U.gl.RGBA,x,w,0,U.gl.RGBA,U.gl.FLOAT,null),U.gl.bindTexture(U.gl.TEXTURE_2D,null),U.gl.framebufferTexture2D(U.gl.FRAMEBUFFER,S[G],U.gl.TEXTURE_2D,this._gbuffers[G],0);if(U.gl.checkFramebufferStatus(U.gl.FRAMEBUFFER)!=U.gl.FRAMEBUFFER_COMPLETE)throw"Framebuffer incomplete";U.BJ.drawBuffersWEBGL(S),U.gl.bindFramebuffer(U.gl.FRAMEBUFFER,null)},w.resize=function resize(x,w){this._width=x,this._height=w,U.gl.bindTexture(U.gl.TEXTURE_2D,this._depthTex),U.gl.texImage2D(U.gl.TEXTURE_2D,0,U.gl.DEPTH_COMPONENT,x,w,0,U.gl.DEPTH_COMPONENT,U.gl.UNSIGNED_SHORT,null);for(var S=0;S<4;S++)U.gl.bindTexture(U.gl.TEXTURE_2D,this._gbuffers[S]),U.gl.texImage2D(U.gl.TEXTURE_2D,0,U.gl.RGBA,x,w,0,U.gl.RGBA,U.gl.FLOAT,null);U.gl.bindTexture(U.gl.TEXTURE_2D,null)},w.render=function render(x,w){U.JQ.width==this._width&&U.JQ.height==this._height||this.resize(U.JQ.width,U.JQ.height),x.updateMatrixWorld(),G.U_(this._viewMatrix,x.matrixWorld.elements),G.JG(this._projectionMatrix,x.projectionMatrix.elements),G.Jp(this._viewProjectionMatrix,this._projectionMatrix,this._viewMatrix),U.gl.viewport(0,0,U.JQ.width,U.JQ.height),U.gl.bindFramebuffer(U.gl.FRAMEBUFFER,this._fbo),U.gl.clear(U.gl.COLOR_BUFFER_BIT|U.gl.DEPTH_BUFFER_BIT),U.gl.useProgram(this._progCopy.glShaderProgram),U.gl.uniformMatrix4fv(this._progCopy.u_viewProjectionMatrix,!1,this._viewProjectionMatrix),w.draw(this._progCopy);for(var S=0;S<J;++S)this._lightTexture.buffer[this._lightTexture.bufferIndex(S,0)+0]=w.lights[S].position[0],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,0)+1]=w.lights[S].position[1],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,0)+2]=w.lights[S].position[2],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,0)+3]=w.lights[S].radius,this._lightTexture.buffer[this._lightTexture.bufferIndex(S,1)+0]=w.lights[S].color[0],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,1)+1]=w.lights[S].color[1],this._lightTexture.buffer[this._lightTexture.bufferIndex(S,1)+2]=w.lights[S].color[2];this._lightTexture.update(),this.updateClusters(x,this._viewMatrix,w),U.gl.bindFramebuffer(U.gl.FRAMEBUFFER,null),U.gl.clear(U.gl.COLOR_BUFFER_BIT|U.gl.DEPTH_BUFFER_BIT),U.gl.useProgram(this._progShade.glShaderProgram);for(var z=0;z<4;z++)U.gl.activeTexture(U.gl["TEXTURE"+(z+0)]),U.gl.bindTexture(U.gl.TEXTURE_2D,this._gbuffers[z]),U.gl.uniform1i(this._progShade["u_gbuffers["+z+"]"],z+0);!function renderFullscreenQuad(x){U.gl.useProgram(x.glShaderProgram),U.gl.bindBuffer(U.gl.ARRAY_BUFFER,q),U.gl.enableVertexAttribArray(x.a_position),U.gl.vertexAttribPointer(x.a_position,3,U.gl.FLOAT,U.gl.FALSE,0,0),U.gl.drawArrays(U.gl.TRIANGLE_STRIP,0,4),U.gl.disableVertexAttribArray(x.a_position),U.gl.bindBuffer(U.gl.ARRAY_BUFFER,null)}(this._progShade)},ClusteredDeferredRenderer}(nr),cr=S(1007),ur=S.n(cr),hr=S(9355),dr=S.n(hr),pr=function(){function Wireframe(){this._shaderProgram=loadShaderProgram(ur(),dr(),{uniforms:["u_viewProjectionMatrix"],attribs:["a_position","a_color"]}),this._projectionMatrix=G.Ue(),this._viewMatrix=G.Ue(),this._viewProjectionMatrix=G.Ue(),this._attributesNeedUpdate=!1,this._positions=[],this._colors=[],this._vertexAttributes}var x=Wireframe.prototype;return x.addLineSegment=function addLineSegment(x,w,S){this._positions.push(x.slice()),this._positions.push(w.slice()),this._colors.push(S.slice()),this._colors.push(S.slice()),this._attributesNeedUpdate=!0},x._updateVertexData=function _updateVertexData(){for(var x=[],w=0;w<this._positions.length;w++)x.push(this._positions[w][0]),x.push(this._positions[w][1]),x.push(this._positions[w][2]),x.push(this._colors[w][0]),x.push(this._colors[w][1]),x.push(this._colors[w][2]);var S=U.gl.createBuffer();U.gl.bindBuffer(U.gl.ARRAY_BUFFER,S),U.gl.bufferData(U.gl.ARRAY_BUFFER,new Float32Array(x),U.gl.STATIC_DRAW),this._vertexAttributes=S,this._attributesNeedUpdate=!1},x.render=function render(x){0!==this._positions.length&&(this._attributesNeedUpdate&&this._updateVertexData(),x.updateMatrixWorld(),G.U_(this._viewMatrix,x.matrixWorld.elements),G.JG(this._projectionMatrix,x.projectionMatrix.elements),G.Jp(this._viewProjectionMatrix,this._projectionMatrix,this._viewMatrix),U.gl.bindFramebuffer(U.gl.FRAMEBUFFER,null),U.gl.viewport(0,0,canvas.width,canvas.height),U.gl.useProgram(this._shaderProgram.glShaderProgram),U.gl.uniformMatrix4fv(this._shaderProgram.u_viewProjectionMatrix,!1,this._viewProjectionMatrix),U.gl.bindBuffer(U.gl.ARRAY_BUFFER,this._vertexAttributes),U.gl.enableVertexAttribArray(this._shaderProgram.a_position),U.gl.enableVertexAttribArray(this._shaderProgram.a_color),U.gl.vertexAttribPointer(this._shaderProgram.a_position,3,U.gl.FLOAT,!1,24,0),U.gl.vertexAttribPointer(this._shaderProgram.a_color,3,U.gl.FLOAT,!1,24,12),U.gl.drawArrays(U.gl.LINES,0,this._positions.length))},Wireframe}(),fr="Forward",mr="Forward+",gr="Clustered Deferred",vr={renderer:mr,_renderer:null};function setRenderer(x){switch(x){case fr:vr._renderer=new ie;break;case mr:vr._renderer=new rr(15,15,15);break;case gr:vr._renderer=new lr(15,15,15)}}setRenderer(vr.renderer),U.NR.add(vr,"renderer",[fr,mr,gr]).onChange(setRenderer);var yr=new ee;yr.loadGLTF("models/sponza/sponza.gltf");var _r=new pr;_r.addLineSegment([-14,0,-6],[14,20,6],[1,0,0]),_r.addLineSegment([-14,1,-6],[14,21,6],[0,1,0]),U.nS.position.set(-10,8,0),U.Dd.target.set(0,2,0),U.gl.enable(U.gl.DEPTH_TEST),(0,U.Re)((function render(){yr.update(),vr._renderer.render(U.nS,yr),U.gl.disable(U.gl.DEPTH_TEST),_r.render(U.nS),U.gl.enable(U.gl.DEPTH_TEST)}))()},1924:(x,w,S)=>{"use strict";var U=S(210),G=S(5559),z=G(U("String.prototype.indexOf"));x.exports=function callBoundIntrinsic(x,w){var S=U(x,!!w);return"function"==typeof S&&z(x,".prototype.")>-1?G(S):S}},5559:(x,w,S)=>{"use strict";var U=S(8612),G=S(210),z=S(7771),H=G("%TypeError%"),j=G("%Function.prototype.apply%"),X=G("%Function.prototype.call%"),q=G("%Reflect.apply%",!0)||U.call(X,j),K=G("%Object.defineProperty%",!0),Y=G("%Math.max%");if(K)try{K({},"a",{value:1})}catch(x){K=null}x.exports=function callBind(x){if("function"!=typeof x)throw new H("a function is required");var w=q(U,X,arguments);return z(w,1+Y(0,x.length-(arguments.length-1)),!0)};var Z=function applyBind(){return q(U,j,arguments)};K?K(x.exports,"apply",{value:Z}):x.exports.apply=Z},5108:(x,w,S)=>{var U=S(9539),G=S(9282);function now(){return(new Date).getTime()}var z,H=Array.prototype.slice,j={};z=void 0!==S.g&&S.g.console?S.g.console:"undefined"!=typeof window&&window.console?window.console:{};for(var X=[[function log(){},"log"],[function info(){z.log.apply(z,arguments)},"info"],[function warn(){z.log.apply(z,arguments)},"warn"],[function error(){z.warn.apply(z,arguments)},"error"],[function time(x){j[x]=now()},"time"],[function timeEnd(x){var w=j[x];if(!w)throw new Error("No such label: "+x);delete j[x];var S=now()-w;z.log(x+": "+S+"ms")},"timeEnd"],[function trace(){var x=new Error;x.name="Trace",x.message=U.format.apply(null,arguments),z.error(x.stack)},"trace"],[function dir(x){z.log(U.inspect(x)+"\n")},"dir"],[function consoleAssert(x){if(!x){var w=H.call(arguments,1);G.ok(!1,U.format.apply(null,w))}},"assert"]],q=0;q<X.length;q++){var K=X[q],Y=K[0],Z=K[1];z[Z]||(z[Z]=Y)}x.exports=z},2296:(x,w,S)=>{"use strict";var U=S(1044)(),G=S(210),z=U&&G("%Object.defineProperty%",!0);if(z)try{z({},"a",{value:1})}catch(x){z=!1}var H=G("%SyntaxError%"),j=G("%TypeError%"),X=S(7296);x.exports=function defineDataProperty(x,w,S){if(!x||"object"!=typeof x&&"function"!=typeof x)throw new j("`obj` must be an object or a function`");if("string"!=typeof w&&"symbol"!=typeof w)throw new j("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new j("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new j("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new j("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new j("`loose`, if provided, must be a boolean");var U=arguments.length>3?arguments[3]:null,G=arguments.length>4?arguments[4]:null,q=arguments.length>5?arguments[5]:null,K=arguments.length>6&&arguments[6],Y=!!X&&X(x,w);if(z)z(x,w,{configurable:null===q&&Y?Y.configurable:!q,enumerable:null===U&&Y?Y.enumerable:!U,value:S,writable:null===G&&Y?Y.writable:!G});else{if(!K&&(U||G||q))throw new H("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");x[w]=S}}},4289:(x,w,S)=>{"use strict";var U=S(2215),G="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),z=Object.prototype.toString,H=Array.prototype.concat,j=S(2296),X=S(1044)(),defineProperty=function(x,w,S,U){if(w in x)if(!0===U){if(x[w]===S)return}else if("function"!=typeof(G=U)||"[object Function]"!==z.call(G)||!U())return;var G;X?j(x,w,S,!0):j(x,w,S)},defineProperties=function(x,w){var S=arguments.length>2?arguments[2]:{},z=U(w);G&&(z=H.call(z,Object.getOwnPropertySymbols(w)));for(var j=0;j<z.length;j+=1)defineProperty(x,z[j],w[z[j]],S[z[j]])};defineProperties.supportsDescriptors=!!X,x.exports=defineProperties},4029:(x,w,S)=>{"use strict";var U=S(5320),G=Object.prototype.toString,z=Object.prototype.hasOwnProperty;x.exports=function forEach(x,w,S){if(!U(w))throw new TypeError("iterator must be a function");var H;arguments.length>=3&&(H=S),"[object Array]"===G.call(x)?function forEachArray(x,w,S){for(var U=0,G=x.length;U<G;U++)z.call(x,U)&&(null==S?w(x[U],U,x):w.call(S,x[U],U,x))}(x,w,H):"string"==typeof x?function forEachString(x,w,S){for(var U=0,G=x.length;U<G;U++)null==S?w(x.charAt(U),U,x):w.call(S,x.charAt(U),U,x)}(x,w,H):function forEachObject(x,w,S){for(var U in x)z.call(x,U)&&(null==S?w(x[U],U,x):w.call(S,x[U],U,x))}(x,w,H)}},7648:x=>{"use strict";var w=Object.prototype.toString,S=Math.max,U=function concatty(x,w){for(var S=[],U=0;U<x.length;U+=1)S[U]=x[U];for(var G=0;G<w.length;G+=1)S[G+x.length]=w[G];return S};x.exports=function bind(x){var G=this;if("function"!=typeof G||"[object Function]"!==w.apply(G))throw new TypeError("Function.prototype.bind called on incompatible "+G);for(var z,H=function slicy(x,w){for(var S=[],U=w||0,G=0;U<x.length;U+=1,G+=1)S[G]=x[U];return S}(arguments,1),j=S(0,G.length-H.length),X=[],q=0;q<j;q++)X[q]="$"+q;if(z=Function("binder","return function ("+function(x,w){for(var S="",U=0;U<x.length;U+=1)S+=x[U],U+1<x.length&&(S+=w);return S}(X,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof z){var w=G.apply(this,U(H,arguments));return Object(w)===w?w:this}return G.apply(x,U(H,arguments))})),G.prototype){var K=function Empty(){};K.prototype=G.prototype,z.prototype=new K,K.prototype=null}return z}},8612:(x,w,S)=>{"use strict";var U=S(7648);x.exports=Function.prototype.bind||U},210:(x,w,S)=>{"use strict";var U,G=SyntaxError,z=Function,H=TypeError,getEvalledConstructor=function(x){try{return z('"use strict"; return ('+x+").constructor;")()}catch(x){}},j=Object.getOwnPropertyDescriptor;if(j)try{j({},"")}catch(x){j=null}var throwTypeError=function(){throw new H},X=j?function(){try{return throwTypeError}catch(x){try{return j(arguments,"callee").get}catch(x){return throwTypeError}}}():throwTypeError,q=S(1405)(),K=S(8185)(),Y=Object.getPrototypeOf||(K?function(x){return x.__proto__}:null),Z={},J="undefined"!=typeof Uint8Array&&Y?Y(Uint8Array):U,Q={"%AggregateError%":"undefined"==typeof AggregateError?U:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?U:ArrayBuffer,"%ArrayIteratorPrototype%":q&&Y?Y([][Symbol.iterator]()):U,"%AsyncFromSyncIteratorPrototype%":U,"%AsyncFunction%":Z,"%AsyncGenerator%":Z,"%AsyncGeneratorFunction%":Z,"%AsyncIteratorPrototype%":Z,"%Atomics%":"undefined"==typeof Atomics?U:Atomics,"%BigInt%":"undefined"==typeof BigInt?U:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?U:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?U:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?U:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?U:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?U:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?U:FinalizationRegistry,"%Function%":z,"%GeneratorFunction%":Z,"%Int8Array%":"undefined"==typeof Int8Array?U:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?U:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?U:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":q&&Y?Y(Y([][Symbol.iterator]())):U,"%JSON%":"object"==typeof JSON?JSON:U,"%Map%":"undefined"==typeof Map?U:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&q&&Y?Y((new Map)[Symbol.iterator]()):U,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?U:Promise,"%Proxy%":"undefined"==typeof Proxy?U:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?U:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?U:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&q&&Y?Y((new Set)[Symbol.iterator]()):U,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?U:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":q&&Y?Y(""[Symbol.iterator]()):U,"%Symbol%":q?Symbol:U,"%SyntaxError%":G,"%ThrowTypeError%":X,"%TypedArray%":J,"%TypeError%":H,"%Uint8Array%":"undefined"==typeof Uint8Array?U:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?U:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?U:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?U:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?U:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?U:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?U:WeakSet};if(Y)try{null.error}catch(x){var ee=Y(Y(x));Q["%Error.prototype%"]=ee}var te=function doEval(x){var w;if("%AsyncFunction%"===x)w=getEvalledConstructor("async function () {}");else if("%GeneratorFunction%"===x)w=getEvalledConstructor("function* () {}");else if("%AsyncGeneratorFunction%"===x)w=getEvalledConstructor("async function* () {}");else if("%AsyncGenerator%"===x){var S=doEval("%AsyncGeneratorFunction%");S&&(w=S.prototype)}else if("%AsyncIteratorPrototype%"===x){var U=doEval("%AsyncGenerator%");U&&Y&&(w=Y(U.prototype))}return Q[x]=w,w},ne={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},re=S(8612),ie=S(8824),oe=re.call(Function.call,Array.prototype.concat),ae=re.call(Function.apply,Array.prototype.splice),se=re.call(Function.call,String.prototype.replace),le=re.call(Function.call,String.prototype.slice),ce=re.call(Function.call,RegExp.prototype.exec),ue=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,he=/\\(\\)?/g,de=function getBaseIntrinsic(x,w){var S,U=x;if(ie(ne,U)&&(U="%"+(S=ne[U])[0]+"%"),ie(Q,U)){var z=Q[U];if(z===Z&&(z=te(U)),void 0===z&&!w)throw new H("intrinsic "+x+" exists, but is not available. Please file an issue!");return{alias:S,name:U,value:z}}throw new G("intrinsic "+x+" does not exist!")};x.exports=function GetIntrinsic(x,w){if("string"!=typeof x||0===x.length)throw new H("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof w)throw new H('"allowMissing" argument must be a boolean');if(null===ce(/^%?[^%]*%?$/,x))throw new G("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var S=function stringToPath(x){var w=le(x,0,1),S=le(x,-1);if("%"===w&&"%"!==S)throw new G("invalid intrinsic syntax, expected closing `%`");if("%"===S&&"%"!==w)throw new G("invalid intrinsic syntax, expected opening `%`");var U=[];return se(x,ue,(function(x,w,S,G){U[U.length]=S?se(G,he,"$1"):w||x})),U}(x),U=S.length>0?S[0]:"",z=de("%"+U+"%",w),X=z.name,q=z.value,K=!1,Y=z.alias;Y&&(U=Y[0],ae(S,oe([0,1],Y)));for(var Z=1,J=!0;Z<S.length;Z+=1){var ee=S[Z],te=le(ee,0,1),ne=le(ee,-1);if(('"'===te||"'"===te||"`"===te||'"'===ne||"'"===ne||"`"===ne)&&te!==ne)throw new G("property names with quotes must have matching quotes");if("constructor"!==ee&&J||(K=!0),ie(Q,X="%"+(U+="."+ee)+"%"))q=Q[X];else if(null!=q){if(!(ee in q)){if(!w)throw new H("base intrinsic for "+x+" exists, but the property is not available.");return}if(j&&Z+1>=S.length){var re=j(q,ee);q=(J=!!re)&&"get"in re&&!("originalValue"in re.get)?re.get:q[ee]}else J=ie(q,ee),q=q[ee];J&&!K&&(Q[X]=q)}}return q}},9685:(x,w,S)=>{"use strict";S.d(w,{Ib:()=>U,WT:()=>G});var U=1e-6,G="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var x=0,w=arguments.length;w--;)x+=arguments[w]*arguments[w];return Math.sqrt(x)})},5975:(x,w,S)=>{"use strict";S.d(w,{JG:()=>copy,Jp:()=>multiply,U_:()=>invert,Ue:()=>create,bA:()=>scale,yl:()=>fromRotationTranslation});var U=S(9685);function create(){var x=new U.WT(16);return U.WT!=Float32Array&&(x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[11]=0,x[12]=0,x[13]=0,x[14]=0),x[0]=1,x[5]=1,x[10]=1,x[15]=1,x}function copy(x,w){return x[0]=w[0],x[1]=w[1],x[2]=w[2],x[3]=w[3],x[4]=w[4],x[5]=w[5],x[6]=w[6],x[7]=w[7],x[8]=w[8],x[9]=w[9],x[10]=w[10],x[11]=w[11],x[12]=w[12],x[13]=w[13],x[14]=w[14],x[15]=w[15],x}function invert(x,w){var S=w[0],U=w[1],G=w[2],z=w[3],H=w[4],j=w[5],X=w[6],q=w[7],K=w[8],Y=w[9],Z=w[10],J=w[11],Q=w[12],ee=w[13],te=w[14],ne=w[15],re=S*j-U*H,ie=S*X-G*H,oe=S*q-z*H,ae=U*X-G*j,se=U*q-z*j,le=G*q-z*X,ce=K*ee-Y*Q,ue=K*te-Z*Q,he=K*ne-J*Q,de=Y*te-Z*ee,pe=Y*ne-J*ee,fe=Z*ne-J*te,me=re*fe-ie*pe+oe*de+ae*he-se*ue+le*ce;return me?(me=1/me,x[0]=(j*fe-X*pe+q*de)*me,x[1]=(G*pe-U*fe-z*de)*me,x[2]=(ee*le-te*se+ne*ae)*me,x[3]=(Z*se-Y*le-J*ae)*me,x[4]=(X*he-H*fe-q*ue)*me,x[5]=(S*fe-G*he+z*ue)*me,x[6]=(te*oe-Q*le-ne*ie)*me,x[7]=(K*le-Z*oe+J*ie)*me,x[8]=(H*pe-j*he+q*ce)*me,x[9]=(U*he-S*pe-z*ce)*me,x[10]=(Q*se-ee*oe+ne*re)*me,x[11]=(Y*oe-K*se-J*re)*me,x[12]=(j*ue-H*de-X*ce)*me,x[13]=(S*de-U*ue+G*ce)*me,x[14]=(ee*ie-Q*ae-te*re)*me,x[15]=(K*ae-Y*ie+Z*re)*me,x):null}function multiply(x,w,S){var U=w[0],G=w[1],z=w[2],H=w[3],j=w[4],X=w[5],q=w[6],K=w[7],Y=w[8],Z=w[9],J=w[10],Q=w[11],ee=w[12],te=w[13],ne=w[14],re=w[15],ie=S[0],oe=S[1],ae=S[2],se=S[3];return x[0]=ie*U+oe*j+ae*Y+se*ee,x[1]=ie*G+oe*X+ae*Z+se*te,x[2]=ie*z+oe*q+ae*J+se*ne,x[3]=ie*H+oe*K+ae*Q+se*re,ie=S[4],oe=S[5],ae=S[6],se=S[7],x[4]=ie*U+oe*j+ae*Y+se*ee,x[5]=ie*G+oe*X+ae*Z+se*te,x[6]=ie*z+oe*q+ae*J+se*ne,x[7]=ie*H+oe*K+ae*Q+se*re,ie=S[8],oe=S[9],ae=S[10],se=S[11],x[8]=ie*U+oe*j+ae*Y+se*ee,x[9]=ie*G+oe*X+ae*Z+se*te,x[10]=ie*z+oe*q+ae*J+se*ne,x[11]=ie*H+oe*K+ae*Q+se*re,ie=S[12],oe=S[13],ae=S[14],se=S[15],x[12]=ie*U+oe*j+ae*Y+se*ee,x[13]=ie*G+oe*X+ae*Z+se*te,x[14]=ie*z+oe*q+ae*J+se*ne,x[15]=ie*H+oe*K+ae*Q+se*re,x}function scale(x,w,S){var U=S[0],G=S[1],z=S[2];return x[0]=w[0]*U,x[1]=w[1]*U,x[2]=w[2]*U,x[3]=w[3]*U,x[4]=w[4]*G,x[5]=w[5]*G,x[6]=w[6]*G,x[7]=w[7]*G,x[8]=w[8]*z,x[9]=w[9]*z,x[10]=w[10]*z,x[11]=w[11]*z,x[12]=w[12],x[13]=w[13],x[14]=w[14],x[15]=w[15],x}function fromRotationTranslation(x,w,S){var U=w[0],G=w[1],z=w[2],H=w[3],j=U+U,X=G+G,q=z+z,K=U*j,Y=U*X,Z=U*q,J=G*X,Q=G*q,ee=z*q,te=H*j,ne=H*X,re=H*q;return x[0]=1-(J+ee),x[1]=Y+re,x[2]=Z-ne,x[3]=0,x[4]=Y-re,x[5]=1-(K+ee),x[6]=Q+te,x[7]=0,x[8]=Z+ne,x[9]=Q-te,x[10]=1-(K+J),x[11]=0,x[12]=S[0],x[13]=S[1],x[14]=S[2],x[15]=1,x}},7296:(x,w,S)=>{"use strict";var U=S(210)("%Object.getOwnPropertyDescriptor%",!0);if(U)try{U([],"length")}catch(x){U=null}x.exports=U},1044:(x,w,S)=>{"use strict";var U=S(210)("%Object.defineProperty%",!0),G=function hasPropertyDescriptors(){if(U)try{return U({},"a",{value:1}),!0}catch(x){return!1}return!1};G.hasArrayLengthDefineBug=function hasArrayLengthDefineBug(){if(!G())return null;try{return 1!==U([],"length",{value:1}).length}catch(x){return!0}},x.exports=G},8185:x=>{"use strict";var w={foo:{}},S=Object;x.exports=function hasProto(){return{__proto__:w}.foo===w.foo&&!({__proto__:null}instanceof S)}},1405:(x,w,S)=>{"use strict";var U="undefined"!=typeof Symbol&&Symbol,G=S(5419);x.exports=function hasNativeSymbols(){return"function"==typeof U&&("function"==typeof Symbol&&("symbol"==typeof U("foo")&&("symbol"==typeof Symbol("bar")&&G())))}},5419:x=>{"use strict";x.exports=function hasSymbols(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var x={},w=Symbol("test"),S=Object(w);if("string"==typeof w)return!1;if("[object Symbol]"!==Object.prototype.toString.call(w))return!1;if("[object Symbol]"!==Object.prototype.toString.call(S))return!1;for(w in x[w]=42,x)return!1;if("function"==typeof Object.keys&&0!==Object.keys(x).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(x).length)return!1;var U=Object.getOwnPropertySymbols(x);if(1!==U.length||U[0]!==w)return!1;if(!Object.prototype.propertyIsEnumerable.call(x,w))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var G=Object.getOwnPropertyDescriptor(x,w);if(42!==G.value||!0!==G.enumerable)return!1}return!0}},6410:(x,w,S)=>{"use strict";var U=S(5419);x.exports=function hasToStringTagShams(){return U()&&!!Symbol.toStringTag}},8824:(x,w,S)=>{"use strict";var U=Function.prototype.call,G=Object.prototype.hasOwnProperty,z=S(8612);x.exports=z.call(U,G)},5717:x=>{"function"==typeof Object.create?x.exports=function inherits(x,w){w&&(x.super_=w,x.prototype=Object.create(w.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}))}:x.exports=function inherits(x,w){if(w){x.super_=w;var TempCtor=function(){};TempCtor.prototype=w.prototype,x.prototype=new TempCtor,x.prototype.constructor=x}}},2584:(x,w,S)=>{"use strict";var U=S(6410)(),G=S(1924)("Object.prototype.toString"),z=function isArguments(x){return!(U&&x&&"object"==typeof x&&Symbol.toStringTag in x)&&"[object Arguments]"===G(x)},H=function isArguments(x){return!!z(x)||null!==x&&"object"==typeof x&&"number"==typeof x.length&&x.length>=0&&"[object Array]"!==G(x)&&"[object Function]"===G(x.callee)},j=function(){return z(arguments)}();z.isLegacyArguments=H,x.exports=j?z:H},5320:x=>{"use strict";var w,S,U=Function.prototype.toString,G="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof G&&"function"==typeof Object.defineProperty)try{w=Object.defineProperty({},"length",{get:function(){throw S}}),S={},G((function(){throw 42}),null,w)}catch(x){x!==S&&(G=null)}else G=null;var z=/^\s*class\b/,H=function isES6ClassFunction(x){try{var w=U.call(x);return z.test(w)}catch(x){return!1}},j=function tryFunctionToStr(x){try{return!H(x)&&(U.call(x),!0)}catch(x){return!1}},X=Object.prototype.toString,q="function"==typeof Symbol&&!!Symbol.toStringTag,K=!(0 in[,]),Y=function isDocumentDotAll(){return!1};if("object"==typeof document){var Z=document.all;X.call(Z)===X.call(document.all)&&(Y=function isDocumentDotAll(x){if((K||!x)&&(void 0===x||"object"==typeof x))try{var w=X.call(x);return("[object HTMLAllCollection]"===w||"[object HTML document.all class]"===w||"[object HTMLCollection]"===w||"[object Object]"===w)&&null==x("")}catch(x){}return!1})}x.exports=G?function isCallable(x){if(Y(x))return!0;if(!x)return!1;if("function"!=typeof x&&"object"!=typeof x)return!1;try{G(x,null,w)}catch(x){if(x!==S)return!1}return!H(x)&&j(x)}:function isCallable(x){if(Y(x))return!0;if(!x)return!1;if("function"!=typeof x&&"object"!=typeof x)return!1;if(q)return j(x);if(H(x))return!1;var w=X.call(x);return!("[object Function]"!==w&&"[object GeneratorFunction]"!==w&&!/^\[object HTML/.test(w))&&j(x)}},8662:(x,w,S)=>{"use strict";var U,G=Object.prototype.toString,z=Function.prototype.toString,H=/^\s*(?:function)?\*/,j=S(6410)(),X=Object.getPrototypeOf;x.exports=function isGeneratorFunction(x){if("function"!=typeof x)return!1;if(H.test(z.call(x)))return!0;if(!j)return"[object GeneratorFunction]"===G.call(x);if(!X)return!1;if(void 0===U){var w=function(){if(!j)return!1;try{return Function("return function*() {}")()}catch(x){}}();U=!!w&&X(w)}return X(x)===U}},8611:x=>{"use strict";x.exports=function isNaN(x){return x!=x}},360:(x,w,S)=>{"use strict";var U=S(5559),G=S(4289),z=S(8611),H=S(9415),j=S(3194),X=U(H(),Number);G(X,{getPolyfill:H,implementation:z,shim:j}),x.exports=X},9415:(x,w,S)=>{"use strict";var U=S(8611);x.exports=function getPolyfill(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:U}},3194:(x,w,S)=>{"use strict";var U=S(4289),G=S(9415);x.exports=function shimNumberIsNaN(){var x=G();return U(Number,{isNaN:x},{isNaN:function testIsNaN(){return Number.isNaN!==x}}),x}},5692:(x,w,S)=>{"use strict";var U=S(6430);x.exports=function isTypedArray(x){return!!U(x)}},7996:x=>{var MersenneTwister=function(x){null==x&&(x=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,x.constructor==Array?this.init_by_array(x,x.length):this.init_seed(x)};MersenneTwister.prototype.init_seed=function(x){for(this.mt[0]=x>>>0,this.mti=1;this.mti<this.N;this.mti++){x=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&x)>>>16)<<16)+1812433253*(65535&x)+this.mti,this.mt[this.mti]>>>=0}},MersenneTwister.prototype.init_by_array=function(x,w){var S,U,G;for(this.init_seed(19650218),S=1,U=0,G=this.N>w?this.N:w;G;G--){var z=this.mt[S-1]^this.mt[S-1]>>>30;this.mt[S]=(this.mt[S]^(1664525*((4294901760&z)>>>16)<<16)+1664525*(65535&z))+x[U]+U,this.mt[S]>>>=0,U++,++S>=this.N&&(this.mt[0]=this.mt[this.N-1],S=1),U>=w&&(U=0)}for(G=this.N-1;G;G--){z=this.mt[S-1]^this.mt[S-1]>>>30;this.mt[S]=(this.mt[S]^(1566083941*((4294901760&z)>>>16)<<16)+1566083941*(65535&z))-S,this.mt[S]>>>=0,++S>=this.N&&(this.mt[0]=this.mt[this.N-1],S=1)}this.mt[0]=2147483648},MersenneTwister.prototype.random_int=function(){var x,w=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var S;for(this.mti==this.N+1&&this.init_seed(5489),S=0;S<this.N-this.M;S++)x=this.mt[S]&this.UPPER_MASK|this.mt[S+1]&this.LOWER_MASK,this.mt[S]=this.mt[S+this.M]^x>>>1^w[1&x];for(;S<this.N-1;S++)x=this.mt[S]&this.UPPER_MASK|this.mt[S+1]&this.LOWER_MASK,this.mt[S]=this.mt[S+(this.M-this.N)]^x>>>1^w[1&x];x=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^x>>>1^w[1&x],this.mti=0}return x=this.mt[this.mti++],x^=x>>>11,x^=x<<7&2636928640,x^=x<<15&4022730752,(x^=x>>>18)>>>0},MersenneTwister.prototype.random_int31=function(){return this.random_int()>>>1},MersenneTwister.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},MersenneTwister.prototype.random=function(){return this.random_int()*(1/4294967296)},MersenneTwister.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},MersenneTwister.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},x.exports=MersenneTwister},4244:x=>{"use strict";var numberIsNaN=function(x){return x!=x};x.exports=function is(x,w){return 0===x&&0===w?1/x==1/w:x===w||!(!numberIsNaN(x)||!numberIsNaN(w))}},609:(x,w,S)=>{"use strict";var U=S(4289),G=S(5559),z=S(4244),H=S(5624),j=S(2281),X=G(H(),Object);U(X,{getPolyfill:H,implementation:z,shim:j}),x.exports=X},5624:(x,w,S)=>{"use strict";var U=S(4244);x.exports=function getPolyfill(){return"function"==typeof Object.is?Object.is:U}},2281:(x,w,S)=>{"use strict";var U=S(5624),G=S(4289);x.exports=function shimObjectIs(){var x=U();return G(Object,{is:x},{is:function testObjectIs(){return Object.is!==x}}),x}},8987:(x,w,S)=>{"use strict";var U;if(!Object.keys){var G=Object.prototype.hasOwnProperty,z=Object.prototype.toString,H=S(1414),j=Object.prototype.propertyIsEnumerable,X=!j.call({toString:null},"toString"),q=j.call((function(){}),"prototype"),K=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(x){var w=x.constructor;return w&&w.prototype===x},Y={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Z=function(){if("undefined"==typeof window)return!1;for(var x in window)try{if(!Y["$"+x]&&G.call(window,x)&&null!==window[x]&&"object"==typeof window[x])try{equalsConstructorPrototype(window[x])}catch(x){return!0}}catch(x){return!0}return!1}();U=function keys(x){var w=null!==x&&"object"==typeof x,S="[object Function]"===z.call(x),U=H(x),j=w&&"[object String]"===z.call(x),Y=[];if(!w&&!S&&!U)throw new TypeError("Object.keys called on a non-object");var J=q&&S;if(j&&x.length>0&&!G.call(x,0))for(var Q=0;Q<x.length;++Q)Y.push(String(Q));if(U&&x.length>0)for(var ee=0;ee<x.length;++ee)Y.push(String(ee));else for(var te in x)J&&"prototype"===te||!G.call(x,te)||Y.push(String(te));if(X)for(var ne=function(x){if("undefined"==typeof window||!Z)return equalsConstructorPrototype(x);try{return equalsConstructorPrototype(x)}catch(x){return!1}}(x),re=0;re<K.length;++re)ne&&"constructor"===K[re]||!G.call(x,K[re])||Y.push(K[re]);return Y}}x.exports=U},2215:(x,w,S)=>{"use strict";var U=Array.prototype.slice,G=S(1414),z=Object.keys,H=z?function keys(x){return z(x)}:S(8987),j=Object.keys;H.shim=function shimObjectKeys(){if(Object.keys){var x=function(){var x=Object.keys(arguments);return x&&x.length===arguments.length}(1,2);x||(Object.keys=function keys(x){return G(x)?j(U.call(x)):j(x)})}else Object.keys=H;return Object.keys||H},x.exports=H},1414:x=>{"use strict";var w=Object.prototype.toString;x.exports=function isArguments(x){var S=w.call(x),U="[object Arguments]"===S;return U||(U="[object Array]"!==S&&null!==x&&"object"==typeof x&&"number"==typeof x.length&&x.length>=0&&"[object Function]"===w.call(x.callee)),U}},2837:(x,w,S)=>{"use strict";var U=S(2215),G=S(5419)(),z=S(1924),H=Object,j=z("Array.prototype.push"),X=z("Object.prototype.propertyIsEnumerable"),q=G?Object.getOwnPropertySymbols:null;x.exports=function assign(x,w){if(null==x)throw new TypeError("target must be an object");var S=H(x);if(1===arguments.length)return S;for(var z=1;z<arguments.length;++z){var K=H(arguments[z]),Y=U(K),Z=G&&(Object.getOwnPropertySymbols||q);if(Z)for(var J=Z(K),Q=0;Q<J.length;++Q){var ee=J[Q];X(K,ee)&&j(Y,ee)}for(var te=0;te<Y.length;++te){var ne=Y[te];if(X(K,ne)){var re=K[ne];S[ne]=re}}}return S}},8162:(x,w,S)=>{"use strict";var U=S(2837);x.exports=function getPolyfill(){return Object.assign?function(){if(!Object.assign)return!1;for(var x="abcdefghijklmnopqrst",w=x.split(""),S={},U=0;U<w.length;++U)S[w[U]]=w[U];var G=Object.assign({},S),z="";for(var H in G)z+=H;return x!==z}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var x=Object.preventExtensions({1:2});try{Object.assign(x,"xy")}catch(w){return"y"===x[1]}return!1}()?U:Object.assign:U}},4155:x=>{var w,S,U=x.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(x){if(w===setTimeout)return setTimeout(x,0);if((w===defaultSetTimout||!w)&&setTimeout)return w=setTimeout,setTimeout(x,0);try{return w(x,0)}catch(S){try{return w.call(null,x,0)}catch(S){return w.call(this,x,0)}}}!function(){try{w="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(x){w=defaultSetTimout}try{S="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(x){S=defaultClearTimeout}}();var G,z=[],H=!1,j=-1;function cleanUpNextTick(){H&&G&&(H=!1,G.length?z=G.concat(z):j=-1,z.length&&drainQueue())}function drainQueue(){if(!H){var x=runTimeout(cleanUpNextTick);H=!0;for(var w=z.length;w;){for(G=z,z=[];++j<w;)G&&G[j].run();j=-1,w=z.length}G=null,H=!1,function runClearTimeout(x){if(S===clearTimeout)return clearTimeout(x);if((S===defaultClearTimeout||!S)&&clearTimeout)return S=clearTimeout,clearTimeout(x);try{return S(x)}catch(w){try{return S.call(null,x)}catch(w){return S.call(this,x)}}}(x)}}function Item(x,w){this.fun=x,this.array=w}function noop(){}U.nextTick=function(x){var w=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)w[S-1]=arguments[S];z.push(new Item(x,w)),1!==z.length||H||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},U.title="browser",U.browser=!0,U.env={},U.argv=[],U.version="",U.versions={},U.on=noop,U.addListener=noop,U.once=noop,U.off=noop,U.removeListener=noop,U.removeAllListeners=noop,U.emit=noop,U.prependListener=noop,U.prependOnceListener=noop,U.listeners=function(x){return[]},U.binding=function(x){throw new Error("process.binding is not supported")},U.cwd=function(){return"/"},U.chdir=function(x){throw new Error("process.chdir is not supported")},U.umask=function(){return 0}},7771:(x,w,S)=>{"use strict";var U=S(210),G=S(2296),z=S(1044)(),H=S(7296),j=U("%TypeError%"),X=U("%Math.floor%");x.exports=function setFunctionLength(x,w){if("function"!=typeof x)throw new j("`fn` is not a function");if("number"!=typeof w||w<0||w>4294967295||X(w)!==w)throw new j("`length` must be a positive 32-bit integer");var S=arguments.length>2&&!!arguments[2],U=!0,q=!0;if("length"in x&&H){var K=H(x,"length");K&&!K.configurable&&(U=!1),K&&!K.writable&&(q=!1)}return(U||q||!S)&&(z?G(x,"length",w,!0,!0):G(x,"length",w)),x}},9739:(x,w,S)=>{var U=S(5108);window,x.exports=function(x){var w={};function n(S){if(w[S])return w[S].exports;var U=w[S]={i:S,l:!1,exports:{}};return x[S].call(U.exports,U,U.exports,n),U.l=!0,U.exports}return n.m=x,n.c=w,n.d=function(x,w,S){n.o(x,w)||Object.defineProperty(x,w,{enumerable:!0,get:S})},n.r=function(x){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},n.t=function(x,w){if(1&w&&(x=n(x)),8&w)return x;if(4&w&&"object"==typeof x&&x&&x.__esModule)return x;var S=Object.create(null);if(n.r(S),Object.defineProperty(S,"default",{enumerable:!0,value:x}),2&w&&"string"!=typeof x)for(var U in x)n.d(S,U,function(w){return x[w]}.bind(null,U));return S},n.n=function(x){var w=x&&x.__esModule?function(){return x.default}:function(){return x};return n.d(w,"a",w),w},n.o=function(x,w){return Object.prototype.hasOwnProperty.call(x,w)},n.p="/",n(n.s=4)}([function(x,w){x.exports=function(x){return x.webpackPolyfill||(x.deprecate=function(){},x.paths=[],x.children||(x.children=[]),Object.defineProperty(x,"loaded",{enumerable:!0,get:function(){return x.l}}),Object.defineProperty(x,"id",{enumerable:!0,get:function(){return x.i}}),x.webpackPolyfill=1),x}},function(x,w,S){"use strict";var U,r=function(){return void 0===U&&(U=Boolean(window&&document&&document.all&&!window.atob)),U},G=function(){var x={};return function(w){if(void 0===x[w]){var S=document.querySelector(w);if(window.HTMLIFrameElement&&S instanceof window.HTMLIFrameElement)try{S=S.contentDocument.head}catch(x){S=null}x[w]=S}return x[w]}}(),z=[];function a(x){for(var w=-1,S=0;S<z.length;S++)if(z[S].identifier===x){w=S;break}return w}function c(x,w){for(var S={},U=[],G=0;G<x.length;G++){var H=x[G],j=w.base?H[0]+w.base:H[0],X=S[j]||0,q="".concat(j," ").concat(X);S[j]=X+1;var K=a(q),Y={css:H[1],media:H[2],sourceMap:H[3]};-1!==K?(z[K].references++,z[K].updater(Y)):z.push({identifier:q,updater:g(Y,w),references:1}),U.push(q)}return U}function l(x){var w=document.createElement("style"),U=x.attributes||{};if(void 0===U.nonce){var z=S.nc;z&&(U.nonce=z)}if(Object.keys(U).forEach((function(x){w.setAttribute(x,U[x])})),"function"==typeof x.insert)x.insert(w);else{var H=G(x.insert||"head");if(!H)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");H.appendChild(w)}return w}var H,j=(H=[],function(x,w){return H[x]=w,H.filter(Boolean).join("\n")});function d(x,w,S,U){var G=S?"":U.media?"@media ".concat(U.media," {").concat(U.css,"}"):U.css;if(x.styleSheet)x.styleSheet.cssText=j(w,G);else{var z=document.createTextNode(G),H=x.childNodes;H[w]&&x.removeChild(H[w]),H.length?x.insertBefore(z,H[w]):x.appendChild(z)}}function p(x,w,S){var U=S.css,G=S.media,z=S.sourceMap;if(G?x.setAttribute("media",G):x.removeAttribute("media"),z&&btoa&&(U+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(z))))," */")),x.styleSheet)x.styleSheet.cssText=U;else{for(;x.firstChild;)x.removeChild(x.firstChild);x.appendChild(document.createTextNode(U))}}var X=null,q=0;function g(x,w){var S,U,G;if(w.singleton){var z=q++;S=X||(X=l(w)),U=d.bind(null,S,z,!1),G=d.bind(null,S,z,!0)}else S=l(w),U=p.bind(null,S,w),G=function(){!function(x){if(null===x.parentNode)return!1;x.parentNode.removeChild(x)}(S)};return U(x),function(w){if(w){if(w.css===x.css&&w.media===x.media&&w.sourceMap===x.sourceMap)return;U(x=w)}else G()}}x.exports=function(x,w){(w=w||{}).singleton||"boolean"==typeof w.singleton||(w.singleton=r());var S=c(x=x||[],w);return function(x){if(x=x||[],"[object Array]"===Object.prototype.toString.call(x)){for(var U=0;U<S.length;U++){var G=a(S[U]);z[G].references--}for(var H=c(x,w),j=0;j<S.length;j++){var X=a(S[j]);0===z[X].references&&(z[X].updater(),z.splice(X,1))}S=H}}}},function(x,w,S){"use strict";x.exports=function(x){var w=[];return w.toString=function(){return this.map((function(w){var S=function(x,w){var S,U,G,z=x[1]||"",H=x[3];if(!H)return z;if(w&&"function"==typeof btoa){var j=(S=H,U=btoa(unescape(encodeURIComponent(JSON.stringify(S)))),G="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(U),"/*# ".concat(G," */")),X=H.sources.map((function(x){return"/*# sourceURL=".concat(H.sourceRoot||"").concat(x," */")}));return[z].concat(X).concat([j]).join("\n")}return[z].join("\n")}(w,x);return w[2]?"@media ".concat(w[2]," {").concat(S,"}"):S})).join("")},w.i=function(x,S,U){"string"==typeof x&&(x=[[null,x,""]]);var G={};if(U)for(var z=0;z<this.length;z++){var H=this[z][0];null!=H&&(G[H]=!0)}for(var j=0;j<x.length;j++){var X=[].concat(x[j]);U&&G[X[0]]||(S&&(X[2]?X[2]="".concat(S," and ").concat(X[2]):X[2]=S),w.push(X))}},w}},function(x,w){x.exports=function(){throw new Error("define cannot be used indirect")}},function(x,w,S){S(5),S(6),S(7),S(8),S(10),x.exports=S(15)},function(x,w,S){(function(x){!function(){var x=function(){return this}();x||"undefined"==typeof window||(x=window);var t=function(x,w,S){"string"==typeof x?(2==arguments.length&&(S=w),t.modules[x]||(t.payloads[x]=S,t.modules[x]=null)):t.original?t.original.apply(this,arguments):(U.error("dropping module because define wasn't a string."),U.trace())};t.modules={},t.payloads={};var w,S,r=function(x,w,S){if("string"==typeof w){var U=a(x,w);if(null!=U)return S&&S(),U}else if("[object Array]"===Object.prototype.toString.call(w)){for(var G=[],z=0,H=w.length;z<H;++z){var j=a(x,w[z]);if(null==j&&o.original)return;G.push(j)}return S&&S.apply(null,G)||!0}},o=function(x,w){var S=r("",x,w);return null==S&&o.original?o.original.apply(this,arguments):S},s=function(x,w){if(-1!==w.indexOf("!")){var S=w.split("!");return s(x,S[0])+"!"+s(x,S[1])}if("."==w.charAt(0))for(w=x.split("/").slice(0,-1).join("/")+"/"+w;-1!==w.indexOf(".")&&U!=w;){var U=w;w=w.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return w},a=function(x,w){w=s(x,w);var S=t.modules[w];if(!S){if("function"==typeof(S=t.payloads[w])){var U={},G={id:w,uri:"",exports:U,packaged:!0};U=S((function(x,S){return r(w,x,S)}),U,G)||G.exports,t.modules[w]=U,delete t.payloads[w]}S=t.modules[w]=U||S}return S};S=x,(w="ace")&&(x[w]||(x[w]={}),S=x[w]),S.define&&S.define.packaged||(t.original=S.define,S.define=t,S.define.packaged=!0),S.require&&S.require.packaged||(o.original=S.require,S.require=o,S.require.packaged=!0)}(),ace.define("ace/lib/regexp",["require","exports","module"],(function(x,w,S){"use strict";var U,G={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},z=void 0===G.exec.call(/()??/,"")[1],H=(U=/^/g,G.test.call(U,""),!U.lastIndex);function a(x){return(x.global?"g":"")+(x.ignoreCase?"i":"")+(x.multiline?"m":"")+(x.extended?"x":"")+(x.sticky?"y":"")}function c(x,w,S){if(Array.prototype.indexOf)return x.indexOf(w,S);for(var U=S||0;U<x.length;U++)if(x[U]===w)return U;return-1}H&&z||(RegExp.prototype.exec=function(x){var w,S,U=G.exec.apply(this,arguments);if("string"==typeof x&&U){if(!z&&U.length>1&&c(U,"")>-1&&(S=RegExp(this.source,G.replace.call(a(this),"g","")),G.replace.call(x.slice(U.index),S,(function(){for(var x=1;x<arguments.length-2;x++)void 0===arguments[x]&&(U[x]=void 0)}))),this._xregexp&&this._xregexp.captureNames)for(var j=1;j<U.length;j++)(w=this._xregexp.captureNames[j-1])&&(U[w]=U[j]);!H&&this.global&&!U[0].length&&this.lastIndex>U.index&&this.lastIndex--}return U},H||(RegExp.prototype.test=function(x){var w=G.exec.call(this,x);return w&&this.global&&!w[0].length&&this.lastIndex>w.index&&this.lastIndex--,!!w}))})),ace.define("ace/lib/es5-shim",["require","exports","module"],(function(x,w,S){function i(){}Function.prototype.bind||(Function.prototype.bind=function(x){var w=this;if("function"!=typeof w)throw new TypeError("Function.prototype.bind called on incompatible "+w);var S=Y.call(arguments,1),r=function(){if(this instanceof r){var U=w.apply(this,S.concat(Y.call(arguments)));return Object(U)===U?U:this}return w.apply(x,S.concat(Y.call(arguments)))};return w.prototype&&(i.prototype=w.prototype,r.prototype=new i,i.prototype=null),r});var U,G,z,H,j,X=Function.prototype.call,q=Array.prototype,K=Object.prototype,Y=q.slice,Z=X.bind(K.toString),J=X.bind(K.hasOwnProperty);if((j=J(K,"__defineGetter__"))&&(U=X.bind(K.__defineGetter__),G=X.bind(K.__defineSetter__),z=X.bind(K.__lookupGetter__),H=X.bind(K.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function e(x){var w=new Array(x+2);return w[0]=w[1]=0,w}var x,w=[];if(w.splice.apply(w,e(20)),w.splice.apply(w,e(26)),x=w.length,w.splice(5,0,"XXX"),w.length,x+1==w.length)return!0}()){var Q=Array.prototype.splice;Array.prototype.splice=function(x,w){return arguments.length?Q.apply(this,[void 0===x?0:x,void 0===w?this.length-x:w].concat(Y.call(arguments,2))):[]}}else Array.prototype.splice=function(x,w){var S=this.length;x>0?x>S&&(x=S):null==x?x=0:x<0&&(x=Math.max(S+x,0)),x+w<S||(w=S-x);var U=this.slice(x,x+w),G=Y.call(arguments,2),z=G.length;if(x===S)z&&this.push.apply(this,G);else{var H=Math.min(w,S-x),j=x+H,X=j+z-H,q=S-j,K=S-H;if(X<j)for(var Z=0;Z<q;++Z)this[X+Z]=this[j+Z];else if(X>j)for(Z=q;Z--;)this[X+Z]=this[j+Z];if(z&&x===K)this.length=K,this.push.apply(this,G);else for(this.length=K+z,Z=0;Z<z;++Z)this[x+Z]=G[Z]}return U};Array.isArray||(Array.isArray=function(x){return"[object Array]"==Z(x)});var ee,te,ne=Object("a"),re="a"!=ne[0]||!(0 in ne);function C(x){try{return Object.defineProperty(x,"sentinel",{}),"sentinel"in x}catch(x){}}if(Array.prototype.forEach||(Array.prototype.forEach=function(x){var w=F(this),S=re&&"[object String]"==Z(this)?this.split(""):w,U=arguments[1],G=-1,z=S.length>>>0;if("[object Function]"!=Z(x))throw new TypeError;for(;++G<z;)G in S&&x.call(U,S[G],G,w)}),Array.prototype.map||(Array.prototype.map=function(x){var w=F(this),S=re&&"[object String]"==Z(this)?this.split(""):w,U=S.length>>>0,G=Array(U),z=arguments[1];if("[object Function]"!=Z(x))throw new TypeError(x+" is not a function");for(var H=0;H<U;H++)H in S&&(G[H]=x.call(z,S[H],H,w));return G}),Array.prototype.filter||(Array.prototype.filter=function(x){var w,S=F(this),U=re&&"[object String]"==Z(this)?this.split(""):S,G=U.length>>>0,z=[],H=arguments[1];if("[object Function]"!=Z(x))throw new TypeError(x+" is not a function");for(var j=0;j<G;j++)j in U&&(w=U[j],x.call(H,w,j,S)&&z.push(w));return z}),Array.prototype.every||(Array.prototype.every=function(x){var w=F(this),S=re&&"[object String]"==Z(this)?this.split(""):w,U=S.length>>>0,G=arguments[1];if("[object Function]"!=Z(x))throw new TypeError(x+" is not a function");for(var z=0;z<U;z++)if(z in S&&!x.call(G,S[z],z,w))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(x){var w=F(this),S=re&&"[object String]"==Z(this)?this.split(""):w,U=S.length>>>0,G=arguments[1];if("[object Function]"!=Z(x))throw new TypeError(x+" is not a function");for(var z=0;z<U;z++)if(z in S&&x.call(G,S[z],z,w))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(x){var w=F(this),S=re&&"[object String]"==Z(this)?this.split(""):w,U=S.length>>>0;if("[object Function]"!=Z(x))throw new TypeError(x+" is not a function");if(!U&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var G,z=0;if(arguments.length>=2)G=arguments[1];else for(;;){if(z in S){G=S[z++];break}if(++z>=U)throw new TypeError("reduce of empty array with no initial value")}for(;z<U;z++)z in S&&(G=x.call(void 0,G,S[z],z,w));return G}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(x){var w=F(this),S=re&&"[object String]"==Z(this)?this.split(""):w,U=S.length>>>0;if("[object Function]"!=Z(x))throw new TypeError(x+" is not a function");if(!U&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var G,z=U-1;if(arguments.length>=2)G=arguments[1];else for(;;){if(z in S){G=S[z--];break}if(--z<0)throw new TypeError("reduceRight of empty array with no initial value")}do{z in this&&(G=x.call(void 0,G,S[z],z,w))}while(z--);return G}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(x){var w=re&&"[object String]"==Z(this)?this.split(""):F(this),S=w.length>>>0;if(!S)return-1;var U=0;for(arguments.length>1&&(U=O(arguments[1])),U=U>=0?U:Math.max(0,S+U);U<S;U++)if(U in w&&w[U]===x)return U;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(x){var w=re&&"[object String]"==Z(this)?this.split(""):F(this),S=w.length>>>0;if(!S)return-1;var U=S-1;for(arguments.length>1&&(U=Math.min(U,O(arguments[1]))),U=U>=0?U:S-Math.abs(U);U>=0;U--)if(U in w&&x===w[U])return U;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(x){return x.__proto__||(x.constructor?x.constructor.prototype:K)}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(x,w){if("object"!=typeof x&&"function"!=typeof x||null===x)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+x);if(J(x,w)){var S;if(S={enumerable:!0,configurable:!0},j){var U=x.__proto__;x.__proto__=K;var G=z(x,w),X=H(x,w);if(x.__proto__=U,G||X)return G&&(S.get=G),X&&(S.set=X),S}return S.value=x[w],S}}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(x){return Object.keys(x)}),Object.create||(ee=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var x={};for(var w in x)x[w]=null;return x.constructor=x.hasOwnProperty=x.propertyIsEnumerable=x.isPrototypeOf=x.toLocaleString=x.toString=x.valueOf=x.__proto__=null,x},Object.create=function(x,w){var S;if(null===x)S=ee();else{if("object"!=typeof x)throw new TypeError("typeof prototype["+typeof x+"] != 'object'");var i=function(){};i.prototype=x,(S=new i).__proto__=x}return void 0!==w&&Object.defineProperties(S,w),S}),Object.defineProperty){var ie=C({}),oe="undefined"==typeof document||C(document.createElement("div"));if(!ie||!oe)var ae=Object.defineProperty}Object.defineProperty&&!ae||(Object.defineProperty=function(x,w,S){if("object"!=typeof x&&"function"!=typeof x||null===x)throw new TypeError("Object.defineProperty called on non-object: "+x);if("object"!=typeof S&&"function"!=typeof S||null===S)throw new TypeError("Property description must be an object: "+S);if(ae)try{return ae.call(Object,x,w,S)}catch(x){}if(J(S,"value"))if(j&&(z(x,w)||H(x,w))){var X=x.__proto__;x.__proto__=K,delete x[w],x[w]=S.value,x.__proto__=X}else x[w]=S.value;else{if(!j)throw new TypeError("getters & setters can not be defined on this javascript engine");J(S,"get")&&U(x,w,S.get),J(S,"set")&&G(x,w,S.set)}return x}),Object.defineProperties||(Object.defineProperties=function(x,w){for(var S in w)J(w,S)&&Object.defineProperty(x,S,w[S]);return x}),Object.seal||(Object.seal=function(x){return x}),Object.freeze||(Object.freeze=function(x){return x});try{Object.freeze((function(){}))}catch(x){Object.freeze=(te=Object.freeze,function(x){return"function"==typeof x?x:te(x)})}if(Object.preventExtensions||(Object.preventExtensions=function(x){return x}),Object.isSealed||(Object.isSealed=function(x){return!1}),Object.isFrozen||(Object.isFrozen=function(x){return!1}),Object.isExtensible||(Object.isExtensible=function(x){if(Object(x)===x)throw new TypeError;for(var w="";J(x,w);)w+="?";x[w]=!0;var S=J(x,w);return delete x[w],S}),!Object.keys){var se=!0,le=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ce=le.length;for(var ue in{toString:null})se=!1;Object.keys=function(x){if("object"!=typeof x&&"function"!=typeof x||null===x)throw new TypeError("Object.keys called on a non-object");var w=[];for(var S in x)J(x,S)&&w.push(S);if(se)for(var U=0,G=ce;U<G;U++){var z=le[U];J(x,z)&&w.push(z)}return w}}Date.now||(Date.now=function(){return(new Date).getTime()});var he="\t\n\v\f\r                　\u2028\u2029\ufeff";if(!String.prototype.trim){he="["+he+"]";var de=new RegExp("^"+he+he+"*"),pe=new RegExp(he+he+"*$");String.prototype.trim=function(){return String(this).replace(de,"").replace(pe,"")}}function O(x){return(x=+x)!=x?x=0:0!==x&&x!==1/0&&x!==-1/0&&(x=(x>0||-1)*Math.floor(Math.abs(x))),x}var F=function(x){if(null==x)throw new TypeError("can't convert "+x+" to object");return Object(x)}})),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],(function(x,w,S){"use strict";x("./regexp"),x("./es5-shim"),"undefined"==typeof Element||Element.prototype.remove||Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})),ace.define("ace/lib/useragent",["require","exports","module"],(function(x,w,S){"use strict";w.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},w.getOS=function(){return w.isMac?w.OS.MAC:w.isLinux?w.OS.LINUX:w.OS.WINDOWS};var U="object"==typeof navigator?navigator:{},G=(/mac|win|linux/i.exec(U.platform)||["other"])[0].toLowerCase(),z=U.userAgent||"",H=U.appName||"";w.isWin="win"==G,w.isMac="mac"==G,w.isLinux="linux"==G,w.isIE="Microsoft Internet Explorer"==H||H.indexOf("MSAppHost")>=0?parseFloat((z.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((z.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),w.isOldIE=w.isIE&&w.isIE<9,w.isGecko=w.isMozilla=z.match(/ Gecko\/\d+/),w.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),w.isWebKit=parseFloat(z.split("WebKit/")[1])||void 0,w.isChrome=parseFloat(z.split(" Chrome/")[1])||void 0,w.isEdge=parseFloat(z.split(" Edge/")[1])||void 0,w.isAIR=z.indexOf("AdobeAIR")>=0,w.isAndroid=z.indexOf("Android")>=0,w.isChromeOS=z.indexOf(" CrOS ")>=0,w.isIOS=/iPad|iPhone|iPod/.test(z)&&!window.MSStream,w.isIOS&&(w.isMac=!0),w.isMobile=w.isIOS||w.isAndroid})),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],(function(x,w,S){"use strict";var U=x("./useragent");if(w.buildDom=function e(x,w,S){if("string"==typeof x&&x){var U=document.createTextNode(x);return w&&w.appendChild(U),U}if(!Array.isArray(x))return x;if("string"!=typeof x[0]||!x[0]){for(var G=[],z=0;z<x.length;z++){var H=e(x[z],w,S);H&&G.push(H)}return G}var j=document.createElement(x[0]),X=x[1],q=1;for(X&&"object"==typeof X&&!Array.isArray(X)&&(q=2),z=q;z<x.length;z++)e(x[z],j,S);return 2==q&&Object.keys(X).forEach((function(x){var w=X[x];"class"===x?j.className=Array.isArray(w)?w.join(" "):w:"function"==typeof w||"value"==x?j[x]=w:"ref"===x?S&&(S[w]=j):null!=w&&j.setAttribute(x,w)})),w&&w.appendChild(j),j},w.getDocumentHead=function(x){return x||(x=document),x.head||x.getElementsByTagName("head")[0]||x.documentElement},w.createElement=function(x,w){return document.createElementNS?document.createElementNS(w||"http://www.w3.org/1999/xhtml",x):document.createElement(x)},w.removeChildren=function(x){x.innerHTML=""},w.createTextNode=function(x,w){return(w?w.ownerDocument:document).createTextNode(x)},w.createFragment=function(x){return(x?x.ownerDocument:document).createDocumentFragment()},w.hasCssClass=function(x,w){return-1!==(x.className+"").split(/\s+/g).indexOf(w)},w.addCssClass=function(x,S){w.hasCssClass(x,S)||(x.className+=" "+S)},w.removeCssClass=function(x,w){for(var S=x.className.split(/\s+/g);;){var U=S.indexOf(w);if(-1==U)break;S.splice(U,1)}x.className=S.join(" ")},w.toggleCssClass=function(x,w){for(var S=x.className.split(/\s+/g),U=!0;;){var G=S.indexOf(w);if(-1==G)break;U=!1,S.splice(G,1)}return U&&S.push(w),x.className=S.join(" "),U},w.setCssClass=function(x,S,U){U?w.addCssClass(x,S):w.removeCssClass(x,S)},w.hasCssString=function(x,w){var S,U=0;if(S=(w=w||document).querySelectorAll("style"))for(;U<S.length;)if(S[U++].id===x)return!0},w.importCssString=function(x,S,U){var G=U;U&&U.getRootNode&&(G=U.getRootNode())&&G!=U||(G=document);var z=G.ownerDocument||G;if(S&&w.hasCssString(S,G))return null;S&&(x+="\n/*# sourceURL=ace/css/"+S+" */");var H=w.createElement("style");H.appendChild(z.createTextNode(x)),S&&(H.id=S),G==z&&(G=w.getDocumentHead(z)),G.insertBefore(H,G.firstChild)},w.importCssStylsheet=function(x,S){w.buildDom(["link",{rel:"stylesheet",href:x}],w.getDocumentHead(S))},w.scrollbarWidth=function(x){var S=w.createElement("ace_inner");S.style.width="100%",S.style.minWidth="0px",S.style.height="200px",S.style.display="block";var U=w.createElement("ace_outer"),G=U.style;G.position="absolute",G.left="-10000px",G.overflow="hidden",G.width="200px",G.minWidth="0px",G.height="150px",G.display="block",U.appendChild(S);var z=x.documentElement;z.appendChild(U);var H=S.offsetWidth;G.overflow="scroll";var j=S.offsetWidth;return H==j&&(j=U.clientWidth),z.removeChild(U),H-j},"undefined"==typeof document&&(w.importCssString=function(){}),w.computedStyle=function(x,w){return window.getComputedStyle(x,"")||{}},w.setStyle=function(x,w,S){x[w]!==S&&(x[w]=S)},w.HAS_CSS_ANIMATION=!1,w.HAS_CSS_TRANSFORMS=!1,w.HI_DPI=!U.isWin||"undefined"!=typeof window&&window.devicePixelRatio>=1.5,"undefined"!=typeof document){var G=document.createElement("div");w.HI_DPI&&void 0!==G.style.transform&&(w.HAS_CSS_TRANSFORMS=!0),U.isEdge||void 0===G.style.animationName||(w.HAS_CSS_ANIMATION=!0),G=null}w.HAS_CSS_TRANSFORMS?w.translate=function(x,w,S){x.style.transform="translate("+Math.round(w)+"px, "+Math.round(S)+"px)"}:w.translate=function(x,w,S){x.style.top=Math.round(S)+"px",x.style.left=Math.round(w)+"px"}})),ace.define("ace/lib/oop",["require","exports","module"],(function(x,w,S){"use strict";w.inherits=function(x,w){x.super_=w,x.prototype=Object.create(w.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}})},w.mixin=function(x,w){for(var S in w)x[S]=w[S];return x},w.implement=function(x,S){w.mixin(x,S)}})),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],(function(x,w,S){"use strict";var U=x("./oop"),G=function(){var x,w,S={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(w in S.FUNCTION_KEYS)x=S.FUNCTION_KEYS[w].toLowerCase(),S[x]=parseInt(w,10);for(w in S.PRINTABLE_KEYS)x=S.PRINTABLE_KEYS[w].toLowerCase(),S[x]=parseInt(w,10);return U.mixin(S,S.MODIFIER_KEYS),U.mixin(S,S.PRINTABLE_KEYS),U.mixin(S,S.FUNCTION_KEYS),S.enter=S.return,S.escape=S.esc,S.del=S.delete,S[173]="-",function(){for(var x=["cmd","ctrl","alt","shift"],w=Math.pow(2,x.length);w--;)S.KEY_MODS[w]=x.filter((function(x){return w&S.KEY_MODS[x]})).join("-")+"-"}(),S.KEY_MODS[0]="",S.KEY_MODS[-1]="input-",S}();U.mixin(w,G),w.keyCodeToString=function(x){var w=G[x];return"string"!=typeof w&&(w=String.fromCharCode(x)),w.toLowerCase()}})),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(x,w,S){"use strict";var U=x("./keys"),G=x("./useragent"),z=null,H=0;w.addListener=function(x,w,S){if(x.addEventListener)return x.addEventListener(w,S,!1);if(x.attachEvent){var i=function(){S.call(x,window.event)};S._wrapper=i,x.attachEvent("on"+w,i)}},w.removeListener=function(x,w,S){if(x.removeEventListener)return x.removeEventListener(w,S,!1);x.detachEvent&&x.detachEvent("on"+w,S._wrapper||S)},w.stopEvent=function(x){return w.stopPropagation(x),w.preventDefault(x),!1},w.stopPropagation=function(x){x.stopPropagation?x.stopPropagation():x.cancelBubble=!0},w.preventDefault=function(x){x.preventDefault?x.preventDefault():x.returnValue=!1},w.getButton=function(x){return"dblclick"==x.type?0:"contextmenu"==x.type||G.isMac&&x.ctrlKey&&!x.altKey&&!x.shiftKey?2:x.preventDefault?x.button:{1:0,2:2,4:1}[x.button]},w.capture=function(x,S,U){function r(x){S&&S(x),U&&U(x),w.removeListener(document,"mousemove",S,!0),w.removeListener(document,"mouseup",r,!0),w.removeListener(document,"dragstart",r,!0)}return w.addListener(document,"mousemove",S,!0),w.addListener(document,"mouseup",r,!0),w.addListener(document,"dragstart",r,!0),r},w.addMouseWheelListener=function(x,S){"onmousewheel"in x?w.addListener(x,"mousewheel",(function(x){void 0!==x.wheelDeltaX?(x.wheelX=-x.wheelDeltaX/8,x.wheelY=-x.wheelDeltaY/8):(x.wheelX=0,x.wheelY=-x.wheelDelta/8),S(x)})):"onwheel"in x?w.addListener(x,"wheel",(function(x){switch(x.deltaMode){case x.DOM_DELTA_PIXEL:x.wheelX=.35*x.deltaX||0,x.wheelY=.35*x.deltaY||0;break;case x.DOM_DELTA_LINE:case x.DOM_DELTA_PAGE:x.wheelX=5*(x.deltaX||0),x.wheelY=5*(x.deltaY||0)}S(x)})):w.addListener(x,"DOMMouseScroll",(function(x){x.axis&&x.axis==x.HORIZONTAL_AXIS?(x.wheelX=5*(x.detail||0),x.wheelY=0):(x.wheelX=0,x.wheelY=5*(x.detail||0)),S(x)}))},w.addMultiMouseDownListener=function(x,S,U,z){var H,j,X,q=0,K={2:"dblclick",3:"tripleclick",4:"quadclick"};function h(x){if(0!==w.getButton(x)?q=0:x.detail>1?++q>4&&(q=1):q=1,G.isIE){var Y=Math.abs(x.clientX-H)>5||Math.abs(x.clientY-j)>5;X&&!Y||(q=1),X&&clearTimeout(X),X=setTimeout((function(){X=null}),S[q-1]||600),1==q&&(H=x.clientX,j=x.clientY)}if(x._clicks=q,U[z]("mousedown",x),q>4)q=0;else if(q>1)return U[z](K[q],x)}function d(x){q=2,X&&clearTimeout(X),X=setTimeout((function(){X=null}),S[q-1]||600),U[z]("mousedown",x),U[z](K[q],x)}Array.isArray(x)||(x=[x]),x.forEach((function(x){w.addListener(x,"mousedown",h),G.isOldIE&&w.addListener(x,"dblclick",d)}))};var j=G.isMac&&G.isOpera&&!("KeyboardEvent"in window)?function(x){return 0|(x.metaKey?1:0)|(x.altKey?2:0)|(x.shiftKey?4:0)|(x.ctrlKey?8:0)}:function(x){return 0|(x.ctrlKey?1:0)|(x.altKey?2:0)|(x.shiftKey?4:0)|(x.metaKey?8:0)};function c(x,w,S){var X=j(w);if(!G.isMac&&z){if(w.getModifierState&&(w.getModifierState("OS")||w.getModifierState("Win"))&&(X|=8),z.altGr){if(3==(3&X))return;z.altGr=0}if(18===S||17===S){var q="location"in w?w.location:w.keyLocation;17===S&&1===q?1==z[S]&&(H=w.timeStamp):18===S&&3===X&&2===q&&w.timeStamp-H<50&&(z.altGr=!0)}}if(S in U.MODIFIER_KEYS&&(S=-1),X||13!==S||3!==(q="location"in w?w.location:w.keyLocation)||(x(w,X,-S),!w.defaultPrevented)){if(G.isChromeOS&&8&X){if(x(w,X,S),w.defaultPrevented)return;X&=-9}return!!(X||S in U.FUNCTION_KEYS||S in U.PRINTABLE_KEYS)&&x(w,X,S)}}function l(){z=Object.create(null)}if(w.getModifierString=function(x){return U.KEY_MODS[j(x)]},w.addCommandKeyListener=function(x,S){var U=w.addListener;if(G.isOldGecko||G.isOpera&&!("KeyboardEvent"in window)){var H=null;U(x,"keydown",(function(x){H=x.keyCode})),U(x,"keypress",(function(x){return c(S,x,H)}))}else{var j=null;U(x,"keydown",(function(x){z[x.keyCode]=(z[x.keyCode]||0)+1;var w=c(S,x,x.keyCode);return j=x.defaultPrevented,w})),U(x,"keypress",(function(x){j&&(x.ctrlKey||x.altKey||x.shiftKey||x.metaKey)&&(w.stopEvent(x),j=null)})),U(x,"keyup",(function(x){z[x.keyCode]=null})),z||(l(),U(window,"focus",l))}},"object"==typeof window&&window.postMessage&&!G.isOldIE){var X=1;w.nextTick=function(x,S){S=S||window;var U="zero-timeout-message-"+X++,r=function(G){G.data==U&&(w.stopPropagation(G),w.removeListener(S,"message",r),x())};w.addListener(S,"message",r),S.postMessage(U,"*")}}w.$idleBlocked=!1,w.onIdle=function(x,S){return setTimeout((function n(){w.$idleBlocked?setTimeout(n,100):x()}),S)},w.$idleBlockId=null,w.blockIdle=function(x){w.$idleBlockId&&clearTimeout(w.$idleBlockId),w.$idleBlocked=!0,w.$idleBlockId=setTimeout((function(){w.$idleBlocked=!1}),x||100)},w.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),w.nextFrame?w.nextFrame=w.nextFrame.bind(window):w.nextFrame=function(x){setTimeout(x,17)}})),ace.define("ace/range",["require","exports","module"],(function(x,w,S){"use strict";var i=function(x,w,S,U){this.start={row:x,column:w},this.end={row:S,column:U}};(function(){this.isEqual=function(x){return this.start.row===x.start.row&&this.end.row===x.end.row&&this.start.column===x.start.column&&this.end.column===x.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(x,w){return 0==this.compare(x,w)},this.compareRange=function(x){var w,S=x.end,U=x.start;return 1==(w=this.compare(S.row,S.column))?1==(w=this.compare(U.row,U.column))?2:0==w?1:0:-1==w?-2:-1==(w=this.compare(U.row,U.column))?-1:1==w?42:0},this.comparePoint=function(x){return this.compare(x.row,x.column)},this.containsRange=function(x){return 0==this.comparePoint(x.start)&&0==this.comparePoint(x.end)},this.intersects=function(x){var w=this.compareRange(x);return-1==w||0==w||1==w},this.isEnd=function(x,w){return this.end.row==x&&this.end.column==w},this.isStart=function(x,w){return this.start.row==x&&this.start.column==w},this.setStart=function(x,w){"object"==typeof x?(this.start.column=x.column,this.start.row=x.row):(this.start.row=x,this.start.column=w)},this.setEnd=function(x,w){"object"==typeof x?(this.end.column=x.column,this.end.row=x.row):(this.end.row=x,this.end.column=w)},this.inside=function(x,w){return 0==this.compare(x,w)&&!this.isEnd(x,w)&&!this.isStart(x,w)},this.insideStart=function(x,w){return 0==this.compare(x,w)&&!this.isEnd(x,w)},this.insideEnd=function(x,w){return 0==this.compare(x,w)&&!this.isStart(x,w)},this.compare=function(x,w){return this.isMultiLine()||x!==this.start.row?x<this.start.row?-1:x>this.end.row?1:this.start.row===x?w>=this.start.column?0:-1:this.end.row===x?w<=this.end.column?0:1:0:w<this.start.column?-1:w>this.end.column?1:0},this.compareStart=function(x,w){return this.start.row==x&&this.start.column==w?-1:this.compare(x,w)},this.compareEnd=function(x,w){return this.end.row==x&&this.end.column==w?1:this.compare(x,w)},this.compareInside=function(x,w){return this.end.row==x&&this.end.column==w?1:this.start.row==x&&this.start.column==w?-1:this.compare(x,w)},this.clipRows=function(x,w){if(this.end.row>w)var S={row:w+1,column:0};else this.end.row<x&&(S={row:x,column:0});if(this.start.row>w)var U={row:w+1,column:0};else this.start.row<x&&(U={row:x,column:0});return i.fromPoints(U||this.start,S||this.end)},this.extend=function(x,w){var S=this.compare(x,w);if(0==S)return this;if(-1==S)var U={row:x,column:w};else var G={row:x,column:w};return i.fromPoints(U||this.start,G||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(x){var w=x.documentToScreenPosition(this.start),S=x.documentToScreenPosition(this.end);return new i(w.row,w.column,S.row,S.column)},this.moveBy=function(x,w){this.start.row+=x,this.start.column+=w,this.end.row+=x,this.end.column+=w}}).call(i.prototype),i.fromPoints=function(x,w){return new i(x.row,x.column,w.row,w.column)},i.comparePoints=function(x,w){return x.row-w.row||x.column-w.column},i.comparePoints=function(x,w){return x.row-w.row||x.column-w.column},w.Range=i})),ace.define("ace/lib/lang",["require","exports","module"],(function(x,w,S){"use strict";w.last=function(x){return x[x.length-1]},w.stringReverse=function(x){return x.split("").reverse().join("")},w.stringRepeat=function(x,w){for(var S="";w>0;)1&w&&(S+=x),(w>>=1)&&(x+=x);return S};var U=/^\s\s*/,G=/\s\s*$/;w.stringTrimLeft=function(x){return x.replace(U,"")},w.stringTrimRight=function(x){return x.replace(G,"")},w.copyObject=function(x){var w={};for(var S in x)w[S]=x[S];return w},w.copyArray=function(x){for(var w=[],S=0,U=x.length;S<U;S++)x[S]&&"object"==typeof x[S]?w[S]=this.copyObject(x[S]):w[S]=x[S];return w},w.deepCopy=function e(x){if("object"!=typeof x||!x)return x;var w;if(Array.isArray(x)){w=[];for(var S=0;S<x.length;S++)w[S]=e(x[S]);return w}if("[object Object]"!==Object.prototype.toString.call(x))return x;for(var S in w={},x)w[S]=e(x[S]);return w},w.arrayToMap=function(x){for(var w={},S=0;S<x.length;S++)w[x[S]]=1;return w},w.createMap=function(x){var w=Object.create(null);for(var S in x)w[S]=x[S];return w},w.arrayRemove=function(x,w){for(var S=0;S<=x.length;S++)w===x[S]&&x.splice(S,1)},w.escapeRegExp=function(x){return x.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},w.escapeHTML=function(x){return(""+x).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},w.getMatchOffsets=function(x,w){var S=[];return x.replace(w,(function(x){S.push({offset:arguments[arguments.length-2],length:x.length})})),S},w.deferredCall=function(x){var w=null,n=function(){w=null,x()},i=function(x){return i.cancel(),w=setTimeout(n,x||0),i};return i.schedule=i,i.call=function(){return this.cancel(),x(),i},i.cancel=function(){return clearTimeout(w),w=null,i},i.isPending=function(){return w},i},w.delayedCall=function(x,w){var S=null,i=function(){S=null,x()},r=function(x){null==S&&(S=setTimeout(i,x||w))};return r.delay=function(x){S&&clearTimeout(S),S=setTimeout(i,x||w)},r.schedule=r,r.call=function(){this.cancel(),x()},r.cancel=function(){S&&clearTimeout(S),S=null},r.isPending=function(){return S},r}})),ace.define("ace/clipboard",["require","exports","module"],(function(x,w,S){"use strict";var U;S.exports={lineMode:!1,pasteCancelled:function(){return!!(U&&U>Date.now()-50)||(U=!1)},cancel:function(){U=Date.now()}}})),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],(function(x,w,S){"use strict";var U=x("../lib/event"),G=x("../lib/useragent"),z=x("../lib/dom"),H=x("../lib/lang"),j=x("../clipboard"),X=G.isChrome<18,q=G.isIE,K=G.isChrome>63,Y=x("../lib/keys"),Z=Y.KEY_MODS,J=G.isIOS,Q=J?/\s/:/\n/;w.TextInput=function(x,w){var S=z.createElement("textarea");S.className="ace_text-input",S.setAttribute("wrap","off"),S.setAttribute("autocorrect","off"),S.setAttribute("autocapitalize","off"),S.setAttribute("spellcheck",!1),S.style.opacity="0",x.insertBefore(S,x.firstChild);var ee=!1,te=!1,ne=!1,re=!1,ie="";G.isMobile||(S.style.fontSize="1px");var oe=!1,ae=!1,se="",le=0,ce=0,ue=0;try{var he=document.activeElement===S}catch(x){}U.addListener(S,"blur",(function(x){ae||(w.onBlur(x),he=!1)})),U.addListener(S,"focus",(function(x){if(!ae){if(he=!0,G.isEdge)try{if(!document.hasFocus())return}catch(x){}w.onFocus(x),G.isEdge?setTimeout(de):de()}})),this.$focusScroll=!1,this.focus=function(){if(ie||K||"browser"==this.$focusScroll)return S.focus({preventScroll:!0});var x=S.style.top;S.style.position="fixed",S.style.top="0px";try{var w=0!=S.getBoundingClientRect().top}catch(x){return}var U=[];if(w)for(var G=S.parentElement;G&&1==G.nodeType;)U.push(G),G.setAttribute("ace_nocontext",!0),G=!G.parentElement&&G.getRootNode?G.getRootNode().host:G.parentElement;S.focus({preventScroll:!0}),w&&U.forEach((function(x){x.removeAttribute("ace_nocontext")})),setTimeout((function(){S.style.position="","0px"==S.style.top&&(S.style.top=x)}),0)},this.blur=function(){S.blur()},this.isFocused=function(){return he},w.on("beforeEndOperation",(function(){w.curOp&&"insertstring"==w.curOp.command.name||(ne&&(se=S.value="",k()),de())}));var de=J?function(x){if(he&&(!ee||x)&&!re){x||(x="");var U="\n ab"+x+"cde fg\n";U!=S.value&&(S.value=se=U);var G=4+(x.length||(w.selection.isEmpty()?0:1));4==le&&ce==G||S.setSelectionRange(4,G),le=4,ce=G}}:function(){if(!ne&&!re&&(he||fe)){ne=!0;var x=w.selection,U=x.getRange(),G=x.cursor.row,z=U.start.column,H=U.end.column,j=w.session.getLine(G);if(U.start.row!=G){var X=w.session.getLine(G-1);z=U.start.row<G-1?0:z,H+=X.length+1,j=X+"\n"+j}else if(U.end.row!=G){var q=w.session.getLine(G+1);H=U.end.row>G+1?q.length:H,H+=j.length+1,j=j+"\n"+q}j.length>400&&(z<400&&H<400?j=j.slice(0,400):(j="\n",z=0,H=1));var K=j+"\n\n";if(K!=se&&(S.value=se=K,le=ce=K.length),fe&&(le=S.selectionStart,ce=S.selectionEnd),ce!=H||le!=z||S.selectionEnd!=ce)try{S.setSelectionRange(z,H),le=z,ce=H}catch(x){}ne=!1}};he&&w.onFocus();var pe=null;this.setInputHandler=function(x){pe=x},this.getInputHandler=function(){return pe};var fe=!1,I=function(x,U){if(fe&&(fe=!1),te)return de(),x&&w.onPaste(x),te=!1,"";for(var G=S.selectionStart,z=S.selectionEnd,H=le,j=se.length-ce,X=x,q=x.length-G,K=x.length-z,Y=0;H>0&&se[Y]==x[Y];)Y++,H--;for(X=X.slice(Y),Y=1;j>0&&se.length-Y>le-1&&se[se.length-Y]==x[x.length-Y];)Y++,j--;q-=Y-1,K-=Y-1;var Z=X.length-Y+1;return Z<0&&(H=-Z,Z=0),X=X.slice(0,Z),U||X||q||H||j||K?(re=!0,X&&!H&&!j&&!q&&!K||oe?w.onTextInput(X):w.onTextInput(X,{extendLeft:H,extendRight:j,restoreStart:q,restoreEnd:K}),re=!1,se=x,le=G,ce=z,ue=K,X):""},O=function(x){if(ne)return $();if(x&&x.inputType){if("historyUndo"==x.inputType)return w.execCommand("undo");if("historyRedo"==x.inputType)return w.execCommand("redo")}var U=S.value,G=I(U,!0);(U.length>500||Q.test(G))&&de()},F=function(x,w,S){var U=x.clipboardData||window.clipboardData;if(U&&!X){var G=q||S?"Text":"text/plain";try{return w?!1!==U.setData(G,w):U.getData(G)}catch(x){if(!S)return F(x,w,!0)}}},M=function(x,G){var z=w.getCopyText();if(!z)return U.preventDefault(x);F(x,z)?(J&&(de(z),ee=z,setTimeout((function(){ee=!1}),10)),G?w.onCut():w.onCopy(),U.preventDefault(x)):(ee=!0,S.value=z,S.select(),setTimeout((function(){ee=!1,de(),G?w.onCut():w.onCopy()})))},N=function(x){M(x,!0)},P=function(x){M(x,!1)},B=function(x){var z=F(x);j.pasteCancelled()||("string"==typeof z?(z&&w.onPaste(z,x),G.isIE&&setTimeout(de),U.preventDefault(x)):(S.value="",te=!0))};U.addCommandKeyListener(S,w.onCommandKey.bind(w)),U.addListener(S,"select",(function(x){ne||(ee?ee=!1:function(x){return 0===x.selectionStart&&x.selectionEnd>=se.length&&x.value===se&&se&&x.selectionEnd!==ce}(S)&&(w.selectAll(),de()))})),U.addListener(S,"input",O),U.addListener(S,"cut",N),U.addListener(S,"copy",P),U.addListener(S,"paste",B),"oncut"in S&&"oncopy"in S&&"onpaste"in S||U.addListener(x,"keydown",(function(x){if((!G.isMac||x.metaKey)&&x.ctrlKey)switch(x.keyCode){case 67:P(x);break;case 86:B(x);break;case 88:N(x)}}));var $=function(){if(ne&&w.onCompositionUpdate&&!w.$readOnly){if(oe)return D();if(ne.useTextareaForIME)w.onCompositionUpdate(S.value);else{var x=S.value;I(x),ne.markerRange&&(ne.context&&(ne.markerRange.start.column=ne.selectionStart=ne.context.compositionStartOffset),ne.markerRange.end.column=ne.markerRange.start.column+ce-ne.selectionStart+ue)}}},k=function(x){w.onCompositionEnd&&!w.$readOnly&&(ne=!1,w.onCompositionEnd(),w.off("mousedown",D),x&&O())};function D(){ae=!0,S.blur(),S.focus(),ae=!1}var me,ge=H.delayedCall($,50).schedule.bind(null,null);function W(){clearTimeout(me),me=setTimeout((function(){ie&&(S.style.cssText=ie,ie=""),w.renderer.$isMousePressed=!1,w.renderer.$keepTextAreaAtCursor&&w.renderer.$moveTextAreaToCursor()}),0)}U.addListener(S,"compositionstart",(function(x){if(!ne&&w.onCompositionStart&&!w.$readOnly&&(ne={},!oe)){setTimeout($,0),w.on("mousedown",D);var U=w.getSelectionRange();U.end.row=U.start.row,U.end.column=U.start.column,ne.markerRange=U,ne.selectionStart=le,w.onCompositionStart(ne),ne.useTextareaForIME?(S.value="",se="",le=0,ce=0):(S.msGetInputContext&&(ne.context=S.msGetInputContext()),S.getInputContext&&(ne.context=S.getInputContext()))}})),U.addListener(S,"compositionupdate",$),U.addListener(S,"keyup",(function(x){27==x.keyCode&&S.value.length<S.selectionStart&&(ne||(se=S.value),le=ce=-1,de()),ge()})),U.addListener(S,"keydown",ge),U.addListener(S,"compositionend",k),this.getElement=function(){return S},this.setCommandMode=function(x){oe=x,S.readOnly=!1},this.setReadOnly=function(x){oe||(S.readOnly=x)},this.setCopyWithEmptySelection=function(x){},this.onContextMenu=function(x){fe=!0,de(),w._emit("nativecontextmenu",{target:w,domEvent:x}),this.moveToMouse(x,!0)},this.moveToMouse=function(x,H){ie||(ie=S.style.cssText),S.style.cssText=(H?"z-index:100000;":"")+(G.isIE?"opacity:0.1;":"")+"text-indent: -"+(le+ce)*w.renderer.characterWidth*.5+"px;";var j=w.container.getBoundingClientRect(),X=z.computedStyle(w.container),q=j.top+(parseInt(X.borderTopWidth)||0),K=j.left+(parseInt(j.borderLeftWidth)||0),Y=j.bottom-q-S.clientHeight-2,d=function(x){z.translate(S,x.clientX-K-2,Math.min(x.clientY-q-2,Y))};d(x),"mousedown"==x.type&&(w.renderer.$isMousePressed=!0,clearTimeout(me),G.isWin&&U.capture(w.container,d,W))},this.onContextMenuClose=W;var V=function(x){w.textInput.onContextMenu(x),W()};U.addListener(S,"mouseup",V),U.addListener(S,"mousedown",(function(x){x.preventDefault(),W()})),U.addListener(w.renderer.scroller,"contextmenu",V),U.addListener(S,"contextmenu",V),J&&function(x,w,S){var U=null,G=!1;S.addEventListener("keydown",(function(x){U&&clearTimeout(U),G=!0}),!0),S.addEventListener("keyup",(function(x){U=setTimeout((function(){G=!1}),100)}),!0);var o=function(x){if(document.activeElement===S&&!(G||ne||w.$mouseHandler.isMousePressed||ee)){var U=S.selectionStart,z=S.selectionEnd,H=null,j=0;if(0==U?H=Y.up:1==U?H=Y.home:z>ce&&"\n"==se[z]?H=Y.end:U<le&&" "==se[U-1]?(H=Y.left,j=Z.option):U<le||U==le&&ce!=le&&U==z?H=Y.left:z>ce&&se.slice(0,z).split("\n").length>2?H=Y.down:z>ce&&" "==se[z-1]?(H=Y.right,j=Z.option):(z>ce||z==ce&&ce!=le&&U==z)&&(H=Y.right),U!==z&&(j|=Z.shift),H){if(!w.onCommandKey({},j,H)&&w.commands){H=Y.keyCodeToString(H);var X=w.commands.findKeyCommand(j,H);X&&w.execCommand(X)}le=U,ce=z,de("")}}};document.addEventListener("selectionchange",o),w.on("destroy",(function(){document.removeEventListener("selectionchange",o)}))}(0,w,S)}})),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],(function(x,w,S){"use strict";var U=x("../lib/useragent");function r(x){x.$clickSelection=null;var w=x.editor;w.setDefaultHandler("mousedown",this.onMouseDown.bind(x)),w.setDefaultHandler("dblclick",this.onDoubleClick.bind(x)),w.setDefaultHandler("tripleclick",this.onTripleClick.bind(x)),w.setDefaultHandler("quadclick",this.onQuadClick.bind(x)),w.setDefaultHandler("mousewheel",this.onMouseWheel.bind(x)),["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach((function(w){x[w]=this[w]}),this),x.selectByLines=this.extendSelectionBy.bind(x,"getLineRange"),x.selectByWords=this.extendSelectionBy.bind(x,"getWordRange")}function o(x,w){if(x.start.row==x.end.row)var S=2*w.column-x.start.column-x.end.column;else S=x.start.row!=x.end.row-1||x.start.column||x.end.column?2*w.row-x.start.row-x.end.row:w.column-4;return S<0?{cursor:x.start,anchor:x.end}:{cursor:x.end,anchor:x.start}}(function(){this.onMouseDown=function(x){var w=x.inSelection(),S=x.getDocumentPosition();this.mousedownEvent=x;var G=this.editor,z=x.getButton();return 0!==z?((G.getSelectionRange().isEmpty()||1==z)&&G.selection.moveToPosition(S),void(2==z&&(G.textInput.onContextMenu(x.domEvent),U.isMozilla||x.preventDefault()))):(this.mousedownEvent.time=Date.now(),!w||G.isFocused()||(G.focus(),!this.$focusTimeout||this.$clickSelection||G.inMultiSelectMode)?(this.captureMouse(x),this.startSelect(S,x.domEvent._clicks>1),x.preventDefault()):(this.setState("focusWait"),void this.captureMouse(x)))},this.startSelect=function(x,w){x=x||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var S=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?S.selection.selectToPosition(x):w||S.selection.moveToPosition(x),w||this.select(),S.renderer.scroller.setCapture&&S.renderer.scroller.setCapture(),S.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var x,w=this.editor,S=w.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var U=this.$clickSelection.comparePoint(S);if(-1==U)x=this.$clickSelection.end;else if(1==U)x=this.$clickSelection.start;else{var G=o(this.$clickSelection,S);S=G.cursor,x=G.anchor}w.selection.setSelectionAnchor(x.row,x.column)}w.selection.selectToPosition(S),w.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(x){var w,S=this.editor,U=S.renderer.screenToTextCoordinates(this.x,this.y),G=S.selection[x](U.row,U.column);if(this.$clickSelection){var z=this.$clickSelection.comparePoint(G.start),H=this.$clickSelection.comparePoint(G.end);if(-1==z&&H<=0)w=this.$clickSelection.end,G.end.row==U.row&&G.end.column==U.column||(U=G.start);else if(1==H&&z>=0)w=this.$clickSelection.start,G.start.row==U.row&&G.start.column==U.column||(U=G.end);else if(-1==z&&1==H)U=G.end,w=G.start;else{var j=o(this.$clickSelection,U);U=j.cursor,w=j.anchor}S.selection.setSelectionAnchor(w.row,w.column)}S.selection.selectToPosition(U),S.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var x,w,S,U,G=(x=this.mousedownEvent.x,w=this.mousedownEvent.y,S=this.x,U=this.y,Math.sqrt(Math.pow(S-x,2)+Math.pow(U-w,2))),z=Date.now();(G>0||z-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(x){var w=x.getDocumentPosition(),S=this.editor,U=S.session.getBracketRange(w);U?(U.isEmpty()&&(U.start.column--,U.end.column++),this.setState("select")):(U=S.selection.getWordRange(w.row,w.column),this.setState("selectByWords")),this.$clickSelection=U,this.select()},this.onTripleClick=function(x){var w=x.getDocumentPosition(),S=this.editor;this.setState("selectByLines");var U=S.getSelectionRange();U.isMultiLine()&&U.contains(w.row,w.column)?(this.$clickSelection=S.selection.getLineRange(U.start.row),this.$clickSelection.end=S.selection.getLineRange(U.end.row).end):this.$clickSelection=S.selection.getLineRange(w.row),this.select()},this.onQuadClick=function(x){var w=this.editor;w.selectAll(),this.$clickSelection=w.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(x){if(!x.getAccelKey()){x.getShiftKey()&&x.wheelY&&!x.wheelX&&(x.wheelX=x.wheelY,x.wheelY=0);var w=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var S=this.$lastScroll,U=x.domEvent.timeStamp,G=U-S.t,z=G?x.wheelX/G:S.vx,H=G?x.wheelY/G:S.vy;G<550&&(z=(z+S.vx)/2,H=(H+S.vy)/2);var j=Math.abs(z/H),X=!1;return j>=1&&w.renderer.isScrollableBy(x.wheelX*x.speed,0)&&(X=!0),j<=1&&w.renderer.isScrollableBy(0,x.wheelY*x.speed)&&(X=!0),X?S.allowed=U:U-S.allowed<550&&(Math.abs(z)<=1.5*Math.abs(S.vx)&&Math.abs(H)<=1.5*Math.abs(S.vy)?(X=!0,S.allowed=U):S.allowed=0),S.t=U,S.vx=z,S.vy=H,X?(w.renderer.scrollBy(x.wheelX*x.speed,x.wheelY*x.speed),x.stop()):void 0}}}).call(r.prototype),w.DefaultHandlers=r})),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],(function(x,w,S){"use strict";x("./lib/oop");var U=x("./lib/dom");function r(x){this.isOpen=!1,this.$element=null,this.$parentNode=x}(function(){this.$init=function(){return this.$element=U.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(x){this.getElement().textContent=x},this.setHtml=function(x){this.getElement().innerHTML=x},this.setPosition=function(x,w){this.getElement().style.left=x+"px",this.getElement().style.top=w+"px"},this.setClassName=function(x){U.addCssClass(this.getElement(),x)},this.show=function(x,w,S){null!=x&&this.setText(x),null!=w&&null!=S&&this.setPosition(w,S),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(r.prototype),w.Tooltip=r})),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],(function(x,w,S){"use strict";var U=x("../lib/dom"),G=x("../lib/oop"),z=x("../lib/event"),H=x("../tooltip").Tooltip;function a(x){H.call(this,x)}G.inherits(a,H),function(){this.setPosition=function(x,w){var S=window.innerWidth||document.documentElement.clientWidth,U=window.innerHeight||document.documentElement.clientHeight,G=this.getWidth(),z=this.getHeight();(x+=15)+G>S&&(x-=x+G-S),(w+=15)+z>U&&(w-=20+z),H.prototype.setPosition.call(this,x,w)}}.call(a.prototype),w.GutterHandler=function(x){var w,S,G,H=x.editor,j=H.renderer.$gutterLayer,X=new a(H.container);function u(){w&&(w=clearTimeout(w)),G&&(X.hide(),G=null,H._signal("hideGutterTooltip",X),H.removeEventListener("mousewheel",u))}function h(x){X.setPosition(x.x,x.y)}x.editor.setDefaultHandler("guttermousedown",(function(w){if(H.isFocused()&&0==w.getButton()&&"foldWidgets"!=j.getRegion(w)){var S=w.getDocumentPosition().row,U=H.session.selection;if(w.getShiftKey())U.selectTo(S,0);else{if(2==w.domEvent.detail)return H.selectAll(),w.preventDefault();x.$clickSelection=H.selection.getLineRange(S)}return x.setState("selectByLines"),x.captureMouse(w),w.preventDefault()}})),x.editor.setDefaultHandler("guttermousemove",(function(z){var q=z.domEvent.target||z.domEvent.srcElement;if(U.hasCssClass(q,"ace_fold-widget"))return u();G&&x.$tooltipFollowsMouse&&h(z),S=z,w||(w=setTimeout((function(){w=null,S&&!x.isMousePressed?function(){var w=S.getDocumentPosition().row,U=j.$annotations[w];if(!U)return u();if(w==H.session.getLength()){var z=H.renderer.pixelToScreenCoordinates(0,S.y).row,q=S.$pos;if(z>H.session.documentToScreenRow(q.row,q.column))return u()}if(G!=U)if(G=U.text.join("<br/>"),X.setHtml(G),X.show(),H._signal("showGutterTooltip",X),H.on("mousewheel",u),x.$tooltipFollowsMouse)h(S);else{var K=S.domEvent.target.getBoundingClientRect(),Y=X.getElement().style;Y.left=K.right+"px",Y.top=K.bottom+"px"}}():u()}),50))})),z.addListener(H.renderer.$gutter,"mouseout",(function(x){S=null,G&&!w&&(w=setTimeout((function(){w=null,u()}),50))})),H.on("changeSession",u)}})),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(x,w,S){"use strict";var U=x("../lib/event"),G=x("../lib/useragent"),z=w.MouseEvent=function(x,w){this.domEvent=x,this.editor=w,this.x=this.clientX=x.clientX,this.y=this.clientY=x.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){U.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){U.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var x=this.editor.getSelectionRange();if(x.isEmpty())this.$inSelection=!1;else{var w=this.getDocumentPosition();this.$inSelection=x.contains(w.row,w.column)}return this.$inSelection},this.getButton=function(){return U.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=G.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(z.prototype)})),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],(function(x,w,S){"use strict";var U=x("../lib/dom"),G=x("../lib/event"),z=x("../lib/useragent");function s(x){var w=x.editor,S=U.createElement("img");S.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",z.isOpera&&(S.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;"),["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach((function(w){x[w]=this[w]}),this),w.addEventListener("mousedown",this.onMouseDown.bind(x));var H,j,X,q,K,Y,Z,J,Q,ee,te,ne=w.container,re=0;function C(){var x=Y;(function(x,S){var U=Date.now(),G=!S||x.row!=S.row,z=!S||x.column!=S.column;!ee||G||z?(w.moveCursorToPosition(x),ee=U,te={x:j,y:X}):a(te.x,te.y,j,X)>5?ee=null:U-ee>=200&&(w.renderer.scrollCursorIntoView(),ee=null)})(Y=w.renderer.screenToTextCoordinates(j,X),x),function(x,S){var U=Date.now(),G=w.renderer.layerConfig.lineHeight,z=w.renderer.layerConfig.characterWidth,H=w.renderer.scroller.getBoundingClientRect(),q={x:{left:j-H.left,right:H.right-j},y:{top:X-H.top,bottom:H.bottom-X}},K=Math.min(q.x.left,q.x.right),Y=Math.min(q.y.top,q.y.bottom),Z={row:x.row,column:x.column};K/z<=2&&(Z.column+=q.x.left<q.x.right?-3:2),Y/G<=1&&(Z.row+=q.y.top<q.y.bottom?-1:1);var J=x.row!=Z.row,ee=x.column!=Z.column,te=!S||x.row!=S.row;J||ee&&!te?Q?U-Q>=200&&w.renderer.scrollCursorIntoView(Z):Q=U:Q=null}(Y,x)}function A(){K=w.selection.toOrientedRange(),H=w.session.addMarker(K,"ace_selection",w.getSelectionStyle()),w.clearSelection(),w.isFocused()&&w.renderer.$cursorLayer.setBlinking(!1),clearInterval(q),C(),q=setInterval(C,20),re=0,G.addListener(document,"mousemove",y)}function R(){clearInterval(q),w.session.removeMarker(H),H=null,w.selection.fromOrientedRange(K),w.isFocused()&&!J&&w.$resetCursorStyle(),K=null,Y=null,re=0,Q=null,ee=null,G.removeListener(document,"mousemove",y)}this.onDragStart=function(x){if(this.cancelDrag||!ne.draggable){var U=this;return setTimeout((function(){U.startSelect(),U.captureMouse(x)}),0),x.preventDefault()}K=w.getSelectionRange();var G=x.dataTransfer;G.effectAllowed=w.getReadOnly()?"copy":"copyMove",z.isOpera&&(w.container.appendChild(S),S.scrollTop=0),G.setDragImage&&G.setDragImage(S,0,0),z.isOpera&&w.container.removeChild(S),G.clearData(),G.setData("Text",w.session.getTextRange()),J=!0,this.setState("drag")},this.onDragEnd=function(x){if(ne.draggable=!1,J=!1,this.setState(null),!w.getReadOnly()){var S=x.dataTransfer.dropEffect;Z||"move"!=S||w.session.remove(w.getSelectionRange()),w.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(x){if(!w.getReadOnly()&&T(x.dataTransfer))return j=x.clientX,X=x.clientY,H||A(),re++,x.dataTransfer.dropEffect=Z=b(x),G.preventDefault(x)},this.onDragOver=function(x){if(!w.getReadOnly()&&T(x.dataTransfer))return j=x.clientX,X=x.clientY,H||(A(),re++),null!==ie&&(ie=null),x.dataTransfer.dropEffect=Z=b(x),G.preventDefault(x)},this.onDragLeave=function(x){if(--re<=0&&H)return R(),Z=null,G.preventDefault(x)},this.onDrop=function(x){if(Y){var S=x.dataTransfer;if(J)switch(Z){case"move":K=K.contains(Y.row,Y.column)?{start:Y,end:Y}:w.moveText(K,Y);break;case"copy":K=w.moveText(K,Y,!0)}else{var U=S.getData("Text");K={start:Y,end:w.session.insert(Y,U)},w.focus(),Z=null}return R(),G.preventDefault(x)}},G.addListener(ne,"dragstart",this.onDragStart.bind(x)),G.addListener(ne,"dragend",this.onDragEnd.bind(x)),G.addListener(ne,"dragenter",this.onDragEnter.bind(x)),G.addListener(ne,"dragover",this.onDragOver.bind(x)),G.addListener(ne,"dragleave",this.onDragLeave.bind(x)),G.addListener(ne,"drop",this.onDrop.bind(x));var ie=null;function y(){null==ie&&(ie=setTimeout((function(){null!=ie&&H&&R()}),20))}function T(x){var w=x.types;return!w||Array.prototype.some.call(w,(function(x){return"text/plain"==x||"Text"==x}))}function b(x){var w=["copy","copymove","all","uninitialized"],S=z.isMac?x.altKey:x.ctrlKey,U="uninitialized";try{U=x.dataTransfer.effectAllowed.toLowerCase()}catch(x){}var G="none";return S&&w.indexOf(U)>=0?G="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(U)>=0?G="move":w.indexOf(U)>=0&&(G="copy"),G}}function a(x,w,S,U){return Math.sqrt(Math.pow(S-x,2)+Math.pow(U-w,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(x){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var x=this.editor;x.container.draggable=!0,x.renderer.$cursorLayer.setBlinking(!1),x.setStyle("ace_dragging");var w=z.isWin?"default":"move";x.renderer.setCursorStyle(w),this.setState("dragReady")},this.onMouseDrag=function(x){var w=this.editor.container;z.isIE&&"dragReady"==this.state&&a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&w.dragDrop(),"dragWait"===this.state&&a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(w.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))},this.onMouseDown=function(x){if(this.$dragEnabled){this.mousedownEvent=x;var w=this.editor,S=x.inSelection(),U=x.getButton();if(1===(x.domEvent.detail||1)&&0===U&&S){if(x.editor.inMultiSelectMode&&(x.getAccelKey()||x.getShiftKey()))return;this.mousedownEvent.time=Date.now();var G=x.domEvent.target||x.domEvent.srcElement;"unselectable"in G&&(G.unselectable="on"),w.getDragDelay()?(z.isWebKit&&(this.cancelDrag=!0,w.container.draggable=!0),this.setState("dragWait")):this.startDrag(),this.captureMouse(x,this.onMouseDrag.bind(this)),x.defaultPrevented=!0}}}}).call(s.prototype),w.DragdropHandler=s})),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/dom"],(function(x,w,S){"use strict";var U=x("./mouse_event").MouseEvent,G=x("../lib/dom");w.addTouchListeners=function(x,w){var S,z,H,j,X,q,K,Y,Z,J="scroll",Q=0,ee=0,te=0,ne=0;function _(){var x=window.navigator&&window.navigator.clipboard,S=!1,i=function(U){var z,H,j=U.target.getAttribute("action");if("more"==j||!S)return S=!S,z=w.getCopyText(),H=w.session.getUndoManager().hasUndo(),void Z.replaceChild(G.buildDom(S?["span",!z&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],z&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],z&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],x&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],H&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),Z.firstChild);"paste"==j?x.readText().then((function(x){w.execCommand(j,x)})):j&&("cut"!=j&&"copy"!=j||(x?x.writeText(w.getCopyText()):document.execCommand("copy")),w.execCommand(j)),Z.firstChild.style.display="none",S=!1,"openCommandPallete"!=j&&w.focus()};Z=G.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(x){J="menu",x.stopPropagation(),x.preventDefault(),w.textInput.focus()},ontouchend:function(x){x.stopPropagation(),x.preventDefault(),i(x)},onclick:i},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],w.container)}function E(){Z||_();var x=w.selection.cursor,S=w.renderer.textToScreenCoordinates(x.row,x.column),U=w.container.getBoundingClientRect();Z.style.top=S.pageY-U.top-3+"px",Z.style.right="10px",Z.style.display="",Z.firstChild.style.display="none",w.on("input",C)}function C(x){Z&&(Z.style.display="none"),w.off("input",C)}function A(){X=null,clearTimeout(X);var x=w.selection.getRange(),S=x.contains(K.row,K.column);!x.isEmpty()&&S||(w.selection.moveToPosition(K),w.selection.selectWord()),J="wait",E()}x.addEventListener("contextmenu",(function(x){Y&&w.textInput.getElement().focus()})),x.addEventListener("touchstart",(function(x){var G=x.touches;if(X||G.length>1)return clearTimeout(X),X=null,H=-1,void(J="zoom");Y=w.$mouseHandler.isMousePressed=!0;var q=w.renderer.layerConfig.lineHeight,Z=w.renderer.layerConfig.lineHeight,re=x.timeStamp;j=re;var ie=G[0],oe=ie.clientX,ae=ie.clientY;Math.abs(S-oe)+Math.abs(z-ae)>q&&(H=-1),S=x.clientX=oe,z=x.clientY=ae,te=ne=0;var se=new U(x,w);if(K=se.getDocumentPosition(),re-H<500&&1==G.length&&!Q)ee++,x.preventDefault(),x.button=0,function(){X=null,clearTimeout(X),w.selection.moveToPosition(K);var x=ee>=2?w.selection.getLineRange(K.row):w.session.getBracketRange(K);x&&!x.isEmpty()?w.selection.setRange(x):w.selection.selectWord(),J="wait"}();else{ee=0;var le=w.selection.cursor,ce=w.selection.isEmpty()?le:w.selection.anchor,ue=w.renderer.$cursorLayer.getPixelPosition(le,!0),he=w.renderer.$cursorLayer.getPixelPosition(ce,!0),de=w.renderer.scroller.getBoundingClientRect(),L=function(x,w){return(x/=Z)*x+(w=w/q-.75)*w};if(x.clientX<de.left)return void(J="zoom");var pe=L(x.clientX-de.left-ue.left,x.clientY-de.top-ue.top),fe=L(x.clientX-de.left-he.left,x.clientY-de.top-he.top);pe<3.5&&fe<3.5&&(J=pe>fe?"cursor":"anchor"),J=fe<3.5?"anchor":pe<3.5?"cursor":"scroll",X=setTimeout(A,450)}H=re})),x.addEventListener("touchend",(function(x){Y=w.$mouseHandler.isMousePressed=!1,q&&clearInterval(q),"zoom"==J?(J="",Q=0):X?(w.selection.moveToPosition(K),Q=0,E()):"scroll"==J?(Q+=60,q=setInterval((function(){Q--<=0&&(clearInterval(q),q=null),Math.abs(te)<.01&&(te=0),Math.abs(ne)<.01&&(ne=0),Q<20&&(te*=.9),Q<20&&(ne*=.9);var x=w.session.getScrollTop();w.renderer.scrollBy(10*te,10*ne),x==w.session.getScrollTop()&&(Q=0)}),10),x.preventDefault(),C()):E(),clearTimeout(X),X=null})),x.addEventListener("touchmove",(function(x){X&&(clearTimeout(X),X=null);var G=x.touches;if(!(G.length>1||"zoom"==J)){var H=G[0],q=S-H.clientX,K=z-H.clientY;if("wait"==J){if(!(q*q+K*K>4))return x.preventDefault();J="cursor"}S=H.clientX,z=H.clientY,x.clientX=H.clientX,x.clientY=H.clientY;var Y=x.timeStamp,Z=Y-j;if(j=Y,"scroll"==J){var Q=new U(x,w);Q.speed=1,Q.wheelX=q,Q.wheelY=K,10*Math.abs(q)<Math.abs(K)&&(q=0),10*Math.abs(K)<Math.abs(q)&&(K=0),0!=Z&&(te=q/Z,ne=K/Z),w._emit("mousewheel",Q),Q.propagationStopped||(te=ne=0)}else{var ee=new U(x,w).getDocumentPosition();"cursor"==J?w.selection.moveCursorToPosition(ee):"anchor"==J&&w.selection.setSelectionAnchor(ee.row,ee.column),w.renderer.scrollCursorIntoView(ee),x.preventDefault()}}}))}})),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],(function(x,w,S){"use strict";var U=x("./dom");w.get=function(x,w){var S=new XMLHttpRequest;S.open("GET",x,!0),S.onreadystatechange=function(){4===S.readyState&&w(S.responseText)},S.send(null)},w.loadScript=function(x,w){var S=U.getDocumentHead(),G=document.createElement("script");G.src=x,S.appendChild(G),G.onload=G.onreadystatechange=function(x,S){!S&&G.readyState&&"loaded"!=G.readyState&&"complete"!=G.readyState||(G=G.onload=G.onreadystatechange=null,S||w())}},w.qualifyURL=function(x){var w=document.createElement("a");return w.href=x,w.href}})),ace.define("ace/lib/event_emitter",["require","exports","module"],(function(x,w,S){"use strict";var U={},r=function(){this.propagationStopped=!0},o=function(){this.defaultPrevented=!0};U._emit=U._dispatchEvent=function(x,w){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var S=this._eventRegistry[x]||[],U=this._defaultHandlers[x];if(S.length||U){"object"==typeof w&&w||(w={}),w.type||(w.type=x),w.stopPropagation||(w.stopPropagation=r),w.preventDefault||(w.preventDefault=o),S=S.slice();for(var G=0;G<S.length&&(S[G](w,this),!w.propagationStopped);G++);return U&&!w.defaultPrevented?U(w,this):void 0}},U._signal=function(x,w){var S=(this._eventRegistry||{})[x];if(S){S=S.slice();for(var U=0;U<S.length;U++)S[U](w,this)}},U.once=function(x,w){var S=this;if(this.addEventListener(x,(function i(){S.removeEventListener(x,i),w.apply(null,arguments)})),!w)return new Promise((function(x){w=x}))},U.setDefaultHandler=function(x,w){var S=this._defaultHandlers;if(S||(S=this._defaultHandlers={_disabled_:{}}),S[x]){var U=S[x],G=S._disabled_[x];G||(S._disabled_[x]=G=[]),G.push(U);var z=G.indexOf(w);-1!=z&&G.splice(z,1)}S[x]=w},U.removeDefaultHandler=function(x,w){var S=this._defaultHandlers;if(S){var U=S._disabled_[x];if(S[x]==w)U&&this.setDefaultHandler(x,U.pop());else if(U){var G=U.indexOf(w);-1!=G&&U.splice(G,1)}}},U.on=U.addEventListener=function(x,w,S){this._eventRegistry=this._eventRegistry||{};var U=this._eventRegistry[x];return U||(U=this._eventRegistry[x]=[]),-1==U.indexOf(w)&&U[S?"unshift":"push"](w),w},U.off=U.removeListener=U.removeEventListener=function(x,w){this._eventRegistry=this._eventRegistry||{};var S=this._eventRegistry[x];if(S){var U=S.indexOf(w);-1!==U&&S.splice(U,1)}},U.removeAllListeners=function(x){this._eventRegistry&&(this._eventRegistry[x]=[])},w.EventEmitter=U})),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(x,w,S){var G=x("./oop"),z=x("./event_emitter").EventEmitter,H={setOptions:function(x){Object.keys(x).forEach((function(w){this.setOption(w,x[w])}),this)},getOptions:function(x){var w={};if(x)Array.isArray(x)||(w=x,x=Object.keys(w));else{var S=this.$options;x=Object.keys(S).filter((function(x){return!S[x].hidden}))}return x.forEach((function(x){w[x]=this.getOption(x)}),this),w},setOption:function(x,w){if(this["$"+x]!==w){var S=this.$options[x];if(!S)return s('misspelled option "'+x+'"');if(S.forwardTo)return this[S.forwardTo]&&this[S.forwardTo].setOption(x,w);S.handlesSet||(this["$"+x]=w),S&&S.set&&S.set.call(this,w)}},getOption:function(x){var w=this.$options[x];return w?w.forwardTo?this[w.forwardTo]&&this[w.forwardTo].getOption(x):w&&w.get?w.get.call(this):this["$"+x]:s('misspelled option "'+x+'"')}};function s(x){void 0!==U&&U.warn&&U.warn.apply(U,arguments)}function a(x,w){var S=new Error(x);S.data=w,"object"==typeof U&&U.error&&U.error(S),setTimeout((function(){throw S}))}var c=function(){this.$defaultOptions={}};(function(){G.implement(this,z),this.defineOptions=function(x,w,S){return x.$options||(this.$defaultOptions[w]=x.$options={}),Object.keys(S).forEach((function(w){var U=S[w];"string"==typeof U&&(U={forwardTo:U}),U.name||(U.name=w),x.$options[U.name]=U,"initialValue"in U&&(x["$"+U.name]=U.initialValue)})),G.implement(x,H),this},this.resetOptions=function(x){Object.keys(x.$options).forEach((function(w){var S=x.$options[w];"value"in S&&x.setOption(w,S.value)}))},this.setDefaultValue=function(x,w,S){if(!x){for(x in this.$defaultOptions)if(this.$defaultOptions[x][w])break;if(!this.$defaultOptions[x][w])return!1}var U=this.$defaultOptions[x]||(this.$defaultOptions[x]={});U[w]&&(U.forwardTo?this.setDefaultValue(U.forwardTo,w,S):U[w].value=S)},this.setDefaultValues=function(x,w){Object.keys(w).forEach((function(S){this.setDefaultValue(x,S,w[S])}),this)},this.warn=s,this.reportError=a}).call(c.prototype),w.AppConfig=c})),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],(function(x,w,G){var z=x("./lib/lang"),H=(x("./lib/oop"),x("./lib/net")),j=x("./lib/app_config").AppConfig;G.exports=w=new j;var X=function(){return this||"undefined"!=typeof window&&window}(),q={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};w.get=function(x){if(!q.hasOwnProperty(x))throw new Error("Unknown config key: "+x);return q[x]},w.set=function(x,w){if(q.hasOwnProperty(x))q[x]=w;else if(0==this.setDefaultValue("",x,w))throw new Error("Unknown config key: "+x)},w.all=function(){return z.copyObject(q)},w.$modes={},w.moduleUrl=function(x,w){if(q.$moduleUrls[x])return q.$moduleUrls[x];var S=x.split("/"),U="snippets"==(w=w||S[S.length-2]||"")?"/":"-",G=S[S.length-1];if("worker"==w&&"-"==U){var z=new RegExp("^"+w+"[\\-_]|[\\-_]"+w+"$","g");G=G.replace(z,"")}(!G||G==w)&&S.length>1&&(G=S[S.length-2]);var H=q[w+"Path"];return null==H?H=q.basePath:"/"==U&&(w=U=""),H&&"/"!=H.slice(-1)&&(H+="/"),H+w+U+G+this.get("suffix")},w.setModuleUrl=function(x,w){return q.$moduleUrls[x]=w},w.$loading={},w.loadModule=function(S,U){var G,z;Array.isArray(S)&&(z=S[0],S=S[1]);try{G=x(S)}catch(x){}if(G&&!w.$loading[S])return U&&U(G);if(w.$loading[S]||(w.$loading[S]=[]),w.$loading[S].push(U),!(w.$loading[S].length>1)){var a=function(){x([S],(function(x){w._emit("load.module",{name:S,module:x});var U=w.$loading[S];w.$loading[S]=null,U.forEach((function(w){w&&w(x)}))}))};if(!w.get("packaged"))return a();H.loadScript(w.moduleUrl(S,z),a),l()}};var l=function(){q.basePath||q.workerPath||q.modePath||q.themePath||Object.keys(q.$moduleUrls).length||(U.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),l=function(){})};function u(U){if(X&&X.document){q.packaged=U||x.packaged||G.packaged||X.define&&S(3).packaged;for(var z,H={},j="",K=document.currentScript||document._currentScript,Y=(K&&K.ownerDocument||document).getElementsByTagName("script"),Z=0;Z<Y.length;Z++){var J=Y[Z],Q=J.src||J.getAttribute("src");if(Q){for(var ee=J.attributes,te=0,ne=ee.length;te<ne;te++){var re=ee[te];0===re.name.indexOf("data-ace-")&&(H[(z=re.name.replace(/^data-ace-/,""),z.replace(/-(.)/g,(function(x,w){return w.toUpperCase()})))]=re.value)}var ie=Q.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);ie&&(j=ie[1])}}for(var oe in j&&(H.base=H.base||j,H.packaged=!0),H.basePath=H.base,H.workerPath=H.workerPath||H.base,H.modePath=H.modePath||H.base,H.themePath=H.themePath||H.base,delete H.base,H)void 0!==H[oe]&&w.set(oe,H[oe])}}u(!0),w.init=u,w.version="1.4.7"})),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],(function(x,w,S){"use strict";var U=x("../lib/event"),G=x("../lib/useragent"),z=x("./default_handlers").DefaultHandlers,H=x("./default_gutter_handler").GutterHandler,j=x("./mouse_event").MouseEvent,X=x("./dragdrop_handler").DragdropHandler,q=x("./touch_handler").addTouchListeners,K=x("../config"),h=function(x){var w=this;this.editor=x,new z(this),new H(this),new X(this);var n=function(w){(!document.hasFocus||!document.hasFocus()||!x.isFocused()&&document.activeElement==(x.textInput&&x.textInput.getElement()))&&window.focus(),x.focus()},S=x.renderer.getMouseEventTarget();U.addListener(S,"click",this.onMouseEvent.bind(this,"click")),U.addListener(S,"mousemove",this.onMouseMove.bind(this,"mousemove")),U.addMultiMouseDownListener([S,x.renderer.scrollBarV&&x.renderer.scrollBarV.inner,x.renderer.scrollBarH&&x.renderer.scrollBarH.inner,x.textInput&&x.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),U.addMouseWheelListener(x.container,this.onMouseWheel.bind(this,"mousewheel")),q(x.container,x);var j=x.renderer.$gutter;U.addListener(j,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),U.addListener(j,"click",this.onMouseEvent.bind(this,"gutterclick")),U.addListener(j,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),U.addListener(j,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),U.addListener(S,"mousedown",n),U.addListener(j,"mousedown",n),G.isIE&&x.renderer.scrollBarV&&(U.addListener(x.renderer.scrollBarV.element,"mousedown",n),U.addListener(x.renderer.scrollBarH.element,"mousedown",n)),x.on("mousemove",(function(S){if(!w.state&&!w.$dragDelay&&w.$dragEnabled){var U=x.renderer.screenToTextCoordinates(S.x,S.y),G=x.session.selection.getRange(),z=x.renderer;!G.isEmpty()&&G.insideStart(U.row,U.column)?z.setCursorStyle("default"):z.setCursorStyle("")}}))};(function(){this.onMouseEvent=function(x,w){this.editor._emit(x,new j(w,this.editor))},this.onMouseMove=function(x,w){var S=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;S&&S.length&&this.editor._emit(x,new j(w,this.editor))},this.onMouseWheel=function(x,w){var S=new j(w,this.editor);S.speed=2*this.$scrollSpeed,S.wheelX=w.wheelX,S.wheelY=w.wheelY,this.editor._emit(x,S)},this.setState=function(x){this.state=x},this.captureMouse=function(x,w){this.x=x.x,this.y=x.y,this.isMousePressed=!0;var S=this.editor,z=this.editor.renderer;z.$isMousePressed=!0;var H=this,c=function(x){if(x){if(G.isWebKit&&!x.which&&H.releaseMouse)return H.releaseMouse();H.x=x.clientX,H.y=x.clientY,w&&w(x),H.mouseEvent=new j(x,H.editor),H.$mouseMoved=!0}},l=function(x){S.off("beforeEndOperation",h),clearInterval(X),u(),H[H.state+"End"]&&H[H.state+"End"](x),H.state="",H.isMousePressed=z.$isMousePressed=!1,z.$keepTextAreaAtCursor&&z.$moveTextAreaToCursor(),H.$onCaptureMouseMove=H.releaseMouse=null,x&&H.onMouseEvent("mouseup",x),S.endOperation()},u=function(){H[H.state]&&H[H.state](),H.$mouseMoved=!1};if(G.isOldIE&&"dblclick"==x.domEvent.type)return setTimeout((function(){l(x)}));var h=function(x){H.releaseMouse&&S.curOp.command.name&&S.curOp.selectionChanged&&(H[H.state+"End"]&&H[H.state+"End"](),H.state="",H.releaseMouse())};S.on("beforeEndOperation",h),S.startOperation({command:{name:"mouse"}}),H.$onCaptureMouseMove=c,H.releaseMouse=U.capture(this.editor.container,c,l);var X=setInterval(u,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var x=function(w){w&&w.domEvent&&"contextmenu"!=w.domEvent.type||(this.editor.off("nativecontextmenu",x),w&&w.domEvent&&U.stopEvent(w.domEvent))}.bind(this);setTimeout(x,10),this.editor.on("nativecontextmenu",x)}}).call(h.prototype),K.defineOptions(h.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:G.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),w.MouseHandler=h})),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],(function(x,w,S){"use strict";var U=x("../lib/dom");w.FoldHandler=function(x){x.on("click",(function(w){var S=w.getDocumentPosition(),G=x.session,z=G.getFoldAt(S.row,S.column,1);z&&(w.getAccelKey()?G.removeFold(z):G.expandFold(z),w.stop());var H=w.domEvent&&w.domEvent.target;H&&U.hasCssClass(H,"ace_inline_button")&&U.hasCssClass(H,"ace_toggle_wrap")&&(G.setOption("wrap",!G.getUseWrapMode()),x.renderer.scrollCursorIntoView())})),x.on("gutterclick",(function(w){if("foldWidgets"==x.renderer.$gutterLayer.getRegion(w)){var S=w.getDocumentPosition().row,U=x.session;U.foldWidgets&&U.foldWidgets[S]&&x.session.onFoldWidgetClick(S,w),x.isFocused()||x.focus(),w.stop()}})),x.on("gutterdblclick",(function(w){if("foldWidgets"==x.renderer.$gutterLayer.getRegion(w)){var S=w.getDocumentPosition().row,U=x.session,G=U.getParentFoldRangeData(S,!0),z=G.range||G.firstRange;if(z){S=z.start.row;var H=U.getFoldAt(S,U.getLine(S).length,1);H?U.removeFold(H):(U.addFold("...",z),x.renderer.scrollCursorIntoView({row:z.start.row,column:0}))}w.stop()}}))}})),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],(function(x,w,S){"use strict";var U=x("../lib/keys"),G=x("../lib/event"),o=function(x){this.$editor=x,this.$data={editor:x},this.$handlers=[],this.setDefaultHandler(x.commands)};(function(){this.setDefaultHandler=function(x){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=x,this.addKeyboardHandler(x,0)},this.setKeyboardHandler=function(x){var w=this.$handlers;if(w[w.length-1]!=x){for(;w[w.length-1]&&w[w.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(w[w.length-1]);this.addKeyboardHandler(x,1)}},this.addKeyboardHandler=function(x,w){if(x){"function"!=typeof x||x.handleKeyboard||(x.handleKeyboard=x);var S=this.$handlers.indexOf(x);-1!=S&&this.$handlers.splice(S,1),null==w?this.$handlers.push(x):this.$handlers.splice(w,0,x),-1==S&&x.attach&&x.attach(this.$editor)}},this.removeKeyboardHandler=function(x){var w=this.$handlers.indexOf(x);return-1!=w&&(this.$handlers.splice(w,1),x.detach&&x.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var x=this.$data,w=x.editor;return this.$handlers.map((function(S){return S.getStatusText&&S.getStatusText(w,x)||""})).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(x,w,S,U){for(var z,H=!1,j=this.$editor.commands,X=this.$handlers.length;X--&&!((z=this.$handlers[X].handleKeyboard(this.$data,x,w,S,U))&&z.command&&((H="null"==z.command||j.exec(z.command,this.$editor,z.args,U))&&U&&-1!=x&&1!=z.passEvent&&1!=z.command.passEvent&&G.stopEvent(U),H)););return H||-1!=x||(z={command:"insertstring"},H=j.exec("insertstring",this.$editor,w)),H&&this.$editor._signal&&this.$editor._signal("keyboardActivity",z),H},this.onCommandKey=function(x,w,S){var G=U.keyCodeToString(S);return this.$callKeyboardHandlers(w,G,S,x)},this.onTextInput=function(x){return this.$callKeyboardHandlers(-1,x)}}).call(o.prototype),w.KeyBinding=o})),ace.define("ace/lib/bidiutil",["require","exports","module"],(function(x,w,S){"use strict";var U=0,G=0,z=!1,H=!1,j=!1,X=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],q=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],K=[18,18,18,18,18,18,18,18,18,6,5,6,8,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,5,5,5,6,8,4,4,11,11,11,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,18,18,18,18,18,18,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,4,11,11,11,11,4,4,4,4,0,4,4,18,4,4,11,11,2,2,4,0,4,4,4,2,0,4,4,4,4,4],Y=[8,8,8,8,8,8,8,8,8,8,8,18,18,18,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8];function d(x,w,S){if(!(G<x))if(1!=x||1!=U||H)for(var z,j,X,q,K=S.length,Y=0;Y<K;){if(w[Y]>=x){for(z=Y+1;z<K&&w[z]>=x;)z++;for(j=Y,X=z-1;j<X;j++,X--)q=S[j],S[j]=S[X],S[X]=q;Y=z}Y++}else S.reverse()}function p(x,w,S,G){var X,q,K,Y,Z=w[G];switch(Z){case 0:case 1:z=!1;case 4:case 3:return Z;case 2:return z?3:2;case 7:return z=!0,1;case 8:return 4;case 9:return G<1||G+1>=w.length||2!=(X=S[G-1])&&3!=X||2!=(q=w[G+1])&&3!=q?4:(z&&(q=3),q==X?q:4);case 10:return 2==(X=G>0?S[G-1]:5)&&G+1<w.length&&2==w[G+1]?2:4;case 11:if(G>0&&2==S[G-1])return 2;if(z)return 4;for(Y=G+1,K=w.length;Y<K&&11==w[Y];)Y++;return Y<K&&2==w[Y]?2:4;case 12:for(K=w.length,Y=G+1;Y<K&&12==w[Y];)Y++;if(Y<K){var J=x[G],Q=J>=1425&&J<=2303||64286==J;if(X=w[Y],Q&&(1==X||7==X))return 1}return G<1||5==(X=w[G-1])?4:S[G-1];case 5:return z=!1,H=!0,U;case 6:return j=!0,4;case 13:case 14:case 16:case 17:case 15:z=!1;case 18:return 4}}function m(x){var w=x.charCodeAt(0),S=w>>8;return 0==S?w>191?0:K[w]:5==S?/[\u0591-\u05f4]/.test(x)?1:0:6==S?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(x)?12:/[\u0660-\u0669\u066b-\u066c]/.test(x)?3:1642==w?11:/[\u06f0-\u06f9]/.test(x)?2:7:32==S&&w<=8287?Y[255&w]:254==S&&w>=65136?7:4}w.L=0,w.R=1,w.EN=2,w.ON_R=3,w.AN=4,w.R_H=5,w.B=6,w.RLE=7,w.DOT="·",w.doBidiReorder=function(x,S,K){if(x.length<2)return{};var Y=x.split(""),Z=new Array(Y.length),J=new Array(Y.length),Q=[];U=K?1:0,function(x,w,S,K){var Y=U?q:X,Z=null,J=null,Q=null,ee=0,te=null,ne=-1,re=null,ie=null,oe=[];if(!K)for(re=0,K=[];re<S;re++)K[re]=m(x[re]);for(G=U,z=!1,H=!1,j=!1,ie=0;ie<S;ie++){if(Z=ee,oe[ie]=J=p(x,K,oe,ie),te=240&(ee=Y[Z][J]),ee&=15,w[ie]=Q=Y[ee][5],te>0)if(16==te){for(re=ne;re<ie;re++)w[re]=1;ne=-1}else ne=-1;if(Y[ee][6])-1==ne&&(ne=ie);else if(ne>-1){for(re=ne;re<ie;re++)w[re]=Q;ne=-1}5==K[ie]&&(w[ie]=0),G|=Q}if(j)for(re=0;re<S;re++)if(6==K[re]){w[re]=U;for(var ae=re-1;ae>=0&&8==K[ae];ae--)w[ae]=U}}(Y,Q,Y.length,S);for(var ee=0;ee<Z.length;Z[ee]=ee,ee++);for(d(2,Q,Z),d(1,Q,Z),ee=0;ee<Z.length-1;ee++)3===S[ee]?Q[ee]=w.AN:1===Q[ee]&&(S[ee]>7&&S[ee]<13||4===S[ee]||18===S[ee])?Q[ee]=w.ON_R:ee>0&&"ل"===Y[ee-1]&&/\u0622|\u0623|\u0625|\u0627/.test(Y[ee])&&(Q[ee-1]=Q[ee]=w.R_H,ee++);for(Y[Y.length-1]===w.DOT&&(Q[Y.length-1]=w.B),"‫"===Y[0]&&(Q[0]=w.RLE),ee=0;ee<Z.length;ee++)J[ee]=Q[Z[ee]];return{logicalFromVisual:Z,bidiLevels:J}},w.hasBidiCharacters=function(x,w){for(var S=!1,U=0;U<x.length;U++)w[U]=m(x.charAt(U)),S||1!=w[U]&&7!=w[U]&&3!=w[U]||(S=!0);return S},w.getVisualFromLogicalIdx=function(x,w){for(var S=0;S<w.logicalFromVisual.length;S++)if(w.logicalFromVisual[S]==x)return S;return 0}})),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],(function(x,w,S){"use strict";var U=x("./lib/bidiutil"),G=x("./lib/lang"),z=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,s=function(x){this.session=x,this.bidiMap={},this.currentRow=null,this.bidiUtil=U,this.charWidths=[],this.EOL="¬",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="¶",this.RLE="‫",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=z.test(x.getValue())};(function(){this.isBidiRow=function(x,w,S){return!!this.seenBidi&&(x!==this.currentRow&&(this.currentRow=x,this.updateRowLine(w,S),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(x){this.seenBidi?this.currentRow=null:"insert"==x.action&&z.test(x.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var x=0,w=this.session.$screenRowCache;if(w.length){var S=this.session.$getRowCacheIndex(w,this.currentRow);S>=0&&(x=this.session.$docRowCache[S])}return x},this.getSplitIndex=function(){var x=0,w=this.session.$screenRowCache;if(w.length)for(var S,U=this.session.$getRowCacheIndex(w,this.currentRow);this.currentRow-x>0&&(S=this.session.$getRowCacheIndex(w,this.currentRow-x-1))===U;)U=S,x++;else x=this.currentRow;return x},this.updateRowLine=function(x,w){void 0===x&&(x=this.getDocumentRow());var S=x===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(x),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var z=this.session.$wrapData[x];z&&(void 0===w&&(w=this.getSplitIndex()),w>0&&z.length?(this.wrapIndent=z.indent,this.wrapOffset=this.wrapIndent*this.charWidths[U.L],this.line=w<z.length?this.line.substring(z[w-1],z[w]):this.line.substring(z[z.length-1])):this.line=this.line.substring(0,z[w])),w==z.length&&(this.line+=this.showInvisibles?S:U.DOT)}else this.line+=this.showInvisibles?S:U.DOT;var H,j=this.session,X=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(x,w){return"\t"===x||j.isFullWidth(x.charCodeAt(0))?(H="\t"===x?j.getScreenTabSize(w+X):2,X+=H-1,G.stringRepeat(U.DOT,H)):x})),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==U.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var x=[];U.hasBidiCharacters(this.line,x)||this.isRtlDir?this.bidiMap=U.doBidiReorder(this.line,x,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(x){if(this.characterWidth!==x.$characterSize.width){this.fontMetrics=x;var w=this.characterWidth=x.$characterSize.width,S=x.$measureCharWidth("ה");this.charWidths[U.L]=this.charWidths[U.EN]=this.charWidths[U.ON_R]=w,this.charWidths[U.R]=this.charWidths[U.AN]=S,this.charWidths[U.R_H]=.45*S,this.charWidths[U.B]=this.charWidths[U.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(x){this.showInvisibles=x,this.currentRow=null},this.setEolChar=function(x){this.EOL=x},this.setContentWidth=function(x){this.contentWidth=x},this.isRtlLine=function(x){return!!this.$isRtl||(null!=x?this.session.getLine(x).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(x,w){for(var S=x.getCursorPosition(),U=x.selection.getSelectionAnchor().row;U<=S.row;U++)w||x.session.getLine(U).charAt(0)!==x.session.$bidiHandler.RLE?w&&x.session.getLine(U).charAt(0)!==x.session.$bidiHandler.RLE&&x.session.doc.insert({column:0,row:U},x.session.$bidiHandler.RLE):x.session.doc.removeInLine(U,0,1)},this.getPosLeft=function(x){x-=this.wrapIndent;var w=this.line.charAt(0)===this.RLE?1:0,S=x>w?this.session.getOverwrite()?x:x-1:w,G=U.getVisualFromLogicalIdx(S,this.bidiMap),z=this.bidiMap.bidiLevels,H=0;!this.session.getOverwrite()&&x<=w&&z[G]%2!=0&&G++;for(var j=0;j<G;j++)H+=this.charWidths[z[j]];return!this.session.getOverwrite()&&x>w&&z[G]%2==0&&(H+=this.charWidths[z[G]]),this.wrapIndent&&(H+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(H+=this.rtlLineOffset),H},this.getSelections=function(x,w){var S,U=this.bidiMap,G=U.bidiLevels,z=[],H=0,j=Math.min(x,w)-this.wrapIndent,X=Math.max(x,w)-this.wrapIndent,q=!1,K=!1,Y=0;this.wrapIndent&&(H+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var Z,J=0;J<G.length;J++)Z=U.logicalFromVisual[J],S=G[J],(q=Z>=j&&Z<X)&&!K?Y=H:!q&&K&&z.push({left:Y,width:H-Y}),H+=this.charWidths[S],K=q;if(q&&J===G.length&&z.push({left:Y,width:H-Y}),this.isRtlDir)for(var Q=0;Q<z.length;Q++)z[Q].left+=this.rtlLineOffset;return z},this.offsetToCol=function(x){this.isRtlDir&&(x-=this.rtlLineOffset);var w=0,S=(x=Math.max(x,0),0),U=0,G=this.bidiMap.bidiLevels,z=this.charWidths[G[U]];for(this.wrapIndent&&(x-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);x>S+z/2;){if(S+=z,U===G.length-1){z=0;break}z=this.charWidths[G[++U]]}return U>0&&G[U-1]%2!=0&&G[U]%2==0?(x<S&&U--,w=this.bidiMap.logicalFromVisual[U]):U>0&&G[U-1]%2==0&&G[U]%2!=0?w=1+(x>S?this.bidiMap.logicalFromVisual[U]:this.bidiMap.logicalFromVisual[U-1]):this.isRtlDir&&U===G.length-1&&0===z&&G[U-1]%2==0||!this.isRtlDir&&0===U&&G[U]%2!=0?w=1+this.bidiMap.logicalFromVisual[U]:(U>0&&G[U-1]%2!=0&&0!==z&&U--,w=this.bidiMap.logicalFromVisual[U]),0===w&&this.isRtlDir&&w++,w+this.wrapIndent}}).call(s.prototype),w.BidiHandler=s})),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],(function(x,w,S){"use strict";var U=x("./lib/oop"),G=x("./lib/lang"),z=x("./lib/event_emitter").EventEmitter,H=x("./range").Range,a=function(x){this.session=x,this.doc=x.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var w=this;this.cursor.on("change",(function(x){w.$cursorChanged=!0,w.$silent||w._emit("changeCursor"),w.$isEmpty||w.$silent||w._emit("changeSelection"),w.$keepDesiredColumnOnChange||x.old.column==x.value.column||(w.$desiredColumn=null)})),this.anchor.on("change",(function(){w.$anchorChanged=!0,w.$isEmpty||w.$silent||w._emit("changeSelection")}))};(function(){U.implement(this,z),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(x,w){this.$isEmpty=!1,this.anchor.setPosition(x,w)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var x=this.anchor,w=this.lead;return x.row>w.row||x.row==w.row&&x.column>w.column},this.getRange=function(){var x=this.anchor,w=this.lead;return this.$isEmpty?H.fromPoints(w,w):this.isBackwards()?H.fromPoints(w,x):H.fromPoints(x,w)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(x,w){var S=w?x.end:x.start,U=w?x.start:x.end;this.$setSelection(S.row,S.column,U.row,U.column)},this.$setSelection=function(x,w,S,U){var G=this.$isEmpty,z=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(x,w),this.cursor.setPosition(S,U),this.$isEmpty=!H.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||G!=this.$isEmpty||z)&&this._emit("changeSelection")},this.$moveSelection=function(x){var w=this.lead;this.$isEmpty&&this.setSelectionAnchor(w.row,w.column),x.call(this)},this.selectTo=function(x,w){this.$moveSelection((function(){this.moveCursorTo(x,w)}))},this.selectToPosition=function(x){this.$moveSelection((function(){this.moveCursorToPosition(x)}))},this.moveTo=function(x,w){this.clearSelection(),this.moveCursorTo(x,w)},this.moveToPosition=function(x){this.clearSelection(),this.moveCursorToPosition(x)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(x,w){if(void 0===w){var S=x||this.lead;x=S.row,w=S.column}return this.session.getWordRange(x,w)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var x=this.getCursor(),w=this.session.getAWordRange(x.row,x.column);this.setSelectionRange(w)},this.getLineRange=function(x,w){var S,U="number"==typeof x?x:this.lead.row,G=this.session.getFoldLine(U);return G?(U=G.start.row,S=G.end.row):S=U,!0===w?new H(U,0,S,this.session.getLine(S).length):new H(U,0,S+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(x,w,S){var U=x.column,G=x.column+w;return S<0&&(U=x.column-w,G=x.column),this.session.isTabStop(x)&&this.doc.getLine(x.row).slice(U,G).split(" ").length-1==w},this.moveCursorLeft=function(){var x,w=this.lead.getPosition();if(x=this.session.getFoldAt(w.row,w.column,-1))this.moveCursorTo(x.start.row,x.start.column);else if(0===w.column)w.row>0&&this.moveCursorTo(w.row-1,this.doc.getLine(w.row-1).length);else{var S=this.session.getTabSize();this.wouldMoveIntoSoftTab(w,S,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-S):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var x,w=this.lead.getPosition();if(x=this.session.getFoldAt(w.row,w.column,1))this.moveCursorTo(x.end.row,x.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var S=this.session.getTabSize();w=this.lead,this.wouldMoveIntoSoftTab(w,S,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,S):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var x=this.lead.row,w=this.lead.column,S=this.session.documentToScreenRow(x,w),U=this.session.screenToDocumentPosition(S,0),G=this.session.getDisplayLine(x,null,U.row,U.column).match(/^\s*/);G[0].length==w||this.session.$useEmacsStyleLineStart||(U.column+=G[0].length),this.moveCursorToPosition(U)},this.moveCursorLineEnd=function(){var x=this.lead,w=this.session.getDocumentLastRowColumnPosition(x.row,x.column);if(this.lead.column==w.column){var S=this.session.getLine(w.row);if(w.column==S.length){var U=S.search(/\s+$/);U>0&&(w.column=U)}}this.moveCursorTo(w.row,w.column)},this.moveCursorFileEnd=function(){var x=this.doc.getLength()-1,w=this.doc.getLine(x).length;this.moveCursorTo(x,w)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var x=this.lead.row,w=this.lead.column,S=this.doc.getLine(x),U=S.substring(w);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var G=this.session.getFoldAt(x,w,1);if(G)this.moveCursorTo(G.end.row,G.end.column);else{if(this.session.nonTokenRe.exec(U)&&(w+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,U=S.substring(w)),w>=S.length)return this.moveCursorTo(x,S.length),this.moveCursorRight(),void(x<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(U)&&(w+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(x,w)}},this.moveCursorLongWordLeft=function(){var x,w=this.lead.row,S=this.lead.column;if(x=this.session.getFoldAt(w,S,-1))this.moveCursorTo(x.start.row,x.start.column);else{var U=this.session.getFoldStringAt(w,S,-1);null==U&&(U=this.doc.getLine(w).substring(0,S));var z=G.stringReverse(U);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(z)&&(S-=this.session.nonTokenRe.lastIndex,z=z.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),S<=0)return this.moveCursorTo(w,0),this.moveCursorLeft(),void(w>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(z)&&(S-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(w,S)}},this.$shortWordEndIndex=function(x){var w,S=0,U=/\s/,G=this.session.tokenRe;if(G.lastIndex=0,this.session.tokenRe.exec(x))S=this.session.tokenRe.lastIndex;else{for(;(w=x[S])&&U.test(w);)S++;if(S<1)for(G.lastIndex=0;(w=x[S])&&!G.test(w);)if(G.lastIndex=0,S++,U.test(w)){if(S>2){S--;break}for(;(w=x[S])&&U.test(w);)S++;if(S>2)break}}return G.lastIndex=0,S},this.moveCursorShortWordRight=function(){var x=this.lead.row,w=this.lead.column,S=this.doc.getLine(x),U=S.substring(w),G=this.session.getFoldAt(x,w,1);if(G)return this.moveCursorTo(G.end.row,G.end.column);if(w==S.length){var z=this.doc.getLength();do{x++,U=this.doc.getLine(x)}while(x<z&&/^\s*$/.test(U));/^\s+/.test(U)||(U=""),w=0}var H=this.$shortWordEndIndex(U);this.moveCursorTo(x,w+H)},this.moveCursorShortWordLeft=function(){var x,w=this.lead.row,S=this.lead.column;if(x=this.session.getFoldAt(w,S,-1))return this.moveCursorTo(x.start.row,x.start.column);var U=this.session.getLine(w).substring(0,S);if(0===S){do{w--,U=this.doc.getLine(w)}while(w>0&&/^\s*$/.test(U));S=U.length,/\s+$/.test(U)||(U="")}var z=G.stringReverse(U),H=this.$shortWordEndIndex(z);return this.moveCursorTo(w,S-H)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(x,w){var S,U=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===w&&(0!==x&&(this.session.$bidiHandler.isBidiRow(U.row,this.lead.row)?(S=this.session.$bidiHandler.getPosLeft(U.column),U.column=Math.round(S/this.session.$bidiHandler.charWidths[0])):S=U.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?U.column=this.$desiredColumn:this.$desiredColumn=U.column);var G=this.session.screenToDocumentPosition(U.row+x,U.column,S);0!==x&&0===w&&G.row===this.lead.row&&G.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[G.row]&&(G.row>0||x>0)&&G.row++,this.moveCursorTo(G.row,G.column+w,0===w)},this.moveCursorToPosition=function(x){this.moveCursorTo(x.row,x.column)},this.moveCursorTo=function(x,w,S){var U=this.session.getFoldAt(x,w,1);U&&(x=U.start.row,w=U.start.column),this.$keepDesiredColumnOnChange=!0;var G=this.session.getLine(x);/[\uDC00-\uDFFF]/.test(G.charAt(w))&&G.charAt(w-1)&&(this.lead.row==x&&this.lead.column==w+1?w-=1:w+=1),this.lead.setPosition(x,w),this.$keepDesiredColumnOnChange=!1,S||(this.$desiredColumn=null)},this.moveCursorToScreen=function(x,w,S){var U=this.session.screenToDocumentPosition(x,w);this.moveCursorTo(U.row,U.column,S)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(x){this.setSelectionRange(x,x.cursor==x.start),this.$desiredColumn=x.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(x){var w=this.getRange();return x?(x.start.column=w.start.column,x.start.row=w.start.row,x.end.column=w.end.column,x.end.row=w.end.row):x=w,x.cursor=this.isBackwards()?x.start:x.end,x.desiredColumn=this.$desiredColumn,x},this.getRangeOfMovements=function(x){var w=this.getCursor();try{x(this);var S=this.getCursor();return H.fromPoints(w,S)}catch(x){return H.fromPoints(w,w)}finally{this.moveCursorToPosition(w)}},this.toJSON=function(){if(this.rangeCount)var x=this.ranges.map((function(x){var w=x.clone();return w.isBackwards=x.cursor==x.start,w}));else(x=this.getRange()).isBackwards=this.isBackwards();return x},this.fromJSON=function(x){if(null==x.start){if(this.rangeList&&x.length>1){this.toSingleRange(x[0]);for(var w=x.length;w--;){var S=H.fromPoints(x[w].start,x[w].end);x[w].isBackwards&&(S.cursor=S.start),this.addRange(S,!0)}return}x=x[0]}this.rangeList&&this.toSingleRange(x),this.setSelectionRange(x,x.isBackwards)},this.isEqual=function(x){if((x.length||this.rangeCount)&&x.length!=this.rangeCount)return!1;if(!x.length||!this.ranges)return this.getRange().isEqual(x);for(var w=this.ranges.length;w--;)if(!this.ranges[w].isEqual(x[w]))return!1;return!0}}).call(a.prototype),w.Selection=a})),ace.define("ace/tokenizer",["require","exports","module","ace/config"],(function(x,w,S){"use strict";var U=x("./config"),G=2e3,o=function(x){for(var w in this.states=x,this.regExps={},this.matchMappings={},this.states){for(var S=this.states[w],U=[],G=0,z=this.matchMappings[w]={defaultToken:"text"},H="g",j=[],X=0;X<S.length;X++){var q=S[X];if(q.defaultToken&&(z.defaultToken=q.defaultToken),q.caseInsensitive&&(H="gi"),null!=q.regex){q.regex instanceof RegExp&&(q.regex=q.regex.toString().slice(1,-1));var K=q.regex,Y=new RegExp("(?:("+K+")|(.))").exec("a").length-2;Array.isArray(q.token)?1==q.token.length||1==Y?q.token=q.token[0]:Y-1!=q.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:q,groupCount:Y-1}),q.token=q.token[0]):(q.tokenArray=q.token,q.token=null,q.onMatch=this.$arrayTokens):"function"!=typeof q.token||q.onMatch||(q.onMatch=Y>1?this.$applyToken:q.token),Y>1&&(/\\\d/.test(q.regex)?K=q.regex.replace(/\\([0-9]+)/g,(function(x,w){return"\\"+(parseInt(w,10)+G+1)})):(Y=1,K=this.removeCapturingGroups(q.regex)),q.splitRegex||"string"==typeof q.token||j.push(q)),z[G]=X,G+=Y,U.push(K),q.onMatch||(q.onMatch=null)}}U.length||(z[0]=0,U.push("$")),j.forEach((function(x){x.splitRegex=this.createSplitterRegexp(x.regex,H)}),this),this.regExps[w]=new RegExp("("+U.join(")|(")+")|($)",H)}};(function(){this.$setMaxTokenCount=function(x){G=0|x},this.$applyToken=function(x){var w=this.splitRegex.exec(x).slice(1),S=this.token.apply(this,w);if("string"==typeof S)return[{type:S,value:x}];for(var U=[],G=0,z=S.length;G<z;G++)w[G]&&(U[U.length]={type:S[G],value:w[G]});return U},this.$arrayTokens=function(x){if(!x)return[];var w=this.splitRegex.exec(x);if(!w)return"text";for(var S=[],U=this.tokenArray,G=0,z=U.length;G<z;G++)w[G+1]&&(S[S.length]={type:U[G],value:w[G+1]});return S},this.removeCapturingGroups=function(x){return x.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,(function(x,w){return w?"(?:":x}))},this.createSplitterRegexp=function(x,w){if(-1!=x.indexOf("(?=")){var S=0,U=!1,G={};x.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(x,w,z,H,j,X){return U?U="]"!=j:j?U=!0:H?(S==G.stack&&(G.end=X+1,G.stack=-1),S--):z&&(S++,1!=z.length&&(G.stack=S,G.start=X)),x})),null!=G.end&&/^\)*$/.test(x.substr(G.end))&&(x=x.substring(0,G.start)+x.substr(G.end))}return"^"!=x.charAt(0)&&(x="^"+x),"$"!=x.charAt(x.length-1)&&(x+="$"),new RegExp(x,(w||"").replace("g",""))},this.getLineTokens=function(x,w){if(w&&"string"!=typeof w){var S=w.slice(0);"#tmp"===(w=S[0])&&(S.shift(),w=S.shift())}else S=[];var U=w||"start",z=this.states[U];z||(U="start",z=this.states[U]);var H=this.matchMappings[U],j=this.regExps[U];j.lastIndex=0;for(var X,q=[],K=0,Y=0,Z={type:null,value:""};X=j.exec(x);){var J=H.defaultToken,Q=null,ee=X[0],te=j.lastIndex;if(te-ee.length>K){var ne=x.substring(K,te-ee.length);Z.type==J?Z.value+=ne:(Z.type&&q.push(Z),Z={type:J,value:ne})}for(var re=0;re<X.length-2;re++)if(void 0!==X[re+1]){J=(Q=z[H[re]]).onMatch?Q.onMatch(ee,U,S,x):Q.token,Q.next&&(U="string"==typeof Q.next?Q.next:Q.next(U,S),(z=this.states[U])||(this.reportError("state doesn't exist",U),U="start",z=this.states[U]),H=this.matchMappings[U],K=te,(j=this.regExps[U]).lastIndex=te),Q.consumeLineEnd&&(K=te);break}if(ee)if("string"==typeof J)Q&&!1===Q.merge||Z.type!==J?(Z.type&&q.push(Z),Z={type:J,value:ee}):Z.value+=ee;else if(J)for(Z.type&&q.push(Z),Z={type:null,value:""},re=0;re<J.length;re++)q.push(J[re]);if(K==x.length)break;if(K=te,Y++>G){for(Y>2*x.length&&this.reportError("infinite loop with in ace tokenizer",{startState:w,line:x});K<x.length;)Z.type&&q.push(Z),Z={value:x.substring(K,K+=500),type:"overflow"};U="start",S=[];break}}return Z.type&&q.push(Z),S.length>1&&S[0]!==U&&S.unshift("#tmp",U),{tokens:q,state:S.length?S:U}},this.reportError=U.reportError}).call(o.prototype),w.Tokenizer=o})),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],(function(x,w,S){"use strict";var U=x("../lib/lang"),r=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(x,w){if(w)for(var S in x){for(var U=x[S],G=0;G<U.length;G++){var z=U[G];(z.next||z.onMatch)&&("string"==typeof z.next&&0!==z.next.indexOf(w)&&(z.next=w+z.next),z.nextState&&0!==z.nextState.indexOf(w)&&(z.nextState=w+z.nextState))}this.$rules[w+S]=U}else for(var S in x)this.$rules[S]=x[S]},this.getRules=function(){return this.$rules},this.embedRules=function(x,w,S,G,z){var H="function"==typeof x?(new x).getRules():x;if(G)for(var j=0;j<G.length;j++)G[j]=w+G[j];else for(var X in G=[],H)G.push(w+X);if(this.addRules(H,w),S){var q=Array.prototype[z?"push":"unshift"];for(j=0;j<G.length;j++)q.apply(this.$rules[G[j]],U.deepCopy(S))}this.$embeds||(this.$embeds=[]),this.$embeds.push(w)},this.getEmbeds=function(){return this.$embeds};var e=function(x,w){return("start"!=x||w.length)&&w.unshift(this.nextState,x),this.nextState},t=function(x,w){return w.shift(),w.shift()||"start"};this.normalizeRules=function(){var x=0,w=this.$rules;Object.keys(w).forEach((function r(S){var U=w[S];U.processed=!0;for(var G=0;G<U.length;G++){var z=U[G],H=null;Array.isArray(z)&&(H=z,z={}),!z.regex&&z.start&&(z.regex=z.start,z.next||(z.next=[]),z.next.push({defaultToken:z.token},{token:z.token+".end",regex:z.end||z.start,next:"pop"}),z.token=z.token+".start",z.push=!0);var j=z.next||z.push;if(j&&Array.isArray(j)){var X=z.stateName;X||("string"!=typeof(X=z.token)&&(X=X[0]||""),w[X]&&(X+=x++)),w[X]=j,z.next=X,r(X)}else"pop"==j&&(z.next=t);if(z.push&&(z.nextState=z.next||z.push,z.next=e,delete z.push),z.rules)for(var q in z.rules)w[q]?w[q].push&&w[q].push.apply(w[q],z.rules[q]):w[q]=z.rules[q];var K="string"==typeof z?z:z.include;if(K&&(H=Array.isArray(K)?K.map((function(x){return w[x]})):w[K]),H){var Y=[G,1].concat(H);z.noEscape&&(Y=Y.filter((function(x){return!x.next}))),U.splice.apply(U,Y),G--}z.keywordMap&&(z.token=this.createKeywordMapper(z.keywordMap,z.defaultToken||"text",z.caseInsensitive),delete z.defaultToken)}}),this)},this.createKeywordMapper=function(x,w,S,U){var G=Object.create(null);return Object.keys(x).forEach((function(w){var z=x[w];S&&(z=z.toLowerCase());for(var H=z.split(U||"|"),j=H.length;j--;)G[H[j]]=w})),Object.getPrototypeOf(G)&&(G.__proto__=null),this.$keywordList=Object.keys(G),x=null,S?function(x){return G[x.toLowerCase()]||w}:function(x){return G[x]||w}},this.getKeywords=function(){return this.$keywords}}).call(r.prototype),w.TextHighlightRules=r})),ace.define("ace/mode/behaviour",["require","exports","module"],(function(x,w,S){"use strict";var i=function(){this.$behaviours={}};(function(){this.add=function(x,w,S){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[x]:this.$behaviours[x]={}}this.$behaviours[x][w]=S},this.addBehaviours=function(x){for(var w in x)for(var S in x[w])this.add(w,S,x[w][S])},this.remove=function(x){this.$behaviours&&this.$behaviours[x]&&delete this.$behaviours[x]},this.inherit=function(x,w){if("function"==typeof x)var S=(new x).getBehaviours(w);else S=x.getBehaviours(w);this.addBehaviours(S)},this.getBehaviours=function(x){if(x){for(var w={},S=0;S<x.length;S++)this.$behaviours[x[S]]&&(w[x[S]]=this.$behaviours[x[S]]);return w}return this.$behaviours}}).call(i.prototype),w.Behaviour=i})),ace.define("ace/token_iterator",["require","exports","module","ace/range"],(function(x,w,S){"use strict";var U=x("./range").Range,r=function(x,w,S){this.$session=x,this.$row=w,this.$rowTokens=x.getTokens(w);var U=x.getTokenAt(w,S);this.$tokenIndex=U?U.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var x;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,x||(x=this.$session.getLength()),this.$row>=x)return this.$row=x-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var x=this.$rowTokens,w=this.$tokenIndex,S=x[w].start;if(void 0!==S)return S;for(S=0;w>0;)S+=x[w-=1].value.length;return S},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var x=this.$rowTokens[this.$tokenIndex],w=this.getCurrentTokenColumn();return new U(this.$row,w,this.$row,w+x.value.length)}}).call(r.prototype),w.TokenIterator=r})),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(x,w,S){"use strict";var U,G=x("../../lib/oop"),z=x("../behaviour").Behaviour,H=x("../../token_iterator").TokenIterator,j=x("../../lib/lang"),X=["text","paren.rparen","rparen","paren","punctuation.operator"],q=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],K={},Y={'"':'"',"'":"'"},d=function(x){var w=-1;if(x.multiSelect&&(w=x.selection.index,K.rangeCount!=x.multiSelect.rangeCount&&(K={rangeCount:x.multiSelect.rangeCount})),K[w])return U=K[w];U=K[w]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},p=function(x,w,S,U){var G=x.end.row-x.start.row;return{text:S+w+U,selection:[0,x.start.column+1,G,x.end.column+(G?0:1)]}},m=function(x){this.add("braces","insertion",(function(w,S,G,z,H){var X=G.getCursorPosition(),q=z.doc.getLine(X.row);if("{"==H){d(G);var K=G.getSelectionRange(),Y=z.doc.getTextRange(K);if(""!==Y&&"{"!==Y&&G.getWrapBehavioursEnabled())return p(K,Y,"{","}");if(m.isSaneInsertion(G,z))return/[\]\}\)]/.test(q[X.column])||G.inMultiSelectMode||x&&x.braces?(m.recordAutoInsert(G,z,"}"),{text:"{}",selection:[1,1]}):(m.recordMaybeInsert(G,z,"{"),{text:"{",selection:[1,1]})}else if("}"==H){if(d(G),"}"==q.substring(X.column,X.column+1)&&null!==z.$findOpeningBracket("}",{column:X.column+1,row:X.row})&&m.isAutoInsertedClosing(X,q,H))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==H||"\r\n"==H){d(G);var Z="";if(m.isMaybeInsertedClosing(X,q)&&(Z=j.stringRepeat("}",U.maybeInsertedBrackets),m.clearMaybeInsertedClosing()),"}"===q.substring(X.column,X.column+1)){var J=z.findMatchingBracket({row:X.row,column:X.column+1},"}");if(!J)return null;var Q=this.$getIndent(z.getLine(J.row))}else{if(!Z)return void m.clearMaybeInsertedClosing();Q=this.$getIndent(q)}var ee=Q+z.getTabString();return{text:"\n"+ee+"\n"+Q+Z,selection:[1,ee.length,1,ee.length]}}m.clearMaybeInsertedClosing()}})),this.add("braces","deletion",(function(x,w,S,G,z){var H=G.doc.getTextRange(z);if(!z.isMultiLine()&&"{"==H){if(d(S),"}"==G.doc.getLine(z.start.row).substring(z.end.column,z.end.column+1))return z.end.column++,z;U.maybeInsertedBrackets--}})),this.add("parens","insertion",(function(x,w,S,U,G){if("("==G){d(S);var z=S.getSelectionRange(),H=U.doc.getTextRange(z);if(""!==H&&S.getWrapBehavioursEnabled())return p(z,H,"(",")");if(m.isSaneInsertion(S,U))return m.recordAutoInsert(S,U,")"),{text:"()",selection:[1,1]}}else if(")"==G){d(S);var j=S.getCursorPosition(),X=U.doc.getLine(j.row);if(")"==X.substring(j.column,j.column+1)&&null!==U.$findOpeningBracket(")",{column:j.column+1,row:j.row})&&m.isAutoInsertedClosing(j,X,G))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("parens","deletion",(function(x,w,S,U,G){var z=U.doc.getTextRange(G);if(!G.isMultiLine()&&"("==z&&(d(S),")"==U.doc.getLine(G.start.row).substring(G.start.column+1,G.start.column+2)))return G.end.column++,G})),this.add("brackets","insertion",(function(x,w,S,U,G){if("["==G){d(S);var z=S.getSelectionRange(),H=U.doc.getTextRange(z);if(""!==H&&S.getWrapBehavioursEnabled())return p(z,H,"[","]");if(m.isSaneInsertion(S,U))return m.recordAutoInsert(S,U,"]"),{text:"[]",selection:[1,1]}}else if("]"==G){d(S);var j=S.getCursorPosition(),X=U.doc.getLine(j.row);if("]"==X.substring(j.column,j.column+1)&&null!==U.$findOpeningBracket("]",{column:j.column+1,row:j.row})&&m.isAutoInsertedClosing(j,X,G))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("brackets","deletion",(function(x,w,S,U,G){var z=U.doc.getTextRange(G);if(!G.isMultiLine()&&"["==z&&(d(S),"]"==U.doc.getLine(G.start.row).substring(G.start.column+1,G.start.column+2)))return G.end.column++,G})),this.add("string_dquotes","insertion",(function(x,w,S,U,G){var z=U.$mode.$quotes||Y;if(1==G.length&&z[G]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(G))return;d(S);var H=G,j=S.getSelectionRange(),X=U.doc.getTextRange(j);if(!(""===X||1==X.length&&z[X])&&S.getWrapBehavioursEnabled())return p(j,X,H,H);if(!X){var q=S.getCursorPosition(),K=U.doc.getLine(q.row),Z=K.substring(q.column-1,q.column),J=K.substring(q.column,q.column+1),Q=U.getTokenAt(q.row,q.column),ee=U.getTokenAt(q.row,q.column+1);if("\\"==Z&&Q&&/escape/.test(Q.type))return null;var te,ne=Q&&/string|escape/.test(Q.type),re=!ee||/string|escape/.test(ee.type);if(J==H)(te=ne!==re)&&/string\.end/.test(ee.type)&&(te=!1);else{if(ne&&!re)return null;if(ne&&re)return null;var ie=U.$mode.tokenRe;ie.lastIndex=0;var oe=ie.test(Z);ie.lastIndex=0;var ae=ie.test(Z);if(oe||ae)return null;if(J&&!/[\s;,.})\]\\]/.test(J))return null;var se=K[q.column-2];if(Z==H&&(se==H||ie.test(se)))return null;te=!0}return{text:te?H+H:"",selection:[1,1]}}}})),this.add("string_dquotes","deletion",(function(x,w,S,U,G){var z=U.$mode.$quotes||Y,H=U.doc.getTextRange(G);if(!G.isMultiLine()&&z.hasOwnProperty(H)&&(d(S),U.doc.getLine(G.start.row).substring(G.start.column+1,G.start.column+2)==H))return G.end.column++,G}))};m.isSaneInsertion=function(x,w){var S=x.getCursorPosition(),U=new H(w,S.row,S.column);if(!this.$matchTokenType(U.getCurrentToken()||"text",X)){if(/[)}\]]/.test(x.session.getLine(S.row)[S.column]))return!0;var G=new H(w,S.row,S.column+1);if(!this.$matchTokenType(G.getCurrentToken()||"text",X))return!1}return U.stepForward(),U.getCurrentTokenRow()!==S.row||this.$matchTokenType(U.getCurrentToken()||"text",q)},m.$matchTokenType=function(x,w){return w.indexOf(x.type||x)>-1},m.recordAutoInsert=function(x,w,S){var G=x.getCursorPosition(),z=w.doc.getLine(G.row);this.isAutoInsertedClosing(G,z,U.autoInsertedLineEnd[0])||(U.autoInsertedBrackets=0),U.autoInsertedRow=G.row,U.autoInsertedLineEnd=S+z.substr(G.column),U.autoInsertedBrackets++},m.recordMaybeInsert=function(x,w,S){var G=x.getCursorPosition(),z=w.doc.getLine(G.row);this.isMaybeInsertedClosing(G,z)||(U.maybeInsertedBrackets=0),U.maybeInsertedRow=G.row,U.maybeInsertedLineStart=z.substr(0,G.column)+S,U.maybeInsertedLineEnd=z.substr(G.column),U.maybeInsertedBrackets++},m.isAutoInsertedClosing=function(x,w,S){return U.autoInsertedBrackets>0&&x.row===U.autoInsertedRow&&S===U.autoInsertedLineEnd[0]&&w.substr(x.column)===U.autoInsertedLineEnd},m.isMaybeInsertedClosing=function(x,w){return U.maybeInsertedBrackets>0&&x.row===U.maybeInsertedRow&&w.substr(x.column)===U.maybeInsertedLineEnd&&w.substr(0,x.column)==U.maybeInsertedLineStart},m.popAutoInsertedClosing=function(){U.autoInsertedLineEnd=U.autoInsertedLineEnd.substr(1),U.autoInsertedBrackets--},m.clearMaybeInsertedClosing=function(){U&&(U.maybeInsertedBrackets=0,U.maybeInsertedRow=-1)},G.inherits(m,z),w.CstyleBehaviour=m})),ace.define("ace/unicode",["require","exports","module"],(function(x,w,S){"use strict";for(var U=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],G=0,z=[],H=0;H<U.length;H+=2)z.push(G+=U[H]),U[H+1]&&z.push(45,G+=U[H+1]);w.wordChars=String.fromCharCode.apply(null,z)})),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],(function(x,w,S){"use strict";var U=x("../config"),G=x("../tokenizer").Tokenizer,z=x("./text_highlight_rules").TextHighlightRules,H=x("./behaviour/cstyle").CstyleBehaviour,j=x("../unicode"),X=x("../lib/lang"),q=x("../token_iterator").TokenIterator,K=x("../range").Range,h=function(){this.HighlightRules=z};(function(){this.$defaultBehaviour=new H,this.tokenRe=new RegExp("^["+j.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+j.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new G(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(x,w,S,U){var G=w.doc,z=!0,H=!0,j=1/0,q=w.getTabSize(),K=!1;if(this.lineCommentStart){Array.isArray(this.lineCommentStart)?(ee=this.lineCommentStart.map(X.escapeRegExp).join("|"),J=this.lineCommentStart[0]):(ee=X.escapeRegExp(this.lineCommentStart),J=this.lineCommentStart),ee=new RegExp("^(\\s*)(?:"+ee+") ?"),K=w.getUseSoftTabs(),_=function(x,w){var S=x.match(ee);if(S){var U=S[1].length,z=S[0].length;Z(x,U,z)||" "!=S[0][z-1]||z--,G.removeInLine(w,U,z)}};var Y=J+" ",Z=(v=function(x,w){z&&!/\S/.test(x)||(Z(x,j,j)?G.insertInLine({row:w,column:j},Y):G.insertInLine({row:w,column:j},J))},E=function(x,w){return ee.test(x)},function(x,w,S){for(var U=0;w--&&" "==x.charAt(w);)U++;if(U%q!=0)return!1;for(U=0;" "==x.charAt(S++);)U++;return q>2?U%q!=q-1:U%q==0})}else{if(!this.blockComment)return!1;var J=this.blockComment.start,Q=this.blockComment.end,ee=new RegExp("^(\\s*)(?:"+X.escapeRegExp(J)+")"),te=new RegExp("(?:"+X.escapeRegExp(Q)+")\\s*$"),v=function(x,w){E(x,w)||z&&!/\S/.test(x)||(G.insertInLine({row:w,column:x.length},Q),G.insertInLine({row:w,column:j},J))},_=function(x,w){var S;(S=x.match(te))&&G.removeInLine(w,x.length-S[0].length,x.length),(S=x.match(ee))&&G.removeInLine(w,S[1].length,S[0].length)},E=function(x,S){if(ee.test(x))return!0;for(var U=w.getTokens(S),G=0;G<U.length;G++)if("comment"===U[G].type)return!0}}function C(x){for(var w=S;w<=U;w++)x(G.getLine(w),w)}var ne=1/0;C((function(x,w){var S=x.search(/\S/);-1!==S?(S<j&&(j=S),H&&!E(x,w)&&(H=!1)):ne>x.length&&(ne=x.length)})),j==1/0&&(j=ne,z=!1,H=!1),K&&j%q!=0&&(j=Math.floor(j/q)*q),C(H?_:v)},this.toggleBlockComment=function(x,w,S,U){var G=this.blockComment;if(G){!G.start&&G[0]&&(G=G[0]);var z,H,j=(ee=new q(w,U.row,U.column)).getCurrentToken(),X=(w.selection,w.selection.toOrientedRange());if(j&&/comment/.test(j.type)){for(var Y,Z;j&&/comment/.test(j.type);){if(-1!=(te=j.value.indexOf(G.start))){var J=ee.getCurrentTokenRow(),Q=ee.getCurrentTokenColumn()+te;Y=new K(J,Q,J,Q+G.start.length);break}j=ee.stepBackward()}var ee;for(j=(ee=new q(w,U.row,U.column)).getCurrentToken();j&&/comment/.test(j.type);){var te;if(-1!=(te=j.value.indexOf(G.end))){J=ee.getCurrentTokenRow(),Q=ee.getCurrentTokenColumn()+te,Z=new K(J,Q,J,Q+G.end.length);break}j=ee.stepForward()}Z&&w.remove(Z),Y&&(w.remove(Y),z=Y.start.row,H=-G.start.length)}else H=G.start.length,z=S.start.row,w.insert(S.end,G.end),w.insert(S.start,G.start);X.start.row==z&&(X.start.column+=H),X.end.row==z&&(X.end.column+=H),w.selection.fromOrientedRange(X)}},this.getNextLineIndent=function(x,w,S){return this.$getIndent(w)},this.checkOutdent=function(x,w,S){return!1},this.autoOutdent=function(x,w,S){},this.$getIndent=function(x){return x.match(/^\s*/)[0]},this.createWorker=function(x){return null},this.createModeDelegates=function(x){for(var w in this.$embeds=[],this.$modes={},x)if(x[w]){var S=x[w],G=S.prototype.$id,z=U.$modes[G];z||(U.$modes[G]=z=new S),U.$modes[w]||(U.$modes[w]=z),this.$embeds.push(w),this.$modes[w]=z}var H=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(w=0;w<H.length;w++)!function(x){var S=H[w],U=x[S];x[H[w]]=function(){return this.$delegator(S,arguments,U)}}(this)},this.$delegator=function(x,w,S){var U=w[0]||"start";if("string"!=typeof U){if(Array.isArray(U[2])){var G=U[2][U[2].length-1];if(H=this.$modes[G])return H[x].apply(H,[U[1]].concat([].slice.call(w,1)))}U=U[0]||"start"}for(var z=0;z<this.$embeds.length;z++)if(this.$modes[this.$embeds[z]]){var H,j=U.split(this.$embeds[z]);if(!j[0]&&j[1])return w[0]=j[1],(H=this.$modes[this.$embeds[z]])[x].apply(H,w)}var X=S.apply(this,w);return S?X:void 0},this.transformAction=function(x,w,S,U,G){if(this.$behaviour){var z=this.$behaviour.getBehaviours();for(var H in z)if(z[H][w]){var j=z[H][w].apply(this,arguments);if(j)return j}}},this.getKeywords=function(x){if(!this.completionKeywords){var w=this.$tokenizer.rules,S=[];for(var U in w)for(var G=w[U],z=0,H=G.length;z<H;z++)if("string"==typeof G[z].token)/keyword|support|storage/.test(G[z].token)&&S.push(G[z].regex);else if("object"==typeof G[z].token)for(var j=0,X=G[z].token.length;j<X;j++)/keyword|support|storage/.test(G[z].token[j])&&(U=G[z].regex.match(/\(.+?\)/g)[j],S.push(U.substr(1,U.length-2)));this.completionKeywords=S}return x?S.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(x,w,S,U){return(this.$keywordList||this.$createKeywordList()).map((function(x){return{name:x,value:x,score:0,meta:"keyword"}}))},this.$id="ace/mode/text"}).call(h.prototype),w.Mode=h})),ace.define("ace/apply_delta",["require","exports","module"],(function(x,w,S){"use strict";w.applyDelta=function(x,w,S){var U=w.start.row,G=w.start.column,z=x[U]||"";switch(w.action){case"insert":if(1===w.lines.length)x[U]=z.substring(0,G)+w.lines[0]+z.substring(G);else{var H=[U,1].concat(w.lines);x.splice.apply(x,H),x[U]=z.substring(0,G)+x[U],x[U+w.lines.length-1]+=z.substring(G)}break;case"remove":var j=w.end.column,X=w.end.row;U===X?x[U]=z.substring(0,G)+z.substring(j):x.splice(U,X-U+1,z.substring(0,G)+x[X].substring(j))}}})),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(x,w,S){"use strict";var U=x("./lib/oop"),G=x("./lib/event_emitter").EventEmitter,z=w.Anchor=function(x,w,S){this.$onChange=this.onChange.bind(this),this.attach(x),void 0===S?this.setPosition(w.row,w.column):this.setPosition(w,S)};(function(){function e(x,w,S){var U=S?x.column<=w.column:x.column<w.column;return x.row<w.row||x.row==w.row&&U}U.implement(this,G),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(x){if(!(x.start.row==x.end.row&&x.start.row!=this.row||x.start.row>this.row)){var w=function(x,w,S){var U="insert"==x.action,G=(U?1:-1)*(x.end.row-x.start.row),z=(U?1:-1)*(x.end.column-x.start.column),H=x.start,j=U?H:x.end;return e(w,H,S)?{row:w.row,column:w.column}:e(j,w,!S)?{row:w.row+G,column:w.column+(w.row==j.row?z:0)}:{row:H.row,column:H.column}}(x,{row:this.row,column:this.column},this.$insertRight);this.setPosition(w.row,w.column,!0)}},this.setPosition=function(x,w,S){var U;if(U=S?{row:x,column:w}:this.$clipPositionToDocument(x,w),this.row!=U.row||this.column!=U.column){var G={row:this.row,column:this.column};this.row=U.row,this.column=U.column,this._signal("change",{old:G,value:U})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(x){this.document=x||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(x,w){var S={};return x>=this.document.getLength()?(S.row=Math.max(0,this.document.getLength()-1),S.column=this.document.getLine(S.row).length):x<0?(S.row=0,S.column=0):(S.row=x,S.column=Math.min(this.document.getLine(S.row).length,Math.max(0,w))),w<0&&(S.column=0),S}}).call(z.prototype)})),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],(function(x,w,S){"use strict";var G=x("./lib/oop"),z=x("./apply_delta").applyDelta,H=x("./lib/event_emitter").EventEmitter,j=x("./range").Range,X=x("./anchor").Anchor,c=function(x){this.$lines=[""],0===x.length?this.$lines=[""]:Array.isArray(x)?this.insertMergedLines({row:0,column:0},x):this.insert({row:0,column:0},x)};(function(){G.implement(this,H),this.setValue=function(x){var w=this.getLength()-1;this.remove(new j(0,0,w,this.getLine(w).length)),this.insert({row:0,column:0},x)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(x,w){return new X(this,x,w)},0==="aaa".split(/a/).length?this.$split=function(x){return x.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(x){return x.split(/\r\n|\r|\n/)},this.$detectNewLine=function(x){var w=x.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=w?w[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(x){this.$newLineMode!==x&&(this.$newLineMode=x,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(x){return"\r\n"==x||"\r"==x||"\n"==x},this.getLine=function(x){return this.$lines[x]||""},this.getLines=function(x,w){return this.$lines.slice(x,w+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(x){return this.getLinesForRange(x).join(this.getNewLineCharacter())},this.getLinesForRange=function(x){var w;if(x.start.row===x.end.row)w=[this.getLine(x.start.row).substring(x.start.column,x.end.column)];else{(w=this.getLines(x.start.row,x.end.row))[0]=(w[0]||"").substring(x.start.column);var S=w.length-1;x.end.row-x.start.row==S&&(w[S]=w[S].substring(0,x.end.column))}return w},this.insertLines=function(x,w){return U.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(x,w)},this.removeLines=function(x,w){return U.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(x,w)},this.insertNewLine=function(x){return U.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(x,["",""])},this.insert=function(x,w){return this.getLength()<=1&&this.$detectNewLine(w),this.insertMergedLines(x,this.$split(w))},this.insertInLine=function(x,w){var S=this.clippedPos(x.row,x.column),U=this.pos(x.row,x.column+w.length);return this.applyDelta({start:S,end:U,action:"insert",lines:[w]},!0),this.clonePos(U)},this.clippedPos=function(x,w){var S=this.getLength();void 0===x?x=S:x<0?x=0:x>=S&&(x=S-1,w=void 0);var U=this.getLine(x);return null==w&&(w=U.length),{row:x,column:w=Math.min(Math.max(w,0),U.length)}},this.clonePos=function(x){return{row:x.row,column:x.column}},this.pos=function(x,w){return{row:x,column:w}},this.$clipPosition=function(x){var w=this.getLength();return x.row>=w?(x.row=Math.max(0,w-1),x.column=this.getLine(w-1).length):(x.row=Math.max(0,x.row),x.column=Math.min(Math.max(x.column,0),this.getLine(x.row).length)),x},this.insertFullLines=function(x,w){var S=0;(x=Math.min(Math.max(x,0),this.getLength()))<this.getLength()?(w=w.concat([""]),S=0):(w=[""].concat(w),x--,S=this.$lines[x].length),this.insertMergedLines({row:x,column:S},w)},this.insertMergedLines=function(x,w){var S=this.clippedPos(x.row,x.column),U={row:S.row+w.length-1,column:(1==w.length?S.column:0)+w[w.length-1].length};return this.applyDelta({start:S,end:U,action:"insert",lines:w}),this.clonePos(U)},this.remove=function(x){var w=this.clippedPos(x.start.row,x.start.column),S=this.clippedPos(x.end.row,x.end.column);return this.applyDelta({start:w,end:S,action:"remove",lines:this.getLinesForRange({start:w,end:S})}),this.clonePos(w)},this.removeInLine=function(x,w,S){var U=this.clippedPos(x,w),G=this.clippedPos(x,S);return this.applyDelta({start:U,end:G,action:"remove",lines:this.getLinesForRange({start:U,end:G})},!0),this.clonePos(U)},this.removeFullLines=function(x,w){x=Math.min(Math.max(0,x),this.getLength()-1);var S=(w=Math.min(Math.max(0,w),this.getLength()-1))==this.getLength()-1&&x>0,U=w<this.getLength()-1,G=S?x-1:x,z=S?this.getLine(G).length:0,H=U?w+1:w,X=U?0:this.getLine(H).length,q=new j(G,z,H,X),K=this.$lines.slice(x,w+1);return this.applyDelta({start:q.start,end:q.end,action:"remove",lines:this.getLinesForRange(q)}),K},this.removeNewLine=function(x){x<this.getLength()-1&&x>=0&&this.applyDelta({start:this.pos(x,this.getLine(x).length),end:this.pos(x+1,0),action:"remove",lines:["",""]})},this.replace=function(x,w){return x instanceof j||(x=j.fromPoints(x.start,x.end)),0===w.length&&x.isEmpty()?x.start:w==this.getTextRange(x)?x.end:(this.remove(x),w?this.insert(x.start,w):x.start)},this.applyDeltas=function(x){for(var w=0;w<x.length;w++)this.applyDelta(x[w])},this.revertDeltas=function(x){for(var w=x.length-1;w>=0;w--)this.revertDelta(x[w])},this.applyDelta=function(x,w){var S="insert"==x.action;(S?x.lines.length<=1&&!x.lines[0]:!j.comparePoints(x.start,x.end))||(S&&x.lines.length>2e4?this.$splitAndapplyLargeDelta(x,2e4):(z(this.$lines,x,w),this._signal("change",x)))},this.$splitAndapplyLargeDelta=function(x,w){for(var S=x.lines,U=S.length-w+1,G=x.start.row,z=x.start.column,H=0,j=0;H<U;H=j){j+=w-1;var X=S.slice(H,j);X.push(""),this.applyDelta({start:this.pos(G+H,z),end:this.pos(G+j,z=0),action:x.action,lines:X},!0)}x.lines=S.slice(H),x.start.row=G+H,x.start.column=z,this.applyDelta(x,!0)},this.revertDelta=function(x){this.applyDelta({start:this.clonePos(x.start),end:this.clonePos(x.end),action:"insert"==x.action?"remove":"insert",lines:x.lines.slice()})},this.indexToPosition=function(x,w){for(var S=this.$lines||this.getAllLines(),U=this.getNewLineCharacter().length,G=w||0,z=S.length;G<z;G++)if((x-=S[G].length+U)<0)return{row:G,column:x+S[G].length+U};return{row:z-1,column:x+S[z-1].length+U}},this.positionToIndex=function(x,w){for(var S=this.$lines||this.getAllLines(),U=this.getNewLineCharacter().length,G=0,z=Math.min(x.row,S.length),H=w||0;H<z;++H)G+=S[H].length+U;return G+x.column}}).call(c.prototype),w.Document=c})),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(x,w,S){"use strict";var U=x("./lib/oop"),G=x("./lib/event_emitter").EventEmitter,o=function(x,w){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=x;var S=this;this.$worker=function(){if(S.running){for(var x=new Date,w=S.currentLine,U=-1,G=S.doc,z=w;S.lines[w];)w++;var H=G.getLength(),j=0;for(S.running=!1;w<H;){S.$tokenizeRow(w),U=w;do{w++}while(S.lines[w]);if(++j%5==0&&new Date-x>20){S.running=setTimeout(S.$worker,20);break}}S.currentLine=w,-1==U&&(U=w),z<=U&&S.fireUpdateEvent(z,U)}}};(function(){U.implement(this,G),this.setTokenizer=function(x){this.tokenizer=x,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(x){this.doc=x,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(x,w){var S={first:x,last:w};this._signal("update",{data:S})},this.start=function(x){this.currentLine=Math.min(x||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(x){var w=x.start.row,S=x.end.row-w;if(0===S)this.lines[w]=null;else if("remove"==x.action)this.lines.splice(w,S+1,null),this.states.splice(w,S+1,null);else{var U=Array(S+1);U.unshift(w,1),this.lines.splice.apply(this.lines,U),this.states.splice.apply(this.states,U)}this.currentLine=Math.min(w,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(x){return this.lines[x]||this.$tokenizeRow(x)},this.getState=function(x){return this.currentLine==x&&this.$tokenizeRow(x),this.states[x]||"start"},this.$tokenizeRow=function(x){var w=this.doc.getLine(x),S=this.states[x-1],U=this.tokenizer.getLineTokens(w,S,x);return this.states[x]+""!=U.state+""?(this.states[x]=U.state,this.lines[x+1]=null,this.currentLine>x+1&&(this.currentLine=x+1)):this.currentLine==x&&(this.currentLine=x+1),this.lines[x]=U.tokens}}).call(o.prototype),w.BackgroundTokenizer=o})),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(x,w,S){"use strict";var U=x("./lib/lang"),G=(x("./lib/oop"),x("./range").Range),o=function(x,w,S){this.setRegexp(x),this.clazz=w,this.type=S||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(x){this.regExp+""!=x+""&&(this.regExp=x,this.cache=[])},this.update=function(x,w,S,z){if(this.regExp)for(var H=z.firstRow,j=z.lastRow,X=H;X<=j;X++){var q=this.cache[X];null==q&&((q=U.getMatchOffsets(S.getLine(X),this.regExp)).length>this.MAX_RANGES&&(q=q.slice(0,this.MAX_RANGES)),q=q.map((function(x){return new G(X,x.offset,X,x.offset+x.length)})),this.cache[X]=q.length?q:"");for(var K=q.length;K--;)w.drawSingleLineMarker(x,q[K].toScreenRange(S),this.clazz,z)}}}).call(o.prototype),w.SearchHighlight=o})),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],(function(x,w,S){"use strict";var U=x("../range").Range;function r(x,w){this.foldData=x,Array.isArray(w)?this.folds=w:w=this.folds=[w];var S=w[w.length-1];this.range=new U(w[0].start.row,w[0].start.column,S.end.row,S.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach((function(x){x.setFoldLine(this)}),this)}(function(){this.shiftRow=function(x){this.start.row+=x,this.end.row+=x,this.folds.forEach((function(w){w.start.row+=x,w.end.row+=x}))},this.addFold=function(x){if(x.sameRow){if(x.start.row<this.startRow||x.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(x),this.folds.sort((function(x,w){return-x.range.compareEnd(w.start.row,w.start.column)})),this.range.compareEnd(x.start.row,x.start.column)>0?(this.end.row=x.end.row,this.end.column=x.end.column):this.range.compareStart(x.end.row,x.end.column)<0&&(this.start.row=x.start.row,this.start.column=x.start.column)}else if(x.start.row==this.end.row)this.folds.push(x),this.end.row=x.end.row,this.end.column=x.end.column;else{if(x.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(x),this.start.row=x.start.row,this.start.column=x.start.column}x.foldLine=this},this.containsRow=function(x){return x>=this.start.row&&x<=this.end.row},this.walk=function(x,w,S){var U,G,z=0,H=this.folds,j=!0;null==w&&(w=this.end.row,S=this.end.column);for(var X=0;X<H.length;X++){if(-1==(G=(U=H[X]).range.compareStart(w,S)))return void x(null,w,S,z,j);if(!x(null,U.start.row,U.start.column,z,j)&&x(U.placeholder,U.start.row,U.start.column,z)||0===G)return;j=!U.sameRow,z=U.end.column}x(null,w,S,z,j)},this.getNextFoldTo=function(x,w){for(var S,U,G=0;G<this.folds.length;G++){if(-1==(U=(S=this.folds[G]).range.compareEnd(x,w)))return{fold:S,kind:"after"};if(0===U)return{fold:S,kind:"inside"}}return null},this.addRemoveChars=function(x,w,S){var U,G,z=this.getNextFoldTo(x,w);if(z)if(U=z.fold,"inside"==z.kind&&U.start.column!=w&&U.start.row!=x)window.console&&window.console.log(x,w,U);else if(U.start.row==x){var H=(G=this.folds).indexOf(U);for(0===H&&(this.start.column+=S);H<G.length;H++){if((U=G[H]).start.column+=S,!U.sameRow)return;U.end.column+=S}this.end.column+=S}},this.split=function(x,w){var S=this.getNextFoldTo(x,w);if(!S||"inside"==S.kind)return null;var U=S.fold,G=this.folds,z=this.foldData,H=G.indexOf(U),j=G[H-1];this.end.row=j.end.row,this.end.column=j.end.column;var X=new r(z,G=G.splice(H,G.length-H));return z.splice(z.indexOf(this)+1,0,X),X},this.merge=function(x){for(var w=x.folds,S=0;S<w.length;S++)this.addFold(w[S]);var U=this.foldData;U.splice(U.indexOf(x),1)},this.toString=function(){var x=[this.range.toString()+": ["];return this.folds.forEach((function(w){x.push("  "+w.toString())})),x.push("]"),x.join("\n")},this.idxToPosition=function(x){for(var w=0,S=0;S<this.folds.length;S++){var U=this.folds[S];if((x-=U.start.column-w)<0)return{row:U.start.row,column:U.start.column+x};if((x-=U.placeholder.length)<0)return U.start;w=U.end.column}return{row:this.end.row,column:this.end.column+x}}}).call(r.prototype),w.FoldLine=r})),ace.define("ace/range_list",["require","exports","module","ace/range"],(function(x,w,S){"use strict";var U=x("./range").Range.comparePoints,r=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=U,this.pointIndex=function(x,w,S){for(var G=this.ranges,z=S||0;z<G.length;z++){var H=G[z],j=U(x,H.end);if(!(j>0)){var X=U(x,H.start);return 0===j?w&&0!==X?-z-2:z:X>0||0===X&&!w?z:-z-1}}return-z-1},this.add=function(x){var w=!x.isEmpty(),S=this.pointIndex(x.start,w);S<0&&(S=-S-1);var U=this.pointIndex(x.end,w,S);return U<0?U=-U-1:U++,this.ranges.splice(S,U-S,x)},this.addList=function(x){for(var w=[],S=x.length;S--;)w.push.apply(w,this.add(x[S]));return w},this.substractPoint=function(x){var w=this.pointIndex(x);if(w>=0)return this.ranges.splice(w,1)},this.merge=function(){for(var x,w=[],S=this.ranges,G=(S=S.sort((function(x,w){return U(x.start,w.start)})))[0],z=1;z<S.length;z++){x=G,G=S[z];var H=U(x.end,G.start);H<0||(0!=H||x.isEmpty()||G.isEmpty())&&(U(x.end,G.end)<0&&(x.end.row=G.end.row,x.end.column=G.end.column),S.splice(z,1),w.push(G),G=x,z--)}return this.ranges=S,w},this.contains=function(x,w){return this.pointIndex({row:x,column:w})>=0},this.containsPoint=function(x){return this.pointIndex(x)>=0},this.rangeAtPoint=function(x){var w=this.pointIndex(x);if(w>=0)return this.ranges[w]},this.clipRows=function(x,w){var S=this.ranges;if(S[0].start.row>w||S[S.length-1].start.row<x)return[];var U=this.pointIndex({row:x,column:0});U<0&&(U=-U-1);var G=this.pointIndex({row:w,column:0},U);G<0&&(G=-G-1);for(var z=[],H=U;H<G;H++)z.push(S[H]);return z},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(x){this.session&&this.detach(),this.session=x,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(x){for(var w=x.start,S=x.end,U=w.row,G=S.row,z=this.ranges,H=0,j=z.length;H<j&&!((K=z[H]).end.row>=U);H++);if("insert"==x.action){for(var X=G-U,q=-w.column+S.column;H<j&&!((K=z[H]).start.row>U);H++)if(K.start.row==U&&K.start.column>=w.column&&(K.start.column==w.column&&this.$bias<=0||(K.start.column+=q,K.start.row+=X)),K.end.row==U&&K.end.column>=w.column){if(K.end.column==w.column&&this.$bias<0)continue;K.end.column==w.column&&q>0&&H<j-1&&K.end.column>K.start.column&&K.end.column==z[H+1].start.column&&(K.end.column-=q),K.end.column+=q,K.end.row+=X}}else for(X=U-G,q=w.column-S.column;H<j&&!((K=z[H]).start.row>G);H++)K.end.row<G&&(U<K.end.row||U==K.end.row&&w.column<K.end.column)?(K.end.row=U,K.end.column=w.column):K.end.row==G?K.end.column<=S.column?(X||K.end.column>w.column)&&(K.end.column=w.column,K.end.row=w.row):(K.end.column+=q,K.end.row+=X):K.end.row>G&&(K.end.row+=X),K.start.row<G&&(U<K.start.row||U==K.start.row&&w.column<K.start.column)?(K.start.row=U,K.start.column=w.column):K.start.row==G?K.start.column<=S.column?(X||K.start.column>w.column)&&(K.start.column=w.column,K.start.row=w.row):(K.start.column+=q,K.start.row+=X):K.start.row>G&&(K.start.row+=X);if(0!=X&&H<j)for(;H<j;H++){var K;(K=z[H]).start.row+=X,K.end.row+=X}}}).call(r.prototype),w.RangeList=r})),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],(function(x,w,S){"use strict";var U=x("../range_list").RangeList,G=x("../lib/oop"),z=w.Fold=function(x,w){this.foldLine=null,this.placeholder=w,this.range=x,this.start=x.start,this.end=x.end,this.sameRow=x.start.row==x.end.row,this.subFolds=this.ranges=[]};function s(x,w){x.row-=w.row,0==x.row&&(x.column-=w.column)}function a(x,w){0==x.row&&(x.column+=w.column),x.row+=w.row}G.inherits(z,U),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(x){this.foldLine=x,this.subFolds.forEach((function(w){w.setFoldLine(x)}))},this.clone=function(){var x=this.range.clone(),w=new z(x,this.placeholder);return this.subFolds.forEach((function(x){w.subFolds.push(x.clone())})),w.collapseChildren=this.collapseChildren,w},this.addSubFold=function(x){if(!this.range.isEqual(x)){var w,S;w=x,S=this.start,s(w.start,S),s(w.end,S);for(var U=x.start.row,G=x.start.column,z=0,H=-1;z<this.subFolds.length&&1==(H=this.subFolds[z].range.compare(U,G));z++);var j=this.subFolds[z],X=0;if(0==H){if(j.range.containsRange(x))return j.addSubFold(x);X=1}U=x.range.end.row,G=x.range.end.column;var q=z;for(H=-1;q<this.subFolds.length&&1==(H=this.subFolds[q].range.compare(U,G));q++);0==H&&q++;for(var K=this.subFolds.splice(z,q-z,x),Y=0==H?K.length-1:K.length,Z=X;Z<Y;Z++)x.addSubFold(K[Z]);return x.setFoldLine(this.foldLine),x}},this.restoreRange=function(x){return function(x,w){a(x.start,w),a(x.end,w)}(x,this.start)}}.call(z.prototype)})),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],(function(x,w,S){"use strict";var U=x("../range").Range,G=x("./fold_line").FoldLine,z=x("./fold").Fold,H=x("../token_iterator").TokenIterator;w.Folding=function(){this.getFoldAt=function(x,w,S){var U=this.getFoldLine(x);if(!U)return null;for(var G=U.folds,z=0;z<G.length;z++){var H=G[z].range;if(H.contains(x,w)){if(1==S&&H.isEnd(x,w)&&!H.isEmpty())continue;if(-1==S&&H.isStart(x,w)&&!H.isEmpty())continue;return G[z]}}},this.getFoldsInRange=function(x){var w=x.start,S=x.end,U=this.$foldData,G=[];w.column+=1,S.column-=1;for(var z=0;z<U.length;z++){var H=U[z].range.compareRange(x);if(2!=H){if(-2==H)break;for(var j=U[z].folds,X=0;X<j.length;X++){var q=j[X];if(-2==(H=q.range.compareRange(x)))break;if(2!=H){if(42==H)break;G.push(q)}}}}return w.column-=1,S.column+=1,G},this.getFoldsInRangeList=function(x){if(Array.isArray(x)){var w=[];x.forEach((function(x){w=w.concat(this.getFoldsInRange(x))}),this)}else w=this.getFoldsInRange(x);return w},this.getAllFolds=function(){for(var x=[],w=this.$foldData,S=0;S<w.length;S++)for(var U=0;U<w[S].folds.length;U++)x.push(w[S].folds[U]);return x},this.getFoldStringAt=function(x,w,S,U){if(!(U=U||this.getFoldLine(x)))return null;for(var G,z,H={end:{column:0}},j=0;j<U.folds.length;j++){var X=(z=U.folds[j]).range.compareEnd(x,w);if(-1==X){G=this.getLine(z.start.row).substring(H.end.column,z.start.column);break}if(0===X)return null;H=z}return G||(G=this.getLine(z.start.row).substring(H.end.column)),-1==S?G.substring(0,w-H.end.column):1==S?G.substring(w-H.end.column):G},this.getFoldLine=function(x,w){var S=this.$foldData,U=0;for(w&&(U=S.indexOf(w)),-1==U&&(U=0);U<S.length;U++){var G=S[U];if(G.start.row<=x&&G.end.row>=x)return G;if(G.end.row>x)return null}return null},this.getNextFoldLine=function(x,w){var S=this.$foldData,U=0;for(w&&(U=S.indexOf(w)),-1==U&&(U=0);U<S.length;U++){var G=S[U];if(G.end.row>=x)return G}return null},this.getFoldedRowCount=function(x,w){for(var S=this.$foldData,U=w-x+1,G=0;G<S.length;G++){var z=S[G],H=z.end.row,j=z.start.row;if(H>=w){j<w&&(j>=x?U-=w-j:U=0);break}H>=x&&(U-=j>=x?H-j:H-x+1)}return U},this.$addFoldLine=function(x){return this.$foldData.push(x),this.$foldData.sort((function(x,w){return x.start.row-w.start.row})),x},this.addFold=function(x,w){var S,U=this.$foldData,H=!1;x instanceof z?S=x:(S=new z(w,x)).collapseChildren=w.collapseChildren,this.$clipRangeToDocument(S.range);var j=S.start.row,X=S.start.column,q=S.end.row,K=S.end.column,Y=this.getFoldAt(j,X,1),Z=this.getFoldAt(q,K,-1);if(Y&&Z==Y)return Y.addSubFold(S);Y&&!Y.range.isStart(j,X)&&this.removeFold(Y),Z&&!Z.range.isEnd(q,K)&&this.removeFold(Z);var J=this.getFoldsInRange(S.range);J.length>0&&(this.removeFolds(J),J.forEach((function(x){S.addSubFold(x)})));for(var Q=0;Q<U.length;Q++){var ee=U[Q];if(q==ee.start.row){ee.addFold(S),H=!0;break}if(j==ee.end.row){if(ee.addFold(S),H=!0,!S.sameRow){var te=U[Q+1];if(te&&te.start.row==q){ee.merge(te);break}}break}if(q<=ee.start.row)break}return H||(ee=this.$addFoldLine(new G(this.$foldData,S))),this.$useWrapMode?this.$updateWrapData(ee.start.row,ee.start.row):this.$updateRowLengthCache(ee.start.row,ee.start.row),this.$modified=!0,this._signal("changeFold",{data:S,action:"add"}),S},this.addFolds=function(x){x.forEach((function(x){this.addFold(x)}),this)},this.removeFold=function(x){var w=x.foldLine,S=w.start.row,U=w.end.row,G=this.$foldData,z=w.folds;if(1==z.length)G.splice(G.indexOf(w),1);else if(w.range.isEnd(x.end.row,x.end.column))z.pop(),w.end.row=z[z.length-1].end.row,w.end.column=z[z.length-1].end.column;else if(w.range.isStart(x.start.row,x.start.column))z.shift(),w.start.row=z[0].start.row,w.start.column=z[0].start.column;else if(x.sameRow)z.splice(z.indexOf(x),1);else{var H=w.split(x.start.row,x.start.column);(z=H.folds).shift(),H.start.row=z[0].start.row,H.start.column=z[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(S,U):this.$updateRowLengthCache(S,U)),this.$modified=!0,this._signal("changeFold",{data:x,action:"remove"})},this.removeFolds=function(x){for(var w=[],S=0;S<x.length;S++)w.push(x[S]);w.forEach((function(x){this.removeFold(x)}),this),this.$modified=!0},this.expandFold=function(x){this.removeFold(x),x.subFolds.forEach((function(w){x.restoreRange(w),this.addFold(w)}),this),x.collapseChildren>0&&this.foldAll(x.start.row+1,x.end.row,x.collapseChildren-1),x.subFolds=[]},this.expandFolds=function(x){x.forEach((function(x){this.expandFold(x)}),this)},this.unfold=function(x,w){var S,G;if(null==x?(S=new U(0,0,this.getLength(),0),w=!0):S="number"==typeof x?new U(x,0,x,this.getLine(x).length):"row"in x?U.fromPoints(x,x):x,G=this.getFoldsInRangeList(S),w)this.removeFolds(G);else for(var z=G;z.length;)this.expandFolds(z),z=this.getFoldsInRangeList(S);if(G.length)return G},this.isRowFolded=function(x,w){return!!this.getFoldLine(x,w)},this.getRowFoldEnd=function(x,w){var S=this.getFoldLine(x,w);return S?S.end.row:x},this.getRowFoldStart=function(x,w){var S=this.getFoldLine(x,w);return S?S.start.row:x},this.getFoldDisplayLine=function(x,w,S,U,G){null==U&&(U=x.start.row),null==G&&(G=0),null==w&&(w=x.end.row),null==S&&(S=this.getLine(w).length);var z=this.doc,H="";return x.walk((function(x,w,S,j){if(!(w<U)){if(w==U){if(S<G)return;j=Math.max(G,j)}H+=null!=x?x:z.getLine(w).substring(j,S)}}),w,S),H},this.getDisplayLine=function(x,w,S,U){var G,z=this.getFoldLine(x);return z?this.getFoldDisplayLine(z,x,w,S,U):(G=this.doc.getLine(x)).substring(U||0,w||G.length)},this.$cloneFoldData=function(){var x=[];return x=this.$foldData.map((function(w){var S=w.folds.map((function(x){return x.clone()}));return new G(x,S)}))},this.toggleFold=function(x){var w,S,U=this.selection.getRange();if(U.isEmpty()){var G=U.start;if(w=this.getFoldAt(G.row,G.column))return void this.expandFold(w);(S=this.findMatchingBracket(G))?1==U.comparePoint(S)?U.end=S:(U.start=S,U.start.column++,U.end.column--):(S=this.findMatchingBracket({row:G.row,column:G.column+1}))?(1==U.comparePoint(S)?U.end=S:U.start=S,U.start.column++):U=this.getCommentFoldRange(G.row,G.column)||U}else{var z=this.getFoldsInRange(U);if(x&&z.length)return void this.expandFolds(z);1==z.length&&(w=z[0])}if(w||(w=this.getFoldAt(U.start.row,U.start.column)),w&&w.range.toString()==U.toString())this.expandFold(w);else{var H="...";if(!U.isMultiLine()){if((H=this.getTextRange(U)).length<4)return;H=H.trim().substring(0,2)+".."}this.addFold(H,U)}},this.getCommentFoldRange=function(x,w,S){var G=new H(this,x,w),z=G.getCurrentToken(),j=z.type;if(z&&/^comment|string/.test(j)){"comment"==(j=j.match(/comment|string/)[0])&&(j+="|doc-start");var X=new RegExp(j),q=new U;if(1!=S){do{z=G.stepBackward()}while(z&&X.test(z.type));G.stepForward()}if(q.start.row=G.getCurrentTokenRow(),q.start.column=G.getCurrentTokenColumn()+2,G=new H(this,x,w),-1!=S){var K=-1;do{if(z=G.stepForward(),-1==K){var Y=this.getState(G.$row);X.test(Y)||(K=G.$row)}else if(G.$row>K)break}while(z&&X.test(z.type));z=G.stepBackward()}else z=G.getCurrentToken();return q.end.row=G.getCurrentTokenRow(),q.end.column=G.getCurrentTokenColumn()+z.value.length-2,q}},this.foldAll=function(x,w,S){null==S&&(S=1e5);var U=this.foldWidgets;if(U){w=w||this.getLength();for(var G=x=x||0;G<w;G++)if(null==U[G]&&(U[G]=this.getFoldWidget(G)),"start"==U[G]){var z=this.getFoldWidgetRange(G);if(z&&z.isMultiLine()&&z.end.row<=w&&z.start.row>=x){G=z.end.row;try{var H=this.addFold("...",z);H&&(H.collapseChildren=S)}catch(x){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(x){if(!this.$foldStyles[x])throw new Error("invalid fold style: "+x+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=x){this.$foldStyle=x,"manual"==x&&this.unfold();var w=this.$foldMode;this.$setFolding(null),this.$setFolding(w)}},this.$setFolding=function(x){this.$foldMode!=x&&(this.$foldMode=x,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),x&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=x.getFoldWidget.bind(x,this,this.$foldStyle),this.getFoldWidgetRange=x.getFoldWidgetRange.bind(x,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(x,w){var S=this.foldWidgets;if(!S||w&&S[x])return{};for(var U,G=x-1;G>=0;){var z=S[G];if(null==z&&(z=S[G]=this.getFoldWidget(G)),"start"==z){var H=this.getFoldWidgetRange(G);if(U||(U=H),H&&H.end.row>=x)break}G--}return{range:-1!==G&&H,firstRange:U}},this.onFoldWidgetClick=function(x,w){var S={children:(w=w.domEvent).shiftKey,all:w.ctrlKey||w.metaKey,siblings:w.altKey};if(!this.$toggleFoldWidget(x,S)){var U=w.target||w.srcElement;U&&/ace_fold-widget/.test(U.className)&&(U.className+=" ace_invalid")}},this.$toggleFoldWidget=function(x,w){if(this.getFoldWidget){var S=this.getFoldWidget(x),U=this.getLine(x),G="end"===S?-1:1,z=this.getFoldAt(x,-1===G?0:U.length,G);if(z)return w.children||w.all?this.removeFold(z):this.expandFold(z),z;var H=this.getFoldWidgetRange(x,!0);if(H&&!H.isMultiLine()&&(z=this.getFoldAt(H.start.row,H.start.column,1))&&H.isEqual(z.range))return this.removeFold(z),z;if(w.siblings){var j=this.getParentFoldRangeData(x);if(j.range)var X=j.range.start.row+1,q=j.range.end.row;this.foldAll(X,q,w.all?1e4:0)}else w.children?(q=H?H.end.row:this.getLength(),this.foldAll(x+1,q,w.all?1e4:0)):H&&(w.all&&(H.collapseChildren=1e4),this.addFold("...",H));return H}},this.toggleFoldWidget=function(x){var w=this.selection.getCursor().row;w=this.getRowFoldStart(w);var S=this.$toggleFoldWidget(w,{});if(!S){var U=this.getParentFoldRangeData(w,!0);if(S=U.range||U.firstRange){w=S.start.row;var G=this.getFoldAt(w,this.getLine(w).length,1);G?this.removeFold(G):this.addFold("...",S)}}},this.updateFoldWidgets=function(x){var w=x.start.row,S=x.end.row-w;if(0===S)this.foldWidgets[w]=null;else if("remove"==x.action)this.foldWidgets.splice(w,S+1,null);else{var U=Array(S+1);U.unshift(w,1),this.foldWidgets.splice.apply(this.foldWidgets,U)}},this.tokenizerUpdateFoldWidgets=function(x){var w=x.data;w.first!=w.last&&this.foldWidgets.length>w.first&&this.foldWidgets.splice(w.first,this.foldWidgets.length)}}})),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],(function(x,w,S){"use strict";var U=x("../token_iterator").TokenIterator,G=x("../range").Range;w.BracketMatch=function(){this.findMatchingBracket=function(x,w){if(0==x.column)return null;var S=w||this.getLine(x.row).charAt(x.column-1);if(""==S)return null;var U=S.match(/([\(\[\{])|([\)\]\}])/);return U?U[1]?this.$findClosingBracket(U[1],x):this.$findOpeningBracket(U[2],x):null},this.getBracketRange=function(x){var w,S=this.getLine(x.row),U=!0,z=S.charAt(x.column-1),H=z&&z.match(/([\(\[\{])|([\)\]\}])/);if(H||(z=S.charAt(x.column),x={row:x.row,column:x.column+1},H=z&&z.match(/([\(\[\{])|([\)\]\}])/),U=!1),!H)return null;if(H[1]){if(!(j=this.$findClosingBracket(H[1],x)))return null;w=G.fromPoints(x,j),U||(w.end.column++,w.start.column--),w.cursor=w.end}else{var j;if(!(j=this.$findOpeningBracket(H[2],x)))return null;w=G.fromPoints(j,x),U||(w.start.column++,w.end.column--),w.cursor=w.start}return w},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(x,w,S){var G=this.$brackets[x],z=1,H=new U(this,w.row,w.column),j=H.getCurrentToken();if(j||(j=H.stepForward()),j){S||(S=new RegExp("(\\.?"+j.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var X=w.column-H.getCurrentTokenColumn()-2,q=j.value;;){for(;X>=0;){var K=q.charAt(X);if(K==G){if(0==(z-=1))return{row:H.getCurrentTokenRow(),column:X+H.getCurrentTokenColumn()}}else K==x&&(z+=1);X-=1}do{j=H.stepBackward()}while(j&&!S.test(j.type));if(null==j)break;X=(q=j.value).length-1}return null}},this.$findClosingBracket=function(x,w,S){var G=this.$brackets[x],z=1,H=new U(this,w.row,w.column),j=H.getCurrentToken();if(j||(j=H.stepForward()),j){S||(S=new RegExp("(\\.?"+j.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var X=w.column-H.getCurrentTokenColumn();;){for(var q=j.value,K=q.length;X<K;){var Y=q.charAt(X);if(Y==G){if(0==(z-=1))return{row:H.getCurrentTokenRow(),column:X+H.getCurrentTokenColumn()}}else Y==x&&(z+=1);X+=1}do{j=H.stepForward()}while(j&&!S.test(j.type));if(null==j)break;X=0}return null}}}})),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],(function(x,w,S){"use strict";var G=x("./lib/oop"),z=x("./lib/lang"),H=x("./bidihandler").BidiHandler,j=x("./config"),X=x("./lib/event_emitter").EventEmitter,q=x("./selection").Selection,K=x("./mode/text").Mode,Y=x("./range").Range,Z=x("./document").Document,J=x("./background_tokenizer").BackgroundTokenizer,Q=x("./search_highlight").SearchHighlight,m=function(x,w){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++m.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof x&&x.getLine||(x=new Z(x)),this.setDocument(x),this.selection=new q(this),this.$bidiHandler=new H(this),j.resetOptions(this),this.setMode(w),j._signal("session",this)};m.$uid=0,function(){G.implement(this,X),this.setDocument=function(x){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=x,x.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(x){if(!x)return this.$docRowCache=[],void(this.$screenRowCache=[]);var w=this.$docRowCache.length,S=this.$getRowCacheIndex(this.$docRowCache,x)+1;w>S&&(this.$docRowCache.splice(S,w),this.$screenRowCache.splice(S,w))},this.$getRowCacheIndex=function(x,w){for(var S=0,U=x.length-1;S<=U;){var G=S+U>>1,z=x[G];if(w>z)S=G+1;else{if(!(w<z))return G;U=G-1}}return S-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(x){var w=x.data;this.$resetRowCache(w.start.row)},this.onChange=function(x){this.$modified=!0,this.$bidiHandler.onChange(x),this.$resetRowCache(x.start.row);var w=this.$updateInternalDataOnChange(x);!this.$fromUndo&&this.$undoManager&&(w&&w.length&&(this.$undoManager.add({action:"removeFolds",folds:w},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(x,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(x),this._signal("change",x)},this.setValue=function(x){this.doc.setValue(x),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(x){return this.bgTokenizer.getState(x)},this.getTokens=function(x){return this.bgTokenizer.getTokens(x)},this.getTokenAt=function(x,w){var S,U=this.bgTokenizer.getTokens(x),G=0;if(null==w){var z=U.length-1;G=this.getLine(x).length}else for(z=0;z<U.length&&!((G+=U[z].value.length)>=w);z++);return(S=U[z])?(S.index=z,S.start=G-S.value.length,S):null},this.setUndoManager=function(x){if(this.$undoManager=x,this.$informUndoManager&&this.$informUndoManager.cancel(),x){var w=this;x.addSession(this),this.$syncInformUndoManager=function(){w.$informUndoManager.cancel(),w.mergeUndoDeltas=!1},this.$informUndoManager=z.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?z.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(x){this.setOption("useSoftTabs",x)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(x){this.setOption("tabSize",x)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(x){return this.$useSoftTabs&&x.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(x){this.setOption("navigateWithinSoftTabs",x)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(x){this.setOption("overwrite",x)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(x,w){this.$decorations[x]||(this.$decorations[x]=""),this.$decorations[x]+=" "+w,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(x,w){this.$decorations[x]=(this.$decorations[x]||"").replace(" "+w,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(x){this.$breakpoints=[];for(var w=0;w<x.length;w++)this.$breakpoints[x[w]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(x,w){void 0===w&&(w="ace_breakpoint"),w?this.$breakpoints[x]=w:delete this.$breakpoints[x],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(x){delete this.$breakpoints[x],this._signal("changeBreakpoint",{})},this.addMarker=function(x,w,S,U){var G=this.$markerId++,z={range:x,type:S||"line",renderer:"function"==typeof S?S:null,clazz:w,inFront:!!U,id:G};return U?(this.$frontMarkers[G]=z,this._signal("changeFrontMarker")):(this.$backMarkers[G]=z,this._signal("changeBackMarker")),G},this.addDynamicMarker=function(x,w){if(x.update){var S=this.$markerId++;return x.id=S,x.inFront=!!w,w?(this.$frontMarkers[S]=x,this._signal("changeFrontMarker")):(this.$backMarkers[S]=x,this._signal("changeBackMarker")),x}},this.removeMarker=function(x){var w=this.$frontMarkers[x]||this.$backMarkers[x];w&&(delete(w.inFront?this.$frontMarkers:this.$backMarkers)[x],this._signal(w.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(x){return x?this.$frontMarkers:this.$backMarkers},this.highlight=function(x){if(!this.$searchHighlight){var w=new Q(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(w)}this.$searchHighlight.setRegexp(x)},this.highlightLines=function(x,w,S,U){"number"!=typeof w&&(S=w,w=x),S||(S="ace_step");var G=new Y(x,0,w,1/0);return G.id=this.addMarker(G,S,"fullLine",U),G},this.setAnnotations=function(x){this.$annotations=x,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(x){var w=x.match(/^.*?(\r?\n)/m);this.$autoNewLine=w?w[1]:"\n"},this.getWordRange=function(x,w){var S=this.getLine(x),U=!1;if(w>0&&(U=!!S.charAt(w-1).match(this.tokenRe)),U||(U=!!S.charAt(w).match(this.tokenRe)),U)var G=this.tokenRe;else G=/^\s+$/.test(S.slice(w-1,w+1))?/\s/:this.nonTokenRe;var z=w;if(z>0){do{z--}while(z>=0&&S.charAt(z).match(G));z++}for(var H=w;H<S.length&&S.charAt(H).match(G);)H++;return new Y(x,z,x,H)},this.getAWordRange=function(x,w){for(var S=this.getWordRange(x,w),U=this.getLine(S.end.row);U.charAt(S.end.column).match(/[ \t]/);)S.end.column+=1;return S},this.setNewLineMode=function(x){this.doc.setNewLineMode(x)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(x){this.setOption("useWorker",x)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(x){var w=x.data;this.bgTokenizer.start(w.first),this._signal("tokenizerUpdate",x)},this.$modes=j.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(x,w){if(x&&"object"==typeof x){if(x.getTokenizer)return this.$onChangeMode(x);var S=x,U=S.path}else U=x||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new K),this.$modes[U]&&!S)return this.$onChangeMode(this.$modes[U]),void(w&&w());this.$modeId=U,j.loadModule(["mode",U],function(x){if(this.$modeId!==U)return w&&w();this.$modes[U]&&!S?this.$onChangeMode(this.$modes[U]):x&&x.Mode&&(x=new x.Mode(S),S||(this.$modes[U]=x,x.$id=U),this.$onChangeMode(x)),w&&w()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(x,w){if(w||(this.$modeId=x.$id),this.$mode!==x){this.$mode=x,this.$stopWorker(),this.$useWorker&&this.$startWorker();var S=x.getTokenizer();if(void 0!==S.addEventListener){var U=this.onReloadTokenizer.bind(this);S.addEventListener("update",U)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(S);else{this.bgTokenizer=new J(S);var G=this;this.bgTokenizer.addEventListener("update",(function(x){G._signal("tokenizerUpdate",x)}))}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=x.tokenRe,this.nonTokenRe=x.nonTokenRe,w||(x.attachToSession&&x.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(x.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(x){j.warn("Could not load worker",x),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(x){this.$scrollTop===x||isNaN(x)||(this.$scrollTop=x,this._signal("changeScrollTop",x))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(x){this.$scrollLeft===x||isNaN(x)||(this.$scrollLeft=x,this._signal("changeScrollLeft",x))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var x=0;return this.lineWidgets.forEach((function(w){w&&w.screenWidth>x&&(x=w.screenWidth)})),this.lineWidgetWidth=x},this.$computeWidth=function(x){if(this.$modified||x){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var w=this.doc.getAllLines(),S=this.$rowLengthCache,U=0,G=0,z=this.$foldData[G],H=z?z.start.row:1/0,j=w.length,X=0;X<j;X++){if(X>H){if((X=z.end.row+1)>=j)break;H=(z=this.$foldData[G++])?z.start.row:1/0}null==S[X]&&(S[X]=this.$getStringScreenWidth(w[X])[0]),S[X]>U&&(U=S[X])}this.screenWidth=U}},this.getLine=function(x){return this.doc.getLine(x)},this.getLines=function(x,w){return this.doc.getLines(x,w)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(x){return this.doc.getTextRange(x||this.selection.getRange())},this.insert=function(x,w){return this.doc.insert(x,w)},this.remove=function(x){return this.doc.remove(x)},this.removeFullLines=function(x,w){return this.doc.removeFullLines(x,w)},this.undoChanges=function(x,w){if(x.length){this.$fromUndo=!0;for(var S=x.length-1;-1!=S;S--){var U=x[S];"insert"==U.action||"remove"==U.action?this.doc.revertDelta(U):U.folds&&this.addFolds(U.folds)}!w&&this.$undoSelect&&(x.selectionBefore?this.selection.fromJSON(x.selectionBefore):this.selection.setRange(this.$getUndoSelection(x,!0))),this.$fromUndo=!1}},this.redoChanges=function(x,w){if(x.length){this.$fromUndo=!0;for(var S=0;S<x.length;S++){var U=x[S];"insert"!=U.action&&"remove"!=U.action||this.doc.applyDelta(U)}!w&&this.$undoSelect&&(x.selectionAfter?this.selection.fromJSON(x.selectionAfter):this.selection.setRange(this.$getUndoSelection(x,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(x){this.$undoSelect=x},this.$getUndoSelection=function(x,w){function n(x){return w?"insert"!==x.action:"insert"===x.action}for(var S,U,G=0;G<x.length;G++){var z=x[G];z.start&&(S?n(z)?(U=z.start,-1==S.compare(U.row,U.column)&&S.setStart(U),U=z.end,1==S.compare(U.row,U.column)&&S.setEnd(U)):(U=z.start,-1==S.compare(U.row,U.column)&&(S=Y.fromPoints(z.start,z.start))):S=n(z)?Y.fromPoints(z.start,z.end):Y.fromPoints(z.start,z.start))}return S},this.replace=function(x,w){return this.doc.replace(x,w)},this.moveText=function(x,w,S){var U=this.getTextRange(x),G=this.getFoldsInRange(x),z=Y.fromPoints(w,w);if(!S){this.remove(x);var H=x.start.row-x.end.row;(q=H?-x.end.column:x.start.column-x.end.column)&&(z.start.row==x.end.row&&z.start.column>x.end.column&&(z.start.column+=q),z.end.row==x.end.row&&z.end.column>x.end.column&&(z.end.column+=q)),H&&z.start.row>=x.end.row&&(z.start.row+=H,z.end.row+=H)}if(z.end=this.insert(z.start,U),G.length){var j=x.start,X=z.start,q=(H=X.row-j.row,X.column-j.column);this.addFolds(G.map((function(x){return(x=x.clone()).start.row==j.row&&(x.start.column+=q),x.end.row==j.row&&(x.end.column+=q),x.start.row+=H,x.end.row+=H,x})))}return z},this.indentRows=function(x,w,S){S=S.replace(/\t/g,this.getTabString());for(var U=x;U<=w;U++)this.doc.insertInLine({row:U,column:0},S)},this.outdentRows=function(x){for(var w=x.collapseRows(),S=new Y(0,0,0,0),U=this.getTabSize(),G=w.start.row;G<=w.end.row;++G){var z=this.getLine(G);S.start.row=G,S.end.row=G;for(var H=0;H<U&&" "==z.charAt(H);++H);H<U&&"\t"==z.charAt(H)?(S.start.column=H,S.end.column=H+1):(S.start.column=0,S.end.column=H),this.remove(S)}},this.$moveLines=function(x,w,S){if(x=this.getRowFoldStart(x),w=this.getRowFoldEnd(w),S<0){if((G=this.getRowFoldStart(x+S))<0)return 0;var U=G-x}else if(S>0){var G;if((G=this.getRowFoldEnd(w+S))>this.doc.getLength()-1)return 0;U=G-w}else x=this.$clipRowToDocument(x),U=(w=this.$clipRowToDocument(w))-x+1;var z=new Y(x,0,w,Number.MAX_VALUE),H=this.getFoldsInRange(z).map((function(x){return(x=x.clone()).start.row+=U,x.end.row+=U,x})),j=0==S?this.doc.getLines(x,w):this.doc.removeFullLines(x,w);return this.doc.insertFullLines(x+U,j),H.length&&this.addFolds(H),U},this.moveLinesUp=function(x,w){return this.$moveLines(x,w,-1)},this.moveLinesDown=function(x,w){return this.$moveLines(x,w,1)},this.duplicateLines=function(x,w){return this.$moveLines(x,w,0)},this.$clipRowToDocument=function(x){return Math.max(0,Math.min(x,this.doc.getLength()-1))},this.$clipColumnToRow=function(x,w){return w<0?0:Math.min(this.doc.getLine(x).length,w)},this.$clipPositionToDocument=function(x,w){if(w=Math.max(0,w),x<0)x=0,w=0;else{var S=this.doc.getLength();x>=S?(x=S-1,w=this.doc.getLine(S-1).length):w=Math.min(this.doc.getLine(x).length,w)}return{row:x,column:w}},this.$clipRangeToDocument=function(x){x.start.row<0?(x.start.row=0,x.start.column=0):x.start.column=this.$clipColumnToRow(x.start.row,x.start.column);var w=this.doc.getLength()-1;return x.end.row>w?(x.end.row=w,x.end.column=this.doc.getLine(w).length):x.end.column=this.$clipColumnToRow(x.end.row,x.end.column),x},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(x){if(x!=this.$useWrapMode){if(this.$useWrapMode=x,this.$modified=!0,this.$resetRowCache(0),x){var w=this.getLength();this.$wrapData=Array(w),this.$updateWrapData(0,w-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(x,w){this.$wrapLimitRange.min===x&&this.$wrapLimitRange.max===w||(this.$wrapLimitRange={min:x,max:w},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(x,w){var S=this.$wrapLimitRange;S.max<0&&(S={min:w,max:w});var U=this.$constrainWrapLimit(x,S.min,S.max);return U!=this.$wrapLimit&&U>1&&(this.$wrapLimit=U,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(x,w,S){return w&&(x=Math.max(w,x)),S&&(x=Math.min(S,x)),x},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(x){this.setWrapLimitRange(x,x)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(x){var w=this.$useWrapMode,S=x.action,G=x.start,z=x.end,H=G.row,j=z.row,X=j-H,q=null;if(this.$updating=!0,0!=X)if("remove"===S){this[w?"$wrapData":"$rowLengthCache"].splice(H,X);var K=this.$foldData;q=this.getFoldsInRange(x),this.removeFolds(q);var Y=0;if(te=this.getFoldLine(z.row)){te.addRemoveChars(z.row,z.column,G.column-z.column),te.shiftRow(-X);var Z=this.getFoldLine(H);Z&&Z!==te&&(Z.merge(te),te=Z),Y=K.indexOf(te)+1}for(;Y<K.length;Y++)(te=K[Y]).start.row>=z.row&&te.shiftRow(-X);j=H}else{var J=Array(X);J.unshift(H,0);var Q=w?this.$wrapData:this.$rowLengthCache;if(Q.splice.apply(Q,J),K=this.$foldData,Y=0,te=this.getFoldLine(H)){var ee=te.range.compareInside(G.row,G.column);0==ee?(te=te.split(G.row,G.column))&&(te.shiftRow(X),te.addRemoveChars(j,0,z.column-G.column)):-1==ee&&(te.addRemoveChars(H,0,z.column-G.column),te.shiftRow(X)),Y=K.indexOf(te)+1}for(;Y<K.length;Y++){var te;(te=K[Y]).start.row>=H&&te.shiftRow(X)}}else X=Math.abs(x.start.column-x.end.column),"remove"===S&&(q=this.getFoldsInRange(x),this.removeFolds(q),X=-X),(te=this.getFoldLine(H))&&te.addRemoveChars(H,G.column,X);return w&&this.$wrapData.length!=this.doc.getLength()&&U.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,w?this.$updateWrapData(H,j):this.$updateRowLengthCache(H,j),q},this.$updateRowLengthCache=function(x,w,S){this.$rowLengthCache[x]=null,this.$rowLengthCache[w]=null},this.$updateWrapData=function(S,U){var G,z,H=this.doc.getAllLines(),j=this.getTabSize(),X=this.$wrapData,q=this.$wrapLimit,K=S;for(U=Math.min(U,H.length-1);K<=U;)(z=this.getFoldLine(K,z))?(G=[],z.walk(function(S,U,z,j){var X;if(null!=S){(X=this.$getDisplayTokens(S,G.length))[0]=x;for(var q=1;q<X.length;q++)X[q]=w}else X=this.$getDisplayTokens(H[U].substring(j,z),G.length);G=G.concat(X)}.bind(this),z.end.row,H[z.end.row].length+1),X[z.start.row]=this.$computeWrapSplits(G,q,j),K=z.end.row+1):(G=this.$getDisplayTokens(H[K]),X[K]=this.$computeWrapSplits(G,q,j),K++)};var x=3,w=4;function n(x){return!(x<4352)&&(x>=4352&&x<=4447||x>=4515&&x<=4519||x>=4602&&x<=4607||x>=9001&&x<=9002||x>=11904&&x<=11929||x>=11931&&x<=12019||x>=12032&&x<=12245||x>=12272&&x<=12283||x>=12288&&x<=12350||x>=12353&&x<=12438||x>=12441&&x<=12543||x>=12549&&x<=12589||x>=12593&&x<=12686||x>=12688&&x<=12730||x>=12736&&x<=12771||x>=12784&&x<=12830||x>=12832&&x<=12871||x>=12880&&x<=13054||x>=13056&&x<=19903||x>=19968&&x<=42124||x>=42128&&x<=42182||x>=43360&&x<=43388||x>=44032&&x<=55203||x>=55216&&x<=55238||x>=55243&&x<=55291||x>=63744&&x<=64255||x>=65040&&x<=65049||x>=65072&&x<=65106||x>=65108&&x<=65126||x>=65128&&x<=65131||x>=65281&&x<=65376||x>=65504&&x<=65510)}this.$computeWrapSplits=function(S,U,G){if(0==S.length)return[];var z=[],H=S.length,j=0,X=0,q=this.$wrapAsCode,K=this.$indentedSoftWrap,Y=U<=Math.max(2*G,8)||!1===K?0:Math.floor(U/2);function d(x){for(var w=x-j,U=j;U<x;U++){var H=S[U];12!==H&&2!==H||(w-=1)}z.length||(Z=function(){var x=0;if(0===Y)return x;if(K)for(var w=0;w<S.length;w++){var U=S[w];if(10==U)x+=1;else{if(11!=U){if(12==U)continue;break}x+=G}}return q&&!1!==K&&(x+=G),Math.min(x,Y)}(),z.indent=Z),X+=w,z.push(X),j=x}for(var Z=0;H-j>U-Z;){var J=j+U-Z;if(S[J-1]>=10&&S[J]>=10)d(J);else if(S[J]!=x&&S[J]!=w){for(var Q=Math.max(J-(U-(U>>2)),j-1);J>Q&&S[J]<x;)J--;if(q){for(;J>Q&&S[J]<x;)J--;for(;J>Q&&9==S[J];)J--}else for(;J>Q&&S[J]<10;)J--;J>Q?d(++J):(2==S[J=j+U]&&J--,d(J-Z))}else{for(;J!=j-1&&S[J]!=x;J--);if(J>j){d(J);continue}for(J=j+U;J<S.length&&S[J]==w;J++);if(J==S.length)break;d(J)}}return z},this.$getDisplayTokens=function(x,w){var S,U=[];w=w||0;for(var G=0;G<x.length;G++){var z=x.charCodeAt(G);if(9==z){S=this.getScreenTabSize(U.length+w),U.push(11);for(var H=1;H<S;H++)U.push(12)}else 32==z?U.push(10):z>39&&z<48||z>57&&z<64?U.push(9):z>=4352&&n(z)?U.push(1,2):U.push(1)}return U},this.$getStringScreenWidth=function(x,w,S){if(0==w)return[0,0];var U,G;for(null==w&&(w=1/0),S=S||0,G=0;G<x.length&&(9==(U=x.charCodeAt(G))?S+=this.getScreenTabSize(S):U>=4352&&n(U)?S+=2:S+=1,!(S>w));G++);return[S,G]},this.lineWidgets=null,this.getRowLength=function(x){if(this.lineWidgets)var w=this.lineWidgets[x]&&this.lineWidgets[x].rowCount||0;else w=0;return this.$useWrapMode&&this.$wrapData[x]?this.$wrapData[x].length+1+w:1+w},this.getRowLineCount=function(x){return this.$useWrapMode&&this.$wrapData[x]?this.$wrapData[x].length+1:1},this.getRowWrapIndent=function(x){if(this.$useWrapMode){var w=this.screenToDocumentPosition(x,Number.MAX_VALUE),S=this.$wrapData[w.row];return S.length&&S[0]<w.column?S.indent:0}return 0},this.getScreenLastRowColumn=function(x){var w=this.screenToDocumentPosition(x,Number.MAX_VALUE);return this.documentToScreenColumn(w.row,w.column)},this.getDocumentLastRowColumn=function(x,w){var S=this.documentToScreenRow(x,w);return this.getScreenLastRowColumn(S)},this.getDocumentLastRowColumnPosition=function(x,w){var S=this.documentToScreenRow(x,w);return this.screenToDocumentPosition(S,Number.MAX_VALUE/10)},this.getRowSplitData=function(x){return this.$useWrapMode?this.$wrapData[x]:void 0},this.getScreenTabSize=function(x){return this.$tabSize-(x%this.$tabSize|0)},this.screenToDocumentRow=function(x,w){return this.screenToDocumentPosition(x,w).row},this.screenToDocumentColumn=function(x,w){return this.screenToDocumentPosition(x,w).column},this.screenToDocumentPosition=function(x,w,S){if(x<0)return{row:0,column:0};var U,G,z=0,H=0,j=0,X=0,q=this.$screenRowCache,K=this.$getRowCacheIndex(q,x),Y=q.length;if(Y&&K>=0){j=q[K],z=this.$docRowCache[K];var Z=x>q[Y-1]}else Z=!Y;for(var J=this.getLength()-1,Q=this.getNextFoldLine(z),ee=Q?Q.start.row:1/0;j<=x&&!(j+(X=this.getRowLength(z))>x||z>=J);)j+=X,++z>ee&&(z=Q.end.row+1,ee=(Q=this.getNextFoldLine(z,Q))?Q.start.row:1/0),Z&&(this.$docRowCache.push(z),this.$screenRowCache.push(j));if(Q&&Q.start.row<=z)U=this.getFoldDisplayLine(Q),z=Q.start.row;else{if(j+X<=x||z>J)return{row:J,column:this.getLine(J).length};U=this.getLine(z),Q=null}var te=0,ne=Math.floor(x-j);if(this.$useWrapMode){var re=this.$wrapData[z];re&&(G=re[ne],ne>0&&re.length&&(te=re.indent,H=re[ne-1]||re[re.length-1],U=U.substring(H)))}return void 0!==S&&this.$bidiHandler.isBidiRow(j+ne,z,ne)&&(w=this.$bidiHandler.offsetToCol(S)),H+=this.$getStringScreenWidth(U,w-te)[1],this.$useWrapMode&&H>=G&&(H=G-1),Q?Q.idxToPosition(H):{row:z,column:H}},this.documentToScreenPosition=function(x,w){if(void 0===w)var S=this.$clipPositionToDocument(x.row,x.column);else S=this.$clipPositionToDocument(x,w);x=S.row,w=S.column;var U,G=0,z=null;(U=this.getFoldAt(x,w,1))&&(x=U.start.row,w=U.start.column);var H,j=0,X=this.$docRowCache,q=this.$getRowCacheIndex(X,x),K=X.length;if(K&&q>=0){j=X[q],G=this.$screenRowCache[q];var Y=x>X[K-1]}else Y=!K;for(var Z=this.getNextFoldLine(j),J=Z?Z.start.row:1/0;j<x;){if(j>=J){if((H=Z.end.row+1)>x)break;J=(Z=this.getNextFoldLine(H,Z))?Z.start.row:1/0}else H=j+1;G+=this.getRowLength(j),j=H,Y&&(this.$docRowCache.push(j),this.$screenRowCache.push(G))}var Q="";Z&&j>=J?(Q=this.getFoldDisplayLine(Z,x,w),z=Z.start.row):(Q=this.getLine(x).substring(0,w),z=x);var ee=0;if(this.$useWrapMode){var te=this.$wrapData[z];if(te){for(var ne=0;Q.length>=te[ne];)G++,ne++;Q=Q.substring(te[ne-1]||0,Q.length),ee=ne>0?te.indent:0}}return{row:G,column:ee+this.$getStringScreenWidth(Q)[0]}},this.documentToScreenColumn=function(x,w){return this.documentToScreenPosition(x,w).column},this.documentToScreenRow=function(x,w){return this.documentToScreenPosition(x,w).row},this.getScreenLength=function(){var x=0,w=null;if(this.$useWrapMode)for(var S=this.$wrapData.length,U=0,G=(j=0,(w=this.$foldData[j++])?w.start.row:1/0);U<S;){var z=this.$wrapData[U];x+=z?z.length+1:1,++U>G&&(U=w.end.row+1,G=(w=this.$foldData[j++])?w.start.row:1/0)}else{x=this.getLength();for(var H=this.$foldData,j=0;j<H.length;j++)x-=(w=H[j]).end.row-w.start.row}return this.lineWidgets&&(x+=this.$getWidgetScreenLength()),x},this.$setFontMetrics=function(x){this.$enableVarChar&&(this.$getStringScreenWidth=function(w,S,U){if(0===S)return[0,0];var G,z;for(S||(S=1/0),U=U||0,z=0;z<w.length&&!((U+="\t"===(G=w.charAt(z))?this.getScreenTabSize(U):x.getCharacterWidth(G))>S);z++);return[U,z]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()},this.isFullWidth=n}.call(m.prototype),x("./edit_session/folding").Folding.call(m.prototype),x("./edit_session/bracket_match").BracketMatch.call(m.prototype),j.defineOptions(m.prototype,"session",{wrap:{set:function(x){if(x&&"off"!=x?"free"==x?x=!0:"printMargin"==x?x=-1:"string"==typeof x&&(x=parseInt(x,10)||!1):x=!1,this.$wrap!=x)if(this.$wrap=x,x){var w="number"==typeof x?x:null;this.setWrapLimitRange(w,w),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(x){(x="auto"==x?"text"!=this.$mode.type:"text"!=x)!=this.$wrapAsCode&&(this.$wrapAsCode=x,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(x){this.$useWorker=x,this.$stopWorker(),x&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(x){(x=parseInt(x))>0&&this.$tabSize!==x&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=x,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(x){this.setFoldStyle(x)},handlesSet:!0},overwrite:{set:function(x){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(x){this.doc.setNewLineMode(x)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(x){this.setMode(x)},get:function(){return this.$modeId},handlesSet:!0}}),w.EditSession=m})),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(x,w,S){"use strict";var U=x("./lib/lang"),G=x("./lib/oop"),z=x("./range").Range,s=function(){this.$options={}};(function(){this.set=function(x){return G.mixin(this.$options,x),this},this.getOptions=function(){return U.copyObject(this.$options)},this.setOptions=function(x){this.$options=x},this.find=function(x){var w=this.$options,S=this.$matchIterator(x,w);if(!S)return!1;var U=null;return S.forEach((function(x,S,G,H){return U=new z(x,S,G,H),!(S==H&&w.start&&w.start.start&&0!=w.skipCurrent&&U.isEqual(w.start)&&(U=null,1))})),U},this.findAll=function(x){var w=this.$options;if(!w.needle)return[];this.$assembleRegExp(w);var S=w.range,G=S?x.getLines(S.start.row,S.end.row):x.doc.getAllLines(),H=[],j=w.re;if(w.$isMultiLine){var X,q=j.length,K=G.length-q;e:for(var Y=j.offset||0;Y<=K;Y++){for(var Z=0;Z<q;Z++)if(-1==G[Y+Z].search(j[Z]))continue e;var J=G[Y],Q=G[Y+q-1],ee=J.length-J.match(j[0])[0].length,te=Q.match(j[q-1])[0].length;X&&X.end.row===Y&&X.end.column>ee||(H.push(X=new z(Y,ee,Y+q-1,te)),q>2&&(Y=Y+q-2))}}else for(var ne=0;ne<G.length;ne++){var re=U.getMatchOffsets(G[ne],j);for(Z=0;Z<re.length;Z++){var ie=re[Z];H.push(new z(ne,ie.offset,ne,ie.offset+ie.length))}}if(S){var oe=S.start.column,ae=S.start.column;for(ne=0,Z=H.length-1;ne<Z&&H[ne].start.column<oe&&H[ne].start.row==S.start.row;)ne++;for(;ne<Z&&H[Z].end.column>ae&&H[Z].end.row==S.end.row;)Z--;for(H=H.slice(ne,Z+1),ne=0,Z=H.length;ne<Z;ne++)H[ne].start.row+=S.start.row,H[ne].end.row+=S.start.row}return H},this.replace=function(x,w){var S=this.$options,U=this.$assembleRegExp(S);if(S.$isMultiLine)return w;if(U){var G=U.exec(x);if(!G||G[0].length!=x.length)return null;if(w=x.replace(U,w),S.preserveCase){w=w.split("");for(var z=Math.min(x.length,x.length);z--;){var H=x[z];H&&H.toLowerCase()!=H?w[z]=w[z].toUpperCase():w[z]=w[z].toLowerCase()}w=w.join("")}return w}},this.$assembleRegExp=function(x,w){if(x.needle instanceof RegExp)return x.re=x.needle;var S=x.needle;if(!x.needle)return x.re=!1;x.regExp||(S=U.escapeRegExp(S)),x.wholeWord&&(S=function(x,w){function n(x){return/\w/.test(x)||w.regExp?"\\b":""}return n(x[0])+x+n(x[x.length-1])}(S,x));var G=x.caseSensitive?"gm":"gmi";if(x.$isMultiLine=!w&&/[\n\r]/.test(S),x.$isMultiLine)return x.re=this.$assembleMultilineRegExp(S,G);try{var z=new RegExp(S,G)}catch(x){z=!1}return x.re=z},this.$assembleMultilineRegExp=function(x,w){for(var S=x.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),U=[],G=0;G<S.length;G++)try{U.push(new RegExp(S[G],w))}catch(x){return!1}return U},this.$matchIterator=function(x,w){var S=this.$assembleRegExp(w);if(!S)return!1;var U=1==w.backwards,G=0!=w.skipCurrent,z=w.range,H=w.start;H||(H=z?z[U?"end":"start"]:x.selection.getRange()),H.start&&(H=H[G!=U?"end":"start"]);var j=z?z.start.row:0,X=z?z.end.row:x.getLength()-1;if(U)var l=function(x){var S=H.row;if(!h(S,H.column,x)){for(S--;S>=j;S--)if(h(S,Number.MAX_VALUE,x))return;if(0!=w.wrap)for(S=X,j=H.row;S>=j;S--)if(h(S,Number.MAX_VALUE,x))return}};else l=function(x){var S=H.row;if(!h(S,H.column,x)){for(S+=1;S<=X;S++)if(h(S,0,x))return;if(0!=w.wrap)for(S=j,X=H.row;S<=X;S++)if(h(S,0,x))return}};if(w.$isMultiLine)var q=S.length,h=function(w,G,z){var H=U?w-q+1:w;if(!(H<0)){var j=x.getLine(H),X=j.search(S[0]);if(!(!U&&X<G||-1===X)){for(var K=1;K<q;K++)if(-1==(j=x.getLine(H+K)).search(S[K]))return;var Y=j.match(S[q-1])[0].length;if(!(U&&Y>G))return!!z(H,X,H+q-1,Y)||void 0}}};else h=U?function(w,U,G){var z,H=x.getLine(w),j=[],X=0;for(S.lastIndex=0;z=S.exec(H);){var q=z[0].length;if(X=z.index,!q){if(X>=H.length)break;S.lastIndex=X+=1}if(z.index+q>U)break;j.push(z.index,q)}for(var K=j.length-1;K>=0;K-=2){var Y=j[K-1];if(G(w,Y,w,Y+(q=j[K])))return!0}}:function(w,U,G){var z,H,j=x.getLine(w);for(S.lastIndex=U;H=S.exec(j);){var X=H[0].length;if(G(w,z=H.index,w,z+X))return!0;if(!X&&(S.lastIndex=z+=1,z>=j.length))return!1}};return{forEach:l}}}).call(s.prototype),w.Search=s})),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(x,w,S){"use strict";var G=x("../lib/keys"),z=x("../lib/useragent"),H=G.KEY_MODS;function s(x,w){this.platform=w||(z.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(x),this.$singleCommand=!0}function a(x,w){s.call(this,x,w),this.$singleCommand=!1}a.prototype=s.prototype,function(){function e(x){return"object"==typeof x&&x.bindKey&&x.bindKey.position||(x.isDefault?-100:0)}this.addCommand=function(x){this.commands[x.name]&&this.removeCommand(x),this.commands[x.name]=x,x.bindKey&&this._buildKeyHash(x)},this.removeCommand=function(x,w){var S=x&&("string"==typeof x?x:x.name);x=this.commands[S],w||delete this.commands[S];var U=this.commandKeyBinding;for(var G in U){var z=U[G];if(z==x)delete U[G];else if(Array.isArray(z)){var H=z.indexOf(x);-1!=H&&(z.splice(H,1),1==z.length&&(U[G]=z[0]))}}},this.bindKey=function(x,w,S){if("object"==typeof x&&x&&(null==S&&(S=x.position),x=x[this.platform]),x)return"function"==typeof w?this.addCommand({exec:w,bindKey:x,name:w.name||x}):void x.split("|").forEach((function(x){var U="";if(-1!=x.indexOf(" ")){var G=x.split(/\s+/);x=G.pop(),G.forEach((function(x){var w=this.parseKeys(x),S=H[w.hashId]+w.key;U+=(U?" ":"")+S,this._addCommandToBinding(U,"chainKeys")}),this),U+=" "}var z=this.parseKeys(x),j=H[z.hashId]+z.key;this._addCommandToBinding(U+j,w,S)}),this)},this._addCommandToBinding=function(x,w,S){var U,G=this.commandKeyBinding;if(w)if(!G[x]||this.$singleCommand)G[x]=w;else{Array.isArray(G[x])?-1!=(U=G[x].indexOf(w))&&G[x].splice(U,1):G[x]=[G[x]],"number"!=typeof S&&(S=e(w));var z=G[x];for(U=0;U<z.length&&!(e(z[U])>S);U++);z.splice(U,0,w)}else delete G[x]},this.addCommands=function(x){x&&Object.keys(x).forEach((function(w){var S=x[w];if(S){if("string"==typeof S)return this.bindKey(S,w);"function"==typeof S&&(S={exec:S}),"object"==typeof S&&(S.name||(S.name=w),this.addCommand(S))}}),this)},this.removeCommands=function(x){Object.keys(x).forEach((function(w){this.removeCommand(x[w])}),this)},this.bindKeys=function(x){Object.keys(x).forEach((function(w){this.bindKey(w,x[w])}),this)},this._buildKeyHash=function(x){this.bindKey(x.bindKey,x)},this.parseKeys=function(x){var w=x.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(x){return x})),S=w.pop(),z=G[S];if(G.FUNCTION_KEYS[z])S=G.FUNCTION_KEYS[z].toLowerCase();else{if(!w.length)return{key:S,hashId:-1};if(1==w.length&&"shift"==w[0])return{key:S.toUpperCase(),hashId:-1}}for(var H=0,j=w.length;j--;){var X=G.KEY_MODS[w[j]];if(null==X)return void 0!==U&&U.error("invalid modifier "+w[j]+" in "+x),!1;H|=X}return{key:S,hashId:H}},this.findKeyCommand=function(x,w){var S=H[x]+w;return this.commandKeyBinding[S]},this.handleKeyboard=function(x,w,S,U){if(!(U<0)){var G=H[w]+S,z=this.commandKeyBinding[G];return x.$keyChain&&(x.$keyChain+=" "+G,z=this.commandKeyBinding[x.$keyChain]||z),!z||"chainKeys"!=z&&"chainKeys"!=z[z.length-1]?(x.$keyChain&&(w&&4!=w||1!=S.length?(-1==w||U>0)&&(x.$keyChain=""):x.$keyChain=x.$keyChain.slice(0,-G.length-1)),{command:z}):(x.$keyChain=x.$keyChain||G,{command:"null"})}},this.getStatusText=function(x,w){return w.$keyChain||""}}.call(s.prototype),w.HashHandler=s,w.MultiHashHandler=a})),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],(function(x,w,S){"use strict";var U=x("../lib/oop"),G=x("../keyboard/hash_handler").MultiHashHandler,z=x("../lib/event_emitter").EventEmitter,s=function(x,w){G.call(this,w,x),this.byName=this.commands,this.setDefaultHandler("exec",(function(x){return x.command.exec(x.editor,x.args||{})}))};U.inherits(s,G),function(){U.implement(this,z),this.exec=function(x,w,S){if(Array.isArray(x)){for(var U=x.length;U--;)if(this.exec(x[U],w,S))return!0;return!1}if("string"==typeof x&&(x=this.commands[x]),!x)return!1;if(w&&w.$readOnly&&!x.readOnly)return!1;if(0!=this.$checkCommandState&&x.isAvailable&&!x.isAvailable(w))return!1;var G={editor:w,command:x,args:S};return G.returnValue=this._emit("exec",G),this._signal("afterExec",G),!1!==G.returnValue},this.toggleRecording=function(x){if(!this.$inReplay)return x&&x._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(x){this.macro.push([x.command,x.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(x){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(x);try{this.$inReplay=!0,this.macro.forEach((function(w){"string"==typeof w?this.exec(w,x):this.exec(w[0],x,w[1])}),this)}finally{this.$inReplay=!1}}},this.trimMacro=function(x){return x.map((function(x){return"string"!=typeof x[0]&&(x[0]=x[0].name),x[1]||(x=x[0]),x}))}}.call(s.prototype),w.CommandManager=s})),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],(function(x,w,S){"use strict";var U=x("../lib/lang"),G=x("../config"),z=x("../range").Range;function s(x,w){return{win:x,mac:w}}w.commands=[{name:"showSettingsMenu",bindKey:s("Ctrl-,","Command-,"),exec:function(x){G.loadModule("ace/ext/settings_menu",(function(w){w.init(x),x.showSettingsMenu()}))},readOnly:!0},{name:"goToNextError",bindKey:s("Alt-E","F4"),exec:function(x){G.loadModule("./ext/error_marker",(function(w){w.showErrorMarker(x,1)}))},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:s("Alt-Shift-E","Shift-F4"),exec:function(x){G.loadModule("./ext/error_marker",(function(w){w.showErrorMarker(x,-1)}))},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:s("Ctrl-A","Command-A"),exec:function(x){x.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:s(null,"Ctrl-L"),exec:function(x){x.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:s("Ctrl-L","Command-L"),exec:function(x,w){"number"!=typeof w||isNaN(w)||x.gotoLine(w),x.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:s("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(x){x.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:s("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(x){x.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:s("F2","F2"),exec:function(x){x.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:s("Alt-F2","Alt-F2"),exec:function(x){x.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(x){x.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:s("Alt-0","Command-Option-0"),exec:function(x){x.session.foldAll(),x.session.unfold(x.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:s("Alt-Shift-0","Command-Option-Shift-0"),exec:function(x){x.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:s("Ctrl-K","Command-G"),exec:function(x){x.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:s("Ctrl-Shift-K","Command-Shift-G"),exec:function(x){x.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:s("Alt-K","Ctrl-G"),exec:function(x){x.selection.isEmpty()?x.selection.selectWord():x.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:s("Alt-Shift-K","Ctrl-Shift-G"),exec:function(x){x.selection.isEmpty()?x.selection.selectWord():x.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:s("Ctrl-F","Command-F"),exec:function(x){G.loadModule("ace/ext/searchbox",(function(w){w.Search(x)}))},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(x){x.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:s("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(x){x.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:s("Ctrl-Home","Command-Home|Command-Up"),exec:function(x){x.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:s("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(x){x.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:s("Up","Up|Ctrl-P"),exec:function(x,w){x.navigateUp(w.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:s("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(x){x.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:s("Ctrl-End","Command-End|Command-Down"),exec:function(x){x.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:s("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(x){x.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:s("Down","Down|Ctrl-N"),exec:function(x,w){x.navigateDown(w.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:s("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(x){x.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:s("Ctrl-Left","Option-Left"),exec:function(x){x.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:s("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(x){x.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:s("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(x){x.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:s("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(x){x.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:s("Left","Left|Ctrl-B"),exec:function(x,w){x.navigateLeft(w.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:s("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(x){x.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:s("Ctrl-Right","Option-Right"),exec:function(x){x.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:s("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(x){x.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:s("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(x){x.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:s("Shift-Right","Shift-Right"),exec:function(x){x.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:s("Right","Right|Ctrl-F"),exec:function(x,w){x.navigateRight(w.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(x){x.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:s(null,"Option-PageDown"),exec:function(x){x.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:s("PageDown","PageDown|Ctrl-V"),exec:function(x){x.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(x){x.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:s(null,"Option-PageUp"),exec:function(x){x.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(x){x.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:s("Ctrl-Up",null),exec:function(x){x.renderer.scrollBy(0,-2*x.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:s("Ctrl-Down",null),exec:function(x){x.renderer.scrollBy(0,2*x.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(x){x.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(x){x.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:s("Ctrl-Alt-E","Command-Option-E"),exec:function(x){x.commands.toggleRecording(x)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:s("Ctrl-Shift-E","Command-Shift-E"),exec:function(x){x.commands.replay(x)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:s("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(x){x.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:s("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(x){x.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:s("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(x){x.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:s(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(x){},readOnly:!0},{name:"cut",description:"Cut",exec:function(x){var w=x.$copyWithEmptySelection&&x.selection.isEmpty()?x.selection.getLineRange():x.selection.getRange();x._emit("cut",w),w.isEmpty()||x.session.remove(w),x.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(x,w){x.$handlePaste(w)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:s("Ctrl-D","Command-D"),exec:function(x){x.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:s("Ctrl-Shift-D","Command-Shift-D"),exec:function(x){x.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:s("Ctrl-Alt-S","Command-Alt-S"),exec:function(x){x.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:s("Ctrl-/","Command-/"),exec:function(x){x.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:s("Ctrl-Shift-/","Command-Shift-/"),exec:function(x){x.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:s("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(x){x.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:s("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(x){x.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:s("Ctrl-H","Command-Option-F"),exec:function(x){G.loadModule("ace/ext/searchbox",(function(w){w.Search(x,!0)}))}},{name:"undo",description:"Undo",bindKey:s("Ctrl-Z","Command-Z"),exec:function(x){x.undo()}},{name:"redo",description:"Redo",bindKey:s("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(x){x.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:s("Alt-Shift-Up","Command-Option-Up"),exec:function(x){x.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:s("Alt-Up","Option-Up"),exec:function(x){x.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:s("Alt-Shift-Down","Command-Option-Down"),exec:function(x){x.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:s("Alt-Down","Option-Down"),exec:function(x){x.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:s("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(x){x.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:s("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(x){x.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:s("Shift-Delete",null),exec:function(x){if(!x.selection.isEmpty())return!1;x.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:s("Alt-Backspace","Command-Backspace"),exec:function(x){x.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:s("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(x){x.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:s("Ctrl-Shift-Backspace",null),exec:function(x){var w=x.selection.getRange();w.start.column=0,x.session.remove(w)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:s("Ctrl-Shift-Delete",null),exec:function(x){var w=x.selection.getRange();w.end.column=Number.MAX_VALUE,x.session.remove(w)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:s("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(x){x.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:s("Ctrl-Delete","Alt-Delete"),exec:function(x){x.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:s("Shift-Tab","Shift-Tab"),exec:function(x){x.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:s("Tab","Tab"),exec:function(x){x.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:s("Ctrl-[","Ctrl-["),exec:function(x){x.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:s("Ctrl-]","Ctrl-]"),exec:function(x){x.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(x,w){x.insert(w)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(x,w){x.insert(U.stringRepeat(w.text||"",w.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:s(null,"Ctrl-O"),exec:function(x){x.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:s("Alt-Shift-X","Ctrl-T"),exec:function(x){x.transposeLetters()},multiSelectAction:function(x){x.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:s("Ctrl-U","Ctrl-U"),exec:function(x){x.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:s("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(x){x.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",description:"Expand to line",bindKey:s("Ctrl-Shift-L","Command-Shift-L"),exec:function(x){var w=x.selection.getRange();w.start.column=w.end.column=0,w.end.row++,x.selection.setRange(w,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:s(null,null),exec:function(x){for(var w=x.selection.isBackwards(),S=w?x.selection.getSelectionLead():x.selection.getSelectionAnchor(),G=w?x.selection.getSelectionAnchor():x.selection.getSelectionLead(),H=x.session.doc.getLine(S.row).length,j=x.session.doc.getTextRange(x.selection.getRange()).replace(/\n\s*/," ").length,X=x.session.doc.getLine(S.row),q=S.row+1;q<=G.row+1;q++){var K=U.stringTrimLeft(U.stringTrimRight(x.session.doc.getLine(q)));0!==K.length&&(K=" "+K),X+=K}G.row+1<x.session.doc.getLength()-1&&(X+=x.session.doc.getNewLineCharacter()),x.clearSelection(),x.session.doc.replace(new z(S.row,0,G.row+2,0),X),j>0?(x.selection.moveCursorTo(S.row,S.column),x.selection.selectTo(S.row,S.column+j)):(H=x.session.doc.getLine(S.row).length>H?H+1:H,x.selection.moveCursorTo(S.row,H))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:s(null,null),exec:function(x){var w=x.session.doc.getLength()-1,S=x.session.doc.getLine(w).length,U=x.selection.rangeList.ranges,G=[];U.length<1&&(U=[x.selection.getRange()]);for(var H=0;H<U.length;H++)H==U.length-1&&(U[H].end.row===w&&U[H].end.column===S||G.push(new z(U[H].end.row,U[H].end.column,w,S))),0===H?0===U[H].start.row&&0===U[H].start.column||G.push(new z(0,0,U[H].start.row,U[H].start.column)):G.push(new z(U[H-1].end.row,U[H-1].end.column,U[H].start.row,U[H].start.column));for(x.exitMultiSelectMode(),x.clearSelection(),H=0;H<G.length;H++)x.selection.addRange(G[H],!1)},readOnly:!0,scrollIntoView:"none"},{name:"openCommandPallete",description:"Open command pallete",bindKey:s("F1","F1"),exec:function(x){x.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:s(null,null),exec:function(x){x.prompt({$type:"modes"})},readOnly:!0}]})),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],(function(x,w,S){"use strict";x("./lib/fixoldbrowsers");var U=x("./lib/oop"),G=x("./lib/dom"),z=x("./lib/lang"),H=x("./lib/useragent"),j=x("./keyboard/textinput").TextInput,X=x("./mouse/mouse_handler").MouseHandler,q=x("./mouse/fold_handler").FoldHandler,K=x("./keyboard/keybinding").KeyBinding,Y=x("./edit_session").EditSession,Z=x("./search").Search,J=x("./range").Range,Q=x("./lib/event_emitter").EventEmitter,ee=x("./commands/command_manager").CommandManager,te=x("./commands/default_commands").commands,ne=x("./config"),re=x("./token_iterator").TokenIterator,ie=x("./clipboard"),C=function(x,w,S){var U=x.getContainerElement();this.container=U,this.renderer=x,this.id="editor"+ ++C.$uid,this.commands=new ee(H.isMac?"mac":"win",te),"object"==typeof document&&(this.textInput=new j(x.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new X(this),new q(this)),this.keyBinding=new K(this),this.$search=(new Z).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=z.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",(function(x,w){w._$emitInputEvent.schedule(31)})),this.setSession(w||S&&S.session||new Y("")),ne.resetOptions(this),S&&this.setOptions(S),ne._signal("editor",this)};C.$uid=0,function(){U.implement(this,Q),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=z.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(x){if(this.curOp){if(!x||this.curOp.command)return;this.prevOp=this.curOp}x||(this.previousCommand=null,x={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:x.command||{},args:x.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(x){if(this.curOp){if(x&&!1===x.returnValue)return this.curOp=null;if(1==x&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var w=this.curOp.command,S=w&&w.scrollIntoView;if(S){switch(S){case"center-animate":S="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var U=this.selection.getRange(),G=this.renderer.layerConfig;(U.start.row>=G.lastRow||U.end.row<=G.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==S&&this.renderer.animateScrolling(this.curOp.scrollTop)}var z=this.selection.toJSON();this.curOp.selectionAfter=z,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(z),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(x){if(this.$mergeUndoDeltas){var w=this.prevOp,S=this.$mergeableCommands,U=w.command&&x.command.name==w.command.name;if("insertstring"==x.command.name){var G=x.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),U=U&&this.mergeNextCommand&&(!/\s/.test(G)||/\s/.test(w.args)),this.mergeNextCommand=!0}else U=U&&-1!==S.indexOf(x.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(U=!1),U?this.session.mergeUndoDeltas=!0:-1!==S.indexOf(x.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(x,w){if(x&&"string"==typeof x&&"ace"!=x){this.$keybindingId=x;var S=this;ne.loadModule(["keybinding",x],(function(U){S.$keybindingId==x&&S.keyBinding.setKeyboardHandler(U&&U.handler),w&&w()}))}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(x),w&&w()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(x){if(this.session!=x){this.curOp&&this.endOperation(),this.curOp={};var w=this.session;if(w){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var S=this.session.getSelection();S.off("changeCursor",this.$onCursorChange),S.off("changeSelection",this.$onSelectionChange)}this.session=x,x?(this.$onDocumentChange=this.onDocumentChange.bind(this),x.on("change",this.$onDocumentChange),this.renderer.setSession(x),this.$onChangeMode=this.onChangeMode.bind(this),x.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),x.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),x.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),x.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),x.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),x.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=x.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(x)),this._signal("changeSession",{session:x,oldSession:w}),this.curOp=null,w&&w._signal("changeEditor",{oldEditor:this}),x&&x._signal("changeEditor",{editor:this}),x&&x.bgTokenizer&&x.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(x,w){return this.session.doc.setValue(x),w?1==w?this.navigateFileEnd():-1==w&&this.navigateFileStart():this.selectAll(),x},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(x){this.renderer.onResize(x)},this.setTheme=function(x,w){this.renderer.setTheme(x,w)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(x){this.renderer.setStyle(x)},this.unsetStyle=function(x){this.renderer.unsetStyle(x)},this.getFontSize=function(){return this.getOption("fontSize")||G.computedStyle(this.container).fontSize},this.setFontSize=function(x){this.setOption("fontSize",x)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var x=this;this.$highlightPending=!0,setTimeout((function(){x.$highlightPending=!1;var w=x.session;if(w&&w.bgTokenizer){var S=w.findMatchingBracket(x.getCursorPosition());if(S)var U=new J(S.row,S.column,S.row,S.column+1);else w.$mode.getMatching&&(U=w.$mode.getMatching(x.session));U&&(w.$bracketHighlight=w.addMarker(U,"ace_bracket","text"))}}),50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var x=this;this.$highlightTagPending=!0,setTimeout((function(){x.$highlightTagPending=!1;var w=x.session;if(w&&w.bgTokenizer){var S=x.getCursorPosition(),U=new re(x.session,S.row,S.column),G=U.getCurrentToken();if(!G||!/\b(?:tag-open|tag-name)/.test(G.type))return w.removeMarker(w.$tagHighlight),void(w.$tagHighlight=null);if(-1==G.type.indexOf("tag-open")||(G=U.stepForward())){var z=G.value,H=0,j=U.stepBackward();if("<"==j.value)do{j=G,(G=U.stepForward())&&G.value===z&&-1!==G.type.indexOf("tag-name")&&("<"===j.value?H++:"</"===j.value&&H--)}while(G&&H>=0);else{do{G=j,j=U.stepBackward(),G&&G.value===z&&-1!==G.type.indexOf("tag-name")&&("<"===j.value?H++:"</"===j.value&&H--)}while(j&&H<=0);U.stepForward()}if(!G)return w.removeMarker(w.$tagHighlight),void(w.$tagHighlight=null);var X=U.getCurrentTokenRow(),q=U.getCurrentTokenColumn(),K=new J(X,q,X,q+G.value.length),Y=w.$backMarkers[w.$tagHighlight];w.$tagHighlight&&null!=Y&&0!==K.compareRange(Y.range)&&(w.removeMarker(w.$tagHighlight),w.$tagHighlight=null),w.$tagHighlight||(w.$tagHighlight=w.addMarker(K,"ace_bracket","text"))}}}),50)}},this.focus=function(){var x=this;setTimeout((function(){x.isFocused()||x.textInput.focus()})),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(x){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",x))},this.onBlur=function(x){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",x))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(x){var w=this.session.$useWrapMode,S=x.start.row==x.end.row?x.end.row:1/0;this.renderer.updateLines(x.start.row,S,w),this._signal("change",x),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(x){var w=x.data;this.renderer.updateLines(w.first,w.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var x,w=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(x=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(x=!1),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(x=!1)),w.$highlightLineMarker&&!x)w.removeMarker(w.$highlightLineMarker.id),w.$highlightLineMarker=null;else if(!w.$highlightLineMarker&&x){var S=new J(x.row,x.column,x.row,1/0);S.id=w.addMarker(S,"ace_active-line","screenLine"),w.$highlightLineMarker=S}else x&&(w.$highlightLineMarker.start.row=x.row,w.$highlightLineMarker.end.row=x.row,w.$highlightLineMarker.start.column=x.column,w._signal("changeBackMarker"))},this.onSelectionChange=function(x){var w=this.session;if(w.$selectionMarker&&w.removeMarker(w.$selectionMarker),w.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var S=this.selection.getRange(),U=this.getSelectionStyle();w.$selectionMarker=w.addMarker(S,"ace_selection",U)}var G=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(G),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var x=this.session,w=this.getSelectionRange();if(!w.isEmpty()&&!w.isMultiLine()){var S=w.start.column,U=w.end.column,G=x.getLine(w.start.row),z=G.substring(S,U);if(!(z.length>5e3)&&/[\w\d]/.test(z)){var H=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:z}),j=G.substring(S-1,U+1);if(H.test(j))return H}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(x){this.renderer.updateText(),this._emit("changeMode",x)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var x=this.getSelectedText(),w=this.session.doc.getNewLineCharacter(),S=!1;if(!x&&this.$copyWithEmptySelection){S=!0;for(var U=this.selection.getAllRanges(),G=0;G<U.length;G++){var z=U[G];G&&U[G-1].start.row==z.start.row||(x+=this.session.getLine(z.start.row)+w)}}var H={text:x};return this._signal("copy",H),ie.lineMode=S?H.text:"",H.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(x,w){var S={text:x,event:w};this.commands.exec("paste",this,S)},this.$handlePaste=function(x){"string"==typeof x&&(x={text:x}),this._signal("paste",x);var w=x.text,S=w==ie.lineMode,U=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)S?U.insert({row:this.selection.lead.row,column:0},w):this.insert(w);else if(S)this.selection.rangeList.ranges.forEach((function(x){U.insert({row:x.start.row,column:0},w)}));else{var G=w.split(/\r\n|\r|\n/),z=this.selection.rangeList.ranges,H=!(2!=G.length||G[0]&&G[1]);if(G.length!=z.length||H)return this.commands.exec("insertstring",this,w);for(var j=z.length;j--;){var X=z[j];X.isEmpty()||U.remove(X),U.insert(X.start,G[j])}}},this.execCommand=function(x,w){return this.commands.exec(x,this,w)},this.insert=function(x,w){var S=this.session,U=S.getMode(),G=this.getCursorPosition();if(this.getBehavioursEnabled()&&!w){var z=U.transformAction(S.getState(G.row),"insertion",this,S,x);z&&(x!==z.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),x=z.text)}if("\t"==x&&(x=this.session.getTabString()),this.selection.isEmpty())this.session.getOverwrite()&&-1==x.indexOf("\n")&&((H=new J.fromPoints(G,G)).end.column+=x.length,this.session.remove(H));else{var H=this.getSelectionRange();G=this.session.remove(H),this.clearSelection()}if("\n"==x||"\r\n"==x){var j=S.getLine(G.row);if(G.column>j.search(/\S|$/)){var X=j.substr(G.column).search(/\S|$/);S.doc.removeInLine(G.row,G.column,G.column+X)}}this.clearSelection();var q=G.column,K=S.getState(G.row),Y=(j=S.getLine(G.row),U.checkOutdent(K,j,x));if(S.insert(G,x),z&&z.selection&&(2==z.selection.length?this.selection.setSelectionRange(new J(G.row,q+z.selection[0],G.row,q+z.selection[1])):this.selection.setSelectionRange(new J(G.row+z.selection[0],z.selection[1],G.row+z.selection[2],z.selection[3]))),S.getDocument().isNewLine(x)){var Z=U.getNextLineIndent(K,j.slice(0,G.column),S.getTabString());S.insert({row:G.row+1,column:0},Z)}Y&&U.autoOutdent(K,S,G.row)},this.onTextInput=function(x,w){if(!w)return this.keyBinding.onTextInput(x);this.startOperation({command:{name:"insertstring"}});var S=this.applyComposition.bind(this,x,w);this.selection.rangeCount?this.forEachSelection(S):S(),this.endOperation()},this.applyComposition=function(x,w){var S;(w.extendLeft||w.extendRight)&&((S=this.selection.getRange()).start.column-=w.extendLeft,S.end.column+=w.extendRight,this.selection.setRange(S),x||S.isEmpty()||this.remove()),!x&&this.selection.isEmpty()||this.insert(x,!0),(w.restoreStart||w.restoreEnd)&&((S=this.selection.getRange()).start.column-=w.restoreStart,S.end.column-=w.restoreEnd,this.selection.setRange(S))},this.onCommandKey=function(x,w,S){return this.keyBinding.onCommandKey(x,w,S)},this.setOverwrite=function(x){this.session.setOverwrite(x)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(x){this.setOption("scrollSpeed",x)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(x){this.setOption("dragDelay",x)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(x){this.setOption("selectionStyle",x)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(x){this.setOption("highlightActiveLine",x)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(x){this.setOption("highlightGutterLine",x)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(x){this.setOption("highlightSelectedWord",x)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(x){this.renderer.setAnimatedScroll(x)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(x){this.renderer.setShowInvisibles(x)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(x){this.renderer.setDisplayIndentGuides(x)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(x){this.renderer.setShowPrintMargin(x)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(x){this.renderer.setPrintMarginColumn(x)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(x){this.setOption("readOnly",x)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(x){this.setOption("behavioursEnabled",x)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(x){this.setOption("wrapBehavioursEnabled",x)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(x){this.setOption("showFoldWidgets",x)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(x){this.setOption("fadeFoldWidgets",x)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(x){this.selection.isEmpty()&&("left"==x?this.selection.selectLeft():this.selection.selectRight());var w=this.getSelectionRange();if(this.getBehavioursEnabled()){var S=this.session,U=S.getState(w.start.row),G=S.getMode().transformAction(U,"deletion",this,S,w);if(0===w.end.column){var z=S.getTextRange(w);if("\n"==z[z.length-1]){var H=S.getLine(w.end.row);/^\s+$/.test(H)&&(w.end.column=H.length)}}G&&(w=G)}this.session.remove(w),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var x=this.getSelectionRange();x.start.column==x.end.column&&x.start.row==x.end.row&&(x.end.column=0,x.end.row++),this.session.remove(x),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var x=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(x)},this.transposeLetters=function(){if(this.selection.isEmpty()){var x=this.getCursorPosition(),w=x.column;if(0!==w){var S,U,G=this.session.getLine(x.row);w<G.length?(S=G.charAt(w)+G.charAt(w-1),U=new J(x.row,w-1,x.row,w+1)):(S=G.charAt(w-1)+G.charAt(w-2),U=new J(x.row,w-2,x.row,w)),this.session.replace(U,S),this.session.selection.moveToPosition(U.end)}}},this.toLowerCase=function(){var x=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var w=this.getSelectionRange(),S=this.session.getTextRange(w);this.session.replace(w,S.toLowerCase()),this.selection.setSelectionRange(x)},this.toUpperCase=function(){var x=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var w=this.getSelectionRange(),S=this.session.getTextRange(w);this.session.replace(w,S.toUpperCase()),this.selection.setSelectionRange(x)},this.indent=function(){var x=this.session,w=this.getSelectionRange();if(!(w.start.row<w.end.row)){if(w.start.column<w.end.column){var S=x.getTextRange(w);if(!/^\s+$/.test(S))return K=this.$getSelectedRows(),void x.indentRows(K.first,K.last,"\t")}var U=x.getLine(w.start.row),G=w.start,H=x.getTabSize(),j=x.documentToScreenColumn(G.row,G.column);if(this.session.getUseSoftTabs())var X=H-j%H,q=z.stringRepeat(" ",X);else{for(X=j%H;" "==U[w.start.column-1]&&X;)w.start.column--,X--;this.selection.setSelectionRange(w),q="\t"}return this.insert(q)}var K=this.$getSelectedRows();x.indentRows(K.first,K.last,"\t")},this.blockIndent=function(){var x=this.$getSelectedRows();this.session.indentRows(x.first,x.last,"\t")},this.blockOutdent=function(){var x=this.session.getSelection();this.session.outdentRows(x.getRange())},this.sortLines=function(){for(var x=this.$getSelectedRows(),w=this.session,S=[],U=x.first;U<=x.last;U++)S.push(w.getLine(U));S.sort((function(x,w){return x.toLowerCase()<w.toLowerCase()?-1:x.toLowerCase()>w.toLowerCase()?1:0}));var G=new J(0,0,0,0);for(U=x.first;U<=x.last;U++){var z=w.getLine(U);G.start.row=U,G.end.row=U,G.end.column=z.length,w.replace(G,S[U-x.first])}},this.toggleCommentLines=function(){var x=this.session.getState(this.getCursorPosition().row),w=this.$getSelectedRows();this.session.getMode().toggleCommentLines(x,this.session,w.first,w.last)},this.toggleBlockComment=function(){var x=this.getCursorPosition(),w=this.session.getState(x.row),S=this.getSelectionRange();this.session.getMode().toggleBlockComment(w,this.session,S,x)},this.getNumberAt=function(x,w){var S=/[\-]?[0-9]+(?:\.[0-9]+)?/g;S.lastIndex=0;for(var U=this.session.getLine(x);S.lastIndex<w;){var G=S.exec(U);if(G.index<=w&&G.index+G[0].length>=w)return{value:G[0],start:G.index,end:G.index+G[0].length}}return null},this.modifyNumber=function(x){var w=this.selection.getCursor().row,S=this.selection.getCursor().column,U=new J(w,S-1,w,S),G=this.session.getTextRange(U);if(!isNaN(parseFloat(G))&&isFinite(G)){var z=this.getNumberAt(w,S);if(z){var H=z.value.indexOf(".")>=0?z.start+z.value.indexOf(".")+1:z.end,j=z.start+z.value.length-H,X=parseFloat(z.value);X*=Math.pow(10,j),H!==z.end&&S<H?x*=Math.pow(10,z.end-S-1):x*=Math.pow(10,z.end-S),X+=x;var q=(X/=Math.pow(10,j)).toFixed(j),K=new J(w,z.start,w,z.end);this.session.replace(K,q),this.moveCursorTo(w,Math.max(z.start+1,S+q.length-z.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var x=this.selection.getCursor().row,w=this.selection.getCursor().column;this.selection.selectWord();var S=this.getSelectedText(),U=this.selection.getWordRange().start.column,G=S.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),H=w-U-1;H<0&&(H=0);var j=0,X=0,q=this;S.match(/[A-Za-z0-9_]+/)&&G.forEach((function(w,G){X=j+w.length,H>=j&&H<=X&&(S=w,q.selection.clearSelection(),q.moveCursorTo(x,j+U),q.selection.selectTo(x,X+U)),j=X}));for(var K,Y=this.$toggleWordPairs,Z=0;Z<Y.length;Z++)for(var J=Y[Z],Q=0;Q<=1;Q++){var ee=+!Q,te=S.match(new RegExp("^\\s?_?("+z.escapeRegExp(J[Q])+")\\s?$","i"));te&&S.match(new RegExp("([_]|^|\\s)("+z.escapeRegExp(te[1])+")($|\\s)","g"))&&(K=S.replace(new RegExp(z.escapeRegExp(J[Q]),"i"),(function(x){var w=J[ee];return x.toUpperCase()==x?w=w.toUpperCase():x.charAt(0).toUpperCase()==x.charAt(0)&&(w=w.substr(0,0)+J[ee].charAt(0).toUpperCase()+w.substr(1)),w})),this.insert(K),K="")}},this.removeLines=function(){var x=this.$getSelectedRows();this.session.removeFullLines(x.first,x.last),this.clearSelection()},this.duplicateSelection=function(){var x=this.selection,w=this.session,S=x.getRange(),U=x.isBackwards();if(S.isEmpty()){var G=S.start.row;w.duplicateLines(G,G)}else{var z=U?S.start:S.end,H=w.insert(z,w.getTextRange(S),!1);S.start=z,S.end=H,x.setSelectionRange(S,U)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(x,w,S){return this.session.moveText(x,w,S)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(x,w){var S,U,G=this.selection;if(!G.inMultiSelectMode||this.inVirtualSelectionMode){var z=G.toOrientedRange();S=this.$getSelectedRows(z),U=this.session.$moveLines(S.first,S.last,w?0:x),w&&-1==x&&(U=0),z.moveBy(U,0),G.fromOrientedRange(z)}else{var H=G.rangeList.ranges;G.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var j=0,X=0,q=H.length,K=0;K<q;K++){var Y=K;H[K].moveBy(j,0);for(var Z=(S=this.$getSelectedRows(H[K])).first,J=S.last;++K<q;){X&&H[K].moveBy(X,0);var Q=this.$getSelectedRows(H[K]);if(w&&Q.first!=J)break;if(!w&&Q.first>J+1)break;J=Q.last}for(K--,j=this.session.$moveLines(Z,J,w?0:x),w&&-1==x&&(Y=K+1);Y<=K;)H[Y].moveBy(j,0),Y++;w||(j=0),X+=j}G.fromOrientedRange(G.ranges[0]),G.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(x){return x=(x||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(x.start.row),last:this.session.getRowFoldEnd(x.end.row)}},this.onCompositionStart=function(x){this.renderer.showComposition(x)},this.onCompositionUpdate=function(x){this.renderer.setCompositionText(x)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(x){return x>=this.getFirstVisibleRow()&&x<=this.getLastVisibleRow()},this.isRowFullyVisible=function(x){return x>=this.renderer.getFirstFullyVisibleRow()&&x<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(x,w){var S=this.renderer,U=this.renderer.layerConfig,G=x*Math.floor(U.height/U.lineHeight);!0===w?this.selection.$moveSelection((function(){this.moveCursorBy(G,0)})):!1===w&&(this.selection.moveCursorBy(G,0),this.selection.clearSelection());var z=S.scrollTop;S.scrollBy(0,G*U.lineHeight),null!=w&&S.scrollCursorIntoView(null,.5),S.animateScrolling(z)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(x){this.renderer.scrollToRow(x)},this.scrollToLine=function(x,w,S,U){this.renderer.scrollToLine(x,w,S,U)},this.centerSelection=function(){var x=this.getSelectionRange(),w={row:Math.floor(x.start.row+(x.end.row-x.start.row)/2),column:Math.floor(x.start.column+(x.end.column-x.start.column)/2)};this.renderer.alignCursor(w,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(x,w){this.selection.moveCursorTo(x,w)},this.moveCursorToPosition=function(x){this.selection.moveCursorToPosition(x)},this.jumpToMatching=function(x,w){var S=this.getCursorPosition(),U=new re(this.session,S.row,S.column),G=U.getCurrentToken(),z=G||U.stepForward();if(z){var H,j,X=!1,q={},K=S.column-z.start,Y={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(z.value.match(/[{}()\[\]]/g)){for(;K<z.value.length&&!X;K++)if(Y[z.value[K]])switch(j=Y[z.value[K]]+"."+z.type.replace("rparen","lparen"),isNaN(q[j])&&(q[j]=0),z.value[K]){case"(":case"[":case"{":q[j]++;break;case")":case"]":case"}":q[j]--,-1===q[j]&&(H="bracket",X=!0)}}else-1!==z.type.indexOf("tag-name")&&(isNaN(q[z.value])&&(q[z.value]=0),"<"===G.value?q[z.value]++:"</"===G.value&&q[z.value]--,-1===q[z.value]&&(H="tag",X=!0));X||(G=z,z=U.stepForward(),K=0)}while(z&&!X);if(H){var Z,Q;if("bracket"===H)(Z=this.session.getBracketRange(S))||(Q=(Z=new J(U.getCurrentTokenRow(),U.getCurrentTokenColumn()+K-1,U.getCurrentTokenRow(),U.getCurrentTokenColumn()+K-1)).start,(w||Q.row===S.row&&Math.abs(Q.column-S.column)<2)&&(Z=this.session.getBracketRange(Q)));else if("tag"===H){if(!z||-1===z.type.indexOf("tag-name"))return;var ee=z.value;if(0===(Z=new J(U.getCurrentTokenRow(),U.getCurrentTokenColumn()-2,U.getCurrentTokenRow(),U.getCurrentTokenColumn()-2)).compare(S.row,S.column)){X=!1;do{z=G,(G=U.stepBackward())&&(-1!==G.type.indexOf("tag-close")&&Z.setEnd(U.getCurrentTokenRow(),U.getCurrentTokenColumn()+1),z.value===ee&&-1!==z.type.indexOf("tag-name")&&("<"===G.value?q[ee]++:"</"===G.value&&q[ee]--,0===q[ee]&&(X=!0)))}while(G&&!X)}z&&z.type.indexOf("tag-name")&&(Q=Z.start).row==S.row&&Math.abs(Q.column-S.column)<2&&(Q=Z.end)}(Q=Z&&Z.cursor||Q)&&(x?Z&&w?this.selection.setRange(Z):Z&&Z.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(Q.row,Q.column):this.selection.moveTo(Q.row,Q.column))}}},this.gotoLine=function(x,w,S){this.selection.clearSelection(),this.session.unfold({row:x-1,column:w||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(x-1,w||0),this.isRowFullyVisible(x-1)||this.scrollToLine(x-1,!0,S)},this.navigateTo=function(x,w){this.selection.moveTo(x,w)},this.navigateUp=function(x){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var w=this.selection.anchor.getPosition();return this.moveCursorToPosition(w)}this.selection.clearSelection(),this.selection.moveCursorBy(-x||-1,0)},this.navigateDown=function(x){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var w=this.selection.anchor.getPosition();return this.moveCursorToPosition(w)}this.selection.clearSelection(),this.selection.moveCursorBy(x||1,0)},this.navigateLeft=function(x){if(this.selection.isEmpty())for(x=x||1;x--;)this.selection.moveCursorLeft();else{var w=this.getSelectionRange().start;this.moveCursorToPosition(w)}this.clearSelection()},this.navigateRight=function(x){if(this.selection.isEmpty())for(x=x||1;x--;)this.selection.moveCursorRight();else{var w=this.getSelectionRange().end;this.moveCursorToPosition(w)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(x,w){w&&this.$search.set(w);var S=this.$search.find(this.session),U=0;return S?(this.$tryReplace(S,x)&&(U=1),this.selection.setSelectionRange(S),this.renderer.scrollSelectionIntoView(S.start,S.end),U):U},this.replaceAll=function(x,w){w&&this.$search.set(w);var S=this.$search.findAll(this.session),U=0;if(!S.length)return U;var G=this.getSelectionRange();this.selection.moveTo(0,0);for(var z=S.length-1;z>=0;--z)this.$tryReplace(S[z],x)&&U++;return this.selection.setSelectionRange(G),U},this.$tryReplace=function(x,w){var S=this.session.getTextRange(x);return null!==(w=this.$search.replace(S,w))?(x.end=this.session.replace(x,w),x):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(x,w,S){w||(w={}),"string"==typeof x||x instanceof RegExp?w.needle=x:"object"==typeof x&&U.mixin(w,x);var G=this.selection.getRange();null==w.needle&&((x=this.session.getTextRange(G)||this.$search.$options.needle)||(G=this.session.getWordRange(G.start.row,G.start.column),x=this.session.getTextRange(G)),this.$search.set({needle:x})),this.$search.set(w),w.start||this.$search.set({start:G});var z=this.$search.find(this.session);return w.preventScroll?z:z?(this.revealRange(z,S),z):(w.backwards?G.start=G.end:G.end=G.start,void this.selection.setRange(G))},this.findNext=function(x,w){this.find({skipCurrent:!0,backwards:!1},x,w)},this.findPrevious=function(x,w){this.find(x,{skipCurrent:!0,backwards:!0},w)},this.revealRange=function(x,w){this.session.unfold(x),this.selection.setSelectionRange(x);var S=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(x.start,x.end,.5),!1!==w&&this.renderer.animateScrolling(S)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(x){if(x){var w,S=this,U=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var G=this.$scrollAnchor;G.style.cssText="position:absolute",this.container.insertBefore(G,this.container.firstChild);var z=this.on("changeSelection",(function(){U=!0})),H=this.renderer.on("beforeRender",(function(){U&&(w=S.renderer.container.getBoundingClientRect())})),j=this.renderer.on("afterRender",(function(){if(U&&w&&(S.isFocused()||S.searchBox&&S.searchBox.isFocused())){var x=S.renderer,z=x.$cursorLayer.$pixelPos,H=x.layerConfig,j=z.top-H.offset;null!=(U=z.top>=0&&j+w.top<0||!(z.top<H.height&&z.top+w.top+H.lineHeight>window.innerHeight)&&null)&&(G.style.top=j+"px",G.style.left=z.left+"px",G.style.height=H.lineHeight+"px",G.scrollIntoView(U)),U=w=null}}));this.setAutoScrollEditorIntoView=function(x){x||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",z),this.renderer.off("afterRender",j),this.renderer.off("beforeRender",H))}}},this.$resetCursorStyle=function(){var x=this.$cursorStyle||"ace",w=this.renderer.$cursorLayer;w&&(w.setSmoothBlinking(/smooth/.test(x)),w.isBlinking=!this.$readOnly&&"wide"!=x,G.setCssClass(w.element,"ace_slim-cursors",/slim/.test(x)))},this.prompt=function(x,w,S){var U=this;ne.loadModule("./ext/prompt",(function(G){G.prompt(U,x,w,S)}))}}.call(C.prototype),ne.defineOptions(C.prototype,"editor",{selectionStyle:{set:function(x){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:x})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(x){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(x){this.textInput.setReadOnly(x),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(x){this.textInput.setCopyWithEmptySelection(x)},initialValue:!1},cursorStyle:{set:function(x){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(x){this.setAutoScrollEditorIntoView(x)}},keyboardHandler:{set:function(x){this.setKeyboardHandler(x)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(x){this.session.setValue(x)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(x){this.setSession(x)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(x){this.renderer.$gutterLayer.setShowLineNumbers(x),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),x&&this.$relativeLineNumbers?oe.attach(this):oe.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(x){this.$showLineNumbers&&x?oe.attach(this):oe.detach(this)}},placeholder:{set:function(x){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var x=this.renderer.$composition||this.getValue();if(x&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),G.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!x&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),G.addCssClass(this.container,"ace_hasPlaceholder");var w=G.createElement("div");w.className="ace_placeholder",w.textContent=this.$placeholder||"",this.renderer.placeholderNode=w,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var oe={getText:function(x,w){return(Math.abs(x.selection.lead.row-w)||w+1+(w<9?"·":""))+""},getWidth:function(x,w,S){return Math.max(w.toString().length,(S.lastRow+1).toString().length,2)*S.characterWidth},update:function(x,w){w.renderer.$loop.schedule(w.renderer.CHANGE_GUTTER)},attach:function(x){x.renderer.$gutterLayer.$renderer=this,x.on("changeSelection",this.update),this.update(null,x)},detach:function(x){x.renderer.$gutterLayer.$renderer==this&&(x.renderer.$gutterLayer.$renderer=null),x.off("changeSelection",this.update),this.update(null,x)}};w.Editor=C})),ace.define("ace/undomanager",["require","exports","module","ace/range"],(function(x,w,S){"use strict";var i=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(x){this.$session=x},this.add=function(x,w,S){this.$fromUndo||x!=this.$lastDelta&&(!1!==w&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),x.id=this.$rev=++this.$maxRev),"remove"!=x.action&&"insert"!=x.action||(this.$lastDelta=x),this.lastDeltas.push(x))},this.addSelection=function(x,w){this.selections.push({value:x,rev:w||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(x,w){null==w&&(w=this.$rev+1);for(var S=this.$undoStack,U=S.length;U--;){var G=S[U][0];if(G.id<=x)break;G.id<w&&(G.ignore=!0)}this.lastDeltas=null},this.getSelection=function(x,w){for(var S=this.selections,U=S.length;U--;){var G=S[U];if(G.rev<x)return w&&(G=S[U+1]),G}},this.getRevision=function(){return this.$rev},this.getDeltas=function(x,w){null==w&&(w=this.$rev+1);for(var S=this.$undoStack,U=null,G=0,z=S.length;z--;){var H=S[z][0];if(H.id<w&&!U&&(U=z+1),H.id<=x){G=z+1;break}}return S.slice(G,U)},this.getChangedRanges=function(x,w){null==w&&(w=this.$rev+1)},this.getChangedLines=function(x,w){null==w&&(w=this.$rev+1)},this.undo=function(x,w){this.lastDeltas=null;var S=this.$undoStack;if(function(x,w){for(var S=w;S--;){var U=x[S];if(U&&!U[0].ignore){for(;S<w-1;){var G=u(x[S],x[S+1]);x[S]=G[0],x[S+1]=G[1],S++}return!0}}}(S,S.length)){x||(x=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var U=S.pop(),G=null;return U&&U.length&&(G=x.undoChanges(U,w),this.$redoStack.push(U),this.$syncRev()),this.$fromUndo=!1,G}},this.redo=function(x,w){if(this.lastDeltas=null,x||(x=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var S=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);!function(x,w){for(var S=0;S<w.length;S++)for(var U=w[S],G=0;G<U.length;G++)f(x,U[G])}(this.$redoStack,S),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach((function(x){x[0].id=++this.$maxRev}),this)}var U=this.$redoStack.pop(),G=null;return U&&(G=x.redoChanges(U,w),this.$undoStack.push(U),this.$syncRev()),this.$fromUndo=!1,G},this.$syncRev=function(){var x=this.$undoStack,w=x[x.length-1],S=w&&w[0].id||0;this.$redoStackBaseRev=S,this.$rev=S},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(x){null==x&&(x=this.$rev),this.mark=x},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(x){return x?a(x):a(this.$undoStack)+"\n---\n"+a(this.$redoStack)}}).call(i.prototype);var U=x("./range").Range,G=U.comparePoints;function s(x){return{row:x.row,column:x.column}}function a(x){if(x=x||this,Array.isArray(x))return x.map(a).join("\n");var w="";return x.action?(w="insert"==x.action?"+":"-",w+="["+x.lines+"]"):x.value&&(w=Array.isArray(x.value)?x.value.map(c).join("\n"):c(x.value)),x.start&&(w+=c(x)),(x.id||x.rev)&&(w+="\t("+(x.id||x.rev)+")"),w}function c(x){return x.start.row+":"+x.start.column+"=>"+x.end.row+":"+x.end.column}function l(x,w){var S="insert"==x.action,U="insert"==w.action;if(S&&U)if(G(w.start,x.end)>=0)d(w,x,-1);else{if(!(G(w.start,x.start)<=0))return null;d(x,w,1)}else if(S&&!U)if(G(w.start,x.end)>=0)d(w,x,-1);else{if(!(G(w.end,x.start)<=0))return null;d(x,w,-1)}else if(!S&&U)if(G(w.start,x.start)>=0)d(w,x,1);else{if(!(G(w.start,x.start)<=0))return null;d(x,w,1)}else if(!S&&!U)if(G(w.start,x.start)>=0)d(w,x,1);else{if(!(G(w.end,x.start)<=0))return null;d(x,w,-1)}return[w,x]}function u(x,w){for(var S=x.length;S--;)for(var U=0;U<w.length;U++)if(!l(x[S],w[U])){for(;S<x.length;){for(;U--;)l(w[U],x[S]);U=w.length,S++}return[x,w]}return x.selectionBefore=w.selectionBefore=x.selectionAfter=w.selectionAfter=null,[w,x]}function h(x,w){var S="insert"==x.action,z="insert"==w.action;if(S&&z)G(x.start,w.start)<0?d(w,x,1):d(x,w,1);else if(S&&!z)G(x.start,w.end)>=0?d(x,w,-1):(G(x.start,w.start)<=0||d(x,U.fromPoints(w.start,x.start),-1),d(w,x,1));else if(!S&&z)G(w.start,x.end)>=0?d(w,x,-1):(G(w.start,x.start)<=0||d(w,U.fromPoints(x.start,w.start),-1),d(x,w,1));else if(!S&&!z)if(G(w.start,x.end)>=0)d(w,x,-1);else{var H,j;if(!(G(w.end,x.start)<=0))return G(x.start,w.start)<0&&(H=x,x=m(x,w.start)),G(x.end,w.end)>0&&(j=m(x,w.end)),p(w.end,x.start,x.end,-1),j&&!H&&(x.lines=j.lines,x.start=j.start,x.end=j.end,j=x),[w,H,j].filter(Boolean);d(x,w,-1)}return[w,x]}function d(x,w,S){p(x.start,w.start,w.end,S),p(x.end,w.start,w.end,S)}function p(x,w,S,U){x.row==(1==U?w:S).row&&(x.column+=U*(S.column-w.column)),x.row+=U*(S.row-w.row)}function m(x,w){var S=x.lines,U=x.end;x.end=s(w);var G=x.end.row-x.start.row,z=S.splice(G,S.length),H=G?w.column:w.column-x.start.column;return S.push(z[0].substring(0,H)),z[0]=z[0].substr(H),{start:s(w),end:U,lines:z,action:x.action}}function f(x,w){w=function(x){return{start:s(x.start),end:s(x.end),action:x.action,lines:x.lines.slice()}}(w);for(var S=x.length;S--;){for(var U=x[S],G=0;G<U.length;G++){var z=h(U[G],w);w=z[0],2!=z.length&&(z[2]?(U.splice(G+1,1,z[1],z[2]),G++):z[1]||(U.splice(G,1),G--))}U.length||x.splice(S,1)}return x}U.comparePoints,w.UndoManager=i})),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],(function(x,w,S){"use strict";var U=x("../lib/dom"),r=function(x,w){this.element=x,this.canvasHeight=w||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(x){U.translate(this.element,0,-x.firstRowScreen*x.lineHeight%this.canvasHeight-x.offset*this.$offsetCoefficient)},this.pageChanged=function(x,w){return Math.floor(x.firstRowScreen*x.lineHeight/this.canvasHeight)!==Math.floor(w.firstRowScreen*w.lineHeight/this.canvasHeight)},this.computeLineTop=function(x,w,S){var U=w.firstRowScreen*w.lineHeight,G=Math.floor(U/this.canvasHeight);return S.documentToScreenRow(x,0)*w.lineHeight-G*this.canvasHeight},this.computeLineHeight=function(x,w,S){return w.lineHeight*S.getRowLength(x)},this.getLength=function(){return this.cells.length},this.get=function(x){return this.cells[x]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(x){if(Array.isArray(x)){this.cells.push.apply(this.cells,x);for(var w=U.createFragment(this.element),S=0;S<x.length;S++)w.appendChild(x[S].element);this.element.appendChild(w)}else this.cells.push(x),this.element.appendChild(x.element)},this.unshift=function(x){if(Array.isArray(x)){this.cells.unshift.apply(this.cells,x);for(var w=U.createFragment(this.element),S=0;S<x.length;S++)w.appendChild(x[S].element);this.element.firstChild?this.element.insertBefore(w,this.element.firstChild):this.element.appendChild(w)}else this.cells.unshift(x),this.element.insertAdjacentElement("afterbegin",x.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(x){x&&(x.element.remove(),this.cellCache.push(x))},this.createCell=function(x,w,S,G){var z=this.cellCache.pop();if(!z){var H=U.createElement("div");G&&G(H),this.element.appendChild(H),z={element:H,text:"",row:x}}return z.row=x,z}}).call(r.prototype),w.Lines=r})),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],(function(x,w,S){"use strict";var G=x("../lib/dom"),z=x("../lib/oop"),H=x("../lib/lang"),j=x("../lib/event_emitter").EventEmitter,X=x("./lines").Lines,c=function(x){this.element=G.createElement("div"),this.element.className="ace_layer ace_gutter-layer",x.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new X(this.element),this.$lines.$offsetCoefficient=1};function l(x){var w=document.createTextNode("");x.appendChild(w);var S=G.createElement("span");return x.appendChild(S),x}(function(){z.implement(this,j),this.setSession=function(x){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=x,x&&x.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(x,w){window.console&&U.warn&&U.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(x,w)},this.removeGutterDecoration=function(x,w){window.console&&U.warn&&U.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(x,w)},this.setAnnotations=function(x){this.$annotations=[];for(var w=0;w<x.length;w++){var S=x[w],U=S.row,G=this.$annotations[U];G||(G=this.$annotations[U]={text:[]});var z=S.text;z=z?H.escapeHTML(z):S.html||"",-1===G.text.indexOf(z)&&G.text.push(z);var j=S.type;"error"==j?G.className=" ace_error":"warning"==j&&" ace_error"!=G.className?G.className=" ace_warning":"info"!=j||G.className||(G.className=" ace_info")}},this.$updateAnnotations=function(x){if(this.$annotations.length){var w=x.start.row,S=x.end.row-w;if(0===S);else if("remove"==x.action)this.$annotations.splice(w,S+1,null);else{var U=new Array(S+1);U.unshift(w,1),this.$annotations.splice.apply(this.$annotations,U)}}},this.update=function(x){this.config=x;var w=this.session,S=x.firstRow,U=Math.min(x.lastRow+x.gutterOffset,w.getLength()-1);this.oldLastRow=U,this.config=x,this.$lines.moveContainer(x),this.$updateCursorRow();for(var G=w.getNextFoldLine(S),z=G?G.start.row:1/0,H=null,j=-1,X=S;;){if(X>z&&(X=G.end.row+1,z=(G=w.getNextFoldLine(X,G))?G.start.row:1/0),X>U){for(;this.$lines.getLength()>j+1;)this.$lines.pop();break}(H=this.$lines.get(++j))?H.row=X:(H=this.$lines.createCell(X,x,this.session,l),this.$lines.push(H)),this.$renderCell(H,x,G,X),X++}this._signal("afterRender"),this.$updateGutterWidth(x)},this.$updateGutterWidth=function(x){var w=this.session,S=w.gutterRenderer||this.$renderer,U=w.$firstLineNumber,G=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||w.$useWrapMode)&&(G=w.getLength()+U-1);var z=S?S.getWidth(w,G,x):G.toString().length*x.characterWidth,H=this.$padding||this.$computePadding();(z+=H.left+H.right)===this.gutterWidth||isNaN(z)||(this.gutterWidth=z,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",z))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var x=this.session.selection.getCursor();this.$cursorRow!==x.row&&(this.$cursorRow=x.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var x=this.session.selection.cursor.row;if(this.$cursorRow=x,!this.$cursorCell||this.$cursorCell.row!=x){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var w=this.$lines.cells;this.$cursorCell=null;for(var S=0;S<w.length;S++){var U=w[S];if(U.row>=this.$cursorRow){if(U.row>this.$cursorRow){var G=this.session.getFoldLine(this.$cursorRow);if(!(S>0&&G&&G.start.row==w[S-1].row))break;U=w[S-1]}U.element.className="ace_gutter-active-line "+U.element.className,this.$cursorCell=U;break}}}}},this.scrollLines=function(x){var w=this.config;if(this.config=x,this.$updateCursorRow(),this.$lines.pageChanged(w,x))return this.update(x);this.$lines.moveContainer(x);var S=Math.min(x.lastRow+x.gutterOffset,this.session.getLength()-1),U=this.oldLastRow;if(this.oldLastRow=S,!w||U<x.firstRow)return this.update(x);if(S<w.firstRow)return this.update(x);if(w.firstRow<x.firstRow)for(var G=this.session.getFoldedRowCount(w.firstRow,x.firstRow-1);G>0;G--)this.$lines.shift();if(U>S)for(G=this.session.getFoldedRowCount(S+1,U);G>0;G--)this.$lines.pop();x.firstRow<w.firstRow&&this.$lines.unshift(this.$renderLines(x,x.firstRow,w.firstRow-1)),S>U&&this.$lines.push(this.$renderLines(x,U+1,S)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(x)},this.$renderLines=function(x,w,S){for(var U=[],G=w,z=this.session.getNextFoldLine(G),H=z?z.start.row:1/0;G>H&&(G=z.end.row+1,H=(z=this.session.getNextFoldLine(G,z))?z.start.row:1/0),!(G>S);){var j=this.$lines.createCell(G,x,this.session,l);this.$renderCell(j,x,z,G),U.push(j),G++}return U},this.$renderCell=function(x,w,S,U){var z=x.element,H=this.session,j=z.childNodes[0],X=z.childNodes[1],q=H.$firstLineNumber,K=H.$breakpoints,Y=H.$decorations,Z=H.gutterRenderer||this.$renderer,J=this.$showFoldWidgets&&H.foldWidgets,Q=S?S.start.row:Number.MAX_VALUE,ee="ace_gutter-cell ";if(this.$highlightGutterLine&&(U==this.$cursorRow||S&&U<this.$cursorRow&&U>=Q&&this.$cursorRow<=S.end.row)&&(ee+="ace_gutter-active-line ",this.$cursorCell!=x&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=x)),K[U]&&(ee+=K[U]),Y[U]&&(ee+=Y[U]),this.$annotations[U]&&(ee+=this.$annotations[U].className),z.className!=ee&&(z.className=ee),J){var te=J[U];null==te&&(te=J[U]=H.getFoldWidget(U))}if(te){ee="ace_fold-widget ace_"+te,"start"==te&&U==Q&&U<S.end.row?ee+=" ace_closed":ee+=" ace_open",X.className!=ee&&(X.className=ee);var ne=w.lineHeight+"px";G.setStyle(X.style,"height",ne),G.setStyle(X.style,"display","inline-block")}else X&&G.setStyle(X.style,"display","none");var re=(Z?Z.getText(H,U):U+q).toString();return re!==j.data&&(j.data=re),G.setStyle(x.element.style,"height",this.$lines.computeLineHeight(U,w,H)+"px"),G.setStyle(x.element.style,"top",this.$lines.computeLineTop(U,w,H)+"px"),x.text=re,x},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(x){this.$highlightGutterLine=x},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(x){this.$renderer=!x&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(x){x?G.addCssClass(this.element,"ace_folding-enabled"):G.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=x,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var x=G.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(x.borderLeftWidth)||0)+(parseInt(x.paddingLeft)||0)+1,this.$padding.right=(parseInt(x.borderRightWidth)||0)+(parseInt(x.paddingRight)||0),this.$padding},this.getRegion=function(x){var w=this.$padding||this.$computePadding(),S=this.element.getBoundingClientRect();return x.x<w.left+S.left?"markers":this.$showFoldWidgets&&x.x>S.right-w.right?"foldWidgets":void 0}}).call(c.prototype),w.Gutter=c})),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],(function(x,w,S){"use strict";var U=x("../range").Range,G=x("../lib/dom"),o=function(x){this.element=G.createElement("div"),this.element.className="ace_layer ace_marker-layer",x.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(x){this.$padding=x},this.setSession=function(x){this.session=x},this.setMarkers=function(x){this.markers=x},this.elt=function(x,w){var S=-1!=this.i&&this.element.childNodes[this.i];S?this.i++:(S=document.createElement("div"),this.element.appendChild(S),this.i=-1),S.style.cssText=w,S.className=x},this.update=function(x){if(x){var w;for(var S in this.config=x,this.i=0,this.markers){var U=this.markers[S];if(U.range){var G=U.range.clipRows(x.firstRow,x.lastRow);if(!G.isEmpty())if(G=G.toScreenRange(this.session),U.renderer){var z=this.$getTop(G.start.row,x),H=this.$padding+G.start.column*x.characterWidth;U.renderer(w,G,H,z,x)}else"fullLine"==U.type?this.drawFullLineMarker(w,G,U.clazz,x):"screenLine"==U.type?this.drawScreenLineMarker(w,G,U.clazz,x):G.isMultiLine()?"text"==U.type?this.drawTextMarker(w,G,U.clazz,x):this.drawMultiLineMarker(w,G,U.clazz,x):this.drawSingleLineMarker(w,G,U.clazz+" ace_start ace_br15",x)}else U.update(w,this,this.session,x)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(x,w){return(x-w.firstRowScreen)*w.lineHeight},this.drawTextMarker=function(x,w,S,G,z){for(var H=this.session,j=w.start.row,X=w.end.row,q=j,K=0,Y=0,Z=H.getScreenLastRowColumn(q),J=new U(q,w.start.column,q,Y);q<=X;q++)J.start.row=J.end.row=q,J.start.column=q==j?w.start.column:H.getRowWrapIndent(q),J.end.column=Z,K=Y,Y=Z,Z=q+1<X?H.getScreenLastRowColumn(q+1):q==X?0:w.end.column,this.drawSingleLineMarker(x,J,S+(q==j?" ace_start":"")+" ace_br"+((q==j||q==j+1&&w.start.column?1:0)|(K<Y?2:0)|(Y>Z?4:0)|(q==X?8:0)),G,q==X?0:1,z)},this.drawMultiLineMarker=function(x,w,S,U,G){var z=this.$padding,H=U.lineHeight,j=this.$getTop(w.start.row,U),X=z+w.start.column*U.characterWidth;if(G=G||"",this.session.$bidiHandler.isBidiRow(w.start.row)?((q=w.clone()).end.row=q.start.row,q.end.column=this.session.getLine(q.start.row).length,this.drawBidiSingleLineMarker(x,q,S+" ace_br1 ace_start",U,null,G)):this.elt(S+" ace_br1 ace_start","height:"+H+"px;right:0;top:"+j+"px;left:"+X+"px;"+(G||"")),this.session.$bidiHandler.isBidiRow(w.end.row)){var q;(q=w.clone()).start.row=q.end.row,q.start.column=0,this.drawBidiSingleLineMarker(x,q,S+" ace_br12",U,null,G)}else{j=this.$getTop(w.end.row,U);var K=w.end.column*U.characterWidth;this.elt(S+" ace_br12","height:"+H+"px;width:"+K+"px;top:"+j+"px;left:"+z+"px;"+(G||""))}if(!((H=(w.end.row-w.start.row-1)*U.lineHeight)<=0)){j=this.$getTop(w.start.row+1,U);var Y=(w.start.column?1:0)|(w.end.column?0:8);this.elt(S+(Y?" ace_br"+Y:""),"height:"+H+"px;right:0;top:"+j+"px;left:"+z+"px;"+(G||""))}},this.drawSingleLineMarker=function(x,w,S,U,G,z){if(this.session.$bidiHandler.isBidiRow(w.start.row))return this.drawBidiSingleLineMarker(x,w,S,U,G,z);var H=U.lineHeight,j=(w.end.column+(G||0)-w.start.column)*U.characterWidth,X=this.$getTop(w.start.row,U),q=this.$padding+w.start.column*U.characterWidth;this.elt(S,"height:"+H+"px;width:"+j+"px;top:"+X+"px;left:"+q+"px;"+(z||""))},this.drawBidiSingleLineMarker=function(x,w,S,U,G,z){var H=U.lineHeight,j=this.$getTop(w.start.row,U),X=this.$padding;this.session.$bidiHandler.getSelections(w.start.column,w.end.column).forEach((function(x){this.elt(S,"height:"+H+"px;width:"+x.width+(G||0)+"px;top:"+j+"px;left:"+(X+x.left)+"px;"+(z||""))}),this)},this.drawFullLineMarker=function(x,w,S,U,G){var z=this.$getTop(w.start.row,U),H=U.lineHeight;w.start.row!=w.end.row&&(H+=this.$getTop(w.end.row,U)-z),this.elt(S,"height:"+H+"px;top:"+z+"px;left:0;right:0;"+(G||""))},this.drawScreenLineMarker=function(x,w,S,U,G){var z=this.$getTop(w.start.row,U),H=U.lineHeight;this.elt(S,"height:"+H+"px;top:"+z+"px;left:0;right:0;"+(G||""))}}).call(o.prototype),w.Marker=o})),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],(function(x,w,S){"use strict";var U=x("../lib/oop"),G=x("../lib/dom"),z=x("../lib/lang"),H=x("./lines").Lines,j=x("../lib/event_emitter").EventEmitter,c=function(x){this.dom=G,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",x.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new H(this.element)};(function(){U.implement(this,j),this.EOF_CHAR="¶",this.EOL_CHAR_LF="¬",this.EOL_CHAR_CRLF="¤",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="—",this.SPACE_CHAR="·",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var x=this.session.doc,w="\n"==x.getNewLineCharacter()&&"windows"!=x.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=w)return this.EOL_CHAR=w,!0},this.setPadding=function(x){this.$padding=x,this.element.style.margin="0 "+x+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(x){this.$fontMetrics=x,this.$fontMetrics.on("changeCharacterSize",function(x){this._signal("changeCharacterSize",x)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(x){this.session=x,x&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(x){return this.showInvisibles!=x&&(this.showInvisibles=x,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(x){return this.displayIndentGuides!=x&&(this.displayIndentGuides=x,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var x=this.session.getTabSize();this.tabSize=x;for(var w=this.$tabStrings=[0],S=1;S<x+1;S++)this.showInvisibles?((U=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",U.textContent=z.stringRepeat(this.TAB_CHAR,S),w.push(U)):w.push(this.dom.createTextNode(z.stringRepeat(" ",S),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var U,G="ace_indent-guide",H="",j="";if(this.showInvisibles){G+=" ace_invisible",H=" ace_invisible_space",j=" ace_invisible_tab";var X=z.stringRepeat(this.SPACE_CHAR,this.tabSize),q=z.stringRepeat(this.TAB_CHAR,this.tabSize)}else q=X=z.stringRepeat(" ",this.tabSize);(U=this.dom.createElement("span")).className=G+H,U.textContent=X,this.$tabStrings[" "]=U,(U=this.dom.createElement("span")).className=G+j,U.textContent=q,this.$tabStrings["\t"]=U}},this.updateLines=function(x,w,S){if(this.config.lastRow!=x.lastRow||this.config.firstRow!=x.firstRow)return this.update(x);this.config=x;for(var U=Math.max(w,x.firstRow),G=Math.min(S,x.lastRow),z=this.element.childNodes,H=0,j=x.firstRow;j<U;j++){if(X=this.session.getFoldLine(j)){if(X.containsRow(U)){U=X.start.row;break}j=X.end.row}H++}for(var X,q=!1,K=(j=U,(X=this.session.getNextFoldLine(j))?X.start.row:1/0);j>K&&(j=X.end.row+1,K=(X=this.session.getNextFoldLine(j,X))?X.start.row:1/0),!(j>G);){var Y=z[H++];if(Y){this.dom.removeChildren(Y),this.$renderLine(Y,j,j==K&&X),q&&(Y.style.top=this.$lines.computeLineTop(j,x,this.session)+"px");var Z=x.lineHeight*this.session.getRowLength(j)+"px";Y.style.height!=Z&&(q=!0,Y.style.height=Z)}j++}if(q)for(;H<this.$lines.cells.length;){var J=this.$lines.cells[H++];J.element.style.top=this.$lines.computeLineTop(J.row,x,this.session)+"px"}},this.scrollLines=function(x){var w=this.config;if(this.config=x,this.$lines.pageChanged(w,x))return this.update(x);this.$lines.moveContainer(x);var S=x.lastRow,U=w?w.lastRow:-1;if(!w||U<x.firstRow)return this.update(x);if(S<w.firstRow)return this.update(x);if(!w||w.lastRow<x.firstRow)return this.update(x);if(x.lastRow<w.firstRow)return this.update(x);if(w.firstRow<x.firstRow)for(var G=this.session.getFoldedRowCount(w.firstRow,x.firstRow-1);G>0;G--)this.$lines.shift();if(w.lastRow>x.lastRow)for(G=this.session.getFoldedRowCount(x.lastRow+1,w.lastRow);G>0;G--)this.$lines.pop();x.firstRow<w.firstRow&&this.$lines.unshift(this.$renderLinesFragment(x,x.firstRow,w.firstRow-1)),x.lastRow>w.lastRow&&this.$lines.push(this.$renderLinesFragment(x,w.lastRow+1,x.lastRow))},this.$renderLinesFragment=function(x,w,S){for(var U=[],z=w,H=this.session.getNextFoldLine(z),j=H?H.start.row:1/0;z>j&&(z=H.end.row+1,j=(H=this.session.getNextFoldLine(z,H))?H.start.row:1/0),!(z>S);){var X=this.$lines.createCell(z,x,this.session),q=X.element;this.dom.removeChildren(q),G.setStyle(q.style,"height",this.$lines.computeLineHeight(z,x,this.session)+"px"),G.setStyle(q.style,"top",this.$lines.computeLineTop(z,x,this.session)+"px"),this.$renderLine(q,z,z==j&&H),this.$useLineGroups()?q.className="ace_line_group":q.className="ace_line",U.push(X),z++}return U},this.update=function(x){this.$lines.moveContainer(x),this.config=x;for(var w=x.firstRow,S=x.lastRow,U=this.$lines;U.getLength();)U.pop();U.push(this.$renderLinesFragment(x,w,S))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(x,w,S,U){for(var G,H=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,j=this.dom.createFragment(this.element),X=0;G=H.exec(U);){var q=G[1],K=G[2],Y=G[3],Z=G[4],J=G[5];if(this.showInvisibles||!K){var Q=X!=G.index?U.slice(X,G.index):"";if(X=G.index+G[0].length,Q&&j.appendChild(this.dom.createTextNode(Q,this.element)),q){var ee=this.session.getScreenTabSize(w+G.index);j.appendChild(this.$tabStrings[ee].cloneNode(!0)),w+=ee-1}else K?this.showInvisibles?((ne=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",ne.textContent=z.stringRepeat(this.SPACE_CHAR,K.length),j.appendChild(ne)):j.appendChild(this.com.createTextNode(K,this.element)):Y?((ne=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",ne.textContent=z.stringRepeat(this.SPACE_CHAR,Y.length),j.appendChild(ne)):Z?(w+=1,(ne=this.dom.createElement("span")).style.width=2*this.config.characterWidth+"px",ne.className=this.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",ne.textContent=this.showInvisibles?this.SPACE_CHAR:Z,j.appendChild(ne)):J&&(w+=1,(ne=this.dom.createElement("span")).style.width=2*this.config.characterWidth+"px",ne.className="ace_cjk",ne.textContent=J,j.appendChild(ne))}}if(j.appendChild(this.dom.createTextNode(X?U.slice(X):U,this.element)),this.$textToken[S.type])x.appendChild(j);else{var te="ace_"+S.type.replace(/\./g," ace_"),ne=this.dom.createElement("span");"fold"==S.type&&(ne.style.width=S.value.length*this.config.characterWidth+"px"),ne.className=te,ne.appendChild(j),x.appendChild(ne)}return w+U.length},this.renderIndentGuide=function(x,w,S){var U=w.search(this.$indentGuideRe);if(U<=0||U>=S)return w;if(" "==w[0]){for(var G=(U-=U%this.tabSize)/this.tabSize,z=0;z<G;z++)x.appendChild(this.$tabStrings[" "].cloneNode(!0));return w.substr(U)}if("\t"==w[0]){for(z=0;z<U;z++)x.appendChild(this.$tabStrings["\t"].cloneNode(!0));return w.substr(U)}return w},this.$createLineElement=function(x){var w=this.dom.createElement("div");return w.className="ace_line",w.style.height=this.config.lineHeight+"px",w},this.$renderWrappedLine=function(x,w,S){var U=0,G=0,H=S[0],j=0,X=this.$createLineElement();x.appendChild(X);for(var q=0;q<w.length;q++){var K=w[q],Y=K.value;if(0==q&&this.displayIndentGuides){if(U=Y.length,!(Y=this.renderIndentGuide(X,Y,H)))continue;U-=Y.length}if(U+Y.length<H)j=this.$renderToken(X,j,K,Y),U+=Y.length;else{for(;U+Y.length>=H;)j=this.$renderToken(X,j,K,Y.substring(0,H-U)),Y=Y.substring(H-U),U=H,X=this.$createLineElement(),x.appendChild(X),X.appendChild(this.dom.createTextNode(z.stringRepeat(" ",S.indent),this.element)),j=0,H=S[++G]||Number.MAX_VALUE;0!=Y.length&&(U+=Y.length,j=this.$renderToken(X,j,K,Y))}}S[S.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(X,j,null,"",!0)},this.$renderSimpleLine=function(x,w){var S=0,U=w[0],G=U.value;this.displayIndentGuides&&(G=this.renderIndentGuide(x,G)),G&&(S=this.$renderToken(x,S,U,G));for(var z=1;z<w.length;z++){if(S+(G=(U=w[z]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(x,S,U,G);S=this.$renderToken(x,S,U,G)}},this.$renderOverflowMessage=function(x,w,S,U,G){S&&this.$renderToken(x,w,S,U.slice(0,this.MAX_LINE_LENGTH-w));var z=this.dom.createElement("span");z.className="ace_inline_button ace_keyword ace_toggle_wrap",z.textContent=G?"<hide>":"<click to see more...>",x.appendChild(z)},this.$renderLine=function(x,w,S){if(S||0==S||(S=this.session.getFoldLine(w)),S)var U=this.$getFoldLineTokens(w,S);else U=this.session.getTokens(w);var G=x;if(U.length){var z=this.session.getRowSplitData(w);z&&z.length?(this.$renderWrappedLine(x,U,z),G=x.lastChild):(G=x,this.$useLineGroups()&&(G=this.$createLineElement(),x.appendChild(G)),this.$renderSimpleLine(G,U))}else this.$useLineGroups()&&(G=this.$createLineElement(),x.appendChild(G));if(this.showInvisibles&&G){S&&(w=S.end.row);var H=this.dom.createElement("span");H.className="ace_invisible ace_invisible_eol",H.textContent=w==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,G.appendChild(H)}},this.$getFoldLineTokens=function(x,w){var S=this.session,U=[],G=S.getTokens(x);return w.walk((function(x,w,z,H,j){null!=x?U.push({type:"fold",value:x}):(j&&(G=S.getTokens(w)),G.length&&function(x,w,S){for(var G=0,z=0;z+x[G].value.length<w;)if(z+=x[G].value.length,++G==x.length)return;for(z!=w&&((H=x[G].value.substring(w-z)).length>S-w&&(H=H.substring(0,S-w)),U.push({type:x[G].type,value:H}),z=w+H.length,G+=1);z<S&&G<x.length;){var H;(H=x[G].value).length+z>S?U.push({type:x[G].type,value:H.substring(0,S-z)}):U.push(x[G]),z+=H.length,G+=1}}(G,H,z))}),w.end.row,this.session.getLine(w.end.row).length),U},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(c.prototype),w.Text=c})),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],(function(x,w,S){"use strict";var U=x("../lib/dom"),r=function(x){this.element=U.createElement("div"),this.element.className="ace_layer ace_cursor-layer",x.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),U.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(x){for(var w=this.cursors,S=w.length;S--;)U.setStyle(w[S].style,"opacity",x?"":"0")},this.$startCssAnimation=function(){for(var x=this.cursors,w=x.length;w--;)x[w].style.animationDuration=this.blinkInterval+"ms";setTimeout(function(){U.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){U.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(x){this.$padding=x},this.setSession=function(x){this.session=x},this.setBlinking=function(x){x!=this.isBlinking&&(this.isBlinking=x,this.restartTimer())},this.setBlinkInterval=function(x){x!=this.blinkInterval&&(this.blinkInterval=x,this.restartTimer())},this.setSmoothBlinking=function(x){x!=this.smoothBlinking&&(this.smoothBlinking=x,U.setCssClass(this.element,"ace_smooth-blinking",x),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var x=U.createElement("div");return x.className="ace_cursor",this.element.appendChild(x),this.cursors.push(x),x},this.removeCursor=function(){if(this.cursors.length>1){var x=this.cursors.pop();return x.parentNode.removeChild(x),x}},this.hideCursor=function(){this.isVisible=!1,U.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,U.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var x=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&U.removeCssClass(this.element,"ace_smooth-blinking"),x(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&setTimeout(function(){U.addCssClass(this.element,"ace_smooth-blinking")}.bind(this)),U.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var w=function(){this.timeoutId=setTimeout((function(){x(!1)}),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval((function(){x(!0),w()}),this.blinkInterval),w()}else this.$stopCssAnimation()},this.getPixelPosition=function(x,w){if(!this.config||!this.session)return{left:0,top:0};x||(x=this.session.selection.getCursor());var S=this.session.documentToScreenPosition(x);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(S.row,x.row)?this.session.$bidiHandler.getPosLeft(S.column):S.column*this.config.characterWidth),top:(S.row-(w?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(x,w){return x.top>=0&&x.top<w.maxHeight},this.update=function(x){this.config=x;var w=this.session.$selectionMarkers,S=0,G=0;void 0!==w&&0!==w.length||(w=[{cursor:null}]),S=0;for(var z=w.length;S<z;S++){var H=this.getPixelPosition(w[S].cursor,!0);if(!((H.top>x.height+x.offset||H.top<0)&&S>1)){var j=this.cursors[G++]||this.addCursor(),X=j.style;this.drawCursor?this.drawCursor(j,H,x,w[S],this.session):this.isCursorInView(H,x)?(U.setStyle(X,"display","block"),U.translate(j,H.left,H.top),U.setStyle(X,"width",Math.round(x.characterWidth)+"px"),U.setStyle(X,"height",x.lineHeight+"px")):U.setStyle(X,"display","none")}}for(;this.cursors.length>G;)this.removeCursor();var q=this.session.getOverwrite();this.$setOverwrite(q),this.$pixelPos=H,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(x){x!=this.overwrite&&(this.overwrite=x,x?U.addCssClass(this.element,"ace_overwrite-cursors"):U.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(r.prototype),w.Cursor=r})),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],(function(x,w,S){"use strict";var U=x("./lib/oop"),G=x("./lib/dom"),z=x("./lib/event"),H=x("./lib/event_emitter").EventEmitter,a=function(x){this.element=G.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=G.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent=" ",this.element.appendChild(this.inner),x.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,z.addListener(this.element,"scroll",this.onScroll.bind(this)),z.addListener(this.element,"mousedown",z.preventDefault)};(function(){U.implement(this,H),this.setVisible=function(x){this.element.style.display=x?"":"none",this.isVisible=x,this.coeff=1}}).call(a.prototype);var c=function(x,w){a.call(this,x),this.scrollTop=0,this.scrollHeight=0,w.$scrollbarWidth=this.width=G.scrollbarWidth(x.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};U.inherits(c,a),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var x=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-x)/(this.coeff-x)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(x){this.element.style.height=x+"px"},this.setInnerHeight=this.setScrollHeight=function(x){this.scrollHeight=x,x>32768?(this.coeff=32768/x,x=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=x+"px"},this.setScrollTop=function(x){this.scrollTop!=x&&(this.skipEvent=!0,this.scrollTop=x,this.element.scrollTop=x*this.coeff)}}.call(c.prototype);var l=function(x,w){a.call(this,x),this.scrollLeft=0,this.height=w.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};U.inherits(l,a),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(x){this.element.style.width=x+"px"},this.setInnerWidth=function(x){this.inner.style.width=x+"px"},this.setScrollWidth=function(x){this.inner.style.width=x+"px"},this.setScrollLeft=function(x){this.scrollLeft!=x&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=x)}}.call(l.prototype),w.ScrollBar=c,w.ScrollBarV=c,w.ScrollBarH=l,w.VScrollBar=c,w.HScrollBar=l})),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],(function(x,w,S){"use strict";var U=x("./lib/event"),r=function(x,w){this.onRender=x,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=w||window;var S=this;this._flush=function(x){S.pending=!1;var w=S.changes;if(w&&(U.blockIdle(100),S.changes=0,S.onRender(w)),S.changes){if(S.$recursionLimit--<0)return;S.schedule()}else S.$recursionLimit=2}};(function(){this.schedule=function(x){this.changes=this.changes|x,this.changes&&!this.pending&&(U.nextFrame(this._flush),this.pending=!0)},this.clear=function(x){var w=this.changes;return this.changes=0,w}}).call(r.prototype),w.RenderLoop=r})),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],(function(x,w,S){var U=x("../lib/oop"),G=x("../lib/dom"),z=x("../lib/lang"),H=x("../lib/event"),j=x("../lib/useragent"),X=x("../lib/event_emitter").EventEmitter,q="function"==typeof ResizeObserver,K=200,Y=w.FontMetrics=function(x){this.el=G.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=G.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=G.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),x.appendChild(this.el),this.$measureNode.innerHTML=z.stringRepeat("X",256),this.$characterSize={width:0,height:0},q?this.$addObserver():this.checkForSizeChanges()};(function(){U.implement(this,X),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(x,w){x.width=x.height="auto",x.left=x.top="0px",x.visibility="hidden",x.position="absolute",x.whiteSpace="pre",j.isIE<8?x["font-family"]="inherit":x.font="inherit",x.overflow=w?"hidden":"visible"},this.checkForSizeChanges=function(x){if(void 0===x&&(x=this.$measureSizes()),x&&(this.$characterSize.width!==x.width||this.$characterSize.height!==x.height)){this.$measureNode.style.fontWeight="bold";var w=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=x,this.charSizes=Object.create(null),this.allowBoldFonts=w&&w.width===x.width&&w.height===x.height,this._emit("changeCharacterSize",{data:x})}},this.$addObserver=function(){var x=this;this.$observer=new window.ResizeObserver((function(w){var S=w[0].contentRect;x.checkForSizeChanges({height:S.height,width:S.width/256})})),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var x=this;return this.$pollSizeChangesTimer=H.onIdle((function t(){x.checkForSizeChanges(),H.onIdle(t,500)}),500)},this.setPolling=function(x){x?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(x){var w={height:(x||this.$measureNode).clientHeight,width:(x||this.$measureNode).clientWidth/256};return 0===w.width||0===w.height?null:w},this.$measureCharWidth=function(x){return this.$main.innerHTML=z.stringRepeat(x,256),this.$main.getBoundingClientRect().width/256},this.getCharacterWidth=function(x){var w=this.charSizes[x];return void 0===w&&(w=this.charSizes[x]=this.$measureCharWidth(x)/this.$characterSize.width),w},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(x){return x?(window.getComputedStyle(x).zoom||1)*e(x.parentElement):1},this.$initTransformMeasureNodes=function(){var e=function(x,w){return["div",{style:"position: absolute;top:"+x+"px;left:"+w+"px;"}]};this.els=G.buildDom([e(0,0),e(K,0),e(0,K),e(K,K)],this.el)},this.transformCoordinates=function(x,w){function n(x,w,S){var U=x[1]*w[0]-x[0]*w[1];return[(-w[1]*S[0]+w[0]*S[1])/U,(+x[1]*S[0]-x[0]*S[1])/U]}function i(x,w){return[x[0]-w[0],x[1]-w[1]]}function r(x,w){return[x[0]+w[0],x[1]+w[1]]}function o(x,w){return[x*w[0],x*w[1]]}function s(x){var w=x.getBoundingClientRect();return[w.left,w.top]}x&&(x=o(1/this.$getZoom(this.el),x)),this.els||this.$initTransformMeasureNodes();var S=s(this.els[0]),U=s(this.els[1]),G=s(this.els[2]),z=s(this.els[3]),H=n(i(z,U),i(z,G),i(r(U,G),r(z,S))),j=o(1+H[0],i(U,S)),X=o(1+H[1],i(G,S));if(w){var q=w,Y=H[0]*q[0]/K+H[1]*q[1]/K+1,Z=r(o(q[0],j),o(q[1],X));return r(o(1/Y/K,Z),S)}var J=i(x,S),Q=n(i(j,o(H[0],J)),i(X,o(H[1],J)),J);return o(K,Q)}}).call(Y.prototype)})),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],(function(x,w,S){"use strict";var U=x("./lib/oop"),G=x("./lib/dom"),z=x("./config"),H=x("./layer/gutter").Gutter,j=x("./layer/marker").Marker,X=x("./layer/text").Text,q=x("./layer/cursor").Cursor,K=x("./scrollbar").HScrollBar,Y=x("./scrollbar").VScrollBar,Z=x("./renderloop").RenderLoop,J=x("./layer/font_metrics").FontMetrics,Q=x("./lib/event_emitter").EventEmitter,ee='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;perspective: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);opacity: 0.7;transform-origin: left;text-indent: 10px;}',te=x("./lib/useragent"),ne=te.isIE;G.importCssString(ee,"ace_editor.css");var _=function(x,w){var S=this;this.container=x||G.createElement("div"),G.addCssClass(this.container,"ace_editor"),G.HI_DPI&&G.addCssClass(this.container,"ace_hidpi"),this.setTheme(w),this.$gutter=G.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=G.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=G.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new H(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new j(this.content);var U=this.$textLayer=new X(this.content);this.canvas=U.element,this.$markerFront=new j(this.content),this.$cursorLayer=new q(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new Y(this.container,this),this.scrollBarH=new K(this.container,this),this.scrollBarV.addEventListener("scroll",(function(x){S.$scrollAnimation||S.session.setScrollTop(x.data-S.scrollMargin.top)})),this.scrollBarH.addEventListener("scroll",(function(x){S.$scrollAnimation||S.session.setScrollLeft(x.data-S.scrollMargin.left)})),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new J(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",(function(x){S.updateCharacterSize(),S.onResize(!0,S.gutterWidth,S.$size.width,S.$size.height),S._signal("changeCharacterSize",x)})),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!te.isIOS,this.$loop=new Z(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),z.resetOptions(this),z._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,U.implement(this,Q),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),G.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(x){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=x,x&&this.scrollMargin.top&&x.getScrollTop()<=0&&x.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(x),this.$markerBack.setSession(x),this.$markerFront.setSession(x),this.$gutterLayer.setSession(x),this.$textLayer.setSession(x),x&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(x,w,S){if(void 0===w&&(w=1/0),this.$changedLines?(this.$changedLines.firstRow>x&&(this.$changedLines.firstRow=x),this.$changedLines.lastRow<w&&(this.$changedLines.lastRow=w)):this.$changedLines={firstRow:x,lastRow:w},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!S)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(x){x?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(x,w,S,U){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=x?1:0;var G=this.container;U||(U=G.clientHeight||G.scrollHeight),S||(S=G.clientWidth||G.scrollWidth);var z=this.$updateCachedSize(x,w,S,U);if(!this.$size.scrollerHeight||!S&&!U)return this.resizing=0;x&&(this.$gutterLayer.$padding=null),x?this.$renderChanges(z|this.$changes,!0):this.$loop.schedule(z|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(x,w,S,U){U-=this.$extraHeight||0;var z=0,H=this.$size,j={width:H.width,height:H.height,scrollerHeight:H.scrollerHeight,scrollerWidth:H.scrollerWidth};if(U&&(x||H.height!=U)&&(H.height=U,z|=this.CHANGE_SIZE,H.scrollerHeight=H.height,this.$horizScroll&&(H.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",z|=this.CHANGE_SCROLL),S&&(x||H.width!=S)){z|=this.CHANGE_SIZE,H.width=S,null==w&&(w=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=w,G.setStyle(this.scrollBarH.element.style,"left",w+"px"),G.setStyle(this.scroller.style,"left",w+this.margin.left+"px"),H.scrollerWidth=Math.max(0,S-w-this.scrollBarV.getWidth()-this.margin.h),G.setStyle(this.$gutter.style,"left",this.margin.left+"px");var X=this.scrollBarV.getWidth()+"px";G.setStyle(this.scrollBarH.element.style,"right",X),G.setStyle(this.scroller.style,"right",X),G.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||x)&&(z|=this.CHANGE_FULL)}return H.$dirty=!S||!U,z&&this._signal("resize",j),z},this.onGutterResize=function(x){var w=this.$showGutter?x:0;w!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,w,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var x=this.$size.scrollerWidth-2*this.$padding,w=Math.floor(x/this.characterWidth);return this.session.adjustWrapLimit(w,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(x){this.setOption("animatedScroll",x)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(x){this.setOption("showInvisibles",x),this.session.$bidiHandler.setShowInvisibles(x)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(x){this.setOption("displayIndentGuides",x)},this.setShowPrintMargin=function(x){this.setOption("showPrintMargin",x)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(x){this.setOption("printMarginColumn",x)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(x){return this.setOption("showGutter",x)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(x){this.setOption("fadeFoldWidgets",x)},this.setHighlightGutterLine=function(x){this.setOption("highlightGutterLine",x)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var x=G.createElement("div");x.className="ace_layer ace_print-margin-layer",this.$printMarginEl=G.createElement("div"),this.$printMarginEl.className="ace_print-margin",x.appendChild(this.$printMarginEl),this.content.insertBefore(x,this.content.firstChild)}var w=this.$printMarginEl.style;w.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",w.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var x=this.textarea.style,w=this.$composition;if(this.$keepTextAreaAtCursor||w){var S=this.$cursorLayer.$pixelPos;if(S){w&&w.markerRange&&(S=this.$cursorLayer.getPixelPosition(w.markerRange.start,!0));var U=this.layerConfig,z=S.top,H=S.left;z-=U.offset;var j=w&&w.useTextareaForIME?this.lineHeight:ne?0:1;if(z<0||z>U.height-j)G.translate(this.textarea,0,0);else{var X=1,q=this.$size.height-j;if(w)if(w.useTextareaForIME){var K=this.textarea.value;X=this.characterWidth*this.session.$getStringScreenWidth(K)[0]}else z+=this.lineHeight+2;else z+=this.lineHeight;(H-=this.scrollLeft)>this.$size.scrollerWidth-X&&(H=this.$size.scrollerWidth-X),H+=this.gutterWidth+this.margin.left,G.setStyle(x,"height",j+"px"),G.setStyle(x,"width",X+"px"),G.translate(this.textarea,Math.min(H,this.$size.scrollerWidth-X),Math.min(z,q))}}}else G.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var x=this.layerConfig,w=x.lastRow;return this.session.documentToScreenRow(w,0)*x.lineHeight-this.session.getScrollTop()>x.height-x.lineHeight?w-1:w},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(x){this.$padding=x,this.$textLayer.setPadding(x),this.$cursorLayer.setPadding(x),this.$markerFront.setPadding(x),this.$markerBack.setPadding(x),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(x,w,S,U){var G=this.scrollMargin;G.top=0|x,G.bottom=0|w,G.right=0|U,G.left=0|S,G.v=G.top+G.bottom,G.h=G.left+G.right,G.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-G.top),this.updateFull()},this.setMargin=function(x,w,S,U){var G=this.margin;G.top=0|x,G.bottom=0|w,G.right=0|U,G.left=0|S,G.v=G.top+G.bottom,G.h=G.left+G.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(x){this.setOption("hScrollBarAlwaysVisible",x)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(x){this.setOption("vScrollBarAlwaysVisible",x)},this.$updateScrollBarV=function(){var x=this.layerConfig.maxHeight,w=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(x-=(w-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>x-w&&(x=this.scrollTop+w,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(x+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(x,w){if(this.$changes&&(x|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(x||w)){if(this.$size.$dirty)return this.$changes|=x,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender"),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var S=this.layerConfig;if(x&this.CHANGE_FULL||x&this.CHANGE_SIZE||x&this.CHANGE_TEXT||x&this.CHANGE_LINES||x&this.CHANGE_SCROLL||x&this.CHANGE_H_SCROLL){if(x|=this.$computeLayerConfig()|this.$loop.clear(),S.firstRow!=this.layerConfig.firstRow&&S.firstRowScreen==this.layerConfig.firstRowScreen){var U=this.scrollTop+(S.firstRow-this.layerConfig.firstRow)*this.lineHeight;U>0&&(this.scrollTop=U,x|=this.CHANGE_SCROLL,x|=this.$computeLayerConfig()|this.$loop.clear())}S=this.layerConfig,this.$updateScrollBarV(),x&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),G.translate(this.content,-this.scrollLeft,-S.offset);var z=S.width+2*this.$padding+"px",H=S.minHeight+"px";G.setStyle(this.content.style,"width",z),G.setStyle(this.content.style,"height",H)}if(x&this.CHANGE_H_SCROLL&&(G.translate(this.content,-this.scrollLeft,-S.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),x&this.CHANGE_FULL)return this.$changedLines=null,this.$textLayer.update(S),this.$showGutter&&this.$gutterLayer.update(S),this.$markerBack.update(S),this.$markerFront.update(S),this.$cursorLayer.update(S),this.$moveTextAreaToCursor(),void this._signal("afterRender");if(x&this.CHANGE_SCROLL)return this.$changedLines=null,x&this.CHANGE_TEXT||x&this.CHANGE_LINES?this.$textLayer.update(S):this.$textLayer.scrollLines(S),this.$showGutter&&(x&this.CHANGE_GUTTER||x&this.CHANGE_LINES?this.$gutterLayer.update(S):this.$gutterLayer.scrollLines(S)),this.$markerBack.update(S),this.$markerFront.update(S),this.$cursorLayer.update(S),this.$moveTextAreaToCursor(),void this._signal("afterRender");x&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(S),this.$showGutter&&this.$gutterLayer.update(S)):x&this.CHANGE_LINES?(this.$updateLines()||x&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(S):x&this.CHANGE_TEXT||x&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(S):x&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(S),x&this.CHANGE_CURSOR&&(this.$cursorLayer.update(S),this.$moveTextAreaToCursor()),x&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(S),x&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(S),this._signal("afterRender")}else this.$changes|=x},this.$autosize=function(){var x=this.session.getScreenLength()*this.lineHeight,w=this.$maxLines*this.lineHeight,S=Math.min(w,Math.max((this.$minLines||1)*this.lineHeight,x))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(S+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&S>this.$maxPixelHeight&&(S=this.$maxPixelHeight);var U=!(S<=2*this.lineHeight)&&x>w;if(S!=this.desiredHeight||this.$size.height!=this.desiredHeight||U!=this.$vScroll){U!=this.$vScroll&&(this.$vScroll=U,this.scrollBarV.setVisible(U));var G=this.container.clientWidth;this.container.style.height=S+"px",this.$updateCachedSize(!0,this.$gutterWidth,G,S),this.desiredHeight=S,this._signal("autosize")}},this.$computeLayerConfig=function(){var x=this.session,w=this.$size,S=w.height<=2*this.lineHeight,U=this.session.getScreenLength()*this.lineHeight,G=this.$getLongestLine(),z=!S&&(this.$hScrollBarAlwaysVisible||w.scrollerWidth-G-2*this.$padding<0),H=this.$horizScroll!==z;H&&(this.$horizScroll=z,this.scrollBarH.setVisible(z));var j=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var X=w.scrollerHeight+this.lineHeight,q=!this.$maxLines&&this.$scrollPastEnd?(w.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;U+=q;var K=this.scrollMargin;this.session.setScrollTop(Math.max(-K.top,Math.min(this.scrollTop,U-w.scrollerHeight+K.bottom))),this.session.setScrollLeft(Math.max(-K.left,Math.min(this.scrollLeft,G+2*this.$padding-w.scrollerWidth+K.right)));var Y=!S&&(this.$vScrollBarAlwaysVisible||w.scrollerHeight-U+q<0||this.scrollTop>K.top),Z=j!==Y;Z&&(this.$vScroll=Y,this.scrollBarV.setVisible(Y));var J,Q,ee=this.scrollTop%this.lineHeight,te=Math.ceil(X/this.lineHeight)-1,ne=Math.max(0,Math.round((this.scrollTop-ee)/this.lineHeight)),re=ne+te,ie=this.lineHeight;ne=x.screenToDocumentRow(ne,0);var oe=x.getFoldLine(ne);oe&&(ne=oe.start.row),J=x.documentToScreenRow(ne,0),Q=x.getRowLength(ne)*ie,re=Math.min(x.screenToDocumentRow(re,0),x.getLength()-1),X=w.scrollerHeight+x.getRowLength(re)*ie+Q,ee=this.scrollTop-J*ie;var ae=0;return(this.layerConfig.width!=G||H)&&(ae=this.CHANGE_H_SCROLL),(H||Z)&&(ae|=this.$updateCachedSize(!0,this.gutterWidth,w.width,w.height),this._signal("scrollbarVisibilityChanged"),Z&&(G=this.$getLongestLine())),this.layerConfig={width:G,padding:this.$padding,firstRow:ne,firstRowScreen:J,lastRow:re,lineHeight:ie,characterWidth:this.characterWidth,minHeight:X,maxHeight:U,offset:ee,gutterOffset:ie?Math.max(0,Math.ceil((ee+w.height-w.scrollerHeight)/ie)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(G-this.$padding),ae},this.$updateLines=function(){if(this.$changedLines){var x=this.$changedLines.firstRow,w=this.$changedLines.lastRow;this.$changedLines=null;var S=this.layerConfig;if(!(x>S.lastRow+1||w<S.firstRow))return w===1/0?(this.$showGutter&&this.$gutterLayer.update(S),void this.$textLayer.update(S)):(this.$textLayer.updateLines(S,x,w),!0)}},this.$getLongestLine=function(){var x=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(x+=1),this.$textLayer&&x>this.$textLayer.MAX_LINE_LENGTH&&(x=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(x*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(x,w){this.$gutterLayer.addGutterDecoration(x,w)},this.removeGutterDecoration=function(x,w){this.$gutterLayer.removeGutterDecoration(x,w)},this.updateBreakpoints=function(x){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(x){this.$gutterLayer.setAnnotations(x),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(x,w,S){this.scrollCursorIntoView(x,S),this.scrollCursorIntoView(w,S)},this.scrollCursorIntoView=function(x,w,S){if(0!==this.$size.scrollerHeight){var U=this.$cursorLayer.getPixelPosition(x),G=U.left,z=U.top,H=S&&S.top||0,j=S&&S.bottom||0,X=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;X+H>z?(w&&X+H>z+this.lineHeight&&(z-=w*this.$size.scrollerHeight),0===z&&(z=-this.scrollMargin.top),this.session.setScrollTop(z)):X+this.$size.scrollerHeight-j<z+this.lineHeight&&(w&&X+this.$size.scrollerHeight-j<z-this.lineHeight&&(z+=w*this.$size.scrollerHeight),this.session.setScrollTop(z+this.lineHeight+j-this.$size.scrollerHeight));var q=this.scrollLeft;q>G?(G<this.$padding+2*this.layerConfig.characterWidth&&(G=-this.scrollMargin.left),this.session.setScrollLeft(G)):q+this.$size.scrollerWidth<G+this.characterWidth?this.session.setScrollLeft(Math.round(G+this.characterWidth-this.$size.scrollerWidth)):q<=this.$padding&&G-q<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(x){this.session.setScrollTop(x*this.lineHeight)},this.alignCursor=function(x,w){"number"==typeof x&&(x={row:x,column:0});var S=this.$cursorLayer.getPixelPosition(x),U=this.$size.scrollerHeight-this.lineHeight,G=S.top-U*(w||0);return this.session.setScrollTop(G),G},this.STEPS=8,this.$calcSteps=function(x,w){var S,U,G=0,z=this.STEPS,H=[];for(G=0;G<z;++G)H.push((S=G/this.STEPS,U=x,(w-x)*(Math.pow(S-1,3)+1)+U));return H},this.scrollToLine=function(x,w,S,U){var G=this.$cursorLayer.getPixelPosition({row:x,column:0}).top;w&&(G-=this.$size.scrollerHeight/2);var z=this.scrollTop;this.session.setScrollTop(G),!1!==S&&this.animateScrolling(z,U)},this.animateScrolling=function(x,w){var S=this.scrollTop;if(this.$animatedScroll){var U=this;if(x!=S){if(this.$scrollAnimation){var G=this.$scrollAnimation.steps;if(G.length&&(x=G[0])==S)return}var z=U.$calcSteps(x,S);this.$scrollAnimation={from:x,to:S,steps:z},clearInterval(this.$timer),U.session.setScrollTop(z.shift()),U.session.$scrollTop=S,this.$timer=setInterval((function(){z.length?(U.session.setScrollTop(z.shift()),U.session.$scrollTop=S):null!=S?(U.session.$scrollTop=-1,U.session.setScrollTop(S),S=null):(U.$timer=clearInterval(U.$timer),U.$scrollAnimation=null,w&&w())}),10)}}},this.scrollToY=function(x){this.scrollTop!==x&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=x)},this.scrollToX=function(x){this.scrollLeft!==x&&(this.scrollLeft=x),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(x,w){this.session.setScrollTop(w),this.session.setScrollLeft(w)},this.scrollBy=function(x,w){w&&this.session.setScrollTop(this.session.getScrollTop()+w),x&&this.session.setScrollLeft(this.session.getScrollLeft()+x)},this.isScrollableBy=function(x,w){return w<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||w>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||x<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||x>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0},this.pixelToScreenCoordinates=function(x,w){var S;if(this.$hasCssTransforms){S={top:0,left:0};var U=this.$fontMetrics.transformCoordinates([x,w]);x=U[1]-this.gutterWidth-this.margin.left,w=U[0]}else S=this.scroller.getBoundingClientRect();var G=x+this.scrollLeft-S.left-this.$padding,z=G/this.characterWidth,H=Math.floor((w+this.scrollTop-S.top)/this.lineHeight),j=this.$blockCursor?Math.floor(z):Math.round(z);return{row:H,column:j,side:z-j>0?1:-1,offsetX:G}},this.screenToTextCoordinates=function(x,w){var S;if(this.$hasCssTransforms){S={top:0,left:0};var U=this.$fontMetrics.transformCoordinates([x,w]);x=U[1]-this.gutterWidth-this.margin.left,w=U[0]}else S=this.scroller.getBoundingClientRect();var G=x+this.scrollLeft-S.left-this.$padding,z=G/this.characterWidth,H=this.$blockCursor?Math.floor(z):Math.round(z),j=Math.floor((w+this.scrollTop-S.top)/this.lineHeight);return this.session.screenToDocumentPosition(j,Math.max(H,0),G)},this.textToScreenCoordinates=function(x,w){var S=this.scroller.getBoundingClientRect(),U=this.session.documentToScreenPosition(x,w),G=this.$padding+(this.session.$bidiHandler.isBidiRow(U.row,x)?this.session.$bidiHandler.getPosLeft(U.column):Math.round(U.column*this.characterWidth)),z=U.row*this.lineHeight;return{pageX:S.left+G-this.scrollLeft,pageY:S.top+z-this.scrollTop}},this.visualizeFocus=function(){G.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){G.removeCssClass(this.container,"ace_focus")},this.showComposition=function(x){this.$composition=x,x.cssText||(x.cssText=this.textarea.style.cssText),x.useTextareaForIME=this.$useTextareaForIME,this.$useTextareaForIME?(G.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):x.markerId=this.session.addMarker(x.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(x){var w=this.session.selection.cursor;this.addToken(x,"composition_placeholder",w.row,w.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),G.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText,this.$composition=null,this.$cursorLayer.element.style.display="")},this.addToken=function(x,w,S,U){var G=this.session;G.bgTokenizer.lines[S]=null;var z={type:w,value:x},H=G.getTokens(S);if(null==U)H.push(z);else for(var j=0,X=0;X<H.length;X++){var q=H[X];if(U<=(j+=q.value.length)){var K=q.value.length-(j-U),Y=q.value.slice(0,K),Z=q.value.slice(K);H.splice(X,1,{type:q.type,value:Y},z,{type:q.type,value:Z});break}}this.updateLines(S,S)},this.setTheme=function(x,w){var S=this;if(this.$themeId=x,S._dispatchEvent("themeChange",{theme:x}),x&&"string"!=typeof x)s(x);else{var U=x||this.$options.theme.initialValue;z.loadModule(["theme",U],s)}function s(U){if(S.$themeId!=x)return w&&w();if(!U||!U.cssClass)throw new Error("couldn't load module "+x+" or it didn't call define");U.$id&&(S.$themeId=U.$id),G.importCssString(U.cssText,U.cssClass,S.container),S.theme&&G.removeCssClass(S.container,S.theme.cssClass);var z="padding"in U?U.padding:"padding"in(S.theme||{})?4:S.$padding;S.$padding&&z!=S.$padding&&S.setPadding(z),S.$theme=U.cssClass,S.theme=U,G.addCssClass(S.container,U.cssClass),G.setCssClass(S.container,"ace_dark",U.isDark),S.$size&&(S.$size.width=0,S.$updateSizeAsync()),S._dispatchEvent("themeLoaded",{theme:U}),w&&w()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(x,w){G.setCssClass(this.container,x,!1!==w)},this.unsetStyle=function(x){G.removeCssClass(this.container,x)},this.setCursorStyle=function(x){G.setStyle(this.scroller.style,"cursor",x)},this.setMouseCursor=function(x){G.setStyle(this.scroller.style,"cursor",x)},this.attachToShadowRoot=function(){G.importCssString(ee,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy()}}).call(_.prototype),z.defineOptions(_.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(x){this.$textLayer.setShowInvisibles(x)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(x){"number"==typeof x&&(this.$printMarginColumn=x),this.$showPrintMargin=!!x,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(x){this.$gutter.style.display=x?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(x){G.setCssClass(this.$gutter,"ace_fade-fold-widgets",x)},initialValue:!1},showFoldWidgets:{set:function(x){this.$gutterLayer.setShowFoldWidgets(x),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(x){this.$textLayer.setDisplayIndentGuides(x)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(x){this.$gutterLayer.setHighlightGutterLine(x),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(x){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(x){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(x){"number"==typeof x&&(x+="px"),this.container.style.fontSize=x,this.updateFontSize()},initialValue:12},fontFamily:{set:function(x){this.container.style.fontFamily=x,this.updateFontSize()}},maxLines:{set:function(x){this.updateFull()}},minLines:{set:function(x){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(x){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(x){x=+x||0,this.$scrollPastEnd!=x&&(this.$scrollPastEnd=x,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(x){this.$gutterLayer.$fixedWidth=!!x,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(x){this.setTheme(x)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!te.isMobile&&!te.isIE}}),w.VirtualRenderer=_})),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],(function(x,w,S){"use strict";var G=x("../lib/oop"),z=x("../lib/net"),H=x("../lib/event_emitter").EventEmitter,j=x("../config");function a(x){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(j.get("loadWorkerFromBlob")){var w=function(x){var w="importScripts('"+z.qualifyURL(x)+"');";try{return new Blob([w],{type:"application/javascript"})}catch(x){var S=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return S.append(w),S.getBlob("application/javascript")}}(x),S=(window.URL||window.webkitURL).createObjectURL(w);return new Worker(S)}return new Worker(x)}var c=function(x){x.postMessage||(x=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=x,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){G.implement(this,H),this.$createWorkerFromOldConfig=function(w,S,U,G,z){if(x.nameToUrl&&!x.toUrl&&(x.toUrl=x.nameToUrl),j.get("packaged")||!x.toUrl)G=G||j.moduleUrl(S,"worker");else{var H=this.$normalizePath;G=G||H(x.toUrl("ace/worker/worker.js",null,"_"));var X={};w.forEach((function(w){X[w]=H(x.toUrl(w,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))}return this.$worker=a(G),z&&this.send("importScripts",z),this.$worker.postMessage({init:!0,tlns:X,module:S,classname:U}),this.$worker},this.onMessage=function(x){var w=x.data;switch(w.type){case"event":this._signal(w.name,{data:w.data});break;case"call":var S=this.callbacks[w.id];S&&(S(w.data),delete this.callbacks[w.id]);break;case"error":this.reportError(w.data);break;case"log":window.console&&U.log&&U.log.apply(U,w.data)}},this.reportError=function(x){window.console&&U.error&&U.error(x)},this.$normalizePath=function(x){return z.qualifyURL(x)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(x,w){this.$worker.postMessage({command:x,args:w})},this.call=function(x,w,S){if(S){var U=this.callbackId++;this.callbacks[U]=S,w.push(U)}this.send(x,w)},this.emit=function(x,w){try{w.data&&w.data.err&&(w.data.err={message:w.data.err.message,stack:w.data.err.stack,code:w.data.err.code}),this.$worker.postMessage({event:x,data:{data:w.data}})}catch(x){U.error(x.stack)}},this.attachToDocument=function(x){this.$doc&&this.terminate(),this.$doc=x,this.call("setValue",[x.getValue()]),x.on("change",this.changeListener)},this.changeListener=function(x){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==x.action?this.deltaQueue.push(x.start,x.lines):this.deltaQueue.push(x.start,x.end)},this.$sendDeltaQueue=function(){var x=this.deltaQueue;x&&(this.deltaQueue=null,x.length>50&&x.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:x}))}}).call(c.prototype),w.UIWorkerClient=function(x,w,S){var U=null,G=!1,z=Object.create(H),X=[],q=new c({messageBuffer:X,terminate:function(){},postMessage:function(x){X.push(x),U&&(G?setTimeout(h):h())}});q.setEmitSync=function(x){G=x};var h=function(){var x=X.shift();x.command?U[x.command].apply(U,x.args):x.event&&z._signal(x.event,x.data)};return z.postMessage=function(x){q.onMessage({data:x})},z.callback=function(x,w){this.postMessage({type:"call",id:w,data:x})},z.emit=function(x,w){this.postMessage({type:"event",name:x,data:w})},j.loadModule(["worker",w],(function(x){for(U=new x[S](z);X.length;)h()})),q},w.WorkerClient=c,w.createWorker=a})),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],(function(x,w,S){"use strict";var U=x("./range").Range,G=x("./lib/event_emitter").EventEmitter,z=x("./lib/oop"),s=function(x,w,S,U,G,z){var H=this;this.length=w,this.session=x,this.doc=x.getDocument(),this.mainClass=G,this.othersClass=z,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=U,this.$onCursorChange=function(){setTimeout((function(){H.onCursorChange()}))},this.$pos=S;var j=x.getUndoManager().$undoStack||x.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=j.length,this.setup(),x.selection.on("changeCursor",this.$onCursorChange)};(function(){z.implement(this,G),this.setup=function(){var x=this,w=this.doc,S=this.session;this.selectionBefore=S.selection.toJSON(),S.selection.inMultiSelectMode&&S.selection.toSingleRange(),this.pos=w.createAnchor(this.$pos.row,this.$pos.column);var G=this.pos;G.$insertRight=!0,G.detach(),G.markerId=S.addMarker(new U(G.row,G.column,G.row,G.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach((function(S){var U=w.createAnchor(S.row,S.column);U.$insertRight=!0,U.detach(),x.others.push(U)})),S.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var x=this.session,w=this;this.othersActive=!0,this.others.forEach((function(S){S.markerId=x.addMarker(new U(S.row,S.column,S.row,S.column+w.length),w.othersClass,null,!1)}))}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var x=0;x<this.others.length;x++)this.session.removeMarker(this.others[x].markerId)}},this.onUpdate=function(x){if(this.$updating)return this.updateAnchors(x);var w=x;if(w.start.row===w.end.row&&w.start.row===this.pos.row){this.$updating=!0;var S="insert"===x.action?w.end.column-w.start.column:w.start.column-w.end.column,G=w.start.column>=this.pos.column&&w.start.column<=this.pos.column+this.length+1,z=w.start.column-this.pos.column;if(this.updateAnchors(x),G&&(this.length+=S),G&&!this.session.$fromUndo)if("insert"===x.action)for(var H=this.others.length-1;H>=0;H--){var j={row:(X=this.others[H]).row,column:X.column+z};this.doc.insertMergedLines(j,x.lines)}else if("remove"===x.action)for(H=this.others.length-1;H>=0;H--){var X;j={row:(X=this.others[H]).row,column:X.column+z},this.doc.remove(new U(j.row,j.column,j.row,j.column-S))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(x){this.pos.onChange(x);for(var w=this.others.length;w--;)this.others[w].onChange(x);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var x=this,w=this.session,n=function(S,G){w.removeMarker(S.markerId),S.markerId=w.addMarker(new U(S.row,S.column,S.row,S.column+x.length),G,null,!1)};n(this.pos,this.mainClass);for(var S=this.others.length;S--;)n(this.others[S],this.othersClass)}},this.onCursorChange=function(x){if(!this.$updating&&this.session){var w=this.session.selection.getCursor();w.row===this.pos.row&&w.column>=this.pos.column&&w.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",x)):(this.hideOtherMarkers(),this._emit("cursorLeave",x))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var x=this.session.getUndoManager(),w=(x.$undoStack||x.$undostack).length-this.$undoStackDepth,S=0;S<w;S++)x.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(s.prototype),w.PlaceHolder=s})),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(x,w,S){var U=x("../lib/event"),G=x("../lib/useragent");function o(x,w){return x.row==w.row&&x.column==w.column}w.onMouseDown=function(x){var w=x.domEvent,S=w.altKey,z=w.shiftKey,H=w.ctrlKey,j=x.getAccelKey(),X=x.getButton();if(H&&G.isMac&&(X=w.button),x.editor.inMultiSelectMode&&2==X)x.editor.textInput.onContextMenu(x.domEvent);else if(H||S||j){if(0===X){var q,K=x.editor,Y=K.selection,Z=K.inMultiSelectMode,J=x.getDocumentPosition(),Q=Y.getCursor(),ee=x.inSelection()||Y.isEmpty()&&o(J,Q),te=x.x,ne=x.y,re=K.session,ie=K.renderer.pixelToScreenCoordinates(te,ne),oe=ie;if(K.$mouseHandler.$enableJumpToDef)H&&S||j&&S?q=z?"block":"add":S&&K.$blockSelectEnabled&&(q="block");else if(j&&!S){if(q="add",!Z&&z)return}else S&&K.$blockSelectEnabled&&(q="block");if(q&&G.isMac&&w.ctrlKey&&K.$mouseHandler.cancelContextMenu(),"add"==q){if(!Z&&ee)return;if(!Z){var ae=Y.toOrientedRange();K.addSelectionMarker(ae)}var se=Y.rangeList.rangeAtPoint(J);K.inVirtualSelectionMode=!0,z&&(se=null,ae=Y.ranges[0]||ae,K.removeSelectionMarker(ae)),K.once("mouseup",(function(){var x=Y.toOrientedRange();se&&x.isEmpty()&&o(se.cursor,x.cursor)?Y.substractPoint(x.cursor):(z?Y.substractPoint(ae.cursor):ae&&(K.removeSelectionMarker(ae),Y.addRange(ae)),Y.addRange(x)),K.inVirtualSelectionMode=!1}))}else if("block"==q){var le;x.stop(),K.inVirtualSelectionMode=!0;var ce=[],b=function(){var x=K.renderer.pixelToScreenCoordinates(te,ne),w=re.screenToDocumentPosition(x.row,x.column,x.offsetX);o(oe,x)&&o(w,Y.lead)||(oe=x,K.selection.moveToPosition(w),K.renderer.scrollCursorIntoView(),K.removeSelectionMarkers(ce),ce=Y.rectangularRangeBlock(oe,ie),K.$mouseHandler.$clickSelection&&1==ce.length&&ce[0].isEmpty()&&(ce[0]=K.$mouseHandler.$clickSelection.clone()),ce.forEach(K.addSelectionMarker,K),K.updateSelectionMarkers())};Z&&!j?Y.toSingleRange():!Z&&j&&(le=Y.toOrientedRange(),K.addSelectionMarker(le)),z?ie=re.documentToScreenPosition(Y.lead):Y.moveToPosition(J),oe={row:-1,column:-1};var ue=b;U.capture(K.container,(function(x){te=x.clientX,ne=x.clientY}),(function(x){b(),clearInterval(he),K.removeSelectionMarkers(ce),ce.length||(ce=[Y.toOrientedRange()]),le&&(K.removeSelectionMarker(le),Y.toSingleRange(le));for(var w=0;w<ce.length;w++)Y.addRange(ce[w]);K.inVirtualSelectionMode=!1,K.$mouseHandler.$clickSelection=null}));var he=setInterval((function(){ue()}),20);return x.preventDefault()}}}else 0===X&&x.editor.inMultiSelectMode&&x.editor.exitMultiSelectMode()}})),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],(function(x,w,S){w.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(x){x.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(x){x.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(x){x.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(x){x.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(x){x.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(x){x.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(x){x.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(x){x.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",description:"Split into lines",exec:function(x){x.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(x){x.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(x){x.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],w.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(x){x.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(x){return x&&x.inMultiSelectMode}}];var U=x("../keyboard/hash_handler").HashHandler;w.keyboardHandler=new U(w.multiSelectCommands)})),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],(function(x,w,S){var U=x("./range_list").RangeList,G=x("./range").Range,z=x("./selection").Selection,H=x("./mouse/multi_select_handler").onMouseDown,j=x("./lib/event"),X=x("./lib/lang"),q=x("./commands/multi_select_commands");w.commands=q.defaultCommands.concat(q.multiSelectCommands);var K=new(0,x("./search").Search),Y=x("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(Y.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(x,w){if(x){if(!this.inMultiSelectMode&&0===this.rangeCount){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(x),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),w||this.fromOrientedRange(x);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}x.cursor||(x.cursor=x.end);var U=this.rangeList.add(x);return this.$onAddRange(x),U.length&&this.$onRemoveRange(U),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),w||this.fromOrientedRange(x)}},this.toSingleRange=function(x){x=x||this.ranges[0];var w=this.rangeList.removeAll();w.length&&this.$onRemoveRange(w),x&&this.fromOrientedRange(x)},this.substractPoint=function(x){var w=this.rangeList.substractPoint(x);if(w)return this.$onRemoveRange(w),w[0]},this.mergeOverlappingRanges=function(){var x=this.rangeList.merge();x.length&&this.$onRemoveRange(x)},this.$onAddRange=function(x){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(x),this._signal("addRange",{range:x})},this.$onRemoveRange=function(x){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var w=this.rangeList.ranges.pop();x.push(w),this.rangeCount=0}for(var S=x.length;S--;){var U=this.ranges.indexOf(x[S]);this.ranges.splice(U,1)}this._signal("removeRange",{ranges:x}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(w=w||this.ranges[0])&&!w.isEqual(this.getRange())&&this.fromOrientedRange(w)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new U,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var x=this.rangeList.ranges,w=x[x.length-1],S=G.fromPoints(x[0].start,w.end);this.toSingleRange(),this.setSelectionRange(S,w.cursor==w.start)}else{S=this.getRange();var U=this.isBackwards(),z=S.start.row,H=S.end.row;if(z==H){if(U)var j=S.end,X=S.start;else j=S.start,X=S.end;return this.addRange(G.fromPoints(X,X)),void this.addRange(G.fromPoints(j,j))}var q=[],K=this.getLineRange(z,!0);K.start.column=S.start.column,q.push(K);for(var Y=z+1;Y<H;Y++)q.push(this.getLineRange(Y,!0));(K=this.getLineRange(H,!0)).end.column=S.end.column,q.push(K),q.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var x=this.rangeList.ranges,w=x[x.length-1],S=G.fromPoints(x[0].start,w.end);this.toSingleRange(),this.setSelectionRange(S,w.cursor==w.start)}else{var U=this.session.documentToScreenPosition(this.cursor),z=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(U,z).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(x,w,S){var U=[],z=x.column<w.column;if(z)var H=x.column,j=w.column,X=x.offsetX,q=w.offsetX;else H=w.column,j=x.column,X=w.offsetX,q=x.offsetX;var K,Y,Z,J=x.row<w.row;if(J)var Q=x.row,ee=w.row;else Q=w.row,ee=x.row;H<0&&(H=0),Q<0&&(Q=0),Q==ee&&(S=!0);for(var te=Q;te<=ee;te++){var ne=G.fromPoints(this.session.screenToDocumentPosition(te,H,X),this.session.screenToDocumentPosition(te,j,q));if(ne.isEmpty()){if(K&&(Z=K,(Y=ne.end).row==Z.row&&Y.column==Z.column))break;K=ne.end}ne.cursor=z?ne.start:ne.end,U.push(ne)}if(J&&U.reverse(),!S){for(var re=U.length-1;U[re].isEmpty()&&re>0;)re--;if(re>0)for(var ie=0;U[ie].isEmpty();)ie++;for(var oe=re;oe>=ie;oe--)U[oe].isEmpty()&&U.splice(oe,1)}return U}}.call(z.prototype);var Z=x("./editor").Editor;function p(x){x.$multiselectOnSessionChange||(x.$onAddRange=x.$onAddRange.bind(x),x.$onRemoveRange=x.$onRemoveRange.bind(x),x.$onMultiSelect=x.$onMultiSelect.bind(x),x.$onSingleSelect=x.$onSingleSelect.bind(x),x.$multiselectOnSessionChange=w.onSessionChange.bind(x),x.$checkMultiselectChange=x.$checkMultiselectChange.bind(x),x.$multiselectOnSessionChange(x),x.on("changeSession",x.$multiselectOnSessionChange),x.on("mousedown",H),x.commands.addCommands(q.defaultCommands),function(x){if(x.textInput){var w=x.textInput.getElement(),S=!1;j.addListener(w,"keydown",(function(w){var U=18==w.keyCode&&!(w.ctrlKey||w.shiftKey||w.metaKey);x.$blockSelectEnabled&&U?S||(x.renderer.setMouseCursor("crosshair"),S=!0):S&&i()})),j.addListener(w,"keyup",i),j.addListener(w,"blur",i)}function i(w){S&&(x.renderer.setMouseCursor(""),S=!1)}}(x))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(x){x.cursor||(x.cursor=x.end);var w=this.getSelectionStyle();return x.marker=this.session.addMarker(x,"ace_selection",w),this.session.$selectionMarkers.push(x),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,x},this.removeSelectionMarker=function(x){if(x.marker){this.session.removeMarker(x.marker);var w=this.session.$selectionMarkers.indexOf(x);-1!=w&&this.session.$selectionMarkers.splice(w,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(x){for(var w=this.session.$selectionMarkers,S=x.length;S--;){var U=x[S];if(U.marker){this.session.removeMarker(U.marker);var G=w.indexOf(U);-1!=G&&w.splice(G,1)}}this.session.selectionMarkerCount=w.length},this.$onAddRange=function(x){this.addSelectionMarker(x.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(x){this.removeSelectionMarkers(x.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(x){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(q.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(x){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(q.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(x){var w=x.command,S=x.editor;if(S.multiSelect){if(w.multiSelectAction)"forEach"==w.multiSelectAction?U=S.forEachSelection(w,x.args):"forEachLine"==w.multiSelectAction?U=S.forEachSelection(w,x.args,!0):"single"==w.multiSelectAction?(S.exitMultiSelectMode(),U=w.exec(S,x.args||{})):U=w.multiSelectAction(S,x.args||{});else{var U=w.exec(S,x.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return U}},this.forEachSelection=function(x,w,S){if(!this.inVirtualSelectionMode){var U,G=S&&S.keepOrder,H=1==S||S&&S.$byLines,j=this.session,X=this.selection,q=X.rangeList,K=(G?X:q).ranges;if(!K.length)return x.exec?x.exec(this,w||{}):x(this,w||{});var Y=X._eventRegistry;X._eventRegistry={};var Z=new z(j);this.inVirtualSelectionMode=!0;for(var J=K.length;J--;){if(H)for(;J>0&&K[J].start.row==K[J-1].end.row;)J--;Z.fromOrientedRange(K[J]),Z.index=J,this.selection=j.selection=Z;var Q=x.exec?x.exec(this,w||{}):x(this,w||{});U||void 0===Q||(U=Q),Z.toOrientedRange(K[J])}Z.detach(),this.selection=j.selection=X,this.inVirtualSelectionMode=!1,X._eventRegistry=Y,X.mergeOverlappingRanges(),X.ranges[0]&&X.fromOrientedRange(X.ranges[0]);var ee=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),ee&&ee.from==ee.to&&this.renderer.animateScrolling(ee.from),U}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var x="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var w=this.multiSelect.rangeList.ranges,S=[],U=0;U<w.length;U++)S.push(this.session.getTextRange(w[U]));var G=this.session.getDocument().getNewLineCharacter();(x=S.join(G)).length==(S.length-1)*G.length&&(x="")}else this.selection.isEmpty()||(x=this.session.getTextRange(this.getSelectionRange()));return x},this.$checkMultiselectChange=function(x,w){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&w==this.multiSelect.anchor)return;var U=w==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;U.row!=w.row||this.session.$clipPositionToDocument(U.row,U.column).column!=w.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(x,w,S){if((w=w||{}).needle=x||w.needle,null==w.needle){var U=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();w.needle=this.session.getTextRange(U)}this.$search.set(w);var G=this.$search.findAll(this.session);if(!G.length)return 0;var z=this.multiSelect;S||z.toSingleRange(G[0]);for(var H=G.length;H--;)z.addRange(G[H],!0);return U&&z.rangeList.rangeAtPoint(U.start)&&z.addRange(U,!0),G.length},this.selectMoreLines=function(x,w){var S=this.selection.toOrientedRange(),U=S.cursor==S.end,z=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(z.column=this.selection.$desiredColumn);var H,j=this.session.screenToDocumentPosition(z.row+x,z.column);if(S.isEmpty())q=j;else var X=this.session.documentToScreenPosition(U?S.end:S.start),q=this.session.screenToDocumentPosition(X.row+x,X.column);if(U?(H=G.fromPoints(j,q)).cursor=H.start:(H=G.fromPoints(q,j)).cursor=H.end,H.desiredColumn=z.column,this.selection.inMultiSelectMode){if(w)var K=S.cursor}else this.selection.addRange(S);this.selection.addRange(H),K&&this.selection.substractPoint(K)},this.transposeSelections=function(x){for(var w=this.session,S=w.multiSelect,U=S.ranges,G=U.length;G--;)if((j=U[G]).isEmpty()){var z=w.getWordRange(j.start.row,j.start.column);j.start.row=z.start.row,j.start.column=z.start.column,j.end.row=z.end.row,j.end.column=z.end.column}S.mergeOverlappingRanges();var H=[];for(G=U.length;G--;){var j=U[G];H.unshift(w.getTextRange(j))}for(x<0?H.unshift(H.pop()):H.push(H.shift()),G=U.length;G--;)z=(j=U[G]).clone(),w.replace(j,H[G]),j.start.row=z.start.row,j.start.column=z.start.column;S.fromOrientedRange(S.ranges[0])},this.selectMore=function(x,w,S){var U=this.session,G=U.multiSelect.toOrientedRange();if(!G.isEmpty()||((G=U.getWordRange(G.start.row,G.start.column)).cursor=-1==x?G.start:G.end,this.multiSelect.addRange(G),!S)){var z=U.getTextRange(G),H=function(x,w,S){return K.$options.wrap=!0,K.$options.needle=w,K.$options.backwards=-1==S,K.find(x)}(U,z,x);H&&(H.cursor=-1==x?H.start:H.end,this.session.unfold(H),this.multiSelect.addRange(H),this.renderer.scrollCursorIntoView(null,.5)),w&&this.multiSelect.substractPoint(G.cursor)}},this.alignCursors=function(){var x=this.session,w=x.multiSelect,S=w.ranges,U=-1,z=S.filter((function(x){if(x.cursor.row==U)return!0;U=x.cursor.row}));if(S.length&&z.length!=S.length-1){z.forEach((function(x){w.substractPoint(x.cursor)}));var H=0,j=1/0,q=S.map((function(w){var S=w.cursor,U=x.getLine(S.row).substr(S.column).search(/\S/g);return-1==U&&(U=0),S.column>H&&(H=S.column),U<j&&(j=U),U}));S.forEach((function(w,S){var U=w.cursor,z=H-U.column,K=q[S]-j;z>K?x.insert(U,X.stringRepeat(" ",z-K)):x.remove(new G(U.row,U.column,U.row,U.column-z+K)),w.start.column=w.end.column=H,w.start.row=w.end.row=U.row,w.cursor=w.end})),w.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var K=this.selection.getRange(),Y=K.start.row,Z=K.end.row,J=Y==Z;if(J){var Q,ee=this.session.getLength();do{Q=this.session.getLine(Z)}while(/[=:]/.test(Q)&&++Z<ee);do{Q=this.session.getLine(Y)}while(/[=:]/.test(Q)&&--Y>0);Y<0&&(Y=0),Z>=ee&&(Z=ee-1)}var te=this.session.removeFullLines(Y,Z);te=this.$reAlignText(te,J),this.session.insert({row:Y,column:0},te.join("\n")+"\n"),J||(K.start.column=0,K.end.column=te[te.length-1].length),this.selection.setRange(K)}},this.$reAlignText=function(x,w){var S,U,G,z=!0,H=!0;return x.map((function(x){var w=x.match(/(\s*)(.*?)(\s*)([=:].*)/);return w?null==S?(S=w[1].length,U=w[2].length,G=w[3].length,w):(S+U+G!=w[1].length+w[2].length+w[3].length&&(H=!1),S!=w[1].length&&(z=!1),S>w[1].length&&(S=w[1].length),U<w[2].length&&(U=w[2].length),G>w[3].length&&(G=w[3].length),w):[x]})).map(w?l:z?H?function(x){return x[2]?a(S+U-x[2].length)+x[2]+a(G)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}:l:function(x){return x[2]?a(S)+x[2]+a(G)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]});function a(x){return X.stringRepeat(" ",x)}function l(x){return x[2]?a(S)+x[2]+a(U-x[2].length+G)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}}}).call(Z.prototype),w.onSessionChange=function(x){var w=x.session;w&&!w.multiSelect&&(w.$selectionMarkers=[],w.selection.$initRangeList(),w.multiSelect=w.selection),this.multiSelect=w&&w.multiSelect;var S=x.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),w&&(w.multiSelect.on("addRange",this.$onAddRange),w.multiSelect.on("removeRange",this.$onRemoveRange),w.multiSelect.on("multiSelect",this.$onMultiSelect),w.multiSelect.on("singleSelect",this.$onSingleSelect),w.multiSelect.lead.on("change",this.$checkMultiselectChange),w.multiSelect.anchor.on("change",this.$checkMultiselectChange)),w&&this.inMultiSelectMode!=w.selection.inMultiSelectMode&&(w.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},w.MultiSelect=p,x("./config").defineOptions(Z.prototype,"editor",{enableMultiselect:{set:function(x){p(this),x?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",H)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",H))},value:!0},enableBlockSelect:{set:function(x){this.$blockSelectEnabled=x},value:!0}})})),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],(function(x,w,S){"use strict";var U=x("../../range").Range,G=w.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(x,w,S){var U=x.getLine(S);return this.foldingStartMarker.test(U)?"start":"markbeginend"==w&&this.foldingStopMarker&&this.foldingStopMarker.test(U)?"end":""},this.getFoldWidgetRange=function(x,w,S){return null},this.indentationBlock=function(x,w,S){var G=/\S/,z=x.getLine(w),H=z.search(G);if(-1!=H){for(var j=S||z.length,X=x.getLength(),q=w,K=w;++w<X;){var Y=x.getLine(w).search(G);if(-1!=Y){if(Y<=H){var Z=x.getTokenAt(w,0);if(!Z||"string"!==Z.type)break}K=w}}if(K>q){var J=x.getLine(K).length;return new U(q,j,K,J)}}},this.openingBracketBlock=function(x,w,S,G,z){var H={row:S,column:G+1},j=x.$findClosingBracket(w,H,z);if(j){var X=x.foldWidgets[j.row];return null==X&&(X=x.getFoldWidget(j.row)),"start"==X&&j.row>H.row&&(j.row--,j.column=x.getLine(j.row).length),U.fromPoints(H,j)}},this.closingBracketBlock=function(x,w,S,G,z){var H={row:S,column:G},j=x.$findOpeningBracket(w,H);if(j)return j.column++,H.column--,U.fromPoints(j,H)}}).call(G.prototype)})),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(x,w,S){"use strict";w.isDark=!1,w.cssClass="ace-tm",w.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',w.$id="ace/theme/textmate",x("../lib/dom").importCssString(w.cssText,w.cssClass)})),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],(function(x,w,S){"use strict";x("./lib/oop");var U=x("./lib/dom");function r(x){this.session=x,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}x("./range").Range,function(){this.getRowLength=function(x){var w;return w=this.lineWidgets&&this.lineWidgets[x]&&this.lineWidgets[x].rowCount||0,this.$useWrapMode&&this.$wrapData[x]?this.$wrapData[x].length+1+w:1+w},this.$getWidgetScreenLength=function(){var x=0;return this.lineWidgets.forEach((function(w){w&&w.rowCount&&!w.hidden&&(x+=w.rowCount)})),x},this.$onChangeEditor=function(x){this.attach(x.editor)},this.attach=function(x){x&&x.widgetManager&&x.widgetManager!=this&&x.widgetManager.detach(),this.editor!=x&&(this.detach(),this.editor=x,x&&(x.widgetManager=this,x.renderer.on("beforeRender",this.measureWidgets),x.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(x){var w=this.editor;if(w){this.editor=null,w.widgetManager=null,w.renderer.off("beforeRender",this.measureWidgets),w.renderer.off("afterRender",this.renderWidgets);var S=this.session.lineWidgets;S&&S.forEach((function(x){x&&x.el&&x.el.parentNode&&(x._inDocument=!1,x.el.parentNode.removeChild(x.el))}))}},this.updateOnFold=function(x,w){var S=w.lineWidgets;if(S&&x.action){for(var U=x.data,G=U.start.row,z=U.end.row,H="add"==x.action,j=G+1;j<z;j++)S[j]&&(S[j].hidden=H);S[z]&&(H?S[G]?S[z].hidden=H:S[G]=S[z]:(S[G]==S[z]&&(S[G]=void 0),S[z].hidden=H))}},this.updateOnChange=function(x){var w=this.session.lineWidgets;if(w){var S=x.start.row,U=x.end.row-S;if(0===U);else if("remove"==x.action)w.splice(S+1,U).forEach((function(x){x&&this.removeLineWidget(x)}),this),this.$updateRows();else{var G=new Array(U);G.unshift(S,0),w.splice.apply(w,G),this.$updateRows()}}},this.$updateRows=function(){var x=this.session.lineWidgets;if(x){var w=!0;x.forEach((function(x,S){if(x)for(w=!1,x.row=S;x.$oldWidget;)x.$oldWidget.row=S,x=x.$oldWidget})),w&&(this.session.lineWidgets=null)}},this.addLineWidget=function(x){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var w=this.session.lineWidgets[x.row];w&&(x.$oldWidget=w,w.el&&w.el.parentNode&&(w.el.parentNode.removeChild(w.el),w._inDocument=!1)),this.session.lineWidgets[x.row]=x,x.session=this.session;var S=this.editor.renderer;x.html&&!x.el&&(x.el=U.createElement("div"),x.el.innerHTML=x.html),x.el&&(U.addCssClass(x.el,"ace_lineWidgetContainer"),x.el.style.position="absolute",x.el.style.zIndex=5,S.container.appendChild(x.el),x._inDocument=!0),x.coverGutter||(x.el.style.zIndex=3),null==x.pixelHeight&&(x.pixelHeight=x.el.offsetHeight),null==x.rowCount&&(x.rowCount=x.pixelHeight/S.layerConfig.lineHeight);var G=this.session.getFoldAt(x.row,0);if(x.$fold=G,G){var z=this.session.lineWidgets;x.row!=G.end.row||z[G.start.row]?x.hidden=!0:z[G.start.row]=x}return this.session._emit("changeFold",{data:{start:{row:x.row}}}),this.$updateRows(),this.renderWidgets(null,S),this.onWidgetChanged(x),x},this.removeLineWidget=function(x){if(x._inDocument=!1,x.session=null,x.el&&x.el.parentNode&&x.el.parentNode.removeChild(x.el),x.editor&&x.editor.destroy)try{x.editor.destroy()}catch(x){}if(this.session.lineWidgets){var w=this.session.lineWidgets[x.row];if(w==x)this.session.lineWidgets[x.row]=x.$oldWidget,x.$oldWidget&&this.onWidgetChanged(x.$oldWidget);else for(;w;){if(w.$oldWidget==x){w.$oldWidget=x.$oldWidget;break}w=w.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:x.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(x){for(var w=this.session.lineWidgets,S=w&&w[x],U=[];S;)U.push(S),S=S.$oldWidget;return U},this.onWidgetChanged=function(x){this.session._changedWidgets.push(x),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(x,w){var S=this.session._changedWidgets,U=w.layerConfig;if(S&&S.length){for(var G=1/0,z=0;z<S.length;z++){var H=S[z];if(H&&H.el&&H.session==this.session){if(!H._inDocument){if(this.session.lineWidgets[H.row]!=H)continue;H._inDocument=!0,w.container.appendChild(H.el)}H.h=H.el.offsetHeight,H.fixedWidth||(H.w=H.el.offsetWidth,H.screenWidth=Math.ceil(H.w/U.characterWidth));var j=H.h/U.lineHeight;H.coverLine&&(j-=this.session.getRowLineCount(H.row))<0&&(j=0),H.rowCount!=j&&(H.rowCount=j,H.row<G&&(G=H.row))}}G!=1/0&&(this.session._emit("changeFold",{data:{start:{row:G}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(x,w){var S=w.layerConfig,U=this.session.lineWidgets;if(U){for(var G=Math.min(this.firstRow,S.firstRow),z=Math.max(this.lastRow,S.lastRow,U.length);G>0&&!U[G];)G--;this.firstRow=S.firstRow,this.lastRow=S.lastRow,w.$cursorLayer.config=S;for(var H=G;H<=z;H++){var j=U[H];if(j&&j.el)if(j.hidden)j.el.style.top=-100-(j.pixelHeight||0)+"px";else{j._inDocument||(j._inDocument=!0,w.container.appendChild(j.el));var X=w.$cursorLayer.getPixelPosition({row:H,column:0},!0).top;j.coverLine||(X+=S.lineHeight*this.session.getRowLineCount(j.row)),j.el.style.top=X-S.offset+"px";var q=j.coverGutter?0:w.gutterWidth;j.fixedWidth||(q-=w.scrollLeft),j.el.style.left=q+"px",j.fullWidth&&j.screenWidth&&(j.el.style.minWidth=S.width+2*S.padding+"px"),j.fixedWidth?j.el.style.right=w.scrollBar.getWidth()+"px":j.el.style.right=""}}}}}.call(r.prototype),w.LineWidgets=r})),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],(function(x,w,S){"use strict";var U=x("../line_widgets").LineWidgets,G=x("../lib/dom"),z=x("../range").Range;w.showErrorMarker=function(x,w){var S=x.session;S.widgetManager||(S.widgetManager=new U(S),S.widgetManager.attach(x));var H=x.getCursorPosition(),j=H.row,X=S.widgetManager.getWidgetsAtRow(j).filter((function(x){return"errorMarker"==x.type}))[0];X?X.destroy():j-=w;var q,K=function(x,w,S){var U=x.getAnnotations().sort(z.comparePoints);if(U.length){var G=function(x,w,S){for(var U=0,G=x.length-1;U<=G;){var z=U+G>>1,H=S(w,x[z]);if(H>0)U=z+1;else{if(!(H<0))return z;G=z-1}}return-(U+1)}(U,{row:w,column:-1},z.comparePoints);G<0&&(G=-G-1),G>=U.length?G=S>0?0:U.length-1:0===G&&S<0&&(G=U.length-1);var H=U[G];if(H&&S){if(H.row===w){do{H=U[G+=S]}while(H&&H.row===w);if(!H)return U.slice()}var j=[];w=H.row;do{j[S<0?"unshift":"push"](H),H=U[G+=S]}while(H&&H.row==w);return j.length&&j}}}(S,j,w);if(K){var Y=K[0];H.column=(Y.pos&&"number"!=typeof Y.column?Y.pos.sc:Y.column)||0,H.row=Y.row,q=x.renderer.$gutterLayer.$annotations[H.row]}else{if(X)return;q={text:["Looks good!"],className:"ace_ok"}}x.session.unfold(H.row),x.selection.moveToPosition(H);var Z={row:H.row,fixedWidth:!0,coverGutter:!0,el:G.createElement("div"),type:"errorMarker"},J=Z.el.appendChild(G.createElement("div")),Q=Z.el.appendChild(G.createElement("div"));Q.className="error_widget_arrow "+q.className;var ee=x.renderer.$cursorLayer.getPixelPosition(H).left;Q.style.left=ee+x.renderer.gutterWidth-5+"px",Z.el.className="error_widget_wrapper",J.className="error_widget "+q.className,J.innerHTML=q.text.join("<br>"),J.appendChild(G.createElement("div"));var g=function(x,w,S){if(0===w&&("esc"===S||"return"===S))return Z.destroy(),{command:"null"}};Z.destroy=function(){x.$mouseHandler.isMousePressed||(x.keyBinding.removeKeyboardHandler(g),S.widgetManager.removeLineWidget(Z),x.off("changeSelection",Z.destroy),x.off("changeSession",Z.destroy),x.off("mouseup",Z.destroy),x.off("change",Z.destroy))},x.keyBinding.addKeyboardHandler(g),x.on("changeSelection",Z.destroy),x.on("changeSession",Z.destroy),x.on("mouseup",Z.destroy),x.on("change",Z.destroy),x.session.widgetManager.addLineWidget(Z),Z.el.onmousedown=x.focus.bind(x),x.renderer.scrollCursorIntoView(null,.5,{bottom:Z.el.offsetHeight})},G.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")})),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],(function(x,w,U){"use strict";x("./lib/fixoldbrowsers");var G=x("./lib/dom"),z=x("./lib/event"),H=x("./range").Range,j=x("./editor").Editor,X=x("./edit_session").EditSession,q=x("./undomanager").UndoManager,K=x("./virtual_renderer").VirtualRenderer;x("./worker/worker_client"),x("./keyboard/hash_handler"),x("./placeholder"),x("./multi_select"),x("./mode/folding/fold_mode"),x("./theme/textmate"),x("./ext/error_marker"),w.config=x("./config"),w.require=x,w.define=S(3),w.edit=function(x,S){if("string"==typeof x){var U=x;if(!(x=document.getElementById(U)))throw new Error("ace.edit can't find div #"+U)}if(x&&x.env&&x.env.editor instanceof j)return x.env.editor;var H="";if(x&&/input|textarea/i.test(x.tagName)){var X=x;H=X.value,x=G.createElement("pre"),X.parentNode.replaceChild(x,X)}else x&&(H=x.textContent,x.innerHTML="");var q=w.createEditSession(H),Y=new j(new K(x),q,S),Z={document:q,editor:Y,onResize:Y.resize.bind(Y,null)};return X&&(Z.textarea=X),z.addListener(window,"resize",Z.onResize),Y.on("destroy",(function(){z.removeListener(window,"resize",Z.onResize),Z.editor.container.env=null})),Y.container.env=Y.env=Z,Y},w.createEditSession=function(x,w){var S=new X(x,w);return S.setUndoManager(new q),S},w.Range=H,w.Editor=j,w.EditSession=X,w.UndoManager=q,w.VirtualRenderer=K,w.version=w.config.version})),ace.require(["ace/ace"],(function(w){for(var S in w&&(w.config.init(!0),w.define=ace.define),window.ace||(window.ace=w),w)w.hasOwnProperty(S)&&(window.ace[S]=w[S]);window.ace.default=window.ace,x&&(x.exports=window.ace)})),x.exports=ace}).call(this,S(0)(x))},function(x,w,S){(function(x){ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(x,w,S){"use strict";var U=x("../lib/oop"),G=x("./text_highlight_rules").TextHighlightRules,o=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},o.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};U.inherits(o,G),o.getTagRule=function(x){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},o.getStartRule=function(x){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:x}},o.getEndRule=function(x){return{token:"comment.doc",regex:"\\*\\/",next:x}},w.DocCommentHighlightRules=o})),ace.define("ace/mode/c_cpp_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],(function(x,w,S){"use strict";var U=x("../lib/oop"),G=x("./doc_comment_highlight_rules").DocCommentHighlightRules,z=x("./text_highlight_rules").TextHighlightRules,H=w.cFunctions="\\b(?:hypot(?:f|l)?|s(?:scanf|ystem|nprintf|ca(?:nf|lb(?:n(?:f|l)?|ln(?:f|l)?))|i(?:n(?:h(?:f|l)?|f|l)?|gn(?:al|bit))|tr(?:s(?:tr|pn)|nc(?:py|at|mp)|c(?:spn|hr|oll|py|at|mp)|to(?:imax|d|u(?:l(?:l)?|max)|k|f|l(?:d|l)?)|error|pbrk|ftime|len|rchr|xfrm)|printf|et(?:jmp|vbuf|locale|buf)|qrt(?:f|l)?|w(?:scanf|printf)|rand)|n(?:e(?:arbyint(?:f|l)?|xt(?:toward(?:f|l)?|after(?:f|l)?))|an(?:f|l)?)|c(?:s(?:in(?:h(?:f|l)?|f|l)?|qrt(?:f|l)?)|cos(?:h(?:f)?|f|l)?|imag(?:f|l)?|t(?:ime|an(?:h(?:f|l)?|f|l)?)|o(?:s(?:h(?:f|l)?|f|l)?|nj(?:f|l)?|pysign(?:f|l)?)|p(?:ow(?:f|l)?|roj(?:f|l)?)|e(?:il(?:f|l)?|xp(?:f|l)?)|l(?:o(?:ck|g(?:f|l)?)|earerr)|a(?:sin(?:h(?:f|l)?|f|l)?|cos(?:h(?:f|l)?|f|l)?|tan(?:h(?:f|l)?|f|l)?|lloc|rg(?:f|l)?|bs(?:f|l)?)|real(?:f|l)?|brt(?:f|l)?)|t(?:ime|o(?:upper|lower)|an(?:h(?:f|l)?|f|l)?|runc(?:f|l)?|gamma(?:f|l)?|mp(?:nam|file))|i(?:s(?:space|n(?:ormal|an)|cntrl|inf|digit|u(?:nordered|pper)|p(?:unct|rint)|finite|w(?:space|c(?:ntrl|type)|digit|upper|p(?:unct|rint)|lower|al(?:num|pha)|graph|xdigit|blank)|l(?:ower|ess(?:equal|greater)?)|al(?:num|pha)|gr(?:eater(?:equal)?|aph)|xdigit|blank)|logb(?:f|l)?|max(?:div|abs))|di(?:v|fftime)|_Exit|unget(?:c|wc)|p(?:ow(?:f|l)?|ut(?:s|c(?:har)?|wc(?:har)?)|error|rintf)|e(?:rf(?:c(?:f|l)?|f|l)?|x(?:it|p(?:2(?:f|l)?|f|l|m1(?:f|l)?)?))|v(?:s(?:scanf|nprintf|canf|printf|w(?:scanf|printf))|printf|f(?:scanf|printf|w(?:scanf|printf))|w(?:scanf|printf)|a_(?:start|copy|end|arg))|qsort|f(?:s(?:canf|e(?:tpos|ek))|close|tell|open|dim(?:f|l)?|p(?:classify|ut(?:s|c|w(?:s|c))|rintf)|e(?:holdexcept|set(?:e(?:nv|xceptflag)|round)|clearexcept|testexcept|of|updateenv|r(?:aiseexcept|ror)|get(?:e(?:nv|xceptflag)|round))|flush|w(?:scanf|ide|printf|rite)|loor(?:f|l)?|abs(?:f|l)?|get(?:s|c|pos|w(?:s|c))|re(?:open|e|ad|xp(?:f|l)?)|m(?:in(?:f|l)?|od(?:f|l)?|a(?:f|l|x(?:f|l)?)?))|l(?:d(?:iv|exp(?:f|l)?)|o(?:ngjmp|cal(?:time|econv)|g(?:1(?:p(?:f|l)?|0(?:f|l)?)|2(?:f|l)?|f|l|b(?:f|l)?)?)|abs|l(?:div|abs|r(?:int(?:f|l)?|ound(?:f|l)?))|r(?:int(?:f|l)?|ound(?:f|l)?)|gamma(?:f|l)?)|w(?:scanf|c(?:s(?:s(?:tr|pn)|nc(?:py|at|mp)|c(?:spn|hr|oll|py|at|mp)|to(?:imax|d|u(?:l(?:l)?|max)|k|f|l(?:d|l)?|mbs)|pbrk|ftime|len|r(?:chr|tombs)|xfrm)|to(?:b|mb)|rtomb)|printf|mem(?:set|c(?:hr|py|mp)|move))|a(?:s(?:sert|ctime|in(?:h(?:f|l)?|f|l)?)|cos(?:h(?:f|l)?|f|l)?|t(?:o(?:i|f|l(?:l)?)|exit|an(?:h(?:f|l)?|2(?:f|l)?|f|l)?)|b(?:s|ort))|g(?:et(?:s|c(?:har)?|env|wc(?:har)?)|mtime)|r(?:int(?:f|l)?|ound(?:f|l)?|e(?:name|alloc|wind|m(?:ove|quo(?:f|l)?|ainder(?:f|l)?))|a(?:nd|ise))|b(?:search|towc)|m(?:odf(?:f|l)?|em(?:set|c(?:hr|py|mp)|move)|ktime|alloc|b(?:s(?:init|towcs|rtowcs)|towc|len|r(?:towc|len))))\\b",a=function(){var x=this.$keywords=this.createKeywordMapper({"keyword.control":"break|case|continue|default|do|else|for|goto|if|_Pragma|return|switch|while|catch|operator|try|throw|using","storage.type":"asm|__asm__|auto|bool|_Bool|char|_Complex|double|enum|float|_Imaginary|int|long|short|signed|struct|typedef|union|unsigned|void|class|wchar_t|template|char16_t|char32_t","storage.modifier":"const|extern|register|restrict|static|volatile|inline|private|protected|public|friend|explicit|virtual|export|mutable|typename|constexpr|new|delete|alignas|alignof|decltype|noexcept|thread_local","keyword.operator":"and|and_eq|bitand|bitor|compl|not|not_eq|or|or_eq|typeid|xor|xor_eq|const_cast|dynamic_cast|reinterpret_cast|static_cast|sizeof|namespace","variable.language":"this","constant.language":"NULL|true|false|TRUE|FALSE|nullptr"},"identifier"),w=/\\(?:['"?\\abfnrtv]|[0-7]{1,3}|x[a-fA-F\d]{2}|u[a-fA-F\d]{4}U[a-fA-F\d]{8}|.)/.source,S="%"+/(\d+\$)?/.source+/[#0\- +']*/.source+/[,;:_]?/.source+/((-?\d+)|\*(-?\d+\$)?)?/.source+/(\.((-?\d+)|\*(-?\d+\$)?)?)?/.source+/(hh|h|ll|l|j|t|z|q|L|vh|vl|v|hv|hl)?/.source+/(\[[^"\]]+\]|[diouxXDOUeEfFgGaACcSspn%])/.source;this.$rules={start:[{token:"comment",regex:"//$",next:"start"},{token:"comment",regex:"//",next:"singleLineComment"},G.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment"},{token:"string",regex:"'(?:"+w+"|.)?'"},{token:"string.start",regex:'"',stateName:"qqstring",next:[{token:"string",regex:/\\\s*$/,next:"qqstring"},{token:"constant.language.escape",regex:w},{token:"constant.language.escape",regex:S},{token:"string.end",regex:'"|$',next:"start"},{defaultToken:"string"}]},{token:"string.start",regex:'R"\\(',stateName:"rawString",next:[{token:"string.end",regex:'\\)"',next:"start"},{defaultToken:"string"}]},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b"},{token:"keyword",regex:"#\\s*(?:include|import|pragma|line|define|undef|version)\\b",next:"directive"},{token:"keyword",regex:"#\\s*(?:endif|if|ifdef|else|elif|ifndef)\\b"},{token:"support.function.C99.c",regex:H},{token:x,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*"},{token:"keyword.operator",regex:/--|\+\+|<<=|>>=|>>>=|<>|&&|\|\||\?:|[*%\/+\-&\^|~!<>=]=?/},{token:"punctuation.operator",regex:"\\?|\\:|\\,|\\;|\\."},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],comment:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}],singleLineComment:[{token:"comment",regex:/\\$/,next:"singleLineComment"},{token:"comment",regex:/$/,next:"start"},{defaultToken:"comment"}],directive:[{token:"constant.other.multiline",regex:/\\/},{token:"constant.other.multiline",regex:/.*\\/},{token:"constant.other",regex:"\\s*<.+?>",next:"start"},{token:"constant.other",regex:'\\s*["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]',next:"start"},{token:"constant.other",regex:"\\s*['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']",next:"start"},{token:"constant.other",regex:/[^\\\/]+/,next:"start"}]},this.embedRules(G,"doc-",[G.getEndRule("start")]),this.normalizeRules()};U.inherits(a,z),w.c_cppHighlightRules=a})),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(x,w,S){"use strict";var U=x("../range").Range,r=function(){};(function(){this.checkOutdent=function(x,w){return!!/^\s+$/.test(x)&&/^\s*\}/.test(w)},this.autoOutdent=function(x,w){var S=x.getLine(w).match(/^(\s*\})/);if(!S)return 0;var G=S[1].length,z=x.findMatchingBracket({row:w,column:G});if(!z||z.row==w)return 0;var H=this.$getIndent(x.getLine(z.row));x.replace(new U(w,0,w,G-1),H)},this.$getIndent=function(x){return x.match(/^\s*/)[0]}}).call(r.prototype),w.MatchingBraceOutdent=r})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(x,w,S){"use strict";var U=x("../../lib/oop"),G=x("../../range").Range,z=x("./fold_mode").FoldMode,H=w.FoldMode=function(x){x&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+x.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+x.end)))};U.inherits(H,z),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(x,w,S){var U=x.getLine(S);if(this.singleLineBlockCommentRe.test(U)&&!this.startRegionRe.test(U)&&!this.tripleStarBlockCommentRe.test(U))return"";var G=this._getFoldWidgetBase(x,w,S);return!G&&this.startRegionRe.test(U)?"start":G},this.getFoldWidgetRange=function(x,w,S,U){var G,z=x.getLine(S);if(this.startRegionRe.test(z))return this.getCommentRegionBlock(x,z,S);if(G=z.match(this.foldingStartMarker)){var H=G.index;if(G[1])return this.openingBracketBlock(x,G[1],S,H);var j=x.getCommentFoldRange(S,H+G[0].length,1);return j&&!j.isMultiLine()&&(U?j=this.getSectionRange(x,S):"all"!=w&&(j=null)),j}return"markbegin"!==w&&(G=z.match(this.foldingStopMarker))?(H=G.index+G[0].length,G[1]?this.closingBracketBlock(x,G[1],S,H):x.getCommentFoldRange(S,H,-1)):void 0},this.getSectionRange=function(x,w){for(var S=x.getLine(w),U=S.search(/\S/),z=w,H=S.length,j=w+=1,X=x.getLength();++w<X;){var q=(S=x.getLine(w)).search(/\S/);if(-1!==q){if(U>q)break;var K=this.getFoldWidgetRange(x,"all",w);if(K){if(K.start.row<=z)break;if(K.isMultiLine())w=K.end.row;else if(U==q)break}j=w}}return new G(z,H,j,x.getLine(j).length)},this.getCommentRegionBlock=function(x,w,S){for(var U=w.search(/\s*$/),z=x.getLength(),H=S,j=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,X=1;++S<z;){w=x.getLine(S);var q=j.exec(w);if(q&&(q[1]?X--:X++,!X))break}if(S>H)return new G(H,U,S,w.length)}}.call(H.prototype)})),ace.define("ace/mode/c_cpp",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/c_cpp_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],(function(x,w,S){"use strict";var U=x("../lib/oop"),G=x("./text").Mode,z=x("./c_cpp_highlight_rules").c_cppHighlightRules,H=x("./matching_brace_outdent").MatchingBraceOutdent,j=(x("../range").Range,x("./behaviour/cstyle").CstyleBehaviour),X=x("./folding/cstyle").FoldMode,l=function(){this.HighlightRules=z,this.$outdent=new H,this.$behaviour=new j,this.foldingRules=new X};U.inherits(l,G),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(x,w,S){var U=this.$getIndent(w),G=this.getTokenizer().getLineTokens(w,x),z=G.tokens,H=G.state;if(z.length&&"comment"==z[z.length-1].type)return U;if("start"==x)(j=w.match(/^.*[\{\(\[]\s*$/))&&(U+=S);else if("doc-start"==x){if("start"==H)return"";var j;(j=w.match(/^\s*(\/?)\*/))&&(j[1]&&(U+=" "),U+="* ")}return U},this.checkOutdent=function(x,w,S){return this.$outdent.checkOutdent(w,S)},this.autoOutdent=function(x,w,S){this.$outdent.autoOutdent(w,S)},this.$id="ace/mode/c_cpp"}.call(l.prototype),w.Mode=l})),ace.define("ace/mode/glsl_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/c_cpp_highlight_rules"],(function(x,w,S){"use strict";var U=x("../lib/oop"),G=x("./c_cpp_highlight_rules").c_cppHighlightRules,o=function(){var x=this.createKeywordMapper({"variable.language":"this",keyword:"layout|attribute|const|uniform|varying|break|continue|do|for|while|if|else|in|out|inout|float|int|void|bool|true|false|lowp|mediump|highp|precision|invariant|discard|return|mat2|mat3|mat4|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|sampler2D|samplerCube|struct","constant.language":"radians|degrees|sin|cos|tan|asin|acos|atan|pow|exp|log|exp2|log2|sqrt|inversesqrt|abs|sign|floor|ceil|fract|mod|min|max|clamp|mix|step|smoothstep|length|distance|dot|cross|normalize|faceforward|reflect|refract|matrixCompMult|lessThan|lessThanEqual|greaterThan|greaterThanEqual|equal|notEqual|any|all|not|dFdx|dFdy|fwidth|texture2D|texture2DProj|texture2DLod|texture2DProjLod|textureCube|textureCubeLod|gl_MaxVertexAttribs|gl_MaxVertexUniformVectors|gl_MaxVaryingVectors|gl_MaxVertexTextureImageUnits|gl_MaxCombinedTextureImageUnits|gl_MaxTextureImageUnits|gl_MaxFragmentUniformVectors|gl_MaxDrawBuffers|gl_DepthRangeParameters|gl_DepthRange|gl_Position|gl_PointSize|gl_FragCoord|gl_FrontFacing|gl_PointCoord|gl_FragColor|gl_FragData"},"identifier");this.$rules=(new G).$rules,this.$rules.start.forEach((function(w){"function"==typeof w.token&&(w.token=x)}))};U.inherits(o,G),w.glslHighlightRules=o})),ace.define("ace/mode/glsl",["require","exports","module","ace/lib/oop","ace/mode/c_cpp","ace/mode/glsl_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],(function(x,w,S){"use strict";var U=x("../lib/oop"),G=x("./c_cpp").Mode,z=x("./glsl_highlight_rules").glslHighlightRules,H=x("./matching_brace_outdent").MatchingBraceOutdent,j=(x("../range").Range,x("./behaviour/cstyle").CstyleBehaviour),X=x("./folding/cstyle").FoldMode,l=function(){this.HighlightRules=z,this.$outdent=new H,this.$behaviour=new j,this.foldingRules=new X};U.inherits(l,G),function(){this.$id="ace/mode/glsl"}.call(l.prototype),w.Mode=l})),ace.require(["ace/mode/glsl"],(function(w){x&&(x.exports=w)}))}).call(this,S(0)(x))},function(x,w,S){(function(x){ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],(function(x,w,S){w.isDark=!0,w.cssClass="ace-monokai",w.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}",x("../lib/dom").importCssString(w.cssText,w.cssClass)})),ace.require(["ace/theme/monokai"],(function(w){x&&(x.exports=w)}))}).call(this,S(0)(x))},function(x,w,S){var U=S(1),G=S(9);"string"==typeof(G=G.__esModule?G.default:G)&&(G=[[x.i,G,""]]);var z=(U(G,{insert:"html",singleton:!1}),G.locals?G.locals:{});x.exports=z},function(x,w,S){(w=S(2)(!1)).push([x.i,".ace-monokai {\r\n    color: #f9f9f9;\r\n    font-size: 14px;\r\n}\r\n\r\n.ace-monokai .ace_entity.ace_name.ace_tag,\r\n.ace-monokai .ace_keyword,\r\n.ace-monokai .ace_meta.ace_tag,\r\n.ace-monokai .ace_storage {\r\n    color: #F0640D\r\n}\r\n\r\n.ace-monokai .ace_constant.ace_character,\r\n.ace-monokai .ace_constant.ace_other {\r\n    color: #5db0d7;\r\n}\r\n\r\n.ace-monokai .ace_marker-layer .ace_selection {\r\n    background: #a6e22e\r\n}\r\n\r\n.ace-monokai .ace_marker-layer .ace_bracket {\r\n    margin: -1px 0 0 -1px;\r\n    border: 1px solid #a6e22e;\r\n}\r\n\r\n.ace-monokai .ace_marker-layer .ace_active-line {\r\n    background: #2c2c2c\r\n}\r\n.ace-monokai .ace_gutter-active-line {\r\n    background-color: #2c2c2c\r\n}\r\n.ace-monokai .ace_marker-layer .ace_selected-word {\r\n    border: 1px solid #a6e22e\r\n}\r\n\r\n.ace-monokai .ace_constant.ace_language {\r\n    color: #e6db74\r\n}\r\n.ace-monokai .ace_constant.ace_numeric {\r\n    color: #ae81ff\r\n}\r\n\r\n.ace-monokai .ace_gutter {\r\n    background: #222;\r\n    color: #8F908A;\r\n}",""]),x.exports=w},function(x,w,S){(function(x){ace.define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/keyboard/hash_handler","ace/lib/keys"],(function(x,w,S){"use strict";var U=x("../lib/dom"),G=x("../lib/lang"),z=x("../lib/event"),H='.ace_search {background-color: #ddd;color: #666;border: 1px solid #cbcbcb;border-top: 0 none;overflow: hidden;margin: 0;padding: 4px 6px 0 4px;position: absolute;top: 0;z-index: 99;white-space: normal;}.ace_search.left {border-left: 0 none;border-radius: 0px 0px 5px 0px;left: 0;}.ace_search.right {border-radius: 0px 0px 0px 5px;border-right: 0 none;right: 0;}.ace_search_form, .ace_replace_form {margin: 0 20px 4px 0;overflow: hidden;line-height: 1.9;}.ace_replace_form {margin-right: 0;}.ace_search_form.ace_nomatch {outline: 1px solid red;}.ace_search_field {border-radius: 3px 0 0 3px;background-color: white;color: black;border: 1px solid #cbcbcb;border-right: 0 none;outline: 0;padding: 0;font-size: inherit;margin: 0;line-height: inherit;padding: 0 6px;min-width: 17em;vertical-align: top;min-height: 1.8em;box-sizing: content-box;}.ace_searchbtn {border: 1px solid #cbcbcb;line-height: inherit;display: inline-block;padding: 0 6px;background: #fff;border-right: 0 none;border-left: 1px solid #dcdcdc;cursor: pointer;margin: 0;position: relative;color: #666;}.ace_searchbtn:last-child {border-radius: 0 3px 3px 0;border-right: 1px solid #cbcbcb;}.ace_searchbtn:disabled {background: none;cursor: default;}.ace_searchbtn:hover {background-color: #eef1f6;}.ace_searchbtn.prev, .ace_searchbtn.next {padding: 0px 0.7em}.ace_searchbtn.prev:after, .ace_searchbtn.next:after {content: "";border: solid 2px #888;width: 0.5em;height: 0.5em;border-width:  2px 0 0 2px;display:inline-block;transform: rotate(-45deg);}.ace_searchbtn.next:after {border-width: 0 2px 2px 0 ;}.ace_searchbtn_close {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;border-radius: 50%;border: 0 none;color: #656565;cursor: pointer;font: 16px/16px Arial;padding: 0;height: 14px;width: 14px;top: 9px;right: 7px;position: absolute;}.ace_searchbtn_close:hover {background-color: #656565;background-position: 50% 100%;color: white;}.ace_button {margin-left: 2px;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;overflow: hidden;opacity: 0.7;border: 1px solid rgba(100,100,100,0.23);padding: 1px;box-sizing:    border-box!important;color: black;}.ace_button:hover {background-color: #eee;opacity:1;}.ace_button:active {background-color: #ddd;}.ace_button.checked {border-color: #3399ff;opacity:1;}.ace_search_options{margin-bottom: 3px;text-align: right;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;clear: both;}.ace_search_counter {float: left;font-family: arial;padding: 0 8px;}',j=x("../keyboard/hash_handler").HashHandler,X=x("../lib/keys");U.importCssString(H,"ace_searchbox");var l=function(x,w,S){var G=U.createElement("div");U.buildDom(["div",{class:"ace_search right"},["span",{action:"hide",class:"ace_searchbtn_close"}],["div",{class:"ace_search_form"},["input",{class:"ace_search_field",placeholder:"Search for",spellcheck:"false"}],["span",{action:"findPrev",class:"ace_searchbtn prev"},"​"],["span",{action:"findNext",class:"ace_searchbtn next"},"​"],["span",{action:"findAll",class:"ace_searchbtn",title:"Alt-Enter"},"All"]],["div",{class:"ace_replace_form"},["input",{class:"ace_search_field",placeholder:"Replace with",spellcheck:"false"}],["span",{action:"replaceAndFindNext",class:"ace_searchbtn"},"Replace"],["span",{action:"replaceAll",class:"ace_searchbtn"},"All"]],["div",{class:"ace_search_options"},["span",{action:"toggleReplace",class:"ace_button",title:"Toggle Replace mode",style:"float:left;margin-top:-2px;padding:0 5px;"},"+"],["span",{class:"ace_search_counter"}],["span",{action:"toggleRegexpMode",class:"ace_button",title:"RegExp Search"},".*"],["span",{action:"toggleCaseSensitive",class:"ace_button",title:"CaseSensitive Search"},"Aa"],["span",{action:"toggleWholeWords",class:"ace_button",title:"Whole Word Search"},"\\b"],["span",{action:"searchInSelection",class:"ace_button",title:"Search In Selection"},"S"]]],G),this.element=G.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(x),U.importCssString(H,"ace_searchbox",x.container)};(function(){this.setEditor=function(x){x.searchBox=this,x.renderer.scroller.appendChild(this.element),this.editor=x},this.setSession=function(x){this.searchRange=null,this.$syncOptions(!0)},this.$initElements=function(x){this.searchBox=x.querySelector(".ace_search_form"),this.replaceBox=x.querySelector(".ace_replace_form"),this.searchOption=x.querySelector("[action=searchInSelection]"),this.replaceOption=x.querySelector("[action=toggleReplace]"),this.regExpOption=x.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=x.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=x.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field"),this.searchCounter=x.querySelector(".ace_search_counter")},this.$init=function(){var x=this.element;this.$initElements(x);var w=this;z.addListener(x,"mousedown",(function(x){setTimeout((function(){w.activeInput.focus()}),0),z.stopPropagation(x)})),z.addListener(x,"click",(function(x){var S=(x.target||x.srcElement).getAttribute("action");S&&w[S]?w[S]():w.$searchBarKb.commands[S]&&w.$searchBarKb.commands[S].exec(w),z.stopPropagation(x)})),z.addCommandKeyListener(x,(function(x,S,U){var G=X.keyCodeToString(U),H=w.$searchBarKb.findKeyCommand(S,G);H&&H.exec&&(H.exec(w),z.stopEvent(x))})),this.$onChange=G.delayedCall((function(){w.find(!1,!1)})),z.addListener(this.searchInput,"input",(function(){w.$onChange.schedule(20)})),z.addListener(this.searchInput,"focus",(function(){w.activeInput=w.searchInput,w.searchInput.value&&w.highlight()})),z.addListener(this.replaceInput,"focus",(function(){w.activeInput=w.replaceInput,w.searchInput.value&&w.highlight()}))},this.$closeSearchBarKb=new j([{bindKey:"Esc",name:"closeSearchBar",exec:function(x){x.searchBox.hide()}}]),this.$searchBarKb=new j,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(x){var w=x.isReplace=!x.isReplace;x.replaceBox.style.display=w?"":"none",x.replaceOption.checked=!1,x.$syncOptions(),x.searchInput.focus()},"Ctrl-H|Command-Option-F":function(x){x.editor.getReadOnly()||(x.replaceOption.checked=!0,x.$syncOptions(),x.replaceInput.focus())},"Ctrl-G|Command-G":function(x){x.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(x){x.findPrev()},esc:function(x){setTimeout((function(){x.hide()}))},Return:function(x){x.activeInput==x.replaceInput&&x.replace(),x.findNext()},"Shift-Return":function(x){x.activeInput==x.replaceInput&&x.replace(),x.findPrev()},"Alt-Return":function(x){x.activeInput==x.replaceInput&&x.replaceAll(),x.findAll()},Tab:function(x){(x.activeInput==x.replaceInput?x.searchInput:x.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(x){x.regExpOption.checked=!x.regExpOption.checked,x.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(x){x.caseSensitiveOption.checked=!x.caseSensitiveOption.checked,x.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(x){x.wholeWordOption.checked=!x.wholeWordOption.checked,x.$syncOptions()}},{name:"toggleReplace",exec:function(x){x.replaceOption.checked=!x.replaceOption.checked,x.$syncOptions()}},{name:"searchInSelection",exec:function(x){x.searchOption.checked=!x.searchRange,x.setSearchRange(x.searchOption.checked&&x.editor.getSelectionRange()),x.$syncOptions()}}]),this.setSearchRange=function(x){this.searchRange=x,x?this.searchRangeMarker=this.editor.session.addMarker(x,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},this.$syncOptions=function(x){U.setCssClass(this.replaceOption,"checked",this.searchRange),U.setCssClass(this.searchOption,"checked",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?"-":"+",U.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),U.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),U.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);var w=this.editor.getReadOnly();this.replaceOption.style.display=w?"none":"",this.replaceBox.style.display=this.replaceOption.checked&&!w?"":"none",this.find(!1,!1,x)},this.highlight=function(x){this.editor.session.highlight(x||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(x,w,S){var G=!this.editor.find(this.searchInput.value,{skipCurrent:x,backwards:w,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:S,range:this.searchRange})&&this.searchInput.value;U.setCssClass(this.searchBox,"ace_nomatch",G),this.editor._emit("findSearchBox",{match:!G}),this.highlight(),this.updateCounter()},this.updateCounter=function(){var x=this.editor,w=x.$search.$options.re,S=0,U=0;if(w){var G=this.searchRange?x.session.getTextRange(this.searchRange):x.getValue(),z=x.session.doc.positionToIndex(x.selection.anchor);this.searchRange&&(z-=x.session.doc.positionToIndex(this.searchRange.start));for(var H,j=w.lastIndex=0;(H=w.exec(G))&&(S++,(j=H.index)<=z&&U++,!(S>999))&&(H[0]||(w.lastIndex=j+=1,!(j>=G.length))););}this.searchCounter.textContent=U+" of "+(S>999?"999+":S)},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var x=!this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked})&&this.searchInput.value;U.setCssClass(this.searchBox,"ace_nomatch",x),this.editor._emit("findSearchBox",{match:!x}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off("changeSession",this.setSession),this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(x,w){this.active=!0,this.editor.on("changeSession",this.setSession),this.element.style.display="",this.replaceOption.checked=w,x&&(this.searchInput.value=x),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},this.isFocused=function(){var x=document.activeElement;return x==this.searchInput||x==this.replaceInput}}).call(l.prototype),w.SearchBox=l,w.Search=function(x,w){(x.searchBox||new l(x)).show(x.session.getTextRange(),w)}})),ace.require(["ace/ext/searchbox"],(function(w){x&&(x.exports=w)}))}).call(this,S(0)(x))},function(x,w,S){var U=S(1),G=S(12);"string"==typeof(G=G.__esModule?G.default:G)&&(G=[[x.i,G,""]]);var z=(U(G,{insert:"html",singleton:!1}),G.locals?G.locals:{});x.exports=z},function(x,w,S){(w=S(2)(!1)).push([x.i,"@import url(https://fonts.googleapis.com/css?family=Montserrat:300,400);"]),w.push([x.i,".captureMenuComponent{position:absolute;padding:7px;z-index:99999;top:10px;left:50%;margin-left:-209px;height:40px;width:400px;border:2px solid #222;background-color:#2c2c2c;visibility:hidden;display:none;color:#f9f9f9;font-family:Consolas, monaco, monospace;font-size:14px;font-weight:500}.captureMenuComponent.active{visibility:visible;display:block}.captureMenuComponent,.captureMenuComponent:after,.captureMenuComponent:before{box-sizing:content-box}.captureMenuLogComponent{position:absolute;padding:7px;z-index:80000;top:66px;left:50%;margin-left:-209px;height:40px;width:400px;border:2px solid #222;background-color:#2c2c2c;visibility:hidden;display:none;color:#f9f9f9;font-family:Consolas, monaco, monospace;font-size:14px;font-weight:500}.captureMenuLogComponent.active{visibility:visible;display:block}.captureMenuLogComponent,.captureMenuLogComponent:after,.captureMenuLogComponent:before{box-sizing:content-box}.captureMenuLogComponent span.error{color:red}.canvasListComponent{float:left;width:50%;height:100%}.canvasListComponent [commandName=onCanvasSelection]{vertical-align:center;line-height:40px;white-space:nowrap;text-overflow:ellipsis;width:190px;display:inline-block;overflow:hidden;margin:0px 5px}.canvasListComponent [commandName=onCanvasSelection]:hover{color:#c9c9c9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.canvasListComponent ul{margin:0px;padding:7px;list-style:none;position:absolute;top:54px;left:-2px;width:400px;border:2px solid #222;background-color:#2c2c2c}.canvasListComponent ul li{margin:5px}.canvasListComponent ul li:hover{color:#c9c9c9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.captureMenuActionsComponent{float:left;width:30%;height:100%;margin-top:7.5px}.captureMenuActionsComponent div{float:left}.captureMenuActionsComponent [commandName=onCaptureRequested]{border-radius:50%;background:#2c2c2c;border:2px solid red;width:21px;height:21px}.captureMenuActionsComponent [commandName=onCaptureRequested]:hover{background:red;cursor:pointer;transition:background .3s;-webkit-transition:background .3s;-moz-transition:background .3s}.captureMenuActionsComponent [commandName=onPlayRequested],.captureMenuActionsComponent [commandName=onPlayNextFrameRequested]{width:21px;height:21px;border:2px solid #f9f9f9;border-radius:50%;margin-left:9px}.captureMenuActionsComponent [commandName=onPlayRequested]:before,.captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:before{content:'';position:absolute;display:inline-block;margin-top:6px;margin-left:4px;width:7px;height:7px;border-top:2px solid #f9f9f9;border-right:2px solid #f9f9f9;background-color:#f9f9f9;-moz-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);z-index:-20}.captureMenuActionsComponent [commandName=onPlayRequested]:after,.captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:after{content:'';position:absolute;display:inline-block;width:8px;height:20px;background-color:#2c2c2c;z-index:-10}.captureMenuActionsComponent [commandName=onPlayRequested]:hover,.captureMenuActionsComponent :hover[commandName=onPlayNextFrameRequested]{cursor:pointer;border:2px solid #c9c9c9;transition:border .3s;-webkit-transition:border .3s;-moz-transition:border .3s}.captureMenuActionsComponent [commandName=onPauseRequested]{width:21px;height:21px;border:2px solid #f9f9f9;border-radius:50%;margin-left:9px}.captureMenuActionsComponent [commandName=onPauseRequested]:before{content:'';position:absolute;display:inline-block;width:2px;height:13px;margin-left:12px;margin-top:4px;background-color:#f9f9f9}.captureMenuActionsComponent [commandName=onPauseRequested]:after{content:'';position:absolute;display:inline-block;width:2px;height:13px;margin-left:7px;margin-top:4px;background-color:#f9f9f9}.captureMenuActionsComponent [commandName=onPauseRequested]:hover{cursor:pointer;border:2px solid #c9c9c9;transition:border .3s;-webkit-transition:border .3s;-moz-transition:border .3s}.captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:before{background-color:#2c2c2c}.fpsCounterComponent{float:left;width:20%;vertical-align:center;line-height:40px;white-space:nowrap}\n",""]),x.exports=w},function(x,w,S){var U=S(1),G=S(14);"string"==typeof(G=G.__esModule?G.default:G)&&(G=[[x.i,G,""]]);var z=(U(G,{insert:"html",singleton:!1}),G.locals?G.locals:{});x.exports=z},function(x,w,S){(w=S(2)(!1)).push([x.i,"@import url(https://fonts.googleapis.com/css?family=Montserrat:300,400);"]),w.push([x.i,".resultViewComponent{position:absolute;z-index:99999;border:1px solid #000;top:0;left:0;bottom:0;right:0;background-color:#222;opacity:1;visibility:hidden;display:none;color:#f9f9f9;font-family:Consolas, monaco, monospace;font-size:14px;font-weight:500}.resultViewComponent.active{visibility:visible;display:block}.resultViewComponent,.resultViewComponent:after,.resultViewComponent:before{box-sizing:content-box}.resultViewMenuComponent{font-family:'Montserrat', sans-serif;font-size:13px;font-weight:300;line-height:40px;flex:1 100%;display:flex;flex-flow:row wrap;height:42px;outline:0 none;border-bottom:2px solid #222;box-sizing:border-box;list-style:none;margin:0;background:#2c2c2c;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap;justify-content:flex-end}.resultViewMenuComponent .resultViewMenuOpen{display:none;visibility:hidden}.resultViewMenuComponent a{outline:0 none;text-decoration:none;display:block;padding:0 20px 0 20px;color:#ccc;background:#2c2c2c;box-sizing:border-box;height:100%}.resultViewMenuComponent a.active{background:#222;color:white;font-weight:400;border-bottom:2px solid #F0640D}.resultViewMenuComponent a:hover{background:#222;color:#c9c9c9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.resultViewMenuComponent a:hover.active{color:#F0640D;transition:color 0;-webkit-transition:color 0;-moz-transition:color 0}.resultViewMenuComponent a.clearSearch{padding:0px;margin-left:-30px;margin-right:20px;z-index:9000;color:#f9f9f9}.resultViewMenuComponent a.clearSearch:hover{background:#2c2c2c;color:#F0640D}@media all and (max-width: 1024px){.resultViewMenuComponent{padding:0px;position:absolute;overflow-y:visible;top:0px;left:0px;right:0px;bottom:0px;z-index:999999;display:block}.resultViewMenuComponent .resultViewMenuOpen{display:block;visibility:visible}.resultViewMenuComponent li:not(.resultViewMenuSmall){display:none;visibility:hidden}.resultViewMenuComponent li{background:#2c2c2c}.resultViewMenuComponent li.searchContainer{background:#464646}.resultViewMenuComponent a.active{background:#2c2c2c}}.resultViewMenuComponent input{border:0;font-family:'Montserrat', sans-serif;font-weight:300;padding:0 20px 0 20px;background:#464646;color:#f9f9f9;height:40px;position:relative;top:-1px;box-sizing:border-box}.resultViewMenuComponent input:focus{border:0;outline:0 none}.resultViewMenuComponent .clearSearch{position:relative;background:transparent;display:inline;padding:0px;margin-left:-30px;z-index:9000;color:#F0640D}.resultViewMenuComponent .clearSearch:hover{background:transparent !important}.resultViewMenuComponent ::-webkit-input-placeholder{color:#ccc}.resultViewMenuComponent :-moz-placeholder{color:#ccc}.resultViewMenuComponent ::-moz-placeholder{color:#ccc}.resultViewMenuComponent :-ms-input-placeholder{color:#ccc}.resultViewContentComponent{position:absolute;top:40px;left:0;bottom:0;right:0}.informationColumnLeftComponent{position:absolute;top:0;left:0;bottom:0;right:50%;overflow:auto;overflow-x:hidden;overflow-y:visible}.informationColumnRightComponent{position:absolute;top:0;left:50%;bottom:0;right:0;overflow:auto;overflow-x:hidden;overflow-y:visible}.captureListComponent{position:absolute;top:40px;left:0;bottom:0;right:0;background:#222;z-index:9000;display:none;visibility:hidden;overflow-y:visible;overflow-x:hidden}.captureListComponent.active{display:block;visibility:visible}.captureListComponent .openCaptureFile{border:1px dashed #f9f9f9;display:block;margin:5px;padding:5px;text-align:center;font-style:italic}.captureListComponent .openCaptureFile span{line-height:100%;vertical-align:middle}.captureListComponent ul{margin:0px;padding:0px;list-style:none;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap;justify-content:flex-start}.captureListComponent ul li{margin:5px;border:1px solid #606060}.captureListComponent ul li img{width:295px;background-image:-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9));background-image:-moz-linear-gradient(45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(-45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(45deg, transparent 75%, #d9d9d9 75%),-moz-linear-gradient(-45deg, transparent 75%, #d9d9d9 75%);-webkit-background-size:50px 51px;-moz-background-size:50px 50px;background-size:50px 50px;background-position:0 0, 25px 0, 25px -25px, 0px 25px;display:block}.captureListComponent ul li span{display:block;text-align:center;border:5px solid #222}.captureListComponent ul li span .captureListItemSave{color:#f9f9f9;font-size:16px;margin-left:10px;position:relative;padding:3px 8px 3px 32px}.captureListComponent ul li span .captureListItemSave:before,.captureListComponent ul li span .captureListItemSave:after{box-sizing:border-box;content:\"\";position:absolute}.captureListComponent ul li span .captureListItemSave:before{background:#d9d9d9;border-color:#f9f9f9;border-style:solid;border-width:7px 2px 1px;border-radius:1px;height:16px;left:8px;top:5px;width:16px}.captureListComponent ul li span .captureListItemSave:after{background:#f9f9f9;border-color:#d9d9d9;border-style:solid;border-width:1px 1px 1px 4px;height:5px;left:13px;top:5px;width:7px}.captureListComponent ul li:hover{cursor:pointer}.captureListComponent ul li.active span{background:#F0640D;border:5px solid #F0640D}.captureListComponent ul li.active span .captureListItemSave:before{background:#F0640D}.captureListComponent ul li.active span .captureListItemSave:after{border-color:#F0640D}.visualStateListComponent{position:absolute;top:0;left:0;bottom:0;padding:5px;right:80%;overflow-y:visible;overflow-x:hidden}.visualStateListComponent ul{margin:0px;padding:0px;list-style:none}.visualStateListComponent ul li{margin:20px 15px 0px 15px;border:1px solid #606060}.visualStateListComponent ul li img{display:block;padding:0px;box-sizing:border-box;max-height:600px;width:100%;margin:0 auto;background-image:-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9));background-image:-moz-linear-gradient(45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(-45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(45deg, transparent 75%, #d9d9d9 75%),-moz-linear-gradient(-45deg, transparent 75%, #d9d9d9 75%);-webkit-background-size:50px 51px;-moz-background-size:50px 50px;background-size:50px 50px;background-position:0 0, 25px 0, 25px -25px, 0px 25px}.visualStateListComponent ul li:hover{cursor:pointer}.visualStateListComponent ul li span{border:5px solid #222;background:#222;box-sizing:border-box;display:inline-block;width:100%;margin:0px;padding:5px;word-wrap:break-word}.visualStateListComponent ul li.active{border:2px solid #F0640D}.commandListComponent{position:absolute;top:0;left:20%;right:40%;bottom:0;color:#d3d3d3}.commandListComponent ul{margin:0px;padding:0px;list-style:none;overflow-y:visible;overflow-x:hidden;height:100%}.commandListComponent ul li{padding:8px}.commandListComponent ul li span{word-wrap:break-word;line-height:22px}.commandListComponent ul li:hover{color:#f9f9f9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.commandListComponent ul li:nth-child(even){background:#2c2c2c}.commandListComponent ul li:nth-child(odd){background:#222}.commandListComponent ul li .important{font-weight:800}.commandListComponent ul li .important.deprecated{color:red}.commandListComponent ul li .important.unused{color:yellow}.commandListComponent ul li .important.disabled{color:gray}.commandListComponent ul li .important.redundant{color:orange}.commandListComponent ul li .important.valid{color:greenyellow}.commandListComponent ul li .marker{font-size:16px;font-weight:900;color:greenyellow}.commandListComponent ul li.active{background:#f37628;color:#222}.commandListComponent ul li.drawCall{background:#5db0d7;color:#222}.commandListComponent ul li a{margin-left:5px;margin-right:5px;color:#5db0d7;background:#222;padding:5px;font-weight:900;display:inline-block}.commandDetailComponent{position:absolute;top:0;left:60%;right:0;bottom:0;overflow-y:visible;overflow-x:hidden}.jsonGroupComponent{display:block;margin:10px;padding:10px;padding-bottom:5px}.jsonGroupComponent .jsonGroupComponentTitle{display:block;font-size:16px;color:#5db0d7;border-bottom:1px solid #5db0d7;padding-bottom:5px;margin-bottom:5px;text-transform:capitalize}.jsonGroupComponent ul{margin:0px;padding:0px;list-style:none}.jsonGroupComponent ul li:nth-child(even){background:#222}.jsonGroupComponent ul li:nth-child(odd){background:#222}.jsonItemComponentKey{color:#F0640D}.jsonItemComponentValue{white-space:pre-wrap}.jsonItemImageHolder{width:50%;margin:auto}.jsonItemImageHolder .jsonItemImage{margin:5px;display:block;border:1px solid #606060;width:100%}.jsonItemImageHolder .jsonItemImage img{width:100%;display:block;margin:auto;max-width:256px;background-image:-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9));background-image:-moz-linear-gradient(45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(-45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(45deg, transparent 75%, #d9d9d9 75%),-moz-linear-gradient(-45deg, transparent 75%, #d9d9d9 75%);-webkit-background-size:50px 51px;-moz-background-size:50px 50px;background-size:50px 50px;background-position:0 0, 25px 0, 25px -25px, 0px 25px}.jsonItemImageHolder .jsonItemImage span{margin:0px;padding:5px;word-wrap:break-word;display:inline-block;width:100%;box-sizing:border-box}[commandName=onOpenSourceClicked]:hover{color:#f9f9f9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.jsonVisualStateItemComponent{text-align:center;padding:10px}.jsonVisualStateItemComponent img{background-image:-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9));background-image:-moz-linear-gradient(45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(-45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(45deg, transparent 75%, #d9d9d9 75%),-moz-linear-gradient(-45deg, transparent 75%, #d9d9d9 75%);-webkit-background-size:50px 51px;-moz-background-size:50px 50px;background-size:50px 50px;background-position:0 0, 25px 0, 25px -25px, 0px 25px;border:1px solid #606060;margin:5px;width:100%;max-width:512px;max-height:800px}.jsonVisualStateItemComponent span{display:block}.jsonContentComponent{position:absolute;top:0;left:0;right:0;bottom:0;padding:10px;overflow-y:visible;overflow-x:hidden}.jsonItemComponentValue{word-break:break-all;white-space:normal}.jsonSourceItemComponentOpen{font-weight:bold;color:#5db0d7;text-decoration:underline}.sourceCodeMenuComponentContainer{position:absolute;left:0;top:0;right:40%}.sourceCodeMenuComponent{font-family:'Montserrat', sans-serif;font-size:13px;font-weight:300;line-height:40px;flex:1 100%;display:flex;flex-flow:row wrap;height:42px;outline:0 none;border-bottom:2px solid #222;box-sizing:border-box;list-style:none;margin:0;background:#2c2c2c;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap;justify-content:flex-end}.sourceCodeMenuComponent .resultViewMenuOpen{display:none;visibility:hidden}.sourceCodeMenuComponent a{outline:0 none;text-decoration:none;display:block;padding:0 20px 0 20px;color:#ccc;background:#2c2c2c;box-sizing:border-box;height:100%}.sourceCodeMenuComponent a.active{background:#222;color:white;font-weight:400;border-bottom:2px solid #F0640D}.sourceCodeMenuComponent a:hover{background:#222;color:#c9c9c9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.sourceCodeMenuComponent a:hover.active{color:#F0640D;transition:color 0;-webkit-transition:color 0;-moz-transition:color 0}.sourceCodeMenuComponent a.clearSearch{display:inline-block;padding:0px;margin-left:-30px;margin-right:20px;z-index:9000;color:#f9f9f9}.sourceCodeMenuComponent a.clearSearch:hover{background:#2c2c2c;color:#F0640D}.sourceCodeMenuComponent input{border:0;font-family:'Montserrat', sans-serif;font-weight:300;padding:0 20px 0 20px;background:#464646;color:#f9f9f9;height:100%;position:relative;top:-1px;box-sizing:border-box}.sourceCodeMenuComponent input:focus{border:0;outline:0 none}.sourceCodeMenuComponent .clearSearch{position:relative;background:transparent;display:inline;padding:0px;margin-left:-30px;z-index:9000;color:#F0640D}.sourceCodeMenuComponent .clearSearch:hover{background:transparent !important}.sourceCodeMenuComponent ::-webkit-input-placeholder{color:#ccc}.sourceCodeMenuComponent :-moz-placeholder{color:#ccc}.sourceCodeMenuComponent ::-moz-placeholder{color:#ccc}.sourceCodeMenuComponent :-ms-input-placeholder{color:#ccc}.sourceCodeComponent{position:absolute;top:42px;left:0;bottom:0;right:40%;background:#222;z-index:9000;overflow-x:visible;overflow:auto}.sourceCodeComponent .sourceCodeComponentTitle{font-size:16px;font-weight:800;line-height:50px;color:#F0640D;padding:1em;margin:.5em 0}\n",""]),x.exports=w},function(x,w,S){"use strict";S.r(w),S.d(w,"EmbeddedFrontend",(function(){return ri})),S.d(w,"Spector",(function(){return ii}));var G,z=function(){function e(){}return e.isBuildableProgram=function(x){return!!x&&!!x[this.rebuildProgramFunctionName]},e.rebuildProgram=function(x,w,S,U,G){this.isBuildableProgram(x)&&x[this.rebuildProgramFunctionName](w,S,U,G)},e.rebuildProgramFunctionName="__SPECTOR_rebuildProgram",e}();!function(x){x[x.noLog=0]="noLog",x[x.error=1]="error",x[x.warning=2]="warning",x[x.info=3]="info"}(G||(G={}));var H,j=function(){function e(){}return e.error=function(x){for(var w=[],S=1;S<arguments.length;S++)w[S-1]=arguments[S];this.level>0&&U.error(x,w)},e.warn=function(x){for(var w=[],S=1;S<arguments.length;S++)w[S-1]=arguments[S];this.level>1&&U.warn(x,w)},e.info=function(x){for(var w=[],S=1;S<arguments.length;S++)w[S-1]=arguments[S];this.level>2&&U.log(x,w)},e.level=G.warning,e}(),X=function(){function e(){this.callbacks=[],this.counter=-1}return e.prototype.add=function(x,w){return this.counter++,w&&(x=x.bind(w)),this.callbacks[this.counter]=x,this.counter},e.prototype.remove=function(x){delete this.callbacks[x]},e.prototype.clear=function(){this.callbacks={}},e.prototype.trigger=function(x){for(var w in this.callbacks)this.callbacks.hasOwnProperty(w)&&this.callbacks[w](x)},e}(),q=function(){function e(){if(window.performance&&window.performance.now)this.nowFunction=this.dateBasedPerformanceNow.bind(this);else{var x=new Date;this.nowFunction=x.getTime.bind(x)}}return e.prototype.dateBasedPerformanceNow=function(){return performance.timing.navigationStart+performance.now()},Object.defineProperty(e,"now",{get:function(){return e.instance.nowFunction()},enumerable:!0,configurable:!0}),e.instance=new e,e}(),K=function(){function e(x){this.options=x}return e.prototype.appendAnalysis=function(x){x.analyses=x.analyses||[];var w=this.getAnalysis(x);x.analyses.push(w)},e.prototype.getAnalysis=function(x){var w={analyserName:this.analyserName};return this.appendToAnalysis(x,w),w},e}(),Y=(H=function(x,w){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)},function(x,w){function n(){this.constructor=x}H(x,w),x.prototype=null===w?Object.create(w):(n.prototype=w.prototype,new n)}),Z=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Y(t,x),Object.defineProperty(t.prototype,"analyserName",{get:function(){return t.analyserName},enumerable:!0,configurable:!0}),t.prototype.appendToAnalysis=function(x,w){if(x.commands){for(var S={},U=0,G=x.commands;U<G.length;U++){var z=G[U];S[z.name]=S[z.name]||0,S[z.name]++}var H=Object.keys(S).map((function(x){return[x,S[x]]}));H.sort((function(x,w){var S=w[1]-x[1];return 0===S?x[0].localeCompare(w[0]):S}));for(var j=0,X=H;j<X.length;j++){var q=X[j];w[q[0]]=q[1]}}},t.analyserName="Commands",t}(K),J=["drawArrays","drawElements","drawArraysInstanced","drawArraysInstancedANGLE","drawElementsInstanced","drawElementsInstancedANGLE","drawRangeElements"],Q=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),ee=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Q(t,x),Object.defineProperty(t.prototype,"analyserName",{get:function(){return t.analyserName},enumerable:!0,configurable:!0}),t.prototype.appendToAnalysis=function(x,w){if(x.commands){w.total=x.commands.length,w.draw=0,w.clear=0;for(var S=0,U=x.commands;S<U.length;S++){var G=U[S];"clear"===G.name?w.clear++:J.indexOf(G.name)>-1&&w.draw++}}},t.analyserName="CommandsSummary",t}(K),te=function(){function e(){}return e.isWebGlConstant=function(x){return null!==re[x]&&void 0!==re[x]},e.stringifyWebGlConstant=function(x,w){if(0===x)return this.zeroMeaningByCommand[w]||"0";if(1===x)return this.oneMeaningByCommand[w]||"1";var S=re[x];return S?S.name:x+""},e.DEPTH_BUFFER_BIT={name:"DEPTH_BUFFER_BIT",value:256,description:"Passed to clear to clear the current depth buffer."},e.STENCIL_BUFFER_BIT={name:"STENCIL_BUFFER_BIT",value:1024,description:"Passed to clear to clear the current stencil buffer."},e.COLOR_BUFFER_BIT={name:"COLOR_BUFFER_BIT",value:16384,description:"Passed to clear to clear the current color buffer."},e.POINTS={name:"POINTS",value:0,description:"Passed to drawElements or drawArrays to draw single points."},e.LINES={name:"LINES",value:1,description:"Passed to drawElements or drawArrays to draw lines. Each vertex connects to the one after it."},e.LINE_LOOP={name:"LINE_LOOP",value:2,description:"Passed to drawElements or drawArrays to draw lines. Each set of two vertices is treated as a separate line segment."},e.LINE_STRIP={name:"LINE_STRIP",value:3,description:"Passed to drawElements or drawArrays to draw a connected group of line segments from the first vertex to the last."},e.TRIANGLES={name:"TRIANGLES",value:4,description:"Passed to drawElements or drawArrays to draw triangles. Each set of three vertices creates a separate triangle."},e.TRIANGLE_STRIP={name:"TRIANGLE_STRIP",value:5,description:"Passed to drawElements or drawArrays to draw a connected group of triangles."},e.TRIANGLE_FAN={name:"TRIANGLE_FAN",value:6,description:"Passed to drawElements or drawArrays to draw a connected group of triangles. Each vertex connects to the previous and the first vertex in the fan."},e.ZERO={name:"ZERO",value:0,description:"Passed to blendFunc or blendFuncSeparate to turn off a component."},e.ONE={name:"ONE",value:1,description:"Passed to blendFunc or blendFuncSeparate to turn on a component."},e.SRC_COLOR={name:"SRC_COLOR",value:768,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the source elements color."},e.ONE_MINUS_SRC_COLOR={name:"ONE_MINUS_SRC_COLOR",value:769,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source elements color."},e.SRC_ALPHA={name:"SRC_ALPHA",value:770,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the source's alpha."},e.ONE_MINUS_SRC_ALPHA={name:"ONE_MINUS_SRC_ALPHA",value:771,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source's alpha."},e.DST_ALPHA={name:"DST_ALPHA",value:772,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the destination's alpha."},e.ONE_MINUS_DST_ALPHA={name:"ONE_MINUS_DST_ALPHA",value:773,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination's alpha."},e.DST_COLOR={name:"DST_COLOR",value:774,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the destination's color."},e.ONE_MINUS_DST_COLOR={name:"ONE_MINUS_DST_COLOR",value:775,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination's color."},e.SRC_ALPHA_SATURATE={name:"SRC_ALPHA_SATURATE",value:776,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the minimum of source's alpha or one minus the destination's alpha."},e.CONSTANT_COLOR={name:"CONSTANT_COLOR",value:32769,description:"Passed to blendFunc or blendFuncSeparate to specify a constant color blend function."},e.ONE_MINUS_CONSTANT_COLOR={name:"ONE_MINUS_CONSTANT_COLOR",value:32770,description:"Passed to blendFunc or blendFuncSeparate to specify one minus a constant color blend function."},e.CONSTANT_ALPHA={name:"CONSTANT_ALPHA",value:32771,description:"Passed to blendFunc or blendFuncSeparate to specify a constant alpha blend function."},e.ONE_MINUS_CONSTANT_ALPHA={name:"ONE_MINUS_CONSTANT_ALPHA",value:32772,description:"Passed to blendFunc or blendFuncSeparate to specify one minus a constant alpha blend function."},e.FUNC_ADD={name:"FUNC_ADD",value:32774,description:"Passed to blendEquation or blendEquationSeparate to set an addition blend function."},e.FUNC_SUBSTRACT={name:"FUNC_SUBSTRACT",value:32778,description:"Passed to blendEquation or blendEquationSeparate to specify a subtraction blend function (source - destination)."},e.FUNC_REVERSE_SUBTRACT={name:"FUNC_REVERSE_SUBTRACT",value:32779,description:"Passed to blendEquation or blendEquationSeparate to specify a reverse subtraction blend function (destination - source)."},e.BLEND_EQUATION={name:"BLEND_EQUATION",value:32777,description:"Passed to getParameter to get the current RGB blend function."},e.BLEND_EQUATION_RGB={name:"BLEND_EQUATION_RGB",value:32777,description:"Passed to getParameter to get the current RGB blend function. Same as BLEND_EQUATION"},e.BLEND_EQUATION_ALPHA={name:"BLEND_EQUATION_ALPHA",value:34877,description:"Passed to getParameter to get the current alpha blend function. Same as BLEND_EQUATION"},e.BLEND_DST_RGB={name:"BLEND_DST_RGB",value:32968,description:"Passed to getParameter to get the current destination RGB blend function."},e.BLEND_SRC_RGB={name:"BLEND_SRC_RGB",value:32969,description:"Passed to getParameter to get the current destination RGB blend function."},e.BLEND_DST_ALPHA={name:"BLEND_DST_ALPHA",value:32970,description:"Passed to getParameter to get the current destination alpha blend function."},e.BLEND_SRC_ALPHA={name:"BLEND_SRC_ALPHA",value:32971,description:"Passed to getParameter to get the current source alpha blend function."},e.BLEND_COLOR={name:"BLEND_COLOR",value:32773,description:"Passed to getParameter to return a the current blend color."},e.ARRAY_BUFFER_BINDING={name:"ARRAY_BUFFER_BINDING",value:34964,description:"Passed to getParameter to get the array buffer binding."},e.ELEMENT_ARRAY_BUFFER_BINDING={name:"ELEMENT_ARRAY_BUFFER_BINDING",value:34965,description:"Passed to getParameter to get the current element array buffer."},e.LINE_WIDTH={name:"LINE_WIDTH",value:2849,description:"Passed to getParameter to get the current lineWidth (set by the lineWidth method)."},e.ALIASED_POINT_SIZE_RANGE={name:"ALIASED_POINT_SIZE_RANGE",value:33901,description:"Passed to getParameter to get the current size of a point drawn with gl.POINTS"},e.ALIASED_LINE_WIDTH_RANGE={name:"ALIASED_LINE_WIDTH_RANGE",value:33902,description:"Passed to getParameter to get the range of available widths for a line. Returns a length-2 array with the lo value at 0, and hight at 1."},e.CULL_FACE_MODE={name:"CULL_FACE_MODE",value:2885,description:"Passed to getParameter to get the current value of cullFace. Should return FRONT, BACK, or FRONT_AND_BACK"},e.FRONT_FACE={name:"FRONT_FACE",value:2886,description:"Passed to getParameter to determine the current value of frontFace. Should return CW or CCW."},e.DEPTH_RANGE={name:"DEPTH_RANGE",value:2928,description:"Passed to getParameter to return a length-2 array of floats giving the current depth range."},e.DEPTH_WRITEMASK={name:"DEPTH_WRITEMASK",value:2930,description:"Passed to getParameter to determine if the depth write mask is enabled."},e.DEPTH_CLEAR_VALUE={name:"DEPTH_CLEAR_VALUE",value:2931,description:"Passed to getParameter to determine the current depth clear value."},e.DEPTH_FUNC={name:"DEPTH_FUNC",value:2932,description:"Passed to getParameter to get the current depth function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL."},e.STENCIL_CLEAR_VALUE={name:"STENCIL_CLEAR_VALUE",value:2961,description:"Passed to getParameter to get the value the stencil will be cleared to."},e.STENCIL_FUNC={name:"STENCIL_FUNC",value:2962,description:"Passed to getParameter to get the current stencil function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL."},e.STENCIL_FAIL={name:"STENCIL_FAIL",value:2964,description:"Passed to getParameter to get the current stencil fail function. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP."},e.STENCIL_PASS_DEPTH_FAIL={name:"STENCIL_PASS_DEPTH_FAIL",value:2965,description:"Passed to getParameter to get the current stencil fail function should the depth buffer test fail. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP."},e.STENCIL_PASS_DEPTH_PASS={name:"STENCIL_PASS_DEPTH_PASS",value:2966,description:"Passed to getParameter to get the current stencil fail function should the depth buffer test pass. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP."},e.STENCIL_REF={name:"STENCIL_REF",value:2967,description:"Passed to getParameter to get the reference value used for stencil tests."},e.STENCIL_VALUE_MASK={name:"STENCIL_VALUE_MASK",value:2963,description:" "},e.STENCIL_WRITEMASK={name:"STENCIL_WRITEMASK",value:2968,description:" "},e.STENCIL_BACK_FUNC={name:"STENCIL_BACK_FUNC",value:34816,description:" "},e.STENCIL_BACK_FAIL={name:"STENCIL_BACK_FAIL",value:34817,description:" "},e.STENCIL_BACK_PASS_DEPTH_FAIL={name:"STENCIL_BACK_PASS_DEPTH_FAIL",value:34818,description:" "},e.STENCIL_BACK_PASS_DEPTH_PASS={name:"STENCIL_BACK_PASS_DEPTH_PASS",value:34819,description:" "},e.STENCIL_BACK_REF={name:"STENCIL_BACK_REF",value:36003,description:" "},e.STENCIL_BACK_VALUE_MASK={name:"STENCIL_BACK_VALUE_MASK",value:36004,description:" "},e.STENCIL_BACK_WRITEMASK={name:"STENCIL_BACK_WRITEMASK",value:36005,description:" "},e.VIEWPORT={name:"VIEWPORT",value:2978,description:"Returns an Int32Array with four elements for the current viewport dimensions."},e.SCISSOR_BOX={name:"SCISSOR_BOX",value:3088,description:"Returns an Int32Array with four elements for the current scissor box dimensions."},e.COLOR_CLEAR_VALUE={name:"COLOR_CLEAR_VALUE",value:3106,description:" "},e.COLOR_WRITEMASK={name:"COLOR_WRITEMASK",value:3107,description:" "},e.UNPACK_ALIGNMENT={name:"UNPACK_ALIGNMENT",value:3317,description:" "},e.PACK_ALIGNMENT={name:"PACK_ALIGNMENT",value:3333,description:" "},e.MAX_TEXTURE_SIZE={name:"MAX_TEXTURE_SIZE",value:3379,description:" "},e.MAX_VIEWPORT_DIMS={name:"MAX_VIEWPORT_DIMS",value:3386,description:" "},e.SUBPIXEL_BITS={name:"SUBPIXEL_BITS",value:3408,description:" "},e.RED_BITS={name:"RED_BITS",value:3410,description:" "},e.GREEN_BITS={name:"GREEN_BITS",value:3411,description:" "},e.BLUE_BITS={name:"BLUE_BITS",value:3412,description:" "},e.ALPHA_BITS={name:"ALPHA_BITS",value:3413,description:" "},e.DEPTH_BITS={name:"DEPTH_BITS",value:3414,description:" "},e.STENCIL_BITS={name:"STENCIL_BITS",value:3415,description:" "},e.POLYGON_OFFSET_UNITS={name:"POLYGON_OFFSET_UNITS",value:10752,description:" "},e.POLYGON_OFFSET_FACTOR={name:"POLYGON_OFFSET_FACTOR",value:32824,description:" "},e.TEXTURE_BINDING_2D={name:"TEXTURE_BINDING_2D",value:32873,description:" "},e.SAMPLE_BUFFERS={name:"SAMPLE_BUFFERS",value:32936,description:" "},e.SAMPLES={name:"SAMPLES",value:32937,description:" "},e.SAMPLE_COVERAGE_VALUE={name:"SAMPLE_COVERAGE_VALUE",value:32938,description:" "},e.SAMPLE_COVERAGE_INVERT={name:"SAMPLE_COVERAGE_INVERT",value:32939,description:" "},e.COMPRESSED_TEXTURE_FORMATS={name:"COMPRESSED_TEXTURE_FORMATS",value:34467,description:" "},e.VENDOR={name:"VENDOR",value:7936,description:" "},e.RENDERER={name:"RENDERER",value:7937,description:" "},e.VERSION={name:"VERSION",value:7938,description:" "},e.IMPLEMENTATION_COLOR_READ_TYPE={name:"IMPLEMENTATION_COLOR_READ_TYPE",value:35738,description:" "},e.IMPLEMENTATION_COLOR_READ_FORMAT={name:"IMPLEMENTATION_COLOR_READ_FORMAT",value:35739,description:" "},e.BROWSER_DEFAULT_WEBGL={name:"BROWSER_DEFAULT_WEBGL",value:37444,description:" "},e.STATIC_DRAW={name:"STATIC_DRAW",value:35044,description:"Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and not change often."},e.STREAM_DRAW={name:"STREAM_DRAW",value:35040,description:"Passed to bufferData as a hint about whether the contents of the buffer are likely to not be used often."},e.DYNAMIC_DRAW={name:"DYNAMIC_DRAW",value:35048,description:"Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and change often."},e.ARRAY_BUFFER={name:"ARRAY_BUFFER",value:34962,description:"Passed to bindBuffer or bufferData to specify the type of buffer being used."},e.ELEMENT_ARRAY_BUFFER={name:"ELEMENT_ARRAY_BUFFER",value:34963,description:"Passed to bindBuffer or bufferData to specify the type of buffer being used."},e.BUFFER_SIZE={name:"BUFFER_SIZE",value:34660,description:"Passed to getBufferParameter to get a buffer's size."},e.BUFFER_USAGE={name:"BUFFER_USAGE",value:34661,description:"Passed to getBufferParameter to get the hint for the buffer passed in when it was created."},e.CURRENT_VERTEX_ATTRIB={name:"CURRENT_VERTEX_ATTRIB",value:34342,description:"Passed to getVertexAttrib to read back the current vertex attribute."},e.VERTEX_ATTRIB_ARRAY_ENABLED={name:"VERTEX_ATTRIB_ARRAY_ENABLED",value:34338,description:" "},e.VERTEX_ATTRIB_ARRAY_SIZE={name:"VERTEX_ATTRIB_ARRAY_SIZE",value:34339,description:" "},e.VERTEX_ATTRIB_ARRAY_STRIDE={name:"VERTEX_ATTRIB_ARRAY_STRIDE",value:34340,description:" "},e.VERTEX_ATTRIB_ARRAY_TYPE={name:"VERTEX_ATTRIB_ARRAY_TYPE",value:34341,description:" "},e.VERTEX_ATTRIB_ARRAY_NORMALIZED={name:"VERTEX_ATTRIB_ARRAY_NORMALIZED",value:34922,description:" "},e.VERTEX_ATTRIB_ARRAY_POINTER={name:"VERTEX_ATTRIB_ARRAY_POINTER",value:34373,description:" "},e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING={name:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",value:34975,description:" "},e.CULL_FACE={name:"CULL_FACE",value:2884,description:"Passed to enable/disable to turn on/off culling. Can also be used with getParameter to find the current culling method."},e.FRONT={name:"FRONT",value:1028,description:"Passed to cullFace to specify that only front faces should be drawn."},e.BACK={name:"BACK",value:1029,description:"Passed to cullFace to specify that only back faces should be drawn."},e.FRONT_AND_BACK={name:"FRONT_AND_BACK",value:1032,description:"Passed to cullFace to specify that front and back faces should be drawn."},e.BLEND={name:"BLEND",value:3042,description:"Passed to enable/disable to turn on/off blending. Can also be used with getParameter to find the current blending method."},e.DEPTH_TEST={name:"DEPTH_TEST",value:2929,description:"Passed to enable/disable to turn on/off the depth test. Can also be used with getParameter to query the depth test."},e.DITHER={name:"DITHER",value:3024,description:"Passed to enable/disable to turn on/off dithering. Can also be used with getParameter to find the current dithering method."},e.POLYGON_OFFSET_FILL={name:"POLYGON_OFFSET_FILL",value:32823,description:"Passed to enable/disable to turn on/off the polygon offset. Useful for rendering hidden-line images, decals, and or solids with highlighted edges. Can also be used with getParameter to query the scissor test."},e.SAMPLE_ALPHA_TO_COVERAGE={name:"SAMPLE_ALPHA_TO_COVERAGE",value:32926,description:"Passed to enable/disable to turn on/off the alpha to coverage. Used in multi-sampling alpha channels."},e.SAMPLE_COVERAGE={name:"SAMPLE_COVERAGE",value:32928,description:"Passed to enable/disable to turn on/off the sample coverage. Used in multi-sampling."},e.SCISSOR_TEST={name:"SCISSOR_TEST",value:3089,description:"Passed to enable/disable to turn on/off the scissor test. Can also be used with getParameter to query the scissor test."},e.STENCIL_TEST={name:"STENCIL_TEST",value:2960,description:"Passed to enable/disable to turn on/off the stencil test. Can also be used with getParameter to query the stencil test."},e.NO_ERROR={name:"NO_ERROR",value:0,description:"Returned from getError."},e.INVALID_ENUM={name:"INVALID_ENUM",value:1280,description:"Returned from getError."},e.INVALID_VALUE={name:"INVALID_VALUE",value:1281,description:"Returned from getError."},e.INVALID_OPERATION={name:"INVALID_OPERATION",value:1282,description:"Returned from getError."},e.OUT_OF_MEMORY={name:"OUT_OF_MEMORY",value:1285,description:"Returned from getError."},e.CONTEXT_LOST_WEBGL={name:"CONTEXT_LOST_WEBGL",value:37442,description:"Returned from getError."},e.CW={name:"CW",value:2304,description:"Passed to frontFace to specify the front face of a polygon is drawn in the clockwise direction"},e.CCW={name:"CCW",value:2305,description:"Passed to frontFace to specify the front face of a polygon is drawn in the counter clockwise direction"},e.DONT_CARE={name:"DONT_CARE",value:4352,description:"There is no preference for this behavior."},e.FASTEST={name:"FASTEST",value:4353,description:"The most efficient behavior should be used."},e.NICEST={name:"NICEST",value:4354,description:"The most correct or the highest quality option should be used."},e.GENERATE_MIPMAP_HINT={name:"GENERATE_MIPMAP_HINT",value:33170,description:"Hint for the quality of filtering when generating mipmap images with WebGLRenderingContext.generateMipmap()."},e.BYTE={name:"BYTE",value:5120,description:" "},e.UNSIGNED_BYTE={name:"UNSIGNED_BYTE",value:5121,description:" "},e.SHORT={name:"SHORT",value:5122,description:" "},e.UNSIGNED_SHORT={name:"UNSIGNED_SHORT",value:5123,description:" "},e.INT={name:"INT",value:5124,description:" "},e.UNSIGNED_INT={name:"UNSIGNED_INT",value:5125,description:" "},e.FLOAT={name:"FLOAT",value:5126,description:" "},e.DEPTH_COMPONENT={name:"DEPTH_COMPONENT",value:6402,description:" "},e.ALPHA={name:"ALPHA",value:6406,description:" "},e.RGB={name:"RGB",value:6407,description:" "},e.RGBA={name:"RGBA",value:6408,description:" "},e.LUMINANCE={name:"LUMINANCE",value:6409,description:" "},e.LUMINANCE_ALPHA={name:"LUMINANCE_ALPHA",value:6410,description:" "},e.UNSIGNED_SHORT_4_4_4_4={name:"UNSIGNED_SHORT_4_4_4_4",value:32819,description:" "},e.UNSIGNED_SHORT_5_5_5_1={name:"UNSIGNED_SHORT_5_5_5_1",value:32820,description:" "},e.UNSIGNED_SHORT_5_6_5={name:"UNSIGNED_SHORT_5_6_5",value:33635,description:" "},e.FRAGMENT_SHADER={name:"FRAGMENT_SHADER",value:35632,description:"Passed to createShader to define a fragment shader."},e.VERTEX_SHADER={name:"VERTEX_SHADER",value:35633,description:"Passed to createShader to define a vertex shader"},e.COMPILE_STATUS={name:"COMPILE_STATUS",value:35713,description:"Passed to getShaderParamter to get the status of the compilation. Returns false if the shader was not compiled. You can then query getShaderInfoLog to find the exact error"},e.DELETE_STATUS={name:"DELETE_STATUS",value:35712,description:"Passed to getShaderParamter to determine if a shader was deleted via deleteShader. Returns true if it was, false otherwise."},e.LINK_STATUS={name:"LINK_STATUS",value:35714,description:"Passed to getProgramParameter after calling linkProgram to determine if a program was linked correctly. Returns false if there were errors. Use getProgramInfoLog to find the exact error."},e.VALIDATE_STATUS={name:"VALIDATE_STATUS",value:35715,description:"Passed to getProgramParameter after calling validateProgram to determine if it is valid. Returns false if errors were found."},e.ATTACHED_SHADERS={name:"ATTACHED_SHADERS",value:35717,description:"Passed to getProgramParameter after calling attachShader to determine if the shader was attached correctly. Returns false if errors occurred."},e.ACTIVE_ATTRIBUTES={name:"ACTIVE_ATTRIBUTES",value:35721,description:"Passed to getProgramParameter to get the number of attributes active in a program."},e.ACTIVE_UNIFORMS={name:"ACTIVE_UNIFORMS",value:35718,description:"Passed to getProgramParamter to get the number of uniforms active in a program."},e.MAX_VERTEX_ATTRIBS={name:"MAX_VERTEX_ATTRIBS",value:34921,description:" "},e.MAX_VERTEX_UNIFORM_VECTORS={name:"MAX_VERTEX_UNIFORM_VECTORS",value:36347,description:" "},e.MAX_VARYING_VECTORS={name:"MAX_VARYING_VECTORS",value:36348,description:" "},e.MAX_COMBINED_TEXTURE_IMAGE_UNITS={name:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",value:35661,description:" "},e.MAX_VERTEX_TEXTURE_IMAGE_UNITS={name:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",value:35660,description:" "},e.MAX_TEXTURE_IMAGE_UNITS={name:"MAX_TEXTURE_IMAGE_UNITS",value:34930,description:"Implementation dependent number of maximum texture units. At least 8."},e.MAX_FRAGMENT_UNIFORM_VECTORS={name:"MAX_FRAGMENT_UNIFORM_VECTORS",value:36349,description:" "},e.SHADER_TYPE={name:"SHADER_TYPE",value:35663,description:" "},e.SHADING_LANGUAGE_VERSION={name:"SHADING_LANGUAGE_VERSION",value:35724,description:" "},e.CURRENT_PROGRAM={name:"CURRENT_PROGRAM",value:35725,description:" "},e.NEVER={name:"NEVER",value:512,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will never pass. i.e. Nothing will be drawn."},e.ALWAYS={name:"ALWAYS",value:519,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will always pass. i.e. Pixels will be drawn in the order they are drawn."},e.LESS={name:"LESS",value:513,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than the stored value."},e.EQUAL={name:"EQUAL",value:514,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is equals to the stored value."},e.LEQUAL={name:"LEQUAL",value:515,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than or equal to the stored value."},e.GREATER={name:"GREATER",value:516,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than the stored value."},e.GEQUAL={name:"GEQUAL",value:518,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than or equal to the stored value."},e.NOTEQUAL={name:"NOTEQUAL",value:517,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is not equal to the stored value."},e.KEEP={name:"KEEP",value:7680,description:" "},e.REPLACE={name:"REPLACE",value:7681,description:" "},e.INCR={name:"INCR",value:7682,description:" "},e.DECR={name:"DECR",value:7683,description:" "},e.INVERT={name:"INVERT",value:5386,description:" "},e.INCR_WRAP={name:"INCR_WRAP",value:34055,description:" "},e.DECR_WRAP={name:"DECR_WRAP",value:34056,description:" "},e.NEAREST={name:"NEAREST",value:9728,description:" "},e.LINEAR={name:"LINEAR",value:9729,description:" "},e.NEAREST_MIPMAP_NEAREST={name:"NEAREST_MIPMAP_NEAREST",value:9984,description:" "},e.LINEAR_MIPMAP_NEAREST={name:"LINEAR_MIPMAP_NEAREST",value:9985,description:" "},e.NEAREST_MIPMAP_LINEAR={name:"NEAREST_MIPMAP_LINEAR",value:9986,description:" "},e.LINEAR_MIPMAP_LINEAR={name:"LINEAR_MIPMAP_LINEAR",value:9987,description:" "},e.TEXTURE_MAG_FILTER={name:"TEXTURE_MAG_FILTER",value:10240,description:" "},e.TEXTURE_MIN_FILTER={name:"TEXTURE_MIN_FILTER",value:10241,description:" "},e.TEXTURE_WRAP_S={name:"TEXTURE_WRAP_S",value:10242,description:" "},e.TEXTURE_WRAP_T={name:"TEXTURE_WRAP_T",value:10243,description:" "},e.TEXTURE_2D={name:"TEXTURE_2D",value:3553,description:" "},e.TEXTURE={name:"TEXTURE",value:5890,description:" "},e.TEXTURE_CUBE_MAP={name:"TEXTURE_CUBE_MAP",value:34067,description:" "},e.TEXTURE_BINDING_CUBE_MAP={name:"TEXTURE_BINDING_CUBE_MAP",value:34068,description:" "},e.TEXTURE_CUBE_MAP_POSITIVE_X={name:"TEXTURE_CUBE_MAP_POSITIVE_X",value:34069,description:" "},e.TEXTURE_CUBE_MAP_NEGATIVE_X={name:"TEXTURE_CUBE_MAP_NEGATIVE_X",value:34070,description:" "},e.TEXTURE_CUBE_MAP_POSITIVE_Y={name:"TEXTURE_CUBE_MAP_POSITIVE_Y",value:34071,description:" "},e.TEXTURE_CUBE_MAP_NEGATIVE_Y={name:"TEXTURE_CUBE_MAP_NEGATIVE_Y",value:34072,description:" "},e.TEXTURE_CUBE_MAP_POSITIVE_Z={name:"TEXTURE_CUBE_MAP_POSITIVE_Z",value:34073,description:" "},e.TEXTURE_CUBE_MAP_NEGATIVE_Z={name:"TEXTURE_CUBE_MAP_NEGATIVE_Z",value:34074,description:" "},e.MAX_CUBE_MAP_TEXTURE_SIZE={name:"MAX_CUBE_MAP_TEXTURE_SIZE",value:34076,description:" "},e.TEXTURE0={name:"TEXTURE0",value:33984,description:"A texture unit."},e.TEXTURE1={name:"TEXTURE1",value:33985,description:"A texture unit."},e.TEXTURE2={name:"TEXTURE2",value:33986,description:"A texture unit."},e.TEXTURE3={name:"TEXTURE3",value:33987,description:"A texture unit."},e.TEXTURE4={name:"TEXTURE4",value:33988,description:"A texture unit."},e.TEXTURE5={name:"TEXTURE5",value:33989,description:"A texture unit."},e.TEXTURE6={name:"TEXTURE6",value:33990,description:"A texture unit."},e.TEXTURE7={name:"TEXTURE7",value:33991,description:"A texture unit."},e.TEXTURE8={name:"TEXTURE8",value:33992,description:"A texture unit."},e.TEXTURE9={name:"TEXTURE9",value:33993,description:"A texture unit."},e.TEXTURE10={name:"TEXTURE10",value:33994,description:"A texture unit."},e.TEXTURE11={name:"TEXTURE11",value:33995,description:"A texture unit."},e.TEXTURE12={name:"TEXTURE12",value:33996,description:"A texture unit."},e.TEXTURE13={name:"TEXTURE13",value:33997,description:"A texture unit."},e.TEXTURE14={name:"TEXTURE14",value:33998,description:"A texture unit."},e.TEXTURE15={name:"TEXTURE15",value:33999,description:"A texture unit."},e.TEXTURE16={name:"TEXTURE16",value:34e3,description:"A texture unit."},e.TEXTURE17={name:"TEXTURE17",value:34001,description:"A texture unit."},e.TEXTURE18={name:"TEXTURE18",value:34002,description:"A texture unit."},e.TEXTURE19={name:"TEXTURE19",value:34003,description:"A texture unit."},e.TEXTURE20={name:"TEXTURE20",value:34004,description:"A texture unit."},e.TEXTURE21={name:"TEXTURE21",value:34005,description:"A texture unit."},e.TEXTURE22={name:"TEXTURE22",value:34006,description:"A texture unit."},e.TEXTURE23={name:"TEXTURE23",value:34007,description:"A texture unit."},e.TEXTURE24={name:"TEXTURE24",value:34008,description:"A texture unit."},e.TEXTURE25={name:"TEXTURE25",value:34009,description:"A texture unit."},e.TEXTURE26={name:"TEXTURE26",value:34010,description:"A texture unit."},e.TEXTURE27={name:"TEXTURE27",value:34011,description:"A texture unit."},e.TEXTURE28={name:"TEXTURE28",value:34012,description:"A texture unit."},e.TEXTURE29={name:"TEXTURE29",value:34013,description:"A texture unit."},e.TEXTURE30={name:"TEXTURE30",value:34014,description:"A texture unit."},e.TEXTURE31={name:"TEXTURE31",value:34015,description:"A texture unit."},e.ACTIVE_TEXTURE={name:"ACTIVE_TEXTURE",value:34016,description:"The current active texture unit."},e.REPEAT={name:"REPEAT",value:10497,description:" "},e.CLAMP_TO_EDGE={name:"CLAMP_TO_EDGE",value:33071,description:" "},e.MIRRORED_REPEAT={name:"MIRRORED_REPEAT",value:33648,description:" "},e.FLOAT_VEC2={name:"FLOAT_VEC2",value:35664,description:" "},e.FLOAT_VEC3={name:"FLOAT_VEC3",value:35665,description:" "},e.FLOAT_VEC4={name:"FLOAT_VEC4",value:35666,description:" "},e.INT_VEC2={name:"INT_VEC2",value:35667,description:" "},e.INT_VEC3={name:"INT_VEC3",value:35668,description:" "},e.INT_VEC4={name:"INT_VEC4",value:35669,description:" "},e.BOOL={name:"BOOL",value:35670,description:" "},e.BOOL_VEC2={name:"BOOL_VEC2",value:35671,description:" "},e.BOOL_VEC3={name:"BOOL_VEC3",value:35672,description:" "},e.BOOL_VEC4={name:"BOOL_VEC4",value:35673,description:" "},e.FLOAT_MAT2={name:"FLOAT_MAT2",value:35674,description:" "},e.FLOAT_MAT3={name:"FLOAT_MAT3",value:35675,description:" "},e.FLOAT_MAT4={name:"FLOAT_MAT4",value:35676,description:" "},e.SAMPLER_2D={name:"SAMPLER_2D",value:35678,description:" "},e.SAMPLER_CUBE={name:"SAMPLER_CUBE",value:35680,description:" "},e.LOW_FLOAT={name:"LOW_FLOAT",value:36336,description:" "},e.MEDIUM_FLOAT={name:"MEDIUM_FLOAT",value:36337,description:" "},e.HIGH_FLOAT={name:"HIGH_FLOAT",value:36338,description:" "},e.LOW_INT={name:"LOW_INT",value:36339,description:" "},e.MEDIUM_INT={name:"MEDIUM_INT",value:36340,description:" "},e.HIGH_INT={name:"HIGH_INT",value:36341,description:" "},e.FRAMEBUFFER={name:"FRAMEBUFFER",value:36160,description:" "},e.RENDERBUFFER={name:"RENDERBUFFER",value:36161,description:" "},e.RGBA4={name:"RGBA4",value:32854,description:" "},e.RGB5_A1={name:"RGB5_A1",value:32855,description:" "},e.RGB565={name:"RGB565",value:36194,description:" "},e.DEPTH_COMPONENT16={name:"DEPTH_COMPONENT16",value:33189,description:" "},e.STENCIL_INDEX={name:"STENCIL_INDEX",value:6401,description:" "},e.STENCIL_INDEX8={name:"STENCIL_INDEX8",value:36168,description:" "},e.DEPTH_STENCIL={name:"DEPTH_STENCIL",value:34041,description:" "},e.RENDERBUFFER_WIDTH={name:"RENDERBUFFER_WIDTH",value:36162,description:" "},e.RENDERBUFFER_HEIGHT={name:"RENDERBUFFER_HEIGHT",value:36163,description:" "},e.RENDERBUFFER_INTERNAL_FORMAT={name:"RENDERBUFFER_INTERNAL_FORMAT",value:36164,description:" "},e.RENDERBUFFER_RED_SIZE={name:"RENDERBUFFER_RED_SIZE",value:36176,description:" "},e.RENDERBUFFER_GREEN_SIZE={name:"RENDERBUFFER_GREEN_SIZE",value:36177,description:" "},e.RENDERBUFFER_BLUE_SIZE={name:"RENDERBUFFER_BLUE_SIZE",value:36178,description:" "},e.RENDERBUFFER_ALPHA_SIZE={name:"RENDERBUFFER_ALPHA_SIZE",value:36179,description:" "},e.RENDERBUFFER_DEPTH_SIZE={name:"RENDERBUFFER_DEPTH_SIZE",value:36180,description:" "},e.RENDERBUFFER_STENCIL_SIZE={name:"RENDERBUFFER_STENCIL_SIZE",value:36181,description:" "},e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE={name:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",value:36048,description:" "},e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME={name:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",value:36049,description:" "},e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL={name:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",value:36050,description:" "},e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE={name:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",value:36051,description:" "},e.COLOR_ATTACHMENT0={name:"COLOR_ATTACHMENT0",value:36064,description:" "},e.DEPTH_ATTACHMENT={name:"DEPTH_ATTACHMENT",value:36096,description:" "},e.STENCIL_ATTACHMENT={name:"STENCIL_ATTACHMENT",value:36128,description:" "},e.DEPTH_STENCIL_ATTACHMENT={name:"DEPTH_STENCIL_ATTACHMENT",value:33306,description:" "},e.NONE={name:"NONE",value:0,description:" "},e.FRAMEBUFFER_COMPLETE={name:"FRAMEBUFFER_COMPLETE",value:36053,description:" "},e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT={name:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",value:36054,description:" "},e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT={name:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",value:36055,description:" "},e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS={name:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",value:36057,description:" "},e.FRAMEBUFFER_UNSUPPORTED={name:"FRAMEBUFFER_UNSUPPORTED",value:36061,description:" "},e.FRAMEBUFFER_BINDING={name:"FRAMEBUFFER_BINDING",value:36006,description:" "},e.RENDERBUFFER_BINDING={name:"RENDERBUFFER_BINDING",value:36007,description:" "},e.MAX_RENDERBUFFER_SIZE={name:"MAX_RENDERBUFFER_SIZE",value:34024,description:" "},e.INVALID_FRAMEBUFFER_OPERATION={name:"INVALID_FRAMEBUFFER_OPERATION",value:1286,description:" "},e.UNPACK_FLIP_Y_WEBGL={name:"UNPACK_FLIP_Y_WEBGL",value:37440,description:" "},e.UNPACK_PREMULTIPLY_ALPHA_WEBGL={name:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",value:37441,description:" "},e.UNPACK_COLORSPACE_CONVERSION_WEBGL={name:"UNPACK_COLORSPACE_CONVERSION_WEBGL",value:37443,description:" "},e.READ_BUFFER={name:"READ_BUFFER",value:3074,description:" "},e.UNPACK_ROW_LENGTH={name:"UNPACK_ROW_LENGTH",value:3314,description:" "},e.UNPACK_SKIP_ROWS={name:"UNPACK_SKIP_ROWS",value:3315,description:" "},e.UNPACK_SKIP_PIXELS={name:"UNPACK_SKIP_PIXELS",value:3316,description:" "},e.PACK_ROW_LENGTH={name:"PACK_ROW_LENGTH",value:3330,description:" "},e.PACK_SKIP_ROWS={name:"PACK_SKIP_ROWS",value:3331,description:" "},e.PACK_SKIP_PIXELS={name:"PACK_SKIP_PIXELS",value:3332,description:" "},e.TEXTURE_BINDING_3D={name:"TEXTURE_BINDING_3D",value:32874,description:" "},e.UNPACK_SKIP_IMAGES={name:"UNPACK_SKIP_IMAGES",value:32877,description:" "},e.UNPACK_IMAGE_HEIGHT={name:"UNPACK_IMAGE_HEIGHT",value:32878,description:" "},e.MAX_3D_TEXTURE_SIZE={name:"MAX_3D_TEXTURE_SIZE",value:32883,description:" "},e.MAX_ELEMENTS_VERTICES={name:"MAX_ELEMENTS_VERTICES",value:33e3,description:" "},e.MAX_ELEMENTS_INDICES={name:"MAX_ELEMENTS_INDICES",value:33001,description:" "},e.MAX_TEXTURE_LOD_BIAS={name:"MAX_TEXTURE_LOD_BIAS",value:34045,description:" "},e.MAX_FRAGMENT_UNIFORM_COMPONENTS={name:"MAX_FRAGMENT_UNIFORM_COMPONENTS",value:35657,description:" "},e.MAX_VERTEX_UNIFORM_COMPONENTS={name:"MAX_VERTEX_UNIFORM_COMPONENTS",value:35658,description:" "},e.MAX_ARRAY_TEXTURE_LAYERS={name:"MAX_ARRAY_TEXTURE_LAYERS",value:35071,description:" "},e.MIN_PROGRAM_TEXEL_OFFSET={name:"MIN_PROGRAM_TEXEL_OFFSET",value:35076,description:" "},e.MAX_PROGRAM_TEXEL_OFFSET={name:"MAX_PROGRAM_TEXEL_OFFSET",value:35077,description:" "},e.MAX_VARYING_COMPONENTS={name:"MAX_VARYING_COMPONENTS",value:35659,description:" "},e.FRAGMENT_SHADER_DERIVATIVE_HINT={name:"FRAGMENT_SHADER_DERIVATIVE_HINT",value:35723,description:" "},e.RASTERIZER_DISCARD={name:"RASTERIZER_DISCARD",value:35977,description:" "},e.VERTEX_ARRAY_BINDING={name:"VERTEX_ARRAY_BINDING",value:34229,description:" "},e.MAX_VERTEX_OUTPUT_COMPONENTS={name:"MAX_VERTEX_OUTPUT_COMPONENTS",value:37154,description:" "},e.MAX_FRAGMENT_INPUT_COMPONENTS={name:"MAX_FRAGMENT_INPUT_COMPONENTS",value:37157,description:" "},e.MAX_SERVER_WAIT_TIMEOUT={name:"MAX_SERVER_WAIT_TIMEOUT",value:37137,description:" "},e.MAX_ELEMENT_INDEX={name:"MAX_ELEMENT_INDEX",value:36203,description:" "},e.RED={name:"RED",value:6403,description:" "},e.RGB8={name:"RGB8",value:32849,description:" "},e.RGBA8={name:"RGBA8",value:32856,description:" "},e.RGB10_A2={name:"RGB10_A2",value:32857,description:" "},e.TEXTURE_3D={name:"TEXTURE_3D",value:32879,description:" "},e.TEXTURE_WRAP_R={name:"TEXTURE_WRAP_R",value:32882,description:" "},e.TEXTURE_MIN_LOD={name:"TEXTURE_MIN_LOD",value:33082,description:" "},e.TEXTURE_MAX_LOD={name:"TEXTURE_MAX_LOD",value:33083,description:" "},e.TEXTURE_BASE_LEVEL={name:"TEXTURE_BASE_LEVEL",value:33084,description:" "},e.TEXTURE_MAX_LEVEL={name:"TEXTURE_MAX_LEVEL",value:33085,description:" "},e.TEXTURE_COMPARE_MODE={name:"TEXTURE_COMPARE_MODE",value:34892,description:" "},e.TEXTURE_COMPARE_FUNC={name:"TEXTURE_COMPARE_FUNC",value:34893,description:" "},e.SRGB={name:"SRGB",value:35904,description:" "},e.SRGB8={name:"SRGB8",value:35905,description:" "},e.SRGB8_ALPHA8={name:"SRGB8_ALPHA8",value:35907,description:" "},e.COMPARE_REF_TO_TEXTURE={name:"COMPARE_REF_TO_TEXTURE",value:34894,description:" "},e.RGBA32F={name:"RGBA32F",value:34836,description:" "},e.RGB32F={name:"RGB32F",value:34837,description:" "},e.RGBA16F={name:"RGBA16F",value:34842,description:" "},e.RGB16F={name:"RGB16F",value:34843,description:" "},e.TEXTURE_2D_ARRAY={name:"TEXTURE_2D_ARRAY",value:35866,description:" "},e.TEXTURE_BINDING_2D_ARRAY={name:"TEXTURE_BINDING_2D_ARRAY",value:35869,description:" "},e.R11F_G11F_B10F={name:"R11F_G11F_B10F",value:35898,description:" "},e.RGB9_E5={name:"RGB9_E5",value:35901,description:" "},e.RGBA32UI={name:"RGBA32UI",value:36208,description:" "},e.RGB32UI={name:"RGB32UI",value:36209,description:" "},e.RGBA16UI={name:"RGBA16UI",value:36214,description:" "},e.RGB16UI={name:"RGB16UI",value:36215,description:" "},e.RGBA8UI={name:"RGBA8UI",value:36220,description:" "},e.RGB8UI={name:"RGB8UI",value:36221,description:" "},e.RGBA32I={name:"RGBA32I",value:36226,description:" "},e.RGB32I={name:"RGB32I",value:36227,description:" "},e.RGBA16I={name:"RGBA16I",value:36232,description:" "},e.RGB16I={name:"RGB16I",value:36233,description:" "},e.RGBA8I={name:"RGBA8I",value:36238,description:" "},e.RGB8I={name:"RGB8I",value:36239,description:" "},e.RED_INTEGER={name:"RED_INTEGER",value:36244,description:" "},e.RGB_INTEGER={name:"RGB_INTEGER",value:36248,description:" "},e.RGBA_INTEGER={name:"RGBA_INTEGER",value:36249,description:" "},e.R8={name:"R8",value:33321,description:" "},e.RG8={name:"RG8",value:33323,description:" "},e.R16F={name:"R16F",value:33325,description:" "},e.R32F={name:"R32F",value:33326,description:" "},e.RG16F={name:"RG16F",value:33327,description:" "},e.RG32F={name:"RG32F",value:33328,description:" "},e.R8I={name:"R8I",value:33329,description:" "},e.R8UI={name:"R8UI",value:33330,description:" "},e.R16I={name:"R16I",value:33331,description:" "},e.R16UI={name:"R16UI",value:33332,description:" "},e.R32I={name:"R32I",value:33333,description:" "},e.R32UI={name:"R32UI",value:33334,description:" "},e.RG8I={name:"RG8I",value:33335,description:" "},e.RG8UI={name:"RG8UI",value:33336,description:" "},e.RG16I={name:"RG16I",value:33337,description:" "},e.RG16UI={name:"RG16UI",value:33338,description:" "},e.RG32I={name:"RG32I",value:33339,description:" "},e.RG32UI={name:"RG32UI",value:33340,description:" "},e.R8_SNORM={name:"R8_SNORM",value:36756,description:" "},e.RG8_SNORM={name:"RG8_SNORM",value:36757,description:" "},e.RGB8_SNORM={name:"RGB8_SNORM",value:36758,description:" "},e.RGBA8_SNORM={name:"RGBA8_SNORM",value:36759,description:" "},e.RGB10_A2UI={name:"RGB10_A2UI",value:36975,description:" "},e.TEXTURE_IMMUTABLE_FORMAT={name:"TEXTURE_IMMUTABLE_FORMAT",value:37167,description:" "},e.TEXTURE_IMMUTABLE_LEVELS={name:"TEXTURE_IMMUTABLE_LEVELS",value:33503,description:" "},e.UNSIGNED_INT_2_10_10_10_REV={name:"UNSIGNED_INT_2_10_10_10_REV",value:33640,description:" "},e.UNSIGNED_INT_10F_11F_11F_REV={name:"UNSIGNED_INT_10F_11F_11F_REV",value:35899,description:" "},e.UNSIGNED_INT_5_9_9_9_REV={name:"UNSIGNED_INT_5_9_9_9_REV",value:35902,description:" "},e.FLOAT_32_UNSIGNED_INT_24_8_REV={name:"FLOAT_32_UNSIGNED_INT_24_8_REV",value:36269,description:" "},e.UNSIGNED_INT_24_8={name:"UNSIGNED_INT_24_8",value:34042,description:" "},e.HALF_FLOAT={name:"HALF_FLOAT",value:5131,description:" "},e.RG={name:"RG",value:33319,description:" "},e.RG_INTEGER={name:"RG_INTEGER",value:33320,description:" "},e.INT_2_10_10_10_REV={name:"INT_2_10_10_10_REV",value:36255,description:" "},e.CURRENT_QUERY={name:"CURRENT_QUERY",value:34917,description:" "},e.QUERY_RESULT={name:"QUERY_RESULT",value:34918,description:" "},e.QUERY_RESULT_AVAILABLE={name:"QUERY_RESULT_AVAILABLE",value:34919,description:" "},e.ANY_SAMPLES_PASSED={name:"ANY_SAMPLES_PASSED",value:35887,description:" "},e.ANY_SAMPLES_PASSED_CONSERVATIVE={name:"ANY_SAMPLES_PASSED_CONSERVATIVE",value:36202,description:" "},e.MAX_DRAW_BUFFERS={name:"MAX_DRAW_BUFFERS",value:34852,description:" "},e.DRAW_BUFFER0={name:"DRAW_BUFFER0",value:34853,description:" "},e.DRAW_BUFFER1={name:"DRAW_BUFFER1",value:34854,description:" "},e.DRAW_BUFFER2={name:"DRAW_BUFFER2",value:34855,description:" "},e.DRAW_BUFFER3={name:"DRAW_BUFFER3",value:34856,description:" "},e.DRAW_BUFFER4={name:"DRAW_BUFFER4",value:34857,description:" "},e.DRAW_BUFFER5={name:"DRAW_BUFFER5",value:34858,description:" "},e.DRAW_BUFFER6={name:"DRAW_BUFFER6",value:34859,description:" "},e.DRAW_BUFFER7={name:"DRAW_BUFFER7",value:34860,description:" "},e.DRAW_BUFFER8={name:"DRAW_BUFFER8",value:34861,description:" "},e.DRAW_BUFFER9={name:"DRAW_BUFFER9",value:34862,description:" "},e.DRAW_BUFFER10={name:"DRAW_BUFFER10",value:34863,description:" "},e.DRAW_BUFFER11={name:"DRAW_BUFFER11",value:34864,description:" "},e.DRAW_BUFFER12={name:"DRAW_BUFFER12",value:34865,description:" "},e.DRAW_BUFFER13={name:"DRAW_BUFFER13",value:34866,description:" "},e.DRAW_BUFFER14={name:"DRAW_BUFFER14",value:34867,description:" "},e.DRAW_BUFFER15={name:"DRAW_BUFFER15",value:34868,description:" "},e.MAX_COLOR_ATTACHMENTS={name:"MAX_COLOR_ATTACHMENTS",value:36063,description:" "},e.COLOR_ATTACHMENT1={name:"COLOR_ATTACHMENT1",value:36065,description:" "},e.COLOR_ATTACHMENT2={name:"COLOR_ATTACHMENT2",value:36066,description:" "},e.COLOR_ATTACHMENT3={name:"COLOR_ATTACHMENT3",value:36067,description:" "},e.COLOR_ATTACHMENT4={name:"COLOR_ATTACHMENT4",value:36068,description:" "},e.COLOR_ATTACHMENT5={name:"COLOR_ATTACHMENT5",value:36069,description:" "},e.COLOR_ATTACHMENT6={name:"COLOR_ATTACHMENT6",value:36070,description:" "},e.COLOR_ATTACHMENT7={name:"COLOR_ATTACHMENT7",value:36071,description:" "},e.COLOR_ATTACHMENT8={name:"COLOR_ATTACHMENT8",value:36072,description:" "},e.COLOR_ATTACHMENT9={name:"COLOR_ATTACHMENT9",value:36073,description:" "},e.COLOR_ATTACHMENT10={name:"COLOR_ATTACHMENT10",value:36074,description:" "},e.COLOR_ATTACHMENT11={name:"COLOR_ATTACHMENT11",value:36075,description:" "},e.COLOR_ATTACHMENT12={name:"COLOR_ATTACHMENT12",value:36076,description:" "},e.COLOR_ATTACHMENT13={name:"COLOR_ATTACHMENT13",value:36077,description:" "},e.COLOR_ATTACHMENT14={name:"COLOR_ATTACHMENT14",value:36078,description:" "},e.COLOR_ATTACHMENT15={name:"COLOR_ATTACHMENT15",value:36079,description:" "},e.SAMPLER_3D={name:"SAMPLER_3D",value:35679,description:" "},e.SAMPLER_2D_SHADOW={name:"SAMPLER_2D_SHADOW",value:35682,description:" "},e.SAMPLER_2D_ARRAY={name:"SAMPLER_2D_ARRAY",value:36289,description:" "},e.SAMPLER_2D_ARRAY_SHADOW={name:"SAMPLER_2D_ARRAY_SHADOW",value:36292,description:" "},e.SAMPLER_CUBE_SHADOW={name:"SAMPLER_CUBE_SHADOW",value:36293,description:" "},e.INT_SAMPLER_2D={name:"INT_SAMPLER_2D",value:36298,description:" "},e.INT_SAMPLER_3D={name:"INT_SAMPLER_3D",value:36299,description:" "},e.INT_SAMPLER_CUBE={name:"INT_SAMPLER_CUBE",value:36300,description:" "},e.INT_SAMPLER_2D_ARRAY={name:"INT_SAMPLER_2D_ARRAY",value:36303,description:" "},e.UNSIGNED_INT_SAMPLER_2D={name:"UNSIGNED_INT_SAMPLER_2D",value:36306,description:" "},e.UNSIGNED_INT_SAMPLER_3D={name:"UNSIGNED_INT_SAMPLER_3D",value:36307,description:" "},e.UNSIGNED_INT_SAMPLER_CUBE={name:"UNSIGNED_INT_SAMPLER_CUBE",value:36308,description:" "},e.UNSIGNED_INT_SAMPLER_2D_ARRAY={name:"UNSIGNED_INT_SAMPLER_2D_ARRAY",value:36311,description:" "},e.MAX_SAMPLES={name:"MAX_SAMPLES",value:36183,description:" "},e.SAMPLER_BINDING={name:"SAMPLER_BINDING",value:35097,description:" "},e.PIXEL_PACK_BUFFER={name:"PIXEL_PACK_BUFFER",value:35051,description:" "},e.PIXEL_UNPACK_BUFFER={name:"PIXEL_UNPACK_BUFFER",value:35052,description:" "},e.PIXEL_PACK_BUFFER_BINDING={name:"PIXEL_PACK_BUFFER_BINDING",value:35053,description:" "},e.PIXEL_UNPACK_BUFFER_BINDING={name:"PIXEL_UNPACK_BUFFER_BINDING",value:35055,description:" "},e.COPY_READ_BUFFER={name:"COPY_READ_BUFFER",value:36662,description:" "},e.COPY_WRITE_BUFFER={name:"COPY_WRITE_BUFFER",value:36663,description:" "},e.COPY_READ_BUFFER_BINDING={name:"COPY_READ_BUFFER_BINDING",value:36662,description:" "},e.COPY_WRITE_BUFFER_BINDING={name:"COPY_WRITE_BUFFER_BINDING",value:36663,description:" "},e.FLOAT_MAT2x3={name:"FLOAT_MAT2x3",value:35685,description:" "},e.FLOAT_MAT2x4={name:"FLOAT_MAT2x4",value:35686,description:" "},e.FLOAT_MAT3x2={name:"FLOAT_MAT3x2",value:35687,description:" "},e.FLOAT_MAT3x4={name:"FLOAT_MAT3x4",value:35688,description:" "},e.FLOAT_MAT4x2={name:"FLOAT_MAT4x2",value:35689,description:" "},e.FLOAT_MAT4x3={name:"FLOAT_MAT4x3",value:35690,description:" "},e.UNSIGNED_INT_VEC2={name:"UNSIGNED_INT_VEC2",value:36294,description:" "},e.UNSIGNED_INT_VEC3={name:"UNSIGNED_INT_VEC3",value:36295,description:" "},e.UNSIGNED_INT_VEC4={name:"UNSIGNED_INT_VEC4",value:36296,description:" "},e.UNSIGNED_NORMALIZED={name:"UNSIGNED_NORMALIZED",value:35863,description:" "},e.SIGNED_NORMALIZED={name:"SIGNED_NORMALIZED",value:36764,description:" "},e.VERTEX_ATTRIB_ARRAY_INTEGER={name:"VERTEX_ATTRIB_ARRAY_INTEGER",value:35069,description:" "},e.VERTEX_ATTRIB_ARRAY_DIVISOR={name:"VERTEX_ATTRIB_ARRAY_DIVISOR",value:35070,description:" "},e.TRANSFORM_FEEDBACK_BUFFER_MODE={name:"TRANSFORM_FEEDBACK_BUFFER_MODE",value:35967,description:" "},e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS={name:"MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",value:35968,description:" "},e.TRANSFORM_FEEDBACK_VARYINGS={name:"TRANSFORM_FEEDBACK_VARYINGS",value:35971,description:" "},e.TRANSFORM_FEEDBACK_BUFFER_START={name:"TRANSFORM_FEEDBACK_BUFFER_START",value:35972,description:" "},e.TRANSFORM_FEEDBACK_BUFFER_SIZE={name:"TRANSFORM_FEEDBACK_BUFFER_SIZE",value:35973,description:" "},e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN={name:"TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",value:35976,description:" "},e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS={name:"MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",value:35978,description:" "},e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS={name:"MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",value:35979,description:" "},e.INTERLEAVED_ATTRIBS={name:"INTERLEAVED_ATTRIBS",value:35980,description:" "},e.SEPARATE_ATTRIBS={name:"SEPARATE_ATTRIBS",value:35981,description:" "},e.TRANSFORM_FEEDBACK_BUFFER={name:"TRANSFORM_FEEDBACK_BUFFER",value:35982,description:" "},e.TRANSFORM_FEEDBACK_BUFFER_BINDING={name:"TRANSFORM_FEEDBACK_BUFFER_BINDING",value:35983,description:" "},e.TRANSFORM_FEEDBACK={name:"TRANSFORM_FEEDBACK",value:36386,description:" "},e.TRANSFORM_FEEDBACK_PAUSED={name:"TRANSFORM_FEEDBACK_PAUSED",value:36387,description:" "},e.TRANSFORM_FEEDBACK_ACTIVE={name:"TRANSFORM_FEEDBACK_ACTIVE",value:36388,description:" "},e.TRANSFORM_FEEDBACK_BINDING={name:"TRANSFORM_FEEDBACK_BINDING",value:36389,description:" "},e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING={name:"FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",value:33296,description:" "},e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE={name:"FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",value:33297,description:" "},e.FRAMEBUFFER_ATTACHMENT_RED_SIZE={name:"FRAMEBUFFER_ATTACHMENT_RED_SIZE",value:33298,description:" "},e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE={name:"FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",value:33299,description:" "},e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE={name:"FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",value:33300,description:" "},e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE={name:"FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",value:33301,description:" "},e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE={name:"FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",value:33302,description:" "},e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE={name:"FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",value:33303,description:" "},e.FRAMEBUFFER_DEFAULT={name:"FRAMEBUFFER_DEFAULT",value:33304,description:" "},e.DEPTH24_STENCIL8={name:"DEPTH24_STENCIL8",value:35056,description:" "},e.DRAW_FRAMEBUFFER_BINDING={name:"DRAW_FRAMEBUFFER_BINDING",value:36006,description:" "},e.READ_FRAMEBUFFER={name:"READ_FRAMEBUFFER",value:36008,description:" "},e.DRAW_FRAMEBUFFER={name:"DRAW_FRAMEBUFFER",value:36009,description:" "},e.READ_FRAMEBUFFER_BINDING={name:"READ_FRAMEBUFFER_BINDING",value:36010,description:" "},e.RENDERBUFFER_SAMPLES={name:"RENDERBUFFER_SAMPLES",value:36011,description:" "},e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER={name:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",value:36052,description:" "},e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE={name:"FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",value:36182,description:" "},e.UNIFORM_BUFFER={name:"UNIFORM_BUFFER",value:35345,description:" "},e.UNIFORM_BUFFER_BINDING={name:"UNIFORM_BUFFER_BINDING",value:35368,description:" "},e.UNIFORM_BUFFER_START={name:"UNIFORM_BUFFER_START",value:35369,description:" "},e.UNIFORM_BUFFER_SIZE={name:"UNIFORM_BUFFER_SIZE",value:35370,description:" "},e.MAX_VERTEX_UNIFORM_BLOCKS={name:"MAX_VERTEX_UNIFORM_BLOCKS",value:35371,description:" "},e.MAX_FRAGMENT_UNIFORM_BLOCKS={name:"MAX_FRAGMENT_UNIFORM_BLOCKS",value:35373,description:" "},e.MAX_COMBINED_UNIFORM_BLOCKS={name:"MAX_COMBINED_UNIFORM_BLOCKS",value:35374,description:" "},e.MAX_UNIFORM_BUFFER_BINDINGS={name:"MAX_UNIFORM_BUFFER_BINDINGS",value:35375,description:" "},e.MAX_UNIFORM_BLOCK_SIZE={name:"MAX_UNIFORM_BLOCK_SIZE",value:35376,description:" "},e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS={name:"MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",value:35377,description:" "},e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS={name:"MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",value:35379,description:" "},e.UNIFORM_BUFFER_OFFSET_ALIGNMENT={name:"UNIFORM_BUFFER_OFFSET_ALIGNMENT",value:35380,description:" "},e.ACTIVE_UNIFORM_BLOCKS={name:"ACTIVE_UNIFORM_BLOCKS",value:35382,description:" "},e.UNIFORM_TYPE={name:"UNIFORM_TYPE",value:35383,description:" "},e.UNIFORM_SIZE={name:"UNIFORM_SIZE",value:35384,description:" "},e.UNIFORM_BLOCK_INDEX={name:"UNIFORM_BLOCK_INDEX",value:35386,description:" "},e.UNIFORM_OFFSET={name:"UNIFORM_OFFSET",value:35387,description:" "},e.UNIFORM_ARRAY_STRIDE={name:"UNIFORM_ARRAY_STRIDE",value:35388,description:" "},e.UNIFORM_MATRIX_STRIDE={name:"UNIFORM_MATRIX_STRIDE",value:35389,description:" "},e.UNIFORM_IS_ROW_MAJOR={name:"UNIFORM_IS_ROW_MAJOR",value:35390,description:" "},e.UNIFORM_BLOCK_BINDING={name:"UNIFORM_BLOCK_BINDING",value:35391,description:" "},e.UNIFORM_BLOCK_DATA_SIZE={name:"UNIFORM_BLOCK_DATA_SIZE",value:35392,description:" "},e.UNIFORM_BLOCK_ACTIVE_UNIFORMS={name:"UNIFORM_BLOCK_ACTIVE_UNIFORMS",value:35394,description:" "},e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES={name:"UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",value:35395,description:" "},e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER={name:"UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",value:35396,description:" "},e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER={name:"UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",value:35398,description:" "},e.OBJECT_TYPE={name:"OBJECT_TYPE",value:37138,description:" "},e.SYNC_CONDITION={name:"SYNC_CONDITION",value:37139,description:" "},e.SYNC_STATUS={name:"SYNC_STATUS",value:37140,description:" "},e.SYNC_FLAGS={name:"SYNC_FLAGS",value:37141,description:" "},e.SYNC_FENCE={name:"SYNC_FENCE",value:37142,description:" "},e.SYNC_GPU_COMMANDS_COMPLETE={name:"SYNC_GPU_COMMANDS_COMPLETE",value:37143,description:" "},e.UNSIGNALED={name:"UNSIGNALED",value:37144,description:" "},e.SIGNALED={name:"SIGNALED",value:37145,description:" "},e.ALREADY_SIGNALED={name:"ALREADY_SIGNALED",value:37146,description:" "},e.TIMEOUT_EXPIRED={name:"TIMEOUT_EXPIRED",value:37147,description:" "},e.CONDITION_SATISFIED={name:"CONDITION_SATISFIED",value:37148,description:" "},e.WAIT_FAILED={name:"WAIT_FAILED",value:37149,description:" "},e.SYNC_FLUSH_COMMANDS_BIT={name:"SYNC_FLUSH_COMMANDS_BIT",value:1,description:" "},e.COLOR={name:"COLOR",value:6144,description:" "},e.DEPTH={name:"DEPTH",value:6145,description:" "},e.STENCIL={name:"STENCIL",value:6146,description:" "},e.MIN={name:"MIN",value:32775,description:" "},e.MAX={name:"MAX",value:32776,description:" "},e.DEPTH_COMPONENT24={name:"DEPTH_COMPONENT24",value:33190,description:" "},e.STREAM_READ={name:"STREAM_READ",value:35041,description:" "},e.STREAM_COPY={name:"STREAM_COPY",value:35042,description:" "},e.STATIC_READ={name:"STATIC_READ",value:35045,description:" "},e.STATIC_COPY={name:"STATIC_COPY",value:35046,description:" "},e.DYNAMIC_READ={name:"DYNAMIC_READ",value:35049,description:" "},e.DYNAMIC_COPY={name:"DYNAMIC_COPY",value:35050,description:" "},e.DEPTH_COMPONENT32F={name:"DEPTH_COMPONENT32F",value:36012,description:" "},e.DEPTH32F_STENCIL8={name:"DEPTH32F_STENCIL8",value:36013,description:" "},e.INVALID_INDEX={name:"INVALID_INDEX",value:4294967295,description:" "},e.TIMEOUT_IGNORED={name:"TIMEOUT_IGNORED",value:-1,description:" "},e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL={name:"MAX_CLIENT_WAIT_TIMEOUT_WEBGL",value:37447,description:" "},e.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE={name:"VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",value:35070,description:"Describes the frequency divisor used for instanced rendering.",extensionName:"ANGLE_instanced_arrays"},e.UNMASKED_VENDOR_WEBGL={name:"UNMASKED_VENDOR_WEBGL",value:37445,description:"Passed to getParameter to get the vendor string of the graphics driver.",extensionName:"ANGLE_instanced_arrays"},e.UNMASKED_RENDERER_WEBGL={name:"UNMASKED_RENDERER_WEBGL",value:37446,description:"Passed to getParameter to get the renderer string of the graphics driver.",extensionName:"WEBGL_debug_renderer_info"},e.MAX_TEXTURE_MAX_ANISOTROPY_EXT={name:"MAX_TEXTURE_MAX_ANISOTROPY_EXT",value:34047,description:"Returns the maximum available anisotropy.",extensionName:"EXT_texture_filter_anisotropic"},e.TEXTURE_MAX_ANISOTROPY_EXT={name:"TEXTURE_MAX_ANISOTROPY_EXT",value:34046,description:"Passed to texParameter to set the desired maximum anisotropy for a texture.",extensionName:"EXT_texture_filter_anisotropic"},e.COMPRESSED_RGB_S3TC_DXT1_EXT={name:"COMPRESSED_RGB_S3TC_DXT1_EXT",value:33776,description:"A DXT1-compressed image in an RGB image format.",extensionName:"WEBGL_compressed_texture_s3tc"},e.COMPRESSED_RGBA_S3TC_DXT1_EXT={name:"COMPRESSED_RGBA_S3TC_DXT1_EXT",value:33777,description:"A DXT1-compressed image in an RGB image format with a simple on/off alpha value.",extensionName:"WEBGL_compressed_texture_s3tc"},e.COMPRESSED_RGBA_S3TC_DXT3_EXT={name:"COMPRESSED_RGBA_S3TC_DXT3_EXT",value:33778,description:"A DXT3-compressed image in an RGBA image format. Compared to a 32-bit RGBA texture, it offers 4:1 compression.",extensionName:"WEBGL_compressed_texture_s3tc"},e.COMPRESSED_RGBA_S3TC_DXT5_EXT={name:"COMPRESSED_RGBA_S3TC_DXT5_EXT",value:33779,description:"A DXT5-compressed image in an RGBA image format. It also provides a 4:1 compression, but differs to the DXT3 compression in how the alpha compression is done.",extensionName:"WEBGL_compressed_texture_s3tc"},e.COMPRESSED_R11_EAC={name:"COMPRESSED_R11_EAC",value:37488,description:"One-channel (red) unsigned format compression.",extensionName:"WEBGL_compressed_texture_etc"},e.COMPRESSED_SIGNED_R11_EAC={name:"COMPRESSED_SIGNED_R11_EAC",value:37489,description:"One-channel (red) signed format compression.",extensionName:"WEBGL_compressed_texture_etc"},e.COMPRESSED_RG11_EAC={name:"COMPRESSED_RG11_EAC",value:37490,description:"Two-channel (red and green) unsigned format compression.",extensionName:"WEBGL_compressed_texture_etc"},e.COMPRESSED_SIGNED_RG11_EAC={name:"COMPRESSED_SIGNED_RG11_EAC",value:37491,description:"Two-channel (red and green) signed format compression.",extensionName:"WEBGL_compressed_texture_etc"},e.COMPRESSED_RGB8_ETC2={name:"COMPRESSED_RGB8_ETC2",value:37492,description:"Compresses RBG8 data with no alpha channel.",extensionName:"WEBGL_compressed_texture_etc"},e.COMPRESSED_RGBA8_ETC2_EAC={name:"COMPRESSED_RGBA8_ETC2_EAC",value:37493,description:"Compresses RGBA8 data. The RGB part is encoded the same as RGB_ETC2, but the alpha part is encoded separately.",extensionName:"WEBGL_compressed_texture_etc"},e.COMPRESSED_SRGB8_ETC2={name:"COMPRESSED_SRGB8_ETC2",value:37494,description:"Compresses sRBG8 data with no alpha channel.",extensionName:"WEBGL_compressed_texture_etc"},e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC={name:"COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",value:37495,description:"Compresses sRGBA8 data. The sRGB part is encoded the same as SRGB_ETC2, but the alpha part is encoded separately.",extensionName:"WEBGL_compressed_texture_etc"},e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2={name:"COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",value:37496,description:"Similar to RGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.",extensionName:"WEBGL_compressed_texture_etc"},e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2={name:"COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",value:37497,description:"Similar to SRGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.",extensionName:"WEBGL_compressed_texture_etc"},e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG={name:"COMPRESSED_RGB_PVRTC_4BPPV1_IMG",value:35840,description:"RGB compression in 4-bit mode. One block for each 4×4 pixels.",extensionName:"WEBGL_compressed_texture_pvrtc"},e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG={name:"COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",value:35842,description:"RGBA compression in 4-bit mode. One block for each 4×4 pixels.",extensionName:"WEBGL_compressed_texture_pvrtc"},e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG={name:"COMPRESSED_RGB_PVRTC_2BPPV1_IMG",value:35841,description:"RGB compression in 2-bit mode. One block for each 8×4 pixels.",extensionName:"WEBGL_compressed_texture_pvrtc"},e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG={name:"COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",value:35843,description:"RGBA compression in 2-bit mode. One block for each 8×4 pixe",extensionName:"WEBGL_compressed_texture_pvrtc"},e.COMPRESSED_RGB_ETC1_WEBGL={name:"COMPRESSED_RGB_ETC1_WEBGL",value:36196,description:"Compresses 24-bit RGB data with no alpha channel.",extensionName:"WEBGL_compressed_texture_etc1"},e.COMPRESSED_RGB_ATC_WEBGL={name:"COMPRESSED_RGB_ATC_WEBGL",value:35986,description:"Compresses RGB textures with no alpha channel.",extensionName:"WEBGL_compressed_texture_atc"},e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL={name:"COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",value:35986,description:"Compresses RGBA textures using explicit alpha encoding (useful when alpha transitions are sharp).",extensionName:"WEBGL_compressed_texture_atc"},e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL={name:"COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",value:34798,description:"Compresses RGBA textures using interpolated alpha encoding (useful when alpha transitions are gradient).",extensionName:"WEBGL_compressed_texture_atc"},e.UNSIGNED_INT_24_8_WEBGL={name:"UNSIGNED_INT_24_8_WEBGL",value:34042,description:"Unsigned integer type for 24-bit depth texture data.",extensionName:"WEBGL_depth_texture"},e.HALF_FLOAT_OES={name:"HALF_FLOAT_OES",value:36193,description:"Half floating-point type (16-bit).",extensionName:"OES_texture_half_float"},e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT={name:"FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",value:33297,description:" ",extensionName:"WEBGL_color_buffer_float"},e.UNSIGNED_NORMALIZED_EXT={name:"UNSIGNED_NORMALIZED_EXT",value:35863,description:" ",extensionName:"WEBGL_color_buffer_float"},e.MIN_EXT={name:"MIN_EXT",value:32775,description:"Produces the minimum color components of the source and destination colors.",extensionName:"EXT_blend_minmax"},e.MAX_EXT={name:"MAX_EXT",value:32776,description:"Produces the maximum color components of the source and destination colors.",extensionName:"EXT_blend_minmax"},e.SRGB_EXT={name:"SRGB_EXT",value:35904,description:"Unsized sRGB format that leaves the precision up to the driver.",extensionName:"EXT_sRGB"},e.SRGB_ALPHA_EXT={name:"SRGB_ALPHA_EXT",value:35906,description:"Unsized sRGB format with unsized alpha component.",extensionName:"EXT_sRGB"},e.SRGB8_ALPHA8_EXT={name:"SRGB8_ALPHA8_EXT",value:35907,description:"Sized (8-bit) sRGB and alpha formats.",extensionName:"EXT_sRGB"},e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT={name:"FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",value:33296,description:"Returns the framebuffer color encoding.",extensionName:"EXT_sRGB"},e.FRAGMENT_SHADER_DERIVATIVE_HINT_OES={name:"FRAGMENT_SHADER_DERIVATIVE_HINT_OES",value:35723,description:"Indicates the accuracy of the derivative calculation for the GLSL built-in functions: dFdx, dFdy, and fwidth.",extensionName:"OES_standard_derivatives"},e.COLOR_ATTACHMENT0_WEBGL={name:"COLOR_ATTACHMENT0_WEBGL",value:36064,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT1_WEBGL={name:"COLOR_ATTACHMENT1_WEBGL",value:36065,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT2_WEBGL={name:"COLOR_ATTACHMENT2_WEBGL",value:36066,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT3_WEBGL={name:"COLOR_ATTACHMENT3_WEBGL",value:36067,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT4_WEBGL={name:"COLOR_ATTACHMENT4_WEBGL",value:36068,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT5_WEBGL={name:"COLOR_ATTACHMENT5_WEBGL",value:36069,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT6_WEBGL={name:"COLOR_ATTACHMENT6_WEBGL",value:36070,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT7_WEBGL={name:"COLOR_ATTACHMENT7_WEBGL",value:36071,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT8_WEBGL={name:"COLOR_ATTACHMENT8_WEBGL",value:36072,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT9_WEBGL={name:"COLOR_ATTACHMENT9_WEBGL",value:36073,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT10_WEBGL={name:"COLOR_ATTACHMENT10_WEBGL",value:36074,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT11_WEBGL={name:"COLOR_ATTACHMENT11_WEBGL",value:36075,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT12_WEBGL={name:"COLOR_ATTACHMENT12_WEBGL",value:36076,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT13_WEBGL={name:"COLOR_ATTACHMENT13_WEBGL",value:36077,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT14_WEBGL={name:"COLOR_ATTACHMENT14_WEBGL",value:36078,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.COLOR_ATTACHMENT15_WEBGL={name:"COLOR_ATTACHMENT15_WEBGL",value:36079,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER0_WEBGL={name:"DRAW_BUFFER0_WEBGL",value:34853,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER1_WEBGL={name:"DRAW_BUFFER1_WEBGL",value:34854,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER2_WEBGL={name:"DRAW_BUFFER2_WEBGL",value:34855,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER3_WEBGL={name:"DRAW_BUFFER3_WEBGL",value:34856,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER4_WEBGL={name:"DRAW_BUFFER4_WEBGL",value:34857,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER5_WEBGL={name:"DRAW_BUFFER5_WEBGL",value:34858,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER6_WEBGL={name:"DRAW_BUFFER6_WEBGL",value:34859,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER7_WEBGL={name:"DRAW_BUFFER7_WEBGL",value:34860,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER8_WEBGL={name:"DRAW_BUFFER8_WEBGL",value:34861,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER9_WEBGL={name:"DRAW_BUFFER9_WEBGL",value:34862,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER10_WEBGL={name:"DRAW_BUFFER10_WEBGL",value:34863,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER11_WEBGL={name:"DRAW_BUFFER11_WEBGL",value:34864,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER12_WEBGL={name:"DRAW_BUFFER12_WEBGL",value:34865,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER13_WEBGL={name:"DRAW_BUFFER13_WEBGL",value:34866,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER14_WEBGL={name:"DRAW_BUFFER14_WEBGL",value:34867,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.DRAW_BUFFER15_WEBGL={name:"DRAW_BUFFER15_WEBGL",value:34868,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},e.MAX_COLOR_ATTACHMENTS_WEBGL={name:"MAX_COLOR_ATTACHMENTS_WEBGL",value:36063,description:"Maximum number of framebuffer color attachment points",extensionName:"WEBGL_draw_buffers"},e.MAX_DRAW_BUFFERS_WEBGL={name:"MAX_DRAW_BUFFERS_WEBGL",value:34852,description:"Maximum number of draw buffers",extensionName:"WEBGL_draw_buffers"},e.VERTEX_ARRAY_BINDING_OES={name:"VERTEX_ARRAY_BINDING_OES",value:34229,description:"The bound vertex array object (VAO).",extensionName:"VERTEX_ARRAY_BINDING_OES"},e.QUERY_COUNTER_BITS_EXT={name:"QUERY_COUNTER_BITS_EXT",value:34916,description:"The number of bits used to hold the query result for the given target.",extensionName:"EXT_disjoint_timer_query"},e.CURRENT_QUERY_EXT={name:"CURRENT_QUERY_EXT",value:34917,description:"The currently active query.",extensionName:"EXT_disjoint_timer_query"},e.QUERY_RESULT_EXT={name:"QUERY_RESULT_EXT",value:34918,description:"The query result.",extensionName:"EXT_disjoint_timer_query"},e.QUERY_RESULT_AVAILABLE_EXT={name:"QUERY_RESULT_AVAILABLE_EXT",value:34919,description:"A Boolean indicating whether or not a query result is available.",extensionName:"EXT_disjoint_timer_query"},e.TIME_ELAPSED_EXT={name:"TIME_ELAPSED_EXT",value:35007,description:"Elapsed time (in nanoseconds).",extensionName:"EXT_disjoint_timer_query"},e.TIMESTAMP_EXT={name:"TIMESTAMP_EXT",value:36392,description:"The current time.",extensionName:"EXT_disjoint_timer_query"},e.GPU_DISJOINT_EXT={name:"GPU_DISJOINT_EXT",value:36795,description:"A Boolean indicating whether or not the GPU performed any disjoint operation.",extensionName:"EXT_disjoint_timer_query"},e.zeroMeaningByCommand={getError:"NO_ERROR",blendFunc:"ZERO",blendFuncSeparate:"ZERO",readBuffer:"NONE",getFramebufferAttachmentParameter:"NONE",texParameterf:"NONE",texParameteri:"NONE",drawArrays:"POINTS",drawElements:"POINTS",drawArraysInstanced:"POINTS",drawArraysInstancedAngle:"POINTS",drawBuffers:"POINTS",drawElementsInstanced:"POINTS",drawRangeElements:"POINTS"},e.oneMeaningByCommand={blendFunc:"ONE",blendFuncSeparate:"ONE",drawArrays:"LINES",drawElements:"LINES",drawArraysInstanced:"LINES",drawArraysInstancedAngle:"LINES",drawBuffers:"LINES",drawElementsInstanced:"LINES",drawRangeElements:"LINES"},e}(),ne={},re={};!function(){for(var x in te)if(te.hasOwnProperty(x)){var w=te[x];ne[w.name]=w,re[w.value]=w}}();var ie,oe,ae,se,le,ce,ue,he,de,pe,fe,me,ge,ve,ye,_e,be,xe,Ee,we,Se,Te=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Ce=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Te(t,x),Object.defineProperty(t.prototype,"analyserName",{get:function(){return t.analyserName},enumerable:!0,configurable:!0}),t.prototype.appendToAnalysis=function(x,w){if(x.commands){for(var S={total:0,totalTriangles:0,totalTriangleStrip:0,totalTriangleFan:0,totalLines:0,totalLineStrip:0,totalLineLoop:0,totalPoints:0},U=0,G=x.commands;U<G.length;U++){var z=G[U];"drawArrays"===z.name&&z.commandArguments.length>=3||"drawArraysInstanced"===z.name&&z.commandArguments.length>=3||"drawArraysInstancedANGLE"===z.name&&z.commandArguments.length>=3?this.appendToPrimitives(S,z.commandArguments[0],z.commandArguments[2]):"drawElements"===z.name&&z.commandArguments.length>=2||"drawElementsInstanced"===z.name&&z.commandArguments.length>=2||"drawElementsInstancedANGLE"===z.name&&z.commandArguments.length>=2?this.appendToPrimitives(S,z.commandArguments[0],z.commandArguments[1]):"drawRangeElements"===z.name&&z.commandArguments.length>=4&&this.appendToPrimitives(S,z.commandArguments[0],z.commandArguments[3])}w.total=S.total,w.triangles=S.totalTriangles,w.triangleStrip=S.totalTriangleStrip,w.triangleFan=S.totalTriangleFan,w.lines=S.totalLines,w.lineStrip=S.totalLineStrip,w.lineLoop=S.totalLineLoop,w.points=S.totalPoints}},t.prototype.appendToPrimitives=function(x,w,S){w===te.POINTS.value?x.totalPoints+=S:w===te.LINES.value?x.totalLines+=S:w===te.LINE_STRIP.value?x.totalLineStrip+=S:w===te.LINE_LOOP.value?x.totalLineLoop+=S:w===te.TRIANGLES.value?x.totalTriangles+=S:w===te.TRIANGLE_STRIP.value?x.totalTriangleStrip+=S:w===te.TRIANGLE_FAN.value&&(x.totalTriangleFan+=S),x.total+=S},t.analyserName="Primitives",t}(K),Ae=function(){function e(x){this.contextInformation=x,this.analysers=[],this.initAnalysers()}return e.prototype.appendAnalyses=function(x){for(var w in this.analysers)this.analysers.hasOwnProperty(w)&&this.analysers[w].appendAnalysis(x)},e.prototype.initAnalysers=function(){this.analysers.push(new Z(this.contextInformation),new ee(this.contextInformation),new Ce(this.contextInformation))},e}(),Me=function(){function e(){}return e.storeOriginFunction=function(x,w){if(x&&x[w]){var S=this.getOriginFunctionName(w);x[S]||(x[S]=x[w])}},e.storePrototypeOriginFunction=function(x,w){if(x&&x.prototype[w]){var S=this.getOriginFunctionName(w);x.prototype[S]||(x.prototype[S]=x.prototype[w])}},e.executePrototypeOriginFunction=function(x,w,S,U){if(x){var G=this.getOriginFunctionName(S);if(w.prototype[G])return x[G]||(x[G]=w.prototype[G]),this.executeFunction(x,G,U)}},e.executeOriginFunction=function(x,w,S){if(x){var U=this.getOriginFunctionName(w);if(x[U])return this.executeFunction(x,U,S)}},e.executeFunction=function(x,w,S){var U=S;if(void 0===U||0===U.length)return x[w]();switch(U.length){case 1:return x[w](U[0]);case 2:return x[w](U[0],U[1]);case 3:return x[w](U[0],U[1],U[2]);case 4:return x[w](U[0],U[1],U[2],U[3]);case 5:return x[w](U[0],U[1],U[2],U[3],U[4]);case 6:return x[w](U[0],U[1],U[2],U[3],U[4],U[5]);case 7:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6]);case 8:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7]);case 9:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8]);case 10:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9]);case 11:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10]);case 12:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11]);case 13:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12]);case 14:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13]);case 15:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14]);case 16:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15]);case 17:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15],U[16]);case 18:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15],U[16],U[17]);case 19:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15],U[16],U[17],U[18]);case 20:return x[w](U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15],U[16],U[17],U[18],U[19]);default:return x[w].apply(x,U)}},e.getOriginFunctionName=function(x){return this.originFunctionPrefix+x},e.originFunctionPrefix="__SPECTOR_Origin_",e}(),Re=function(){function e(){}return e.getStackTrace=function(x,w){void 0===x&&(x=0),void 0===w&&(w=0);var S=[];try{throw new Error("Errorator.")}catch(x){if(x.stack)for(var U=0,G=(z=x.stack.split("\n")).length;U<G;U++)z[U].match(/^\s*[A-Za-z0-9\-_\$]+\(/)?S.push(z[U]):0===z[U].indexOf("    at ")?(z[U]=z[U].replace("    at ",""),S.push(z[U])):-1!==z[U].indexOf("/<@http")?(z[U]=z[U].substring(z[U].indexOf("/<@http")+3),S.push(z[U])):-1!==z[U].indexOf("@http")&&(z[U]=z[U].replace("@http"," (http"),z[U]=z[U]+")",S.push(z[U]));else if(x.message){var z;for(U=0,G=(z=x.message.split("\n")).length;U<G;U++)if(z[U].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var H=z[U];z[U+1]&&(H+=" at "+z[U+1],U++),S.push(H)}}}if(!S)for(var j=arguments.callee.caller;j;){var X=j.toString(),q=X.substring(X.indexOf("function")+8,X.indexOf(""))||"anonymous";S.push(q),j=j.caller}if(S){for(S.shift(),U=0;U<x&&S.length>0;U++)S.shift();for(U=0;U<w&&S.length>0;U++)S.pop()}return S},e}(),Le=function(){function e(){}return e.getWebGlObjectTag=function(x){return x[e.SPECTOROBJECTTAGKEY]},e.attachWebGlObjectTag=function(x,w){w.displayText=e.stringifyWebGlObjectTag(w),x[e.SPECTOROBJECTTAGKEY]=w},e.stringifyWebGlObjectTag=function(x){return x?x.typeName+" - ID: "+x.id:"No tag available."},e.SPECTOROBJECTTAGKEY="__SPECTOR_Object_TAG",e}(),Oe=function(){function e(){this.id=0}return Object.defineProperty(e.prototype,"type",{get:function(){return window[this.typeName]||null},enumerable:!0,configurable:!0}),e.prototype.tagWebGlObject=function(x){if(this.type){var w;if(!x)return w;if(w=Le.getWebGlObjectTag(x))return w;if(x instanceof this.type){var S=this.getNextId();return w={typeName:this.typeName,id:S},Le.attachWebGlObjectTag(x,w),w}return w}},e.prototype.getNextId=function(){return this.id++},e}(),Pe=function(){function e(x){this.options=x}return e.prototype.createCapture=function(x,w,S){var U=Re.getStackTrace(4,1),G=0===x.name.indexOf("uniform")?this.stringifyUniform(x.arguments):this.stringify(x.arguments,x.result),z={id:w,startTime:x.startTime,commandEndTime:x.endTime,endTime:0,name:x.name,commandArguments:x.arguments,result:x.result,stackTrace:U,status:0,marker:S,text:G};this.transformCapture(z);for(var H=0;H<z.commandArguments.length;H++){var j=z.commandArguments[H];j&&j.length&&j.length>50&&(z.commandArguments[H]="Array Length: "+j.length)}if(z.commandArguments){var X=[];for(H=0;H<z.commandArguments.length;H++){var q=z.commandArguments[H];void 0===q?X.push(void 0):null===q?X.push(null):X.push(JSON.parse(this.stringifyJSON(q)))}z.commandArguments=X}return z.result&&(z.result=JSON.parse(this.stringifyJSON(z.result))),z},e.prototype.stringifyJSON=function(x){try{return JSON.stringify(x)}catch(x){return null}},e.prototype.transformCapture=function(x){},e.prototype.stringify=function(x,w){var S=this.spiedCommandName;return x&&x.length>0&&(S+=": "+this.stringifyArgs(x).join(", ")),w&&(S+=" -> "+this.stringifyResult(w)),S},e.prototype.stringifyUniform=function(x){var w=this.spiedCommandName;if(x&&x.length>0){var S=[];S.push(this.stringifyValue(x[0]));for(var U=1;U<x.length;U++)if("number"==typeof x[U]){var G=x[U]+"";S.push(G)}else G=this.stringifyValue(x[U]),S.push(G);w+=": "+S.join(", ")}return w},e.prototype.stringifyArgs=function(x){for(var w=[],S=0;S<x.length;S++){var U=x[S],G=this.stringifyValue(U);w.push(G)}return w},e.prototype.stringifyResult=function(x){if(x)return this.stringifyValue(x)},e.prototype.stringifyValue=function(x){if(null===x)return"null";if(void 0===x)return"undefined";var w=Le.getWebGlObjectTag(x);return w?w.displayText:"number"==typeof x&&te.isWebGlConstant(x)?te.stringifyWebGlConstant(x,this.spiedCommandName):"string"==typeof x?x:x instanceof HTMLImageElement?x.src:x instanceof ArrayBuffer?"[--("+x.byteLength+")--]":x.length?"[..("+x.length+")..]":x},e}(),Ie=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Ne=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Ie(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){var w=[],S=this.options.context.getParameter(te.READ_FRAMEBUFFER_BINDING.value),U=this.options.tagWebGlObject(S);w.push("READ FROM: "+this.stringifyValue(U));var G=this.options.context.getParameter(te.DRAW_FRAMEBUFFER_BINDING.value),z=this.options.tagWebGlObject(G);w.push("WRITE TO: "+this.stringifyValue(z));for(var H=0;H<8;H++)w.push(x[H]);return(x[8]&te.DEPTH_BUFFER_BIT.value)===te.DEPTH_BUFFER_BIT.value&&w.push(te.DEPTH_BUFFER_BIT.name),(x[8]&te.STENCIL_BUFFER_BIT.value)===te.STENCIL_BUFFER_BIT.value&&w.push(te.STENCIL_BUFFER_BIT.name),(x[8]&te.COLOR_BUFFER_BIT.value)===te.COLOR_BUFFER_BIT.value&&w.push(te.COLOR_BUFFER_BIT.name),w.push(te.stringifyWebGlConstant(x[9],"blitFrameBuffer")),w},t.commandName="blitFrameBuffer",t}(Pe),Fe=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Be=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Fe(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){var w=[];return(x[0]&te.DEPTH_BUFFER_BIT.value)===te.DEPTH_BUFFER_BIT.value&&w.push(te.DEPTH_BUFFER_BIT.name),(x[0]&te.STENCIL_BUFFER_BIT.value)===te.STENCIL_BUFFER_BIT.value&&w.push(te.STENCIL_BUFFER_BIT.name),(x[0]&te.COLOR_BUFFER_BIT.value)===te.COLOR_BUFFER_BIT.value&&w.push(te.COLOR_BUFFER_BIT.name),w},t.commandName="clear",t}(Pe),De=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),ke=["lineWidth"],Ue=function(x){function t(w,S){var U=x.call(this,w)||this;return U.internalSpiedCommandName=S,U.isDeprecated=ke.indexOf(U.spiedCommandName)>-1,U}return De(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return this.internalSpiedCommandName},enumerable:!0,configurable:!0}),t.prototype.transformCapture=function(x){this.isDeprecated&&(x.status=50)},t}(Pe),Ge=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Ve=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Ge(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){var w=[];return w.push(x[0]),w},t.commandName="disableVertexAttribArray",t}(Pe),We=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),ze=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return We(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){var w=[];return w.push(te.stringifyWebGlConstant(x[0],"drawArrays")),w.push(x[1]),w.push(x[2]),w},t.commandName="drawArrays",t}(Pe),He=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),$e=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return He(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){var w=[];return w.push(te.stringifyWebGlConstant(x[0],"drawArraysInstanced")),w.push(x[1]),w.push(x[2]),w.push(x[3]),w},t.commandName="drawArraysInstanced",t}(Pe),je=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Xe=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return je(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){var w=[];return w.push(te.stringifyWebGlConstant(x[0],"drawArraysInstancedANGLE")),w.push(x[1]),w.push(x[2]),w.push(x[3]),w},t.commandName="drawArraysInstancedANGLE",t}(Pe),qe=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Ke=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return qe(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){var w=[];return w.push(te.stringifyWebGlConstant(x[0],"drawElements")),w.push(x[1]),w.push(te.stringifyWebGlConstant(x[2],"drawElements")),w.push(x[3]),w},t.commandName="drawElements",t}(Pe),Ye=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Ze=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Ye(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){var w=[];return w.push(te.stringifyWebGlConstant(x[0],"drawElementsInstancedANGLE")),w.push(x[1]),w.push(te.stringifyWebGlConstant(x[2],"drawElementsInstancedANGLE")),w.push(x[3]),w.push(x[4]),w},t.commandName="drawElementsInstancedANGLE",t}(Pe),Je=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Qe=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Je(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){var w=[];return w.push(te.stringifyWebGlConstant(x[0],"drawElementsInstanced")),w.push(x[1]),w.push(te.stringifyWebGlConstant(x[2],"drawElementsInstanced")),w.push(x[3]),w.push(x[4]),w},t.commandName="drawElementsInstanced",t}(Pe),et=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),tt=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return et(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){var w=[];return w.push(te.stringifyWebGlConstant(x[0],"drawRangeElements")),w.push(x[1]),w.push(x[2]),w.push(x[3]),w.push(te.stringifyWebGlConstant(x[4],"drawRangeElements")),w.push(x[5]),w},t.commandName="drawRangeElements",t}(Pe),nt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),rt=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return nt(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyResult=function(x){if(x)return"name: "+x.name+", size: "+x.size+", type: "+x.type},t.commandName="getActiveAttrib",t}(Pe),it=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),ot=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return it(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyResult=function(x){if(x)return"name: "+x.name+", size: "+x.size+", type: "+x.type},t.commandName="getActiveUniform",t}(Pe),at=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),st=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return at(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyResult=function(x){return x?"true":"false"},t.commandName="getExtension",t}(Pe),lt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),ct=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return lt(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyResult=function(x){if(!x)return"null";var w=Le.getWebGlObjectTag(x);return w?w.displayText:x},t.commandName="getParameter",t}(Pe),ut=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),ht=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return ut(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyResult=function(x){if(x)return"min: "+x.rangeMin+", max: "+x.rangeMax+", precision: "+x.precision},t.commandName="getShaderPrecisionFormat",t}(Pe),pt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),ft=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return pt(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyResult=function(x){if(x)return"name: "+x.name+", size: "+x.size+", type: "+x.type},t.commandName="getTransformFeedbackVarying",t}(Pe),mt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),gt=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return mt(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){for(var w=[],S=0;S<4;S++)w.push(x[S].toFixed(0));return w},t.commandName="scissor",t}(Pe),vt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),yt=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return vt(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){var w=[];return w.push(x[0]),w.push(x[1]),w.push(te.stringifyWebGlConstant(x[2],"vertexAttribPointer")),w.push(x[3]),w.push(x[4]),w.push(x[5]),w},t.commandName="vertexAttribPointer",t}(Pe),_t=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),bt=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return _t(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){for(var w=[],S=0;S<4;S++)w.push(x[S].toFixed(0));return w},t.commandName="viewport",t}(Pe),xt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Et=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return xt(t,x),Object.defineProperty(t.prototype,"spiedCommandName",{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(x){var w=[];return w.push(x[0]),w},t.commandName="enableVertexAttribArray",t}(Pe),wt=function(){function e(x){this.spiedCommandName=x.spiedCommandName,this.spiedCommandRunningContext=x.spiedCommandRunningContext,this.spiedCommand=this.spiedCommandRunningContext[this.spiedCommandName],Me.storeOriginFunction(this.spiedCommandRunningContext,this.spiedCommandName),this.callback=x.callback,this.commandOptions={context:x.context,contextVersion:x.contextVersion,extensions:x.extensions,toggleCapture:x.toggleCapture},this.initCustomCommands(),this.initCommand()}return e.prototype.spy=function(){this.spiedCommandRunningContext[this.spiedCommandName]=this.overloadedCommand},e.prototype.unSpy=function(){this.spiedCommandRunningContext[this.spiedCommandName]=this.spiedCommand},e.prototype.createCapture=function(x,w,S){return this.command.createCapture(x,w,S)},e.prototype.initCommand=function(){e.customCommandsConstructors[this.spiedCommandName]?this.command=e.customCommandsConstructors[this.spiedCommandName](this.commandOptions):this.command=new Ue(this.commandOptions,this.spiedCommandName),this.overloadedCommand=this.getSpy()},e.prototype.getSpy=function(){var x=this;return function(){var w=q.now,S=Me.executeOriginFunction(x.spiedCommandRunningContext,x.spiedCommandName,arguments),U=q.now,G={name:x.spiedCommandName,arguments,result:S,startTime:w,endTime:U};return x.callback(x,G),S}},e.prototype.initCustomCommands=function(){var x;e.customCommandsConstructors||(e.customCommandsConstructors=((x={})[Ne.commandName]=function(x){return new Ne(x)},x[Be.commandName]=function(x){return new Be(x)},x[Ve.commandName]=function(x){return new Ve(x)},x[ze.commandName]=function(x){return new ze(x)},x[$e.commandName]=function(x){return new $e(x)},x[Xe.commandName]=function(x){return new Xe(x)},x[Ke.commandName]=function(x){return new Ke(x)},x[Qe.commandName]=function(x){return new Qe(x)},x[Ze.commandName]=function(x){return new Ze(x)},x[tt.commandName]=function(x){return new tt(x)},x[rt.commandName]=function(x){return new rt(x)},x[ot.commandName]=function(x){return new ot(x)},x[st.commandName]=function(x){return new st(x)},x[ct.commandName]=function(x){return new ct(x)},x[ht.commandName]=function(x){return new ht(x)},x[ft.commandName]=function(x){return new ft(x)},x[gt.commandName]=function(x){return new gt(x)},x[yt.commandName]=function(x){return new yt(x)},x[bt.commandName]=function(x){return new bt(x)},x[Et.commandName]=function(x){return new Et(x)},x))},e}(),St=function(){function e(x){this.options=x,this.context=x.context,this.contextVersion=x.contextVersion,this.extensions=x.extensions,this.toggleCapture=x.toggleCapture,this.consumeCommands=this.getConsumeCommands(),this.changeCommandsByState=this.getChangeCommandsByState(),this.commandNameToStates=this.getCommandNameToStates()}return Object.defineProperty(e.prototype,"requireStartAndStopStates",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.startCapture=function(x,w,S){return this.quickCapture=w,this.fullCapture=S,this.capturedCommandsByState={},x&&this.requireStartAndStopStates&&(this.currentState={},this.readFromContextNoSideEffects()),this.copyCurrentStateToPrevious(),this.currentState={},this.previousState},e.prototype.stopCapture=function(){return this.requireStartAndStopStates&&this.readFromContextNoSideEffects(),this.analyse(void 0),this.currentState},e.prototype.registerCallbacks=function(x){for(var w in this.changeCommandsByState)if(this.changeCommandsByState.hasOwnProperty(w))for(var S=0,U=this.changeCommandsByState[w];S<U.length;S++){var G=U[S];x[G]=x[G]||[],x[G].push(this.onChangeCommand.bind(this))}for(var z=0,H=this.consumeCommands;z<H.length;z++){var j=H[z];x[j]=x[j]||[],x[j].push(this.onConsumeCommand.bind(this))}},e.prototype.getStateData=function(){return this.currentState},e.prototype.getConsumeCommands=function(){return[]},e.prototype.getChangeCommandsByState=function(){return{}},e.prototype.copyCurrentStateToPrevious=function(){this.currentState&&(this.previousState=this.currentState)},e.prototype.onChangeCommand=function(x){for(var w=0,S=this.commandNameToStates[x.name];w<S.length;w++){var U=S[w];if(!this.isValidChangeCommand(x,U))return;this.capturedCommandsByState[U]=this.capturedCommandsByState[U]||[],this.capturedCommandsByState[U].push(x)}},e.prototype.isValidChangeCommand=function(x,w){return!0},e.prototype.onConsumeCommand=function(x){this.isValidConsumeCommand(x)&&(this.readFromContextNoSideEffects(),this.analyse(x),this.storeCommandIds(),x[this.stateName]=this.currentState,this.startCapture(!1,this.quickCapture,this.fullCapture))},e.prototype.isValidConsumeCommand=function(x){return this.lastCommandName=null==x?void 0:x.name,!0},e.prototype.analyse=function(x){for(var w in this.capturedCommandsByState)if(this.capturedCommandsByState.hasOwnProperty(w)){var S=this.capturedCommandsByState[w],U=S.length-1;if(U>=0)if(x){for(var G=0;G<U;G++){var z=S[G];z.consumeCommandId=x.id,this.changeCommandCaptureStatus(z,30)}var H=this.isStateEnableNoSideEffects(w,x.commandArguments);(j=S[U]).consumeCommandId=x.id,this.areStatesEquals(this.currentState[w],this.previousState[w])?this.changeCommandCaptureStatus(j,30):H?this.changeCommandCaptureStatus(j,40):this.changeCommandCaptureStatus(j,20)}else for(G=0;G<S.length;G++){var j=S[G];this.changeCommandCaptureStatus(j,10)}}},e.prototype.storeCommandIds=function(){for(var x=["unusedCommandIds","disabledCommandIds","redundantCommandIds","validCommandIds"],w=0,S=x;w<S.length;w++){var U=S[w];this.currentState[U]=[]}for(var G in this.capturedCommandsByState)if(this.capturedCommandsByState.hasOwnProperty(G))for(var z=0,H=this.capturedCommandsByState[G];z<H.length;z++){var j=H[z];switch(j.status){case 10:this.currentState.unusedCommandIds.push(j.id);break;case 20:this.currentState.disabledCommandIds.push(j.id);break;case 30:this.currentState.redundantCommandIds.push(j.id);break;case 40:this.currentState.validCommandIds.push(j.id)}}for(var X=0,q=x;X<q.length;X++)U=q[X],this.currentState[U].length||delete this.currentState[U]},e.prototype.changeCommandCaptureStatus=function(x,w){return x.status<w&&(x.status=w,!0)},e.prototype.areStatesEquals=function(x,w){if(typeof x!=typeof w)return!1;if(x&&!w)return!1;if(w&&!x)return!1;if(null==x)return!0;if(x.length&&w.length&&"string"!=typeof x){if(x.length!==w.length)return!1;for(var S=0;S<x.length;S++)if(x[S]!==w[S])return!1;return!0}return x===w},e.prototype.isStateEnable=function(x,w){return!0},e.prototype.getSpectorData=function(x){if(x)return{__SPECTOR_Object_TAG:Le.getWebGlObjectTag(x)||this.options.tagWebGlObject(x),__SPECTOR_Object_CustomData:x.__SPECTOR_Object_CustomData,__SPECTOR_Metadata:x.__SPECTOR_Metadata}},e.prototype.readFromContextNoSideEffects=function(){this.toggleCapture(!1),this.readFromContext(),this.toggleCapture(!0)},e.prototype.isStateEnableNoSideEffects=function(x,w){this.toggleCapture(!1);var S=this.isStateEnable(x,w);return this.toggleCapture(!0),S},e.prototype.getCommandNameToStates=function(){var x={};for(var w in this.changeCommandsByState)if(this.changeCommandsByState.hasOwnProperty(w))for(var S=0,U=this.changeCommandsByState[w];S<U.length;S++){var G=U[S];x[G]=x[G]||[],x[G].push(w)}return x},e}(),Tt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Ct=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Tt(t,x),t.prototype.getWebgl1Parameters=function(){return[]},t.prototype.getWebgl2Parameters=function(){return[]},t.prototype.getChangeCommandsByState=function(){this.parameters=[],this.parameters.push(this.getWebgl1Parameters()),this.contextVersion>1&&this.parameters.push(this.getWebgl2Parameters());for(var x={},w=1;w<=this.contextVersion&&!(w>this.parameters.length);w++)if(this.parameters[w-1])for(var S=0,U=this.parameters[w-1];S<U.length;S++){var G=U[S];if(G.changeCommands)for(var z=0,H=G.changeCommands;z<H.length;z++){var j=H[z];x[G.constant.name]=x[G.constant.name]||[],x[G.constant.name].push(j)}}return x},t.prototype.readFromContext=function(){for(var x=1;x<=this.contextVersion&&!(x>this.parameters.length);x++)for(var w=0,S=this.parameters[x-1];w<S.length;w++){var U=S[w],G=this.readParameterFromContext(U),z=Le.getWebGlObjectTag(G);if(z)this.currentState[U.constant.name]=z;else{var H=this.stringifyParameterValue(G,U);this.currentState[U.constant.name]=H}}},t.prototype.readParameterFromContext=function(x){return x.constant.extensionName&&!this.extensions[x.constant.extensionName]?"Extension "+x.constant.extensionName+" is unavailble.":this.context.getParameter(x.constant.value)},t.prototype.stringifyParameterValue=function(x,w){if(null===x)return"null";if(void 0===x)return"undefined";if(30===w.returnType)return x=x.toString(2),"00000000000000000000000000000000".substr(x.length)+x;if("number"==typeof x&&te.isWebGlConstant(x)){if(20===w.returnType){var S=w.changeCommands&&w.changeCommands[0]||"";return te.stringifyWebGlConstant(x,S)}return x}if(x.length&&"string"!=typeof x){for(var U=[],G=0;G<x.length;G++)U.push(x[G]);return U}return x},t}(St),At=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Mt=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return At(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.PACK_ALIGNMENT,changeCommands:["pixelStorei"]},{constant:te.UNPACK_ALIGNMENT,changeCommands:["pixelStorei"]},{constant:te.UNPACK_COLORSPACE_CONVERSION_WEBGL,returnType:20,changeCommands:["pixelStorei"]},{constant:te.UNPACK_FLIP_Y_WEBGL,changeCommands:["pixelStorei"]},{constant:te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,changeCommands:["pixelStorei"]}]},t.prototype.getWebgl2Parameters=function(){return[{constant:te.PACK_ROW_LENGTH,changeCommands:["pixelStorei"]},{constant:te.PACK_SKIP_PIXELS,changeCommands:["pixelStorei"]},{constant:te.PACK_SKIP_ROWS,changeCommands:["pixelStorei"]},{constant:te.UNPACK_IMAGE_HEIGHT,changeCommands:["pixelStorei"]},{constant:te.UNPACK_SKIP_PIXELS,changeCommands:["pixelStorei"]},{constant:te.UNPACK_SKIP_ROWS,changeCommands:["pixelStorei"]},{constant:te.UNPACK_SKIP_IMAGES,changeCommands:["pixelStorei"]}]},t.prototype.getConsumeCommands=function(){return["readPixels","texImage2D","texSubImage2D"]},t.prototype.isValidChangeCommand=function(x,w){return ne[w].value===x.commandArguments[0]},t.stateName="AlignmentState",t}(Ct),Rt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Lt=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Rt(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.BLEND,changeCommands:["enable","disable"]},{constant:te.BLEND_COLOR,changeCommands:["blendColor"]},{constant:te.BLEND_DST_ALPHA,returnType:20,changeCommands:["blendFunc","blendFuncSeparate"]},{constant:te.BLEND_DST_RGB,returnType:20,changeCommands:["blendFunc","blendFuncSeparate"]},{constant:te.BLEND_EQUATION_ALPHA,returnType:20,changeCommands:["blendEquation","blendEquationSeparate"]},{constant:te.BLEND_EQUATION_RGB,returnType:20,changeCommands:["blendEquation","blendEquationSeparate"]},{constant:te.BLEND_SRC_ALPHA,returnType:20,changeCommands:["blendFunc","blendFuncSeparate"]},{constant:te.BLEND_SRC_RGB,returnType:20,changeCommands:["blendFunc","blendFuncSeparate"]}]},t.prototype.isValidChangeCommand=function(x,w){return"enable"!==x.name&&"disable"!==x.name||x.commandArguments[0]===te.BLEND.value},t.prototype.getConsumeCommands=function(){return J},t.prototype.isStateEnable=function(x,w){return this.context.isEnabled(te.BLEND.value)},t.stateName="BlendState",t}(Ct),Pt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),It=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Pt(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.COLOR_CLEAR_VALUE,changeCommands:["clearColor"]},{constant:te.DEPTH_CLEAR_VALUE,changeCommands:["clearDepth"]},{constant:te.STENCIL_CLEAR_VALUE,changeCommands:["clearStencil"]}]},t.prototype.getConsumeCommands=function(){return["clear"]},t.prototype.isStateEnable=function(x,w){switch(x){case te.COLOR_CLEAR_VALUE.name:return te.COLOR_BUFFER_BIT.value===(w[0]&te.COLOR_BUFFER_BIT.value);case te.DEPTH_CLEAR_VALUE.name:return te.DEPTH_BUFFER_BIT.value===(w[0]&te.DEPTH_BUFFER_BIT.value);case te.STENCIL_CLEAR_VALUE.name:return te.STENCIL_BUFFER_BIT.value===(w[0]&te.STENCIL_BUFFER_BIT.value)}return!1},t.stateName="ClearState",t}(Ct),Nt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Ft=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Nt(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.COLOR_WRITEMASK,changeCommands:["colorMask"]}]},t.prototype.getConsumeCommands=function(){return J},t.stateName="ColorState",t}(Ct),Bt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Dt=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Bt(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.SAMPLE_COVERAGE_VALUE,changeCommands:["sampleCoverage"]},{constant:te.SAMPLE_COVERAGE_INVERT,changeCommands:["sampleCoverage"]}]},t.prototype.getWebgl2Parameters=function(){return[{constant:te.SAMPLE_COVERAGE,changeCommands:["enable","disable"]},{constant:te.SAMPLE_ALPHA_TO_COVERAGE,changeCommands:["enable","disable"]}]},t.prototype.isValidChangeCommand=function(x,w){return"enable"!==x.name&&"disable"!==x.name||(x.commandArguments[0]===te.SAMPLE_COVERAGE.value?w===te.SAMPLE_COVERAGE.name:x.commandArguments[0]===te.SAMPLE_ALPHA_TO_COVERAGE.value&&w===te.SAMPLE_ALPHA_TO_COVERAGE.name)},t.prototype.getConsumeCommands=function(){return J},t.prototype.isStateEnable=function(x,w){return 2===this.contextVersion&&this.context.isEnabled(te.SAMPLE_COVERAGE.value)},t.stateName="CoverageState",t}(Ct),kt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Ut=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return kt(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.CULL_FACE,changeCommands:["enable","disable"]},{constant:te.CULL_FACE_MODE,returnType:20,changeCommands:["cullFace"]}]},t.prototype.getConsumeCommands=function(){return J},t.prototype.isValidChangeCommand=function(x,w){return"enable"!==x.name&&"disable"!==x.name||x.commandArguments[0]===te.CULL_FACE.value},t.prototype.isStateEnable=function(x,w){return this.context.isEnabled(te.CULL_FACE.value)},t.stateName="CullState",t}(Ct),Gt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Vt=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Gt(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.DEPTH_TEST,changeCommands:["enable","disable"]},{constant:te.DEPTH_FUNC,returnType:20,changeCommands:["depthFunc"]},{constant:te.DEPTH_RANGE,changeCommands:["depthRange"]},{constant:te.DEPTH_WRITEMASK,changeCommands:["depthMask"]}]},t.prototype.getConsumeCommands=function(){return J},t.prototype.isValidChangeCommand=function(x,w){return"enable"!==x.name&&"disable"!==x.name||x.commandArguments[0]===te.DEPTH_TEST.value},t.prototype.isStateEnable=function(x,w){return this.context.isEnabled(te.DEPTH_TEST.value)},t.stateName="DepthState",t}(Ct),Wt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),zt=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Wt(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.DITHER,changeCommands:["enable","disable"]},{constant:te.VIEWPORT,changeCommands:["viewPort"]},{constant:te.FRONT_FACE,returnType:20,changeCommands:["frontFace"]},{constant:te.FRAGMENT_SHADER_DERIVATIVE_HINT_OES,changeCommands:["hint"]}]},t.prototype.getWebgl2Parameters=function(){return[{constant:te.RASTERIZER_DISCARD,changeCommands:["enable","disable"]},{constant:te.FRAGMENT_SHADER_DERIVATIVE_HINT,changeCommands:["hint"]}]},t.prototype.isValidChangeCommand=function(x,w){return"enable"===x.name||"disable"===x.name?x.commandArguments[0]===te.DITHER.value?w===te.DITHER.name:x.commandArguments[0]===te.RASTERIZER_DISCARD.value&&w===te.RASTERIZER_DISCARD.name:"hint"!==x.name||(x.commandArguments[0]===te.FRAGMENT_SHADER_DERIVATIVE_HINT_OES.value?w===te.FRAGMENT_SHADER_DERIVATIVE_HINT_OES.name:x.commandArguments[0]===te.FRAGMENT_SHADER_DERIVATIVE_HINT.value&&w===te.FRAGMENT_SHADER_DERIVATIVE_HINT.name)},t.prototype.getConsumeCommands=function(){return J},t.prototype.isStateEnable=function(x,w){switch(x){case te.DITHER.name:return this.context.isEnabled(te.DITHER.value);case te.RASTERIZER_DISCARD.name:return this.context.isEnabled(te.RASTERIZER_DISCARD.value)}return!0},t.stateName="DrawState",t}(Ct),Ht=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),$t=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Ht(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.GENERATE_MIPMAP_HINT,changeCommands:["hint"]}]},t.prototype.getConsumeCommands=function(){return["generateMipmap"]},t.stateName="MipmapHintState",t}(Ct),jt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Xt=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return jt(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.POLYGON_OFFSET_FILL,changeCommands:["enable","disable"]},{constant:te.POLYGON_OFFSET_FACTOR,changeCommands:["polygonOffset"]},{constant:te.POLYGON_OFFSET_UNITS,changeCommands:["polygonOffset"]}]},t.prototype.isValidChangeCommand=function(x,w){return"enable"!==x.name&&"disable"!==x.name||x.commandArguments[0]===te.POLYGON_OFFSET_FILL.value},t.prototype.getConsumeCommands=function(){return J},t.prototype.isStateEnable=function(x,w){return this.context.isEnabled(te.POLYGON_OFFSET_FILL.value)},t.stateName="PolygonOffsetState",t}(Ct),qt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Kt=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return qt(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.SCISSOR_TEST,changeCommands:["enable","disable"]},{constant:te.SCISSOR_BOX,changeCommands:["scissor"]}]},t.prototype.isValidChangeCommand=function(x,w){return"enable"!==x.name&&"disable"!==x.name||x.commandArguments[0]===te.SCISSOR_TEST.value},t.prototype.getConsumeCommands=function(){return J},t.prototype.isStateEnable=function(x,w){return this.context.isEnabled(te.SCISSOR_TEST.value)},t.stateName="ScissorState",t}(Ct),Yt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Zt=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Yt(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.STENCIL_TEST,changeCommands:["enable","disable"]},{constant:te.STENCIL_BACK_FAIL,returnType:20,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:te.STENCIL_BACK_FUNC,returnType:20,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:te.STENCIL_BACK_PASS_DEPTH_FAIL,returnType:20,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:te.STENCIL_BACK_PASS_DEPTH_PASS,returnType:20,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:te.STENCIL_BACK_REF,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:te.STENCIL_BACK_VALUE_MASK,returnType:30,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:te.STENCIL_BACK_WRITEMASK,returnType:30,changeCommands:["stencilMask","stencilMaskSeparate"]},{constant:te.STENCIL_FAIL,returnType:20,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:te.STENCIL_FUNC,returnType:20,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:te.STENCIL_PASS_DEPTH_FAIL,returnType:20,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:te.STENCIL_PASS_DEPTH_PASS,returnType:20,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:te.STENCIL_REF,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:te.STENCIL_VALUE_MASK,returnType:30,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:te.STENCIL_WRITEMASK,returnType:30,changeCommands:["stencilMask","stencilMaskSeparate"]}]},t.prototype.isValidChangeCommand=function(x,w){return"enable"===x.name||"disable"===x.name?x.commandArguments[0]===te.STENCIL_TEST.value:"stencilOp"===x.name||"stencilOpSeparate"===x.name?t.stencilOpStates.indexOf(x.commandArguments[0])>0:"stencilFunc"===x.name||"stencilFuncSeparate"===x.name?t.stencilFuncStates.indexOf(x.commandArguments[0])>0:"stencilMask"!==x.name&&"stencilMaskSeparate"!==x.name||t.stencilMaskStates.indexOf(x.commandArguments[0])>0},t.prototype.getConsumeCommands=function(){return J},t.prototype.isStateEnable=function(x,w){return this.context.isEnabled(te.STENCIL_TEST.value)},t.stateName="StencilState",t.stencilOpStates=[te.STENCIL_BACK_FAIL.value,te.STENCIL_BACK_PASS_DEPTH_FAIL.value,te.STENCIL_BACK_PASS_DEPTH_PASS.value,te.STENCIL_FAIL.value,te.STENCIL_PASS_DEPTH_FAIL.value,te.STENCIL_PASS_DEPTH_PASS.value],t.stencilFuncStates=[te.STENCIL_BACK_FUNC.value,te.STENCIL_BACK_REF.value,te.STENCIL_BACK_VALUE_MASK.value,te.STENCIL_FUNC.value,te.STENCIL_REF.value,te.STENCIL_VALUE_MASK.value],t.stencilMaskStates=[te.STENCIL_BACK_WRITEMASK.value,te.STENCIL_WRITEMASK.value],t}(Ct),Jt=function(){function e(){}return e.isSupportedCombination=function(x,w,S){return x=x||te.UNSIGNED_BYTE.value,((w=w||te.RGBA.value)===te.RGB.value||w===te.RGBA.value)&&(S===te.RGB.value||S===te.RGBA.value||S===te.RGBA8.value||S===te.RGBA16F.value||S===te.RGBA32F.value||S===te.RGB16F.value||S===te.RGB32F.value||S===te.R11F_G11F_B10F.value||S===te.SRGB8.value||S===te.SRGB8_ALPHA8.value)&&this.isSupportedComponentType(x)},e.readPixels=function(x,w,S,U,G,z){x.getError();var H,j=U*G*4;if(z===te.UNSIGNED_BYTE.value?H=new Uint8Array(j):(z=te.FLOAT.value,H=new Float32Array(j)),x.readPixels(w,S,U,G,x.RGBA,z,H),!x.getError()){if(z===te.UNSIGNED_BYTE.value)return H;for(var X=new Uint8Array(U*G*4),q=0;q<G;q++)for(var K=0;K<U;K++)X[q*U*4+4*K+0]=255*Math.min(Math.max(H[q*U*4+4*K+0],0),1),X[q*U*4+4*K+1]=255*Math.min(Math.max(H[q*U*4+4*K+1],0),1),X[q*U*4+4*K+2]=255*Math.min(Math.max(H[q*U*4+4*K+2],0),1),X[q*U*4+4*K+3]=255*Math.min(Math.max(H[q*U*4+4*K+3],0),1);return X}},e.isSupportedComponentType=function(x){return x===te.UNSIGNED_BYTE.value||x===te.UNSIGNED_SHORT_4_4_4_4.value||x===te.UNSIGNED_SHORT_5_5_5_1.value||x===te.UNSIGNED_SHORT_5_6_5.value||x===te.HALF_FLOAT.value||x===te.HALF_FLOAT_OES.value||x===te.FLOAT.value},e}(),Qt=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),dt=function(){for(var x=0,w=0,S=arguments.length;w<S;w++)x+=arguments[w].length;var U=Array(x),G=0;for(w=0;w<S;w++)for(var z=arguments[w],H=0,j=z.length;H<j;H++,G++)U[G]=z[H];return U},en=function(x){function t(w){var S=x.call(this,w)||this;return S.captureFrameBuffer=w.context.createFramebuffer(),S.workingCanvas=document.createElement("canvas"),S.workingContext2D=S.workingCanvas.getContext("2d"),S.captureCanvas=document.createElement("canvas"),S.captureContext2D=S.captureCanvas.getContext("2d"),S.captureContext2D.imageSmoothingEnabled=!0,S.captureContext2D.mozImageSmoothingEnabled=!0,S.captureContext2D.oImageSmoothingEnabled=!0,S.captureContext2D.webkitImageSmoothingEnabled=!0,S.captureContext2D.msImageSmoothingEnabled=!0,S}return Qt(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getConsumeCommands=function(){return dt(["clear","clearBufferfv","clearBufferiv","clearBufferuiv","clearBufferfi"],J)},t.prototype.readFromContext=function(){var x=this.context;this.currentState.Attachments=[];var w=this.context.getParameter(te.FRAMEBUFFER_BINDING.value);if(!w)return this.currentState.FrameBuffer=null,void this.getCapture(x,"Canvas COLOR_ATTACHMENT",0,0,x.drawingBufferWidth,x.drawingBufferHeight,0,0,te.UNSIGNED_BYTE.value);var S=x.getParameter(x.VIEWPORT),U=S[0],G=S[1],z=S[2],H=S[3];this.currentState.FrameBuffer=this.getSpectorData(w);var j=this.context.checkFramebufferStatus(te.FRAMEBUFFER.value);if(this.currentState.FrameBufferStatus=re[j].name,j===te.FRAMEBUFFER_COMPLETE.value)if(this.extensions[te.MAX_DRAW_BUFFERS_WEBGL.extensionName])for(var X=this.context.getParameter(te.MAX_DRAW_BUFFERS_WEBGL.value),q=0;q<X;q++)this.readFrameBufferAttachmentFromContext(this.context,w,ne["COLOR_ATTACHMENT"+q+"_WEBGL"],U,G,z,H);else if(this.contextVersion>1)for(X=this.context.getParameter(te.MAX_DRAW_BUFFERS.value),q=0;q<X;q++)this.readFrameBufferAttachmentFromContext(this.context,w,ne["COLOR_ATTACHMENT"+q],U,G,z,H);else this.readFrameBufferAttachmentFromContext(this.context,w,ne.COLOR_ATTACHMENT0,U,G,z,H)},t.prototype.readFrameBufferAttachmentFromContext=function(x,w,S,U,G,z,H){var j=te.FRAMEBUFFER.value,X=this.context.getFramebufferAttachmentParameter(j,S.value,te.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE.value);if(X!==te.NONE.value){var q=this.context.getFramebufferAttachmentParameter(j,S.value,te.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME.value);if(q){var K=this.contextVersion>1?this.context.getFramebufferAttachmentParameter(j,S.value,te.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE.value):te.UNSIGNED_BYTE.value;X===te.RENDERBUFFER.value?this.readFrameBufferAttachmentFromRenderBuffer(x,w,S,U,G,z,H,j,K,q):X===te.TEXTURE.value&&this.readFrameBufferAttachmentFromTexture(x,w,S,U,G,z,H,j,K,q)}}},t.prototype.readFrameBufferAttachmentFromRenderBuffer=function(x,w,S,U,G,z,H,j,X,q){var K=0,Y=0;if(q.__SPECTOR_Object_CustomData){var Z=q.__SPECTOR_Object_CustomData;if(z=Z.width,H=Z.height,K=Z.samples,Y=Z.internalFormat,!K&&!Jt.isSupportedCombination(X,te.RGBA.value,Y))return}else z+=U,H+=G;if(U=G=0,K){var J=x,Q=x.createRenderbuffer(),ee=x.getParameter(x.RENDERBUFFER_BINDING);x.bindRenderbuffer(x.RENDERBUFFER,Q),x.renderbufferStorage(x.RENDERBUFFER,Y,z,H),x.bindRenderbuffer(x.RENDERBUFFER,ee),x.bindFramebuffer(te.FRAMEBUFFER.value,this.captureFrameBuffer),x.framebufferRenderbuffer(te.FRAMEBUFFER.value,te.COLOR_ATTACHMENT0.value,te.RENDERBUFFER.value,Q);var ne=J.getParameter(J.READ_FRAMEBUFFER_BINDING),re=J.getParameter(J.DRAW_FRAMEBUFFER_BINDING);J.bindFramebuffer(J.READ_FRAMEBUFFER,w),J.bindFramebuffer(J.DRAW_FRAMEBUFFER,this.captureFrameBuffer),J.blitFramebuffer(0,0,z,H,0,0,z,H,x.COLOR_BUFFER_BIT,x.NEAREST),J.bindFramebuffer(te.FRAMEBUFFER.value,this.captureFrameBuffer),J.bindFramebuffer(J.READ_FRAMEBUFFER,ne),J.bindFramebuffer(J.DRAW_FRAMEBUFFER,re),this.context.checkFramebufferStatus(te.FRAMEBUFFER.value)===te.FRAMEBUFFER_COMPLETE.value&&this.getCapture(x,S.name,U,G,z,H,0,0,te.UNSIGNED_BYTE.value),x.bindFramebuffer(te.FRAMEBUFFER.value,w),x.deleteRenderbuffer(Q)}else x.bindFramebuffer(te.FRAMEBUFFER.value,this.captureFrameBuffer),x.framebufferRenderbuffer(te.FRAMEBUFFER.value,te.COLOR_ATTACHMENT0.value,te.RENDERBUFFER.value,q),this.context.checkFramebufferStatus(te.FRAMEBUFFER.value)===te.FRAMEBUFFER_COMPLETE.value&&this.getCapture(x,S.name,U,G,z,H,0,0,X),x.bindFramebuffer(te.FRAMEBUFFER.value,w)},t.prototype.readFrameBufferAttachmentFromTexture=function(x,w,S,U,G,z,H,j,X,q){var K=0;this.contextVersion>1&&(K=this.context.getFramebufferAttachmentParameter(j,S.value,te.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER.value));var Y=this.context.getFramebufferAttachmentParameter(j,S.value,te.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL.value),Z=this.context.getFramebufferAttachmentParameter(j,S.value,te.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE.value),J=(Z>0?re[Z].name:te.TEXTURE_2D.name,!1),Q=X;if(q.__SPECTOR_Object_CustomData){var ee=q.__SPECTOR_Object_CustomData;if(z=ee.width,H=ee.height,Q=ee.type,J=ee.target===te.TEXTURE_2D_ARRAY.name,!Jt.isSupportedCombination(ee.type,ee.format,ee.internalFormat))return}else z+=U,H+=G;U=G=0,x.bindFramebuffer(te.FRAMEBUFFER.value,this.captureFrameBuffer),K>0||J?x.framebufferTextureLayer(te.FRAMEBUFFER.value,te.COLOR_ATTACHMENT0.value,q,Y,K):x.framebufferTexture2D(te.FRAMEBUFFER.value,te.COLOR_ATTACHMENT0.value,Z||te.TEXTURE_2D.value,q,Y),this.context.checkFramebufferStatus(te.FRAMEBUFFER.value)===te.FRAMEBUFFER_COMPLETE.value&&this.getCapture(x,S.name,U,G,z,H,Z,K,Q),x.bindFramebuffer(te.FRAMEBUFFER.value,w)},t.prototype.getCapture=function(x,w,S,U,G,z,H,X,q){var K={attachmentName:w,src:null,textureCubeMapFace:H?re[H].name:null,textureLayer:X};if(!this.quickCapture)try{var Y=Jt.readPixels(x,S,U,G,z,q);if(Y){this.workingCanvas.width=G,this.workingCanvas.height=z;var Z=this.workingContext2D.createImageData(Math.ceil(G),Math.ceil(z));if(Z.data.set(Y),this.workingContext2D.putImageData(Z,0,0),this.fullCapture)this.captureCanvas.width=this.workingCanvas.width,this.captureCanvas.height=this.workingCanvas.height;else{var J=G/z;J<1?(this.captureCanvas.width=t.captureBaseSize*J,this.captureCanvas.height=t.captureBaseSize):J>1?(this.captureCanvas.width=t.captureBaseSize,this.captureCanvas.height=t.captureBaseSize/J):(this.captureCanvas.width=t.captureBaseSize,this.captureCanvas.height=t.captureBaseSize)}this.captureCanvas.width=Math.max(this.captureCanvas.width,1),this.captureCanvas.height=Math.max(this.captureCanvas.height,1),this.captureContext2D.globalCompositeOperation="copy",this.captureContext2D.scale(1,-1),this.captureContext2D.translate(0,-this.captureCanvas.height),this.captureContext2D.drawImage(this.workingCanvas,0,0,G,z,0,0,this.captureCanvas.width,this.captureCanvas.height),this.captureContext2D.setTransform(1,0,0,1,0,0),this.captureContext2D.globalCompositeOperation="source-over",K.src=this.captureCanvas.toDataURL()}}catch(x){j.warn("Spector can not capture the visual state: "+x)}this.currentState.Attachments.push(K)},t.prototype.analyse=function(x){},t.stateName="VisualState",t.captureBaseSize=256,t}(St),tn=function(){function e(x){this.context=x.context,this.captureFrameBuffer=x.context.createFramebuffer(),this.workingCanvas=document.createElement("canvas"),this.workingContext2D=this.workingCanvas.getContext("2d"),this.captureCanvas=document.createElement("canvas"),this.captureContext2D=this.captureCanvas.getContext("2d"),this.captureContext2D.imageSmoothingEnabled=!0,this.captureContext2D.mozImageSmoothingEnabled=!0,this.captureContext2D.oImageSmoothingEnabled=!0,this.captureContext2D.webkitImageSmoothingEnabled=!0,this.captureContext2D.msImageSmoothingEnabled=!0}return e.prototype.appendTextureState=function(x,w,S,U){if(void 0===S&&(S=null),w){var G=w.__SPECTOR_Object_CustomData;G&&(this.fullCapture=U,G.type&&(x.textureType=this.getWebGlConstant(G.type)),G.format&&(x.format=this.getWebGlConstant(G.format)),G.internalFormat&&(x.internalFormat=this.getWebGlConstant(G.internalFormat)),x.width=G.width,x.height=G.height,G.depth&&(x.depth=G.depth),S&&(x.visual=this.getTextureVisualState(S,w,G)))}},e.prototype.getTextureVisualState=function(x,w,S){try{var U=this.context,G={};if(!Jt.isSupportedCombination(S.type,S.format,S.internalFormat))return G;var z=this.context.getParameter(te.FRAMEBUFFER_BINDING.value);U.bindFramebuffer(te.FRAMEBUFFER.value,this.captureFrameBuffer);try{var H=S.width,j=S.height;if(x===te.TEXTURE_3D&&S.depth)for(var X=U,q=0;q<S.depth;q++)q>2&&q<S.depth-3||(X.framebufferTextureLayer(te.FRAMEBUFFER.value,te.COLOR_ATTACHMENT0.value,w,0,q),G["3D Layer "+q]=this.getCapture(U,0,0,H,j,S.type));else if(x===te.TEXTURE_2D_ARRAY&&S.depth)for(X=U,q=0;q<S.depth;q++)q>2&&q<S.depth-3||(X.framebufferTextureLayer(te.FRAMEBUFFER.value,te.COLOR_ATTACHMENT0.value,w,0,q),G["Layer "+q]=this.getCapture(U,0,0,H,j,S.type));else if(x===te.TEXTURE_CUBE_MAP)for(var K=0,Y=e.cubeMapFaces;K<Y.length;K++){var Z=Y[K];U.framebufferTexture2D(te.FRAMEBUFFER.value,te.COLOR_ATTACHMENT0.value,Z.value,w,0),G[Z.name]=this.getCapture(U,0,0,H,j,S.type)}else U.framebufferTexture2D(te.FRAMEBUFFER.value,te.COLOR_ATTACHMENT0.value,te.TEXTURE_2D.value,w,0),G[te.TEXTURE_2D.name]=this.getCapture(U,0,0,H,j,S.type)}catch(x){}return U.bindFramebuffer(te.FRAMEBUFFER.value,z),G}catch(x){}},e.prototype.getCapture=function(x,w,S,U,G,z){try{if(this.context.checkFramebufferStatus(te.FRAMEBUFFER.value)!==te.FRAMEBUFFER_COMPLETE.value)return;z=z||te.UNSIGNED_BYTE.value;var H=Jt.readPixels(x,w,S,U,G,z);if(!H)return;this.workingCanvas.width=U,this.workingCanvas.height=G;var j=this.workingContext2D.createImageData(U,G);if(j.data.set(H),this.workingContext2D.putImageData(j,0,0),this.fullCapture)this.captureCanvas.width=this.workingCanvas.width,this.captureCanvas.height=this.workingCanvas.height;else{var X=U/G;X<1?(this.captureCanvas.width=en.captureBaseSize*X,this.captureCanvas.height=en.captureBaseSize):X>1?(this.captureCanvas.width=en.captureBaseSize,this.captureCanvas.height=en.captureBaseSize/X):(this.captureCanvas.width=en.captureBaseSize,this.captureCanvas.height=en.captureBaseSize)}return this.captureCanvas.width=Math.max(this.captureCanvas.width,1),this.captureCanvas.height=Math.max(this.captureCanvas.height,1),this.captureContext2D.globalCompositeOperation="copy",this.captureContext2D.scale(1,-1),this.captureContext2D.translate(0,-this.captureCanvas.height),this.captureContext2D.drawImage(this.workingCanvas,0,0,U,G,0,0,this.captureCanvas.width,this.captureCanvas.height),this.captureContext2D.setTransform(1,0,0,1,0,0),this.captureContext2D.globalCompositeOperation="source-over",this.captureCanvas.toDataURL()}catch(x){}},e.prototype.getWebGlConstant=function(x){var w=re[x];return w?w.name:x+""},e.captureBaseSize=64,e.cubeMapFaces=[te.TEXTURE_CUBE_MAP_POSITIVE_X,te.TEXTURE_CUBE_MAP_POSITIVE_Y,te.TEXTURE_CUBE_MAP_POSITIVE_Z,te.TEXTURE_CUBE_MAP_NEGATIVE_X,te.TEXTURE_CUBE_MAP_NEGATIVE_Y,te.TEXTURE_CUBE_MAP_NEGATIVE_Z],e}(),nn=function(){function e(x){this.context=x.context}return e.prototype.getUboValue=function(x,w,S,U){var G=e.uboTypes[U];if(G){var z=new G.arrayBufferView(S*G.lengthMultiplier),H=this.context,j=H.getIndexedParameter(te.UNIFORM_BUFFER_BINDING.value,x);if(j){var X=H.getIndexedParameter(te.UNIFORM_BUFFER_START.value,x),q=H.getParameter(te.UNIFORM_BUFFER_BINDING.value);try{H.bindBuffer(te.UNIFORM_BUFFER.value,j),H.getBufferSubData(te.UNIFORM_BUFFER.value,X+w,z)}catch(x){return}q&&H.bindBuffer(te.UNIFORM_BUFFER.value,q)}return Array.prototype.slice.call(z)}},e.uboTypes=((ie={})[te.BOOL.value]={arrayBufferView:Uint8Array,lengthMultiplier:1},ie[te.BOOL_VEC2.value]={arrayBufferView:Uint8Array,lengthMultiplier:2},ie[te.BOOL_VEC3.value]={arrayBufferView:Uint8Array,lengthMultiplier:3},ie[te.BOOL_VEC4.value]={arrayBufferView:Uint8Array,lengthMultiplier:4},ie[te.INT.value]={arrayBufferView:Int32Array,lengthMultiplier:1},ie[te.INT_VEC2.value]={arrayBufferView:Int32Array,lengthMultiplier:2},ie[te.INT_VEC3.value]={arrayBufferView:Int32Array,lengthMultiplier:3},ie[te.INT_VEC4.value]={arrayBufferView:Int32Array,lengthMultiplier:4},ie[te.UNSIGNED_INT.value]={arrayBufferView:Uint32Array,lengthMultiplier:1},ie[te.UNSIGNED_INT_VEC2.value]={arrayBufferView:Uint32Array,lengthMultiplier:2},ie[te.UNSIGNED_INT_VEC3.value]={arrayBufferView:Uint32Array,lengthMultiplier:3},ie[te.UNSIGNED_INT_VEC4.value]={arrayBufferView:Uint32Array,lengthMultiplier:4},ie[te.FLOAT.value]={arrayBufferView:Float32Array,lengthMultiplier:1},ie[te.FLOAT_VEC2.value]={arrayBufferView:Float32Array,lengthMultiplier:2},ie[te.FLOAT_VEC3.value]={arrayBufferView:Float32Array,lengthMultiplier:3},ie[te.FLOAT_VEC4.value]={arrayBufferView:Float32Array,lengthMultiplier:4},ie[te.FLOAT_MAT2.value]={arrayBufferView:Float32Array,lengthMultiplier:4},ie[te.FLOAT_MAT2x3.value]={arrayBufferView:Float32Array,lengthMultiplier:6},ie[te.FLOAT_MAT2x4.value]={arrayBufferView:Float32Array,lengthMultiplier:8},ie[te.FLOAT_MAT3.value]={arrayBufferView:Float32Array,lengthMultiplier:9},ie[te.FLOAT_MAT3x2.value]={arrayBufferView:Float32Array,lengthMultiplier:6},ie[te.FLOAT_MAT3x4.value]={arrayBufferView:Float32Array,lengthMultiplier:12},ie[te.FLOAT_MAT4.value]={arrayBufferView:Float32Array,lengthMultiplier:16},ie[te.FLOAT_MAT4x2.value]={arrayBufferView:Float32Array,lengthMultiplier:8},ie[te.FLOAT_MAT4x3.value]={arrayBufferView:Float32Array,lengthMultiplier:12},ie[te.SAMPLER_2D.value]={arrayBufferView:Uint8Array,lengthMultiplier:1},ie[te.SAMPLER_CUBE.value]={arrayBufferView:Uint8Array,lengthMultiplier:1},ie),e}(),rn=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),on=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return rn(t,x),Object.defineProperty(t.prototype,"typeName",{get:function(){return"WebGLBuffer"},enumerable:!0,configurable:!0}),t}(Oe),an=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return rn(t,x),Object.defineProperty(t.prototype,"typeName",{get:function(){return"WebGLFramebuffer"},enumerable:!0,configurable:!0}),t}(Oe),sn=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return rn(t,x),Object.defineProperty(t.prototype,"typeName",{get:function(){return"WebGLProgram"},enumerable:!0,configurable:!0}),t.saveInGlobalStore=function(x){var w=Le.getWebGlObjectTag(x);w&&(this.store[w.id]=x)},t.getFromGlobalStore=function(x){return this.store[x]},t.updateInGlobalStore=function(x,w){if(w){var S=this.getFromGlobalStore(x);if(S){var U=Le.getWebGlObjectTag(S);U&&(Le.attachWebGlObjectTag(w,U),this.store[U.id]=w)}}},t.store={},t}(Oe),ln=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return rn(t,x),Object.defineProperty(t.prototype,"typeName",{get:function(){return"WebGLQuery"},enumerable:!0,configurable:!0}),t}(Oe),cn=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return rn(t,x),Object.defineProperty(t.prototype,"typeName",{get:function(){return"WebGLRenderbuffer"},enumerable:!0,configurable:!0}),t}(Oe),hn=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return rn(t,x),Object.defineProperty(t.prototype,"typeName",{get:function(){return"WebGLSampler"},enumerable:!0,configurable:!0}),t}(Oe),dn=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return rn(t,x),Object.defineProperty(t.prototype,"typeName",{get:function(){return"WebGLShader"},enumerable:!0,configurable:!0}),t}(Oe),pn=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return rn(t,x),Object.defineProperty(t.prototype,"typeName",{get:function(){return"WebGLSync"},enumerable:!0,configurable:!0}),t}(Oe),mn=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return rn(t,x),Object.defineProperty(t.prototype,"typeName",{get:function(){return"WebGLTexture"},enumerable:!0,configurable:!0}),t}(Oe),gn=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return rn(t,x),Object.defineProperty(t.prototype,"typeName",{get:function(){return"WebGLTransformFeedback"},enumerable:!0,configurable:!0}),t}(Oe),vn=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return rn(t,x),Object.defineProperty(t.prototype,"typeName",{get:function(){return"WebGLUniformLocation"},enumerable:!0,configurable:!0}),t}(Oe),bn=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return rn(t,x),Object.defineProperty(t.prototype,"typeName",{get:function(){return"WebGLVertexArrayObject"},enumerable:!0,configurable:!0}),t}(Oe),xn=function(){function e(){}return e.getProgramData=function(x,w){for(var S={LINK_STATUS:x.getProgramParameter(w,te.LINK_STATUS.value),VALIDATE_STATUS:x.getProgramParameter(w,te.VALIDATE_STATUS.value)},U=x.getAttachedShaders(w),G=new Array(2),z=0,H=0,j=U;H<j.length;H++){var X=j[H],q=this.readShaderFromContext(x,X);z+=q.source.length,q.fragment?G[1]=q:G[0]=q}return{programStatus:S,shaders:G,length:z}},e.readShaderFromContext=function(x,w){var S=x.getShaderSource(w),U=x.getExtension("WEBGL_debug_shaders"),G=U?U.getTranslatedShaderSource(w):null,z=x.getShaderParameter(w,te.SHADER_TYPE.value)===te.FRAGMENT_SHADER.value,H=w&&w.__SPECTOR_Metadata&&w.__SPECTOR_Metadata.name?w.__SPECTOR_Metadata.name:this.readNameFromShaderSource(S);return H||(H=z?"Fragment":"Vertex"),{COMPILE_STATUS:x.getShaderParameter(w,te.COMPILE_STATUS.value),fragment:z,name:H,source:S,translatedSource:G}},e.readNameFromShaderSource=function(x){try{var w="",S=void 0,U=/#define[\s]+SHADER_NAME[\s]+([\S]+)(\n|$)/gi;if(null!==(S=U.exec(x))&&(S.index===U.lastIndex&&U.lastIndex++,w=S[1]),""===w){var G=/#define[\s]+SHADER_NAME_B64[\s]+([\S]+)(\n|$)/gi;null!==(S=G.exec(x))&&(S.index===G.lastIndex&&G.lastIndex++,w=S[1]),w&&(w=decodeURIComponent(atob(w)))}return w}catch(x){return null}},e}(),En=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Ot=function(){return(Ot=Object.assign||function(x){for(var w,S=1,U=arguments.length;S<U;S++)for(var G in w=arguments[S])Object.prototype.hasOwnProperty.call(w,G)&&(x[G]=w[G]);return x}).apply(this,arguments)},wn=function(x){function t(w){var S=x.call(this,w)||this;return S.drawCallTextureInputState=new tn(w),S.drawCallUboInputState=new nn(w),S}return En(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return t.stateName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requireStartAndStopStates",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.getConsumeCommands=function(){return J},t.prototype.getChangeCommandsByState=function(){return{}},t.prototype.readFromContext=function(){var x,w=this.context.getParameter(te.CURRENT_PROGRAM.value);if(w){this.currentState.frameBuffer=this.readFrameBufferFromContext();var S=w.__SPECTOR_Object_CustomData?w.__SPECTOR_Object_CustomData:xn.getProgramData(this.context,w);if(this.currentState.programStatus=Ot({},S.programStatus),this.currentState.programStatus.program=this.getSpectorData(w),this.currentState.programStatus.RECOMPILABLE=z.isBuildableProgram(w),this.currentState.programStatus.RECOMPILABLE&&sn.saveInGlobalStore(w),this.currentState.shaders=S.shaders,(null===(x=this.lastCommandName)||void 0===x?void 0:x.indexOf("Elements"))>=0){var U=this.context.getParameter(this.context.ELEMENT_ARRAY_BUFFER_BINDING);U&&(this.currentState.elementArray={},this.currentState.elementArray.arrayBuffer=this.getSpectorData(U))}var G=this.context.getProgramParameter(w,te.ACTIVE_ATTRIBUTES.value);this.currentState.attributes=[];for(var H=0;H<G;H++){var j=this.readAttributeFromContext(w,H);this.currentState.attributes.push(j)}var X=this.context.getProgramParameter(w,te.ACTIVE_UNIFORMS.value);this.currentState.uniforms=[];var q=[];for(H=0;H<X;H++){q.push(H);var K=this.readUniformFromContext(w,H);this.currentState.uniforms.push(K)}if(this.contextVersion>1){var Y=this.context.getProgramParameter(w,te.ACTIVE_UNIFORM_BLOCKS.value);for(this.currentState.uniformBlocks=[],H=0;H<Y;H++){var Z=this.readUniformBlockFromContext(w,H);this.currentState.uniformBlocks.push(Z)}if(this.readUniformsFromContextIntoState(w,q,this.currentState.uniforms,this.currentState.uniformBlocks),this.context.getParameter(te.TRANSFORM_FEEDBACK_ACTIVE.value)){var J=this.context.getProgramParameter(w,te.TRANSFORM_FEEDBACK_BUFFER_MODE.value);this.currentState.transformFeedbackMode=this.getWebGlConstant(J),this.currentState.transformFeedbacks=[];var Q=this.context.getProgramParameter(w,te.TRANSFORM_FEEDBACK_VARYINGS.value);for(H=0;H<Q;H++){var ee=this.readTransformFeedbackFromContext(w,H);this.currentState.transformFeedbacks.push(ee)}}}for(H=0;H<q.length;H++){if(null!==(K=this.currentState.uniforms[H]).value&&void 0!==K.value){var ne=t.samplerTypes[K.typeValue];if(ne)if(K.value.length){K.textures=[];for(var re=0;re<K.value.length;re++)K.textures.push(this.readTextureFromContext(K.value[re],ne))}else K.texture=this.readTextureFromContext(K.value,ne)}delete K.typeValue}}},t.prototype.readFrameBufferFromContext=function(){var x=this.context.getParameter(te.FRAMEBUFFER_BINDING.value);if(!x)return null;var w={};if(w.frameBuffer=this.getSpectorData(x),this.readFrameBufferAttachmentFromContext(te.DEPTH_ATTACHMENT.value)&&(w.depthAttachment=this.readFrameBufferAttachmentFromContext(te.DEPTH_ATTACHMENT.value)),this.readFrameBufferAttachmentFromContext(te.STENCIL_ATTACHMENT.value)&&(w.stencilAttachment=this.readFrameBufferAttachmentFromContext(te.STENCIL_ATTACHMENT.value)),this.extensions[te.MAX_DRAW_BUFFERS_WEBGL.extensionName]){w.colorAttachments=[];for(var S=this.context.getParameter(te.MAX_DRAW_BUFFERS_WEBGL.value),U=0;U<S;U++)(z=this.readFrameBufferAttachmentFromContext(ne["COLOR_ATTACHMENT"+U+"_WEBGL"].value))&&w.colorAttachments.push(z)}else if(this.contextVersion>1){var G=this.context;for(w.colorAttachments=[],S=G.getParameter(te.MAX_DRAW_BUFFERS.value),U=0;U<S;U++)(z=this.readFrameBufferAttachmentFromContext(ne["COLOR_ATTACHMENT"+U].value))&&w.colorAttachments.push(z)}else{var z;(z=this.readFrameBufferAttachmentFromContext(ne.COLOR_ATTACHMENT0.value))&&(w.colorAttachments=[z])}return w},t.prototype.readFrameBufferAttachmentFromContext=function(x){var w=te.FRAMEBUFFER.value,S=this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE.value);if(S!==te.NONE.value){var U={},G=this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME.value);if(S===te.RENDERBUFFER.value){if(U.type="RENDERBUFFER",U.buffer=this.getSpectorData(G),G){var z=G.__SPECTOR_Object_CustomData;z&&(z.internalFormat&&(U.internalFormat=this.getWebGlConstant(z.internalFormat)),U.width=z.width,U.height=z.height,U.msaaSamples=z.samples)}}else if(S===te.TEXTURE.value){U.type="TEXTURE",U.texture=this.getSpectorData(G),U.textureLevel=this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL.value);var H=this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE.value);U.textureCubeMapFace=this.getWebGlConstant(H),this.drawCallTextureInputState.appendTextureState(U,G,null,this.fullCapture)}return this.extensions.EXT_sRGB&&(U.encoding=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT.value))),this.contextVersion>1&&(U.alphaSize=this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE.value),U.blueSize=this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE.value),U.encoding=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING.value)),U.componentType=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE.value)),U.depthSize=this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE.value),U.greenSize=this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE.value),U.redSize=this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_RED_SIZE.value),U.stencilSize=this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE.value),S===te.TEXTURE.value&&(U.textureLayer=this.context.getFramebufferAttachmentParameter(w,x,te.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER.value))),U}},t.prototype.readAttributeFromContext=function(x,w){var S=this.context.getActiveAttrib(x,w),U=this.context.getAttribLocation(x,S.name);if(-1===U)return{name:S.name,size:S.size,type:this.getWebGlConstant(S.type),location:-1};var G=this.context.getVertexAttrib(U,te.CURRENT_VERTEX_ATTRIB.value),z=this.context.getVertexAttrib(U,te.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING.value),H={name:S.name,size:S.size,type:this.getWebGlConstant(S.type),location:U,offsetPointer:this.context.getVertexAttribOffset(U,te.VERTEX_ATTRIB_ARRAY_POINTER.value),bufferBinding:this.getSpectorData(z),enabled:this.context.getVertexAttrib(U,te.VERTEX_ATTRIB_ARRAY_ENABLED.value),arraySize:this.context.getVertexAttrib(U,te.VERTEX_ATTRIB_ARRAY_SIZE.value),stride:this.context.getVertexAttrib(U,te.VERTEX_ATTRIB_ARRAY_STRIDE.value),arrayType:this.getWebGlConstant(this.context.getVertexAttrib(U,te.VERTEX_ATTRIB_ARRAY_TYPE.value)),normalized:this.context.getVertexAttrib(U,te.VERTEX_ATTRIB_ARRAY_NORMALIZED.value),vertexAttrib:Array.prototype.slice.call(G)};return this.extensions[te.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE.extensionName]?H.divisor=this.context.getVertexAttrib(U,te.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE.value):this.contextVersion>1&&(H.integer=this.context.getVertexAttrib(U,te.VERTEX_ATTRIB_ARRAY_INTEGER.value),H.divisor=this.context.getVertexAttrib(U,te.VERTEX_ATTRIB_ARRAY_DIVISOR.value)),this.appendBufferCustomData(H,z),H},t.prototype.readUniformFromContext=function(x,w){var S=this.context.getActiveUniform(x,w),U=this.context.getUniformLocation(x,S.name);if(U){if(S.size>1&&S.name&&S.name.indexOf("[0]")===S.name.length-3){for(var G=[],z=0;z<S.size;z++){var H=this.context.getUniformLocation(x,S.name.replace("[0]","["+z+"]"));H&&((j=this.context.getUniform(x,H)).length&&(j=Array.prototype.slice.call(j)),G.push({value:j}))}return{name:S.name.replace("[0]",""),size:S.size,type:this.getWebGlConstant(S.type),typeValue:S.type,location:this.getSpectorData(U),values:G}}var j;return(j=this.context.getUniform(x,U)).length&&(j=Array.prototype.slice.call(j)),{name:S.name,size:S.size,type:this.getWebGlConstant(S.type),typeValue:S.type,location:this.getSpectorData(U),value:j}}return{name:S.name,size:S.size,type:this.getWebGlConstant(S.type),typeValue:S.type}},t.prototype.readTextureFromContext=function(x,w){var S=this.context.getParameter(te.ACTIVE_TEXTURE.value);this.context.activeTexture(te.TEXTURE0.value+x);var U={magFilter:this.getWebGlConstant(this.context.getTexParameter(w.value,te.TEXTURE_MAG_FILTER.value)),minFilter:this.getWebGlConstant(this.context.getTexParameter(w.value,te.TEXTURE_MIN_FILTER.value)),wrapS:this.getWebGlConstant(this.context.getTexParameter(w.value,te.TEXTURE_WRAP_S.value)),wrapT:this.getWebGlConstant(this.context.getTexParameter(w.value,te.TEXTURE_WRAP_T.value))};if(this.extensions[te.TEXTURE_MAX_ANISOTROPY_EXT.extensionName]&&(U.anisotropy=this.context.getTexParameter(w.value,te.TEXTURE_MAX_ANISOTROPY_EXT.value)),this.contextVersion>1){U.baseLevel=this.context.getTexParameter(w.value,te.TEXTURE_BASE_LEVEL.value),U.immutable=this.context.getTexParameter(w.value,te.TEXTURE_IMMUTABLE_FORMAT.value),U.immutableLevels=this.context.getTexParameter(w.value,te.TEXTURE_IMMUTABLE_LEVELS.value),U.maxLevel=this.context.getTexParameter(w.value,te.TEXTURE_MAX_LEVEL.value);var G=this.context.getParameter(te.SAMPLER_BINDING.value);if(G){U.sampler=this.getSpectorData(G);var z=this.context;U.samplerMaxLod=z.getSamplerParameter(G,te.TEXTURE_MAX_LOD.value),U.samplerMinLod=z.getSamplerParameter(G,te.TEXTURE_MIN_LOD.value),U.samplerCompareFunc=this.getWebGlConstant(z.getSamplerParameter(G,te.TEXTURE_COMPARE_FUNC.value)),U.samplerCompareMode=this.getWebGlConstant(z.getSamplerParameter(G,te.TEXTURE_COMPARE_MODE.value)),U.samplerWrapS=this.getWebGlConstant(z.getSamplerParameter(G,te.TEXTURE_WRAP_S.value)),U.samplerWrapT=this.getWebGlConstant(z.getSamplerParameter(G,te.TEXTURE_WRAP_T.value)),U.samplerWrapR=this.getWebGlConstant(z.getSamplerParameter(G,te.TEXTURE_WRAP_R.value)),U.samplerMagFilter=this.getWebGlConstant(z.getSamplerParameter(G,te.TEXTURE_MAG_FILTER.value)),U.samplerMinFilter=this.getWebGlConstant(z.getSamplerParameter(G,te.TEXTURE_MIN_FILTER.value))}else U.maxLod=this.context.getTexParameter(w.value,te.TEXTURE_MAX_LOD.value),U.minLod=this.context.getTexParameter(w.value,te.TEXTURE_MIN_LOD.value),U.compareFunc=this.getWebGlConstant(this.context.getTexParameter(w.value,te.TEXTURE_COMPARE_FUNC.value)),U.compareMode=this.getWebGlConstant(this.context.getTexParameter(w.value,te.TEXTURE_COMPARE_MODE.value)),U.wrapR=this.getWebGlConstant(this.context.getTexParameter(w.value,te.TEXTURE_WRAP_R.value))}var H=this.getTextureStorage(w);if(H){var j=this.quickCapture?null:w;this.drawCallTextureInputState.appendTextureState(U,H,j,this.fullCapture)}return this.context.activeTexture(S),U},t.prototype.getTextureStorage=function(x){return x===te.TEXTURE_2D?this.context.getParameter(te.TEXTURE_BINDING_2D.value):x===te.TEXTURE_CUBE_MAP?this.context.getParameter(te.TEXTURE_BINDING_CUBE_MAP.value):x===te.TEXTURE_3D?this.context.getParameter(te.TEXTURE_BINDING_3D.value):x===te.TEXTURE_2D_ARRAY?this.context.getParameter(te.TEXTURE_BINDING_2D_ARRAY.value):void 0},t.prototype.readUniformsFromContextIntoState=function(x,w,S,U){for(var G=this.context,z=G.getActiveUniforms(x,w,te.UNIFORM_TYPE.value),H=G.getActiveUniforms(x,w,te.UNIFORM_SIZE.value),j=G.getActiveUniforms(x,w,te.UNIFORM_BLOCK_INDEX.value),X=G.getActiveUniforms(x,w,te.UNIFORM_OFFSET.value),q=G.getActiveUniforms(x,w,te.UNIFORM_ARRAY_STRIDE.value),K=G.getActiveUniforms(x,w,te.UNIFORM_MATRIX_STRIDE.value),Y=G.getActiveUniforms(x,w,te.UNIFORM_IS_ROW_MAJOR.value),Z=0;Z<w.length;Z++){var J=S[Z];if(J.type=this.getWebGlConstant(z[Z]),J.size=H[Z],J.blockIndice=j[Z],J.blockIndice>-1&&(J.blockName=G.getActiveUniformBlockName(x,J.blockIndice)),J.offset=X[Z],J.arrayStride=q[Z],J.matrixStride=K[Z],J.rowMajor=Y[Z],J.blockIndice>-1){var Q=U[j[Z]].bindingPoint;J.value=this.drawCallUboInputState.getUboValue(Q,J.offset,J.size,z[Z])}}},t.prototype.readTransformFeedbackFromContext=function(x,w){var S=this.context,U=S.getTransformFeedbackVarying(x,w),G=S.getIndexedParameter(te.TRANSFORM_FEEDBACK_BUFFER_BINDING.value,w),z={name:U.name,size:U.size,type:this.getWebGlConstant(U.type),buffer:this.getSpectorData(G),bufferSize:S.getIndexedParameter(te.TRANSFORM_FEEDBACK_BUFFER_SIZE.value,w),bufferStart:S.getIndexedParameter(te.TRANSFORM_FEEDBACK_BUFFER_START.value,w)};return this.appendBufferCustomData(z,G),z},t.prototype.readUniformBlockFromContext=function(x,w){var S=this.context,U=S.getActiveUniformBlockParameter(x,w,te.UNIFORM_BLOCK_BINDING.value),G=S.getIndexedParameter(te.UNIFORM_BUFFER_BINDING.value,U),z={name:S.getActiveUniformBlockName(x,w),bindingPoint:U,size:S.getActiveUniformBlockParameter(x,w,te.UNIFORM_BLOCK_DATA_SIZE.value),activeUniformCount:S.getActiveUniformBlockParameter(x,w,te.UNIFORM_BLOCK_ACTIVE_UNIFORMS.value),vertex:S.getActiveUniformBlockParameter(x,w,te.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER.value),fragment:S.getActiveUniformBlockParameter(x,w,te.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER.value),buffer:this.getSpectorData(G)};return this.appendBufferCustomData(z,G),z},t.prototype.appendBufferCustomData=function(x,w){if(w){var S=w.__SPECTOR_Object_CustomData;S&&(S.usage&&(x.bufferUsage=this.getWebGlConstant(S.usage)),x.bufferLength=S.length,S.offset&&(x.bufferOffset=S.offset),S.sourceLength&&(x.bufferSourceLength=S.sourceLength))}},t.prototype.getWebGlConstant=function(x){var w=re[x];return w?w.name:x},t.stateName="DrawCall",t.samplerTypes=((oe={})[te.SAMPLER_2D.value]=te.TEXTURE_2D,oe[te.SAMPLER_CUBE.value]=te.TEXTURE_CUBE_MAP,oe[te.SAMPLER_3D.value]=te.TEXTURE_3D,oe[te.SAMPLER_2D_SHADOW.value]=te.TEXTURE_2D,oe[te.SAMPLER_2D_ARRAY.value]=te.TEXTURE_2D_ARRAY,oe[te.SAMPLER_2D_ARRAY_SHADOW.value]=te.TEXTURE_2D_ARRAY,oe[te.SAMPLER_CUBE_SHADOW.value]=te.TEXTURE_CUBE_MAP,oe[te.INT_SAMPLER_2D.value]=te.TEXTURE_2D,oe[te.INT_SAMPLER_3D.value]=te.TEXTURE_3D,oe[te.INT_SAMPLER_CUBE.value]=te.TEXTURE_CUBE_MAP,oe[te.INT_SAMPLER_2D_ARRAY.value]=te.TEXTURE_2D_ARRAY,oe[te.UNSIGNED_INT_SAMPLER_2D.value]=te.TEXTURE_2D,oe[te.UNSIGNED_INT_SAMPLER_3D.value]=te.TEXTURE_3D,oe[te.UNSIGNED_INT_SAMPLER_CUBE.value]=te.TEXTURE_CUBE_MAP,oe[te.UNSIGNED_INT_SAMPLER_2D_ARRAY.value]=te.TEXTURE_2D_ARRAY,oe),t}(St),Sn=function(){function e(x){this.contextInformation=x,this.stateTrackers=[],this.onCommandCapturedCallbacks={},this.initStateTrackers()}return e.prototype.startCapture=function(x,w,S){for(var U=0,G=this.stateTrackers;U<G.length;U++){var z=G[U],H=z.startCapture(!0,w,S);z.requireStartAndStopStates&&(x.initState[z.stateName]=H)}},e.prototype.stopCapture=function(x){for(var w=0,S=this.stateTrackers;w<S.length;w++){var U=S[w],G=U.stopCapture();U.requireStartAndStopStates&&(x.endState[U.stateName]=G)}},e.prototype.captureState=function(x){var w=this.onCommandCapturedCallbacks[x.name];if(w)for(var S=0,U=w;S<U.length;S++)(0,U[S])(x)},e.prototype.initStateTrackers=function(){this.stateTrackers.push(new Mt(this.contextInformation),new Lt(this.contextInformation),new It(this.contextInformation),new Ft(this.contextInformation),new Dt(this.contextInformation),new Ut(this.contextInformation),new Vt(this.contextInformation),new zt(this.contextInformation),new $t(this.contextInformation),new Xt(this.contextInformation),new Kt(this.contextInformation),new Zt(this.contextInformation),new en(this.contextInformation),new wn(this.contextInformation));for(var x=0,w=this.stateTrackers;x<w.length;x++)w[x].registerCallbacks(this.onCommandCapturedCallbacks)},e}(),Tn=function(){function e(x){this.options=x,this.createCommandNames=this.getCreateCommandNames(),this.updateCommandNames=this.getUpdateCommandNames(),this.deleteCommandNames=this.getDeleteCommandNames(),this.startTime=q.now,this.memoryPerSecond={},this.totalMemory=0,this.frameMemory=0,this.capturing=!1,e.initializeByteSizeFormat()}return e.initializeByteSizeFormat=function(){var x;this.byteSizePerInternalFormat||(this.byteSizePerInternalFormat=((x={})[te.R8.value]=1,x[te.R16F.value]=2,x[te.R32F.value]=4,x[te.R8UI.value]=1,x[te.RG8.value]=2,x[te.RG16F.value]=4,x[te.RG32F.value]=8,x[te.ALPHA.value]=1,x[te.RGB.value]=3,x[te.RGBA.value]=4,x[te.LUMINANCE.value]=1,x[te.LUMINANCE_ALPHA.value]=2,x[te.DEPTH_COMPONENT.value]=1,x[te.DEPTH_STENCIL.value]=2,x[te.SRGB_EXT.value]=3,x[te.SRGB_ALPHA_EXT.value]=4,x[te.RGB8.value]=3,x[te.SRGB8.value]=3,x[te.RGB565.value]=2,x[te.R11F_G11F_B10F.value]=4,x[te.RGB9_E5.value]=2,x[te.RGB16F.value]=6,x[te.RGB32F.value]=12,x[te.RGB8UI.value]=3,x[te.RGBA8.value]=4,x[te.RGB5_A1.value]=2,x[te.RGBA16F.value]=8,x[te.RGBA32F.value]=16,x[te.RGBA8UI.value]=4,x[te.COMPRESSED_R11_EAC.value]=4,x[te.COMPRESSED_SIGNED_R11_EAC.value]=4,x[te.COMPRESSED_RG11_EAC.value]=4,x[te.COMPRESSED_SIGNED_RG11_EAC.value]=4,x[te.COMPRESSED_RGB8_ETC2.value]=4,x[te.COMPRESSED_RGBA8_ETC2_EAC.value]=4,x[te.COMPRESSED_SRGB8_ETC2.value]=4,x[te.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC.value]=4,x[te.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2.value]=4,x[te.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2.value]=4,x[te.COMPRESSED_RGB_S3TC_DXT1_EXT.value]=.5,x[te.COMPRESSED_RGBA_S3TC_DXT3_EXT.value]=1,x[te.COMPRESSED_RGBA_S3TC_DXT5_EXT.value]=1,x[te.COMPRESSED_RGB_PVRTC_4BPPV1_IMG.value]=.5,x[te.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG.value]=.5,x[te.COMPRESSED_RGB_PVRTC_2BPPV1_IMG.value]=.25,x[te.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG.value]=.25,x[te.COMPRESSED_RGB_ETC1_WEBGL.value]=.5,x[te.COMPRESSED_RGB_ATC_WEBGL.value]=.5,x[te.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL.value]=1,x[te.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL.value]=1,x))},e.prototype.registerCallbacks=function(x){for(var w=0,S=this.createCommandNames;w<S.length;w++)x[j=S[w]]=x[j]||[],x[j].push(this.createWithoutSideEffects.bind(this));for(var U=0,G=this.updateCommandNames;U<G.length;U++)x[j=G[U]]=x[j]||[],x[j].push(this.updateWithoutSideEffects.bind(this));for(var z=0,H=this.deleteCommandNames;z<H.length;z++){var j;x[j=H[z]]=x[j]||[],x[j].push(this.deleteWithoutSideEffects.bind(this))}},e.prototype.startCapture=function(){this.frameMemory=0,this.capturing=!0},e.prototype.stopCapture=function(){this.frameMemory=0,this.capturing=!1},e.prototype.appendRecordedInformation=function(x){x.frameMemory[this.objectName]=this.frameMemory,x.memory[this.objectName]=this.memoryPerSecond},e.prototype.create=function(x){},e.prototype.createWithoutSideEffects=function(x){this.options.toggleCapture(!1),this.create(x),this.options.toggleCapture(!0)},e.prototype.updateWithoutSideEffects=function(x){if(x&&0!==x.arguments.length){this.options.toggleCapture(!1);var w=x.arguments[0],S=this.getBoundInstance(w);if(S)if(Le.getWebGlObjectTag(S)){var U=this.getWebGlConstant(w),G=this.update(x,U,S);this.changeMemorySize(G),this.options.toggleCapture(!0)}else this.options.toggleCapture(!0);else this.options.toggleCapture(!0)}},e.prototype.deleteWithoutSideEffects=function(x){if(x&&x.arguments&&!(x.arguments.length<1)){var w=x.arguments[0];if(w){this.options.toggleCapture(!1);var S=this.delete(w);this.changeMemorySize(-S),this.options.toggleCapture(!0)}}},e.prototype.changeMemorySize=function(x){this.totalMemory+=x,this.capturing&&(this.frameMemory+=x);var w=q.now-this.startTime,S=Math.round(w/1e3);this.memoryPerSecond[S]=this.totalMemory},e.prototype.getWebGlConstant=function(x){var w=re[x];return w?w.name:x+""},e.prototype.getByteSizeForInternalFormat=function(x){return e.byteSizePerInternalFormat[x]||4},e}(),Cn=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),An=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Cn(t,x),Object.defineProperty(t.prototype,"objectName",{get:function(){return"Buffer"},enumerable:!0,configurable:!0}),t.prototype.getCreateCommandNames=function(){return["createBuffer"]},t.prototype.getUpdateCommandNames=function(){return["bufferData"]},t.prototype.getDeleteCommandNames=function(){return["deleteBuffer"]},t.prototype.getBoundInstance=function(x){var w=this.options.context;return x===te.ARRAY_BUFFER.value?w.getParameter(te.ARRAY_BUFFER_BINDING.value):x===te.ELEMENT_ARRAY_BUFFER.value?w.getParameter(te.ELEMENT_ARRAY_BUFFER_BINDING.value):x===te.COPY_READ_BUFFER.value?w.getParameter(te.COPY_READ_BUFFER_BINDING.value):x===te.COPY_WRITE_BUFFER.value?w.getParameter(te.COPY_WRITE_BUFFER_BINDING.value):x===te.TRANSFORM_FEEDBACK_BUFFER.value?w.getParameter(te.TRANSFORM_FEEDBACK_BUFFER_BINDING.value):x===te.UNIFORM_BUFFER.value?w.getParameter(te.UNIFORM_BUFFER_BINDING.value):x===te.PIXEL_PACK_BUFFER.value?w.getParameter(te.PIXEL_PACK_BUFFER_BINDING.value):x===te.PIXEL_UNPACK_BUFFER.value?w.getParameter(te.PIXEL_UNPACK_BUFFER_BINDING.value):void 0},t.prototype.delete=function(x){var w=x.__SPECTOR_Object_CustomData;return w?w.length:0},t.prototype.update=function(x,w,S){var U=this.getCustomData(w,x);if(!U)return 0;var G=S.__SPECTOR_Object_CustomData?S.__SPECTOR_Object_CustomData.length:0;return S.__SPECTOR_Object_CustomData=U,U.length-G},t.prototype.getCustomData=function(x,w){var S=this.getLength(w);return w.arguments.length>=4?{target:x,length:S,usage:w.arguments[2],offset:w.arguments[3],sourceLength:w.arguments[1]?w.arguments[1].length:-1}:3===w.arguments.length?{target:x,length:S,usage:w.arguments[2]}:void 0},t.prototype.getLength=function(x){var w=-1,S=0;return 5===x.arguments.length&&(w=x.arguments[4],S=x.arguments[3]),w<=0&&(w="number"==typeof x.arguments[1]?x.arguments[1]:x.arguments[1]&&(x.arguments[1].byteLength||x.arguments[1].length)||0),w-S},t}(Tn),Mn=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Rn=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Mn(t,x),Object.defineProperty(t.prototype,"objectName",{get:function(){return"Renderbuffer"},enumerable:!0,configurable:!0}),t.prototype.getCreateCommandNames=function(){return["createRenderbuffer"]},t.prototype.getUpdateCommandNames=function(){return["renderbufferStorage","renderbufferStorageMultisample"]},t.prototype.getDeleteCommandNames=function(){return["deleteRenderbuffer"]},t.prototype.getBoundInstance=function(x){var w=this.options.context;if(x===te.RENDERBUFFER.value)return w.getParameter(te.RENDERBUFFER_BINDING.value)},t.prototype.delete=function(x){var w=x.__SPECTOR_Object_CustomData;return w?w.length:0},t.prototype.update=function(x,w,S){var U=this.getCustomData(x,w);if(!U)return 0;var G=S.__SPECTOR_Object_CustomData?S.__SPECTOR_Object_CustomData.length:0;return U.length=U.width*U.height*this.getByteSizeForInternalFormat(U.internalFormat),S.__SPECTOR_Object_CustomData=U,U.length-G},t.prototype.getCustomData=function(x,w){return 4===x.arguments.length?{target:w,internalFormat:x.arguments[1],width:x.arguments[2],height:x.arguments[3],length:0,samples:0}:{target:w,internalFormat:x.arguments[2],width:x.arguments[3],height:x.arguments[4],length:0,samples:x.arguments[1]}},t}(Tn),On=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),In=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return On(t,x),Object.defineProperty(t.prototype,"objectName",{get:function(){return"Texture2d"},enumerable:!0,configurable:!0}),t.prototype.getCreateCommandNames=function(){return["createTexture"]},t.prototype.getUpdateCommandNames=function(){return["texImage2D","compressedTexImage2D","texStorage2D"]},t.prototype.getDeleteCommandNames=function(){return["deleteTexture"]},t.prototype.getBoundInstance=function(x){var w=this.options.context;return x===te.TEXTURE_2D.value?w.getParameter(te.TEXTURE_BINDING_2D.value):x===te.TEXTURE_CUBE_MAP_POSITIVE_X.value||x===te.TEXTURE_CUBE_MAP_POSITIVE_Y.value||x===te.TEXTURE_CUBE_MAP_POSITIVE_Z.value||x===te.TEXTURE_CUBE_MAP_NEGATIVE_X.value||x===te.TEXTURE_CUBE_MAP_NEGATIVE_Y.value||x===te.TEXTURE_CUBE_MAP_NEGATIVE_Z.value?w.getParameter(te.TEXTURE_BINDING_CUBE_MAP.value):void 0},t.prototype.delete=function(x){var w=x.__SPECTOR_Object_CustomData;return w?w.target===te.TEXTURE_2D_ARRAY.name||w.target===te.TEXTURE_3D.name?0:w.length:0},t.prototype.update=function(x,w,S){if(x.arguments.length>=2&&0!==x.arguments[1])return 0;var U=this.getCustomData(x,w,S);if(!U)return 0;var G=S.__SPECTOR_Object_CustomData?S.__SPECTOR_Object_CustomData.length:0;if(U.isCompressed){if(x.arguments.length>=7){var z=x.arguments[6];U.length="number"==typeof z?z:null==z?void 0:z.byteLength}}else{var H="TEXTURE_2D"===w?1:6,j=U.internalFormat;j===te.RGBA.value&&(U.type===te.FLOAT.value&&(j=te.RGBA32F.value),U.type===te.HALF_FLOAT_OES.value&&(j=te.RGBA16F.value)),U.length=U.width*U.height*H*this.getByteSizeForInternalFormat(j)}return U.length=0|U.length,S.__SPECTOR_Object_CustomData=U,U.length-G},t.prototype.getCustomData=function(x,w,S){return"texImage2D"===x.name?this.getTexImage2DCustomData(x,w,S):"compressedTexImage2D"===x.name?this.getCompressedTexImage2DCustomData(x,w,S):"texStorage2D"===x.name?this.getTexStorage2DCustomData(x,w,S):void 0},t.prototype.getTexStorage2DCustomData=function(x,w,S){var U;return 5===x.arguments.length&&(U={target:w,internalFormat:x.arguments[2],width:x.arguments[3],height:x.arguments[4],length:0,isCompressed:!1}),U},t.prototype.getCompressedTexImage2DCustomData=function(x,w,S){var U;if(0===x.arguments[1])return x.arguments.length>=7&&(U={target:w,internalFormat:x.arguments[2],width:x.arguments[3],height:x.arguments[4],length:0,isCompressed:!0}),U},t.prototype.getTexImage2DCustomData=function(x,w,S){var U;if(0===x.arguments[1])return x.arguments.length>=8?U={target:w,internalFormat:x.arguments[2],width:x.arguments[3],height:x.arguments[4],format:x.arguments[6],type:x.arguments[7],length:0,isCompressed:!1}:6===x.arguments.length&&(U={target:w,internalFormat:x.arguments[2],width:x.arguments[5].width,height:x.arguments[5].height,format:x.arguments[3],type:x.arguments[4],length:0,isCompressed:!1}),U},t}(Tn),Nn=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Fn=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Nn(t,x),Object.defineProperty(t.prototype,"objectName",{get:function(){return"Texture3d"},enumerable:!0,configurable:!0}),t.prototype.getCreateCommandNames=function(){return["createTexture"]},t.prototype.getUpdateCommandNames=function(){return["texImage3D","compressedTexImage3D","texStorage3D"]},t.prototype.getDeleteCommandNames=function(){return["deleteTexture"]},t.prototype.getBoundInstance=function(x){var w=this.options.context;return x===te.TEXTURE_2D_ARRAY.value?w.getParameter(te.TEXTURE_BINDING_2D_ARRAY.value):x===te.TEXTURE_3D.value?w.getParameter(te.TEXTURE_BINDING_3D.value):void 0},t.prototype.delete=function(x){var w=x.__SPECTOR_Object_CustomData;return w?w.target!==te.TEXTURE_2D_ARRAY.name&&w.target!==te.TEXTURE_3D.name?0:w.length:0},t.prototype.update=function(x,w,S){if(x.arguments.length>=2&&0!==x.arguments[1])return 0;var U=this.getCustomData(x,w,S);if(!U)return 0;var G=S.__SPECTOR_Object_CustomData?S.__SPECTOR_Object_CustomData.length:0;if(U.isCompressed){if(x.arguments.length>=7){var z=x.arguments[6];U.length="number"==typeof z?z:null==z?void 0:z.byteLength}}else U.length=U.width*U.height*U.depth*this.getByteSizeForInternalFormat(U.internalFormat);return U.length=0|U.length,S.__SPECTOR_Object_CustomData=U,U.length-G},t.prototype.getCustomData=function(x,w,S){return"texImage3D"===x.name?this.getTexImage3DCustomData(x,w,S):"compressedTexImage3D"===x.name?this.getCompressedTexImage3DCustomData(x,w,S):"texStorage3D"===x.name?this.getTexStorage3DCustomData(x,w,S):void 0},t.prototype.getTexStorage3DCustomData=function(x,w,S){var U;return 6===x.arguments.length&&(U={target:w,internalFormat:x.arguments[2],width:x.arguments[3],height:x.arguments[4],depth:x.arguments[5],length:0,isCompressed:!1}),U},t.prototype.getCompressedTexImage3DCustomData=function(x,w,S){var U;if(0===x.arguments[1])return x.arguments.length>=8&&(U={target:w,internalFormat:x.arguments[2],width:x.arguments[3],height:x.arguments[4],depth:x.arguments[5],length:0,isCompressed:!0}),U},t.prototype.getTexImage3DCustomData=function(x,w,S){var U;if(0===x.arguments[1])return x.arguments.length>=9&&(U={target:w,internalFormat:x.arguments[2],width:x.arguments[3],height:x.arguments[4],depth:x.arguments[5],format:x.arguments[7],type:x.arguments[8],length:0,isCompressed:!1}),U},t}(Tn),Bn=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Dn=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Bn(t,x),Object.defineProperty(t.prototype,"objectName",{get:function(){return"Program"},enumerable:!0,configurable:!0}),t.prototype.getCreateCommandNames=function(){return["createProgram"]},t.prototype.getUpdateCommandNames=function(){return["linkProgram"]},t.prototype.getDeleteCommandNames=function(){return["deleteProgram"]},t.prototype.getBoundInstance=function(x){return x},t.prototype.delete=function(x){var w=x.__SPECTOR_Object_CustomData;return w?w.length:0},t.prototype.update=function(x,w,S){if(x.arguments.length>=1&&!x.arguments[0])return 0;var U=this.getCustomData(S);if(!U)return 0;var G=S.__SPECTOR_Object_CustomData?S.__SPECTOR_Object_CustomData.length:0;return S.__SPECTOR_Object_CustomData=U,U.length-G},t.prototype.getCustomData=function(x){var w=this.options.context;return xn.getProgramData(w,x)},t}(Tn),kn=function(){function e(x){this.contextInformation=x,this.onCommandCallbacks={},this.recorders=[],this.initRecorders()}return e.prototype.recordCommand=function(x){var w=this.onCommandCallbacks[x.name];if(w)for(var S=0,U=w;S<U.length;S++)(0,U[S])(x)},e.prototype.startCapture=function(){for(var x=0,w=this.recorders;x<w.length;x++)w[x].startCapture()},e.prototype.stopCapture=function(){for(var x=0,w=this.recorders;x<w.length;x++)w[x].stopCapture()},e.prototype.appendRecordedInformation=function(x){for(var w=0,S=this.recorders;w<S.length;w++)S[w].appendRecordedInformation(x)},e.prototype.initRecorders=function(){this.recorders.push(new An(this.contextInformation),new Rn(this.contextInformation),new In(this.contextInformation),new Fn(this.contextInformation),new Dn(this.contextInformation));for(var x=0,w=this.recorders;x<w.length;x++)w[x].registerCallbacks(this.onCommandCallbacks)},e}(),Gn=function(){function e(x){this.contextInformation=x,this.webGlObjects=[],this.initWebglObjects()}return e.prototype.tagWebGlObjects=function(x){for(var w=0,S=this.webGlObjects;w<S.length;w++){for(var U=S[w],G=0;G<x.arguments.length;G++){var z=x.arguments[G];if(U.tagWebGlObject(z))break}if(U.tagWebGlObject(x.result))break}},e.prototype.tagWebGlObject=function(x){for(var w=0,S=this.webGlObjects;w<S.length;w++){var U=S[w].tagWebGlObject(x);if(U)return U}},e.prototype.initWebglObjects=function(){this.webGlObjects.push(new on,new an,new sn,new ln,new cn,new hn,new pn,new mn,new gn,new vn,new bn,new dn)},e}(),Wn=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),zn=function(x){function t(w){var S=x.call(this,w)||this;return S.extensionDefinition=[[{name:"ANGLE_instanced_arrays",description:""},{name:"EXT_blend_minmax",description:""},{name:"EXT_color_buffer_float",description:""},{name:"EXT_color_buffer_half_float",description:""},{name:"EXT_disjoint_timer_query",description:""},{name:"EXT_frag_depth",description:""},{name:"EXT_sRGB",description:""},{name:"EXT_shader_texture_lod",description:""},{name:"EXT_texture_filter_anisotropic",description:""},{name:"OES_element_index_uint",description:""},{name:"OES_standard_derivatives",description:""},{name:"OES_texture_float",description:""},{name:"OES_texture_float_linear",description:""},{name:"OES_texture_half_float",description:""},{name:"OES_texture_half_float_linear",description:""},{name:"OES_vertex_array_object",description:""},{name:"WEBGL_color_buffer_float",description:""},{name:"WEBGL_compressed_texture_astc",description:""},{name:"WEBGL_compressed_texture_atc",description:""},{name:"WEBGL_compressed_texture_etc",description:""},{name:"WEBGL_compressed_texture_etc1",description:""},{name:"WEBGL_compressed_texture_pvrtc",description:""},{name:"WEBGL_compressed_texture_s3tc",description:""},{name:"WEBGL_depth_texture",description:""},{name:"WEBGL_draw_buffers",description:""}],[{name:"EXT_color_buffer_float",description:""},{name:"EXT_disjoint_timer_query",description:""},{name:"EXT_disjoint_timer_query_webgl2",description:""},{name:"EXT_texture_filter_anisotropic",description:""},{name:"OES_texture_float_linear",description:""},{name:"WEBGL_compressed_texture_astc",description:""},{name:"WEBGL_compressed_texture_atc",description:""},{name:"WEBGL_compressed_texture_etc",description:""},{name:"WEBGL_compressed_texture_etc1",description:""},{name:"WEBGL_compressed_texture_pvrtc",description:""},{name:"WEBGL_compressed_texture_s3tc",description:""}]],S.currentState=S.startCapture(!0,S.quickCapture,S.fullCapture),S}return Wn(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return"Extensions"},enumerable:!0,configurable:!0}),t.prototype.getExtensions=function(){return this.extensions},t.prototype.readFromContext=function(){for(var x=0,w=1===this.contextVersion?this.extensionDefinition[0]:this.extensionDefinition[1];x<w.length;x++){var S=w[x],U=this.context.getExtension(S.name);U?(this.currentState[S.name]=!0,this.extensions[S.name]=U):this.currentState[S.name]=!1}},t}(St),Hn=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),$n=function(x){function t(w){var S=x.call(this,w)||this;return S.currentState=S.startCapture(!0,S.quickCapture,S.fullCapture),S}return Hn(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return"CompressedTextures"},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.COMPRESSED_TEXTURE_FORMATS}]},t.prototype.stringifyParameterValue=function(x,w){for(var S=[],U=0,G=x;U<G.length;U++){var z=G[U];S.push(te.stringifyWebGlConstant(z,"getParameter"))}return S},t}(Ct),Xn=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),qn=function(x){function t(w){var S=x.call(this,w)||this;return S.currentState=S.startCapture(!0,S.quickCapture,S.fullCapture),S}return Xn(t,x),Object.defineProperty(t.prototype,"stateName",{get:function(){return"Capabilities"},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:te.RENDERER},{constant:te.VENDOR},{constant:te.VERSION},{constant:te.SHADING_LANGUAGE_VERSION},{constant:te.SAMPLES},{constant:te.SAMPLE_BUFFERS},{constant:te.RED_BITS},{constant:te.GREEN_BITS},{constant:te.BLUE_BITS},{constant:te.ALPHA_BITS},{constant:te.DEPTH_BITS},{constant:te.STENCIL_BITS},{constant:te.SUBPIXEL_BITS},{constant:te.LINE_WIDTH},{constant:te.ALIASED_LINE_WIDTH_RANGE},{constant:te.ALIASED_POINT_SIZE_RANGE},{constant:te.IMPLEMENTATION_COLOR_READ_FORMAT,returnType:20},{constant:te.IMPLEMENTATION_COLOR_READ_TYPE,returnType:20},{constant:te.MAX_COMBINED_TEXTURE_IMAGE_UNITS},{constant:te.MAX_CUBE_MAP_TEXTURE_SIZE},{constant:te.MAX_FRAGMENT_UNIFORM_VECTORS},{constant:te.MAX_RENDERBUFFER_SIZE},{constant:te.MAX_TEXTURE_IMAGE_UNITS},{constant:te.MAX_TEXTURE_SIZE},{constant:te.MAX_VARYING_VECTORS},{constant:te.MAX_VERTEX_ATTRIBS},{constant:te.MAX_VERTEX_TEXTURE_IMAGE_UNITS},{constant:te.MAX_VERTEX_UNIFORM_VECTORS},{constant:te.MAX_VIEWPORT_DIMS},{constant:te.MAX_TEXTURE_MAX_ANISOTROPY_EXT},{constant:te.MAX_COLOR_ATTACHMENTS_WEBGL},{constant:te.MAX_DRAW_BUFFERS_WEBGL}]},t.prototype.getWebgl2Parameters=function(){return[{constant:te.MAX_3D_TEXTURE_SIZE},{constant:te.MAX_ARRAY_TEXTURE_LAYERS},{constant:te.MAX_CLIENT_WAIT_TIMEOUT_WEBGL},{constant:te.MAX_COLOR_ATTACHMENTS},{constant:te.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS},{constant:te.MAX_COMBINED_UNIFORM_BLOCKS},{constant:te.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS},{constant:te.MAX_DRAW_BUFFERS},{constant:te.MAX_ELEMENT_INDEX},{constant:te.MAX_ELEMENTS_INDICES},{constant:te.MAX_ELEMENTS_VERTICES},{constant:te.MAX_FRAGMENT_INPUT_COMPONENTS},{constant:te.MAX_FRAGMENT_UNIFORM_BLOCKS},{constant:te.MAX_FRAGMENT_UNIFORM_COMPONENTS},{constant:te.MAX_PROGRAM_TEXEL_OFFSET},{constant:te.MAX_SAMPLES},{constant:te.MAX_SERVER_WAIT_TIMEOUT},{constant:te.MAX_TEXTURE_LOD_BIAS},{constant:te.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS},{constant:te.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS},{constant:te.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS},{constant:te.MAX_UNIFORM_BLOCK_SIZE},{constant:te.MAX_UNIFORM_BUFFER_BINDINGS},{constant:te.MAX_VARYING_COMPONENTS},{constant:te.MAX_VERTEX_OUTPUT_COMPONENTS},{constant:te.MAX_VERTEX_UNIFORM_BLOCKS},{constant:te.MAX_VERTEX_UNIFORM_COMPONENTS},{constant:te.MIN_PROGRAM_TEXEL_OFFSET}]},t}(Ct),Kn=function(){function e(x){this.options=x,this.commandId=0,this.context=x.context,this.version=x.version,this.onMaxCommand=new X,this.capturing=!1,this.globalCapturing=!0,this.contextInformation={context:this.context,contextVersion:this.version,toggleCapture:this.toggleGlobalCapturing.bind(this),tagWebGlObject:this.tagWebGlObject.bind(this),extensions:{}},this.commandSpies={},this.stateSpy=new Sn(this.contextInformation),this.recorderSpy=new kn(this.contextInformation),this.webGlObjectSpy=new Gn(this.contextInformation),this.analyser=new Ae(this.contextInformation),this.initStaticCapture(),x.recordAlways&&this.spy()}return e.prototype.spy=function(){this.spyContext(this.context);var x=this.contextInformation.extensions;for(var w in x)x.hasOwnProperty(w)&&this.spyContext(x[w])},e.prototype.unSpy=function(){for(var x in this.commandSpies)this.commandSpies.hasOwnProperty(x)&&this.commandSpies[x].unSpy()},e.prototype.startCapture=function(x,w,S){void 0===x&&(x=0),void 0===w&&(w=!1),void 0===S&&(S=!1);var U=q.now;this.maxCommands=x,this.options.recordAlways||this.spy(),this.capturing=!0,this.commandId=0,this.currentCapture={canvas:this.canvasCapture,context:this.contextCapture,commands:[],initState:{},endState:{},startTime:U,listenCommandsStartTime:0,listenCommandsEndTime:0,endTime:0,analyses:[],frameMemory:{},memory:{}},this.currentCapture.canvas.width=this.context.canvas.width,this.currentCapture.canvas.height=this.context.canvas.height,this.currentCapture.canvas.clientWidth=this.context.canvas.clientWidth||this.context.canvas.width,this.currentCapture.canvas.clientHeight=this.context.canvas.clientHeight||this.context.canvas.height,this.stateSpy.startCapture(this.currentCapture,w,S),this.recorderSpy.startCapture(),this.currentCapture.listenCommandsStartTime=q.now},e.prototype.stopCapture=function(){var x=q.now;return this.options.recordAlways||this.unSpy(),this.capturing=!1,this.stateSpy.stopCapture(this.currentCapture),this.recorderSpy.stopCapture(),this.currentCapture.listenCommandsEndTime=x,this.currentCapture.endTime=q.now,this.recorderSpy.appendRecordedInformation(this.currentCapture),this.analyser.appendAnalyses(this.currentCapture),this.currentCapture},e.prototype.isCapturing=function(){return this.globalCapturing&&this.capturing},e.prototype.setMarker=function(x){this.marker=x},e.prototype.clearMarker=function(){this.marker=null},e.prototype.getNextCommandCaptureId=function(){return this.commandId++},e.prototype.onCommand=function(x,w){if(this.globalCapturing&&(this.webGlObjectSpy.tagWebGlObjects(w),this.recorderSpy.recordCommand(w),this.isCapturing())){var S=x.createCapture(w,this.getNextCommandCaptureId(),this.marker);this.stateSpy.captureState(S),this.currentCapture.commands.push(S),S.endTime=q.now,this.maxCommands>0&&this.currentCapture.commands.length===this.maxCommands&&this.onMaxCommand.trigger(this)}},e.prototype.spyContext=function(x){var w=[];for(var S in x)S&&w.push(S);for(var U=0;U<w.length;U++)if(S=w[U],!~e.unSpyableMembers.indexOf(S))try{"number"!=typeof x[S]&&this.spyFunction(S,x)}catch(x){j.error("Cant Spy member: "+S),j.error(x)}},e.prototype.initStaticCapture=function(){var x=new zn(this.contextInformation),w=x.getExtensions();for(var S in w)w.hasOwnProperty(S)&&(this.contextInformation.extensions[S]=w[S]);var U=new qn(this.contextInformation),G=new $n(this.contextInformation);this.contextCapture={version:this.version,contextAttributes:this.context.getContextAttributes(),capabilities:U.getStateData(),extensions:x.getStateData(),compressedTextures:G.getStateData()},this.canvasCapture={width:this.context.canvas.width,height:this.context.canvas.height,clientWidth:this.context.canvas.clientWidth||this.context.canvas.width,clientHeight:this.context.canvas.clientHeight||this.context.canvas.height,browserAgent:navigator?navigator.userAgent:""}},e.prototype.spyFunction=function(x,w){if(0!==x.indexOf("__SPECTOR_Origin_")){if(!this.commandSpies[x]){var S=function(x,w){var S={};for(var U in x)x.hasOwnProperty(U)&&(S[U]=x[U]);for(var U in w)S.hasOwnProperty(U)||(S[U]=w[U]);return S}(this.contextInformation,{spiedCommandName:x,spiedCommandRunningContext:w,callback:this.onCommand.bind(this)});this.commandSpies[x]=new wt(S)}this.commandSpies[x].spy()}},e.prototype.toggleGlobalCapturing=function(x){this.globalCapturing=x},e.prototype.tagWebGlObject=function(x){return this.webGlObjectSpy.tagWebGlObject(x)},e.unSpyableMembers=["canvas","drawingBufferWidth","drawingBufferHeight","glp"],e}(),Zn=function(){function e(x){this.spiedWindow=x||window,this.lastFrame=0,this.speedRatio=1,this.willPlayNextFrame=!1,this.onFrameStart=new X,this.onFrameEnd=new X,this.onError=new X,this.lastSixtyFramesDuration=[],this.lastSixtyFramesCurrentIndex=0,this.lastSixtyFramesPreviousStart=0;for(var w=0;w<e.fpsWindowSize;w++)this.lastSixtyFramesDuration[w]=0;this.init()}return e.prototype.playNextFrame=function(){this.willPlayNextFrame=!0},e.prototype.changeSpeedRatio=function(x){this.speedRatio=x},e.prototype.getFps=function(){for(var x=0,w=0;w<e.fpsWindowSize;w++)x+=this.lastSixtyFramesDuration[w];return 0===x?0:6e4/x},e.prototype.init=function(){for(var x=this,w=0,S=e.requestAnimationFrameFunctions;w<S.length;w++){var U=S[w];this.spyRequestAnimationFrame(U,this.spiedWindow)}for(var G=0,z=e.setTimerFunctions;G<z.length;G++)U=z[G],this.spySetTimer(U);this.spiedWindow.VRDisplay&&this.spiedWindow.addEventListener("vrdisplaypresentchange",(function(w){x.spyRequestAnimationFrame("requestAnimationFrame",w.display)}))},e.prototype.spyRequestAnimationFrame=function(x,w){var S=this;Me.storeOriginFunction(w,x),w[x]=function(){var U=arguments[0],G=S.getCallback(S,U,(function(){S.spiedWindow[x](U)}));return Me.executeOriginFunction(w,x,[G])}},e.prototype.spySetTimer=function(x){var w=this,S=this.spiedWindow,U="setTimeout"===x;Me.storeOriginFunction(S,x),S[x]=function(){var G=arguments[0],z=arguments[1],H=Array.prototype.slice.call(arguments);return e.setTimerCommonValues.indexOf(z)>-1&&(H[0]=w.getCallback(w,G,U?function(){S[x](G)}:null)),Me.executeOriginFunction(S,x,H)}},e.prototype.getCallback=function(x,w,S){return void 0===S&&(S=null),function(){var U=q.now;if(x.lastFrame=++x.lastFrame%x.speedRatio,x.willPlayNextFrame||x.speedRatio&&!x.lastFrame){x.onFrameStart.trigger(x);try{w.apply(x.spiedWindow,arguments)}catch(w){x.onError.trigger(w)}x.lastSixtyFramesCurrentIndex=(x.lastSixtyFramesCurrentIndex+1)%e.fpsWindowSize,x.lastSixtyFramesDuration[x.lastSixtyFramesCurrentIndex]=U-x.lastSixtyFramesPreviousStart,x.onFrameEnd.trigger(x),x.willPlayNextFrame=!1}else S&&S();x.lastSixtyFramesPreviousStart=U}},e.requestAnimationFrameFunctions=["requestAnimationFrame","msRequestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame"],e.setTimerFunctions=["setTimeout","setInterval"],e.setTimerCommonValues=[0,15,16,33,32,40],e.fpsWindowSize=60,e}(),Jn=function(){function e(x){this.canvas=x,this.onContextRequested=new X,this.init()}return e.prototype.init=function(){var x=this,t=function(){var w=this instanceof HTMLCanvasElement?HTMLCanvasElement:OffscreenCanvas,S=x.canvas?Me.executeOriginFunction(this,"getContext",arguments):Me.executePrototypeOriginFunction(this,w,"getContext",arguments);if(arguments.length>0&&"2d"===arguments[0])return S;if(S){var U=Array.prototype.slice.call(arguments),G="webgl2"===U[0]||"experimental-webgl2"===U[0]?2:1;x.onContextRequested.trigger({context:S,contextVersion:G})}return S};this.canvas?(Me.storeOriginFunction(this.canvas,"getContext"),this.canvas.getContext=t):(Me.storePrototypeOriginFunction(HTMLCanvasElement,"getContext"),HTMLCanvasElement.prototype.getContext=t,"undefined"!=typeof OffscreenCanvas&&(Me.storePrototypeOriginFunction(OffscreenCanvas,"getContext"),OffscreenCanvas.prototype.getContext=t))},e}(),er=(S(11),function(){function e(x,w){this.placeHolder=x,this.stateStore=w}return e.prototype.compose=function(x){var w=this.stateStore.getStatesToProcess(),S=!1;for(var U in w)if(w.hasOwnProperty(U)){var G=w[U],z=this.stateStore.getLastOperation(G),H=this.stateStore.getComponentInstance(G),j=this.stateStore.getData(G);H.render(j,G,z),S=!0}if(S){var X=this.stateStore.getLastOperation(x);this.composeInContainer(this.placeHolder,Number.MAX_VALUE,x,X)}},e.prototype.composeChildren=function(x,w){if(w)for(var S=this.stateStore.getChildrenIds(x),U=0,G=0;G<S.length;G++){var z=S[G],H=this.stateStore.getLastOperation(z);this.composeInContainer(w,U,z,H),50!==H&&U++}},e.prototype.composeInContainer=function(x,w,S,U){var G=this.stateStore.getComponentInstance(S).composeInContainer(x,w,U);this.composeChildren(S,G)},e}()),tr=function(){function e(){this.store={},this.idGenerator=0,this.pendingOperation={}}return e.prototype.getLastOperation=function(x){return this.store[x].lastOperation},e.prototype.getData=function(x){return this.store[x].data},e.prototype.getComponentInstance=function(x){return this.store[x].componentInstance},e.prototype.getParentId=function(x){return this.store[x].parent?this.store[x].parent.id:-1},e.prototype.getChildrenIds=function(x){for(var w=[],S=0,U=this.store[x].children;S<U.length;S++){var G=U[S];w.push(G.id)}return w},e.prototype.hasChildren=function(x){return this.store[x].children.length>0},e.prototype.add=function(x,w){var S=this.getNewId();return this.pendingOperation[S]=S,this.store[S]={data:x,id:S,parent:null,children:[],componentInstance:w,lastOperation:20},S},e.prototype.update=function(x,w){this.store[x],this.pendingOperation[x]=x,this.store[x].data=w,this.store[x].lastOperation=40},e.prototype.addChild=function(x,w,S){var U=this.store[x],G=this.add(w,S);this.pendingOperation[G]=G;var z=this.store[G];return z.parent=U,U.children.push(z),G},e.prototype.insertChildAt=function(x,w,S,U){var G=this.store[x],z=this.add(S,U);this.pendingOperation[z]=z;var H=this.store[z];return H.parent=G,w>=G.children.length?G.children.push(H):w>=0?G.children.splice(w,0,H):G.children.unshift(H),z},e.prototype.removeChildById=function(x,w){for(var S=this.store[x],U=S.children.length-1;U>=0;U--)if(S.children[U].id===w){this.removeChildAt(x,U);break}},e.prototype.removeChildAt=function(x,w){var S,U=this.store[x];w>U.children.length-1?(S=U.children[U.children.length-1],U.children[U.children.length-1].parent=null,U.children.splice(U.children.length-1,1)):w>=0?(S=U.children[w],U.children[w].parent=null,U.children.splice(w,1)):(S=U.children[0],U.children[0].parent=null,U.children.splice(0,1)),S.parent=null,this.remove(S.id)},e.prototype.remove=function(x){var w=this.store[x];w.parent?(this.store[w.parent.id],this.removeChildById(w.parent.id,x)):(this.removeChildren(x),this.store[x].lastOperation=50,this.pendingOperation[x]=x)},e.prototype.removeChildren=function(x){for(var w=this.store[x];w.children.length;)this.remove(w.children[0].id)},e.prototype.getStatesToProcess=function(){return this.pendingOperation},e.prototype.flushPendingOperations=function(){for(var x in this.pendingOperation)this.pendingOperation[x]&&(50===this.store[x].lastOperation?delete this.store[x]:this.store[x].lastOperation=0);this.pendingOperation={}},e.prototype.getNewId=function(){return++this.idGenerator},e}(),nr=function(){function e(x){this.component=x}return e.prototype.render=function(x,w,S){0!==S&&(50!==S?this.domNode=this.component.render(x,w):this.removeNode())},e.prototype.composeInContainer=function(x,w,S){if(50===S)return this.removeNode(),null;var U=this.cachedCurrentChildrenContainer;if(0===S)return U;var G=this.domNode,z=G.getAttribute("childrencontainer")?G:G.querySelector("[childrenContainer]");if(z&&U)for(var H=U.children;H.length>0;)z.appendChild(H[0]);if(this.cachedCurrentChildrenContainer=z,w>=x.children.length)x.appendChild(G),this.cachedCurrentDomNode&&40===S&&(this.cachedCurrentDomNode.remove?this.cachedCurrentDomNode.remove():this.cachedCurrentDomNode.parentNode&&this.cachedCurrentDomNode.parentNode.removeChild(this.cachedCurrentDomNode));else{var j=x.children[w];x.insertBefore(G,j),40===S&&x.removeChild(j)}return this.cachedCurrentDomNode=this.domNode,z},e.prototype.removeNode=function(){this.domNode&&this.domNode.parentElement&&(this.domNode.remove?this.domNode.remove():this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode)),this.cachedCurrentDomNode&&this.cachedCurrentDomNode.parentElement&&(this.cachedCurrentDomNode.remove?this.cachedCurrentDomNode.remove():this.cachedCurrentDomNode.parentNode&&this.cachedCurrentDomNode.parentNode.removeChild(this.cachedCurrentDomNode))},e.idGenerator=0,e}(),rr=function(){function e(x){this.stateStore=new tr,this.compositor=new er(x,this.stateStore),this.willRender=!1,this.rootStateId=-1}return e.prototype.addRootState=function(x,w,S){void 0===S&&(S=!1);var U=new nr(w),G=this.stateStore.add(x,U);return this.rootStateId=G,this.setForRender(S),G},e.prototype.addChildState=function(x,w,S,U){void 0===U&&(U=!1);var G=this.insertChildState(x,w,Number.MAX_VALUE,S);return this.setForRender(U),G},e.prototype.insertChildState=function(x,w,S,U,G){void 0===G&&(G=!1);var z=new nr(U),H=this.stateStore.insertChildAt(x,S,w,z);return this.setForRender(G),H},e.prototype.updateState=function(x,w,S){void 0===S&&(S=!1),this.stateStore.update(x,w),this.setForRender(S)},e.prototype.removeState=function(x,w){void 0===w&&(w=!1),this.stateStore.remove(x),this.setForRender(w)},e.prototype.removeChildrenStates=function(x,w){void 0===w&&(w=!1),this.stateStore.removeChildren(x),this.setForRender(w)},e.prototype.getState=function(x){return this.stateStore.getData(x)},e.prototype.getGenericState=function(x){return this.getState(x)},e.prototype.getChildrenState=function(x){var w=this;return this.stateStore.getChildrenIds(x).map((function(S){return w.stateStore.getData(x)}))},e.prototype.getChildrenGenericState=function(x){return this.getChildrenState(x)},e.prototype.hasChildren=function(x){return this.stateStore.hasChildren(x)},e.prototype.updateAllChildrenState=function(x,w){for(var S=0,U=this.stateStore.getChildrenIds(x);S<U.length;S++){var G=U[S],z=this.getGenericState(G);w(z),this.updateState(G,z)}},e.prototype.updateAllChildrenGenericState=function(x,w){this.updateAllChildrenState(x,w)},e.prototype.setForRender=function(x){this.willRender||(this.willRender=!0,x?this.compose():setTimeout(this.compose.bind(this),e.REFRESHRATEINMILLISECONDS))},e.prototype.compose=function(){this.willRender=!1,this.compositor.compose(this.rootStateId),this.stateStore.flushPendingOperations()},e.REFRESHRATEINMILLISECONDS=100,e}(),ir=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),or=function(x){function t(){var w=x.call(this)||this;return w.events={},w}return ir(t,x),t.prototype.addEventListener=function(x,w,S){return void 0===S&&(S=null),this.events[x]?this.events[x].add(w,S):-1},t.prototype.removeEventListener=function(x,w){this.events[x]&&this.events[x].remove(w)},t.prototype.renderElementFromTemplate=function(x,w,S){var U=this.createFromHtml(x);return this.bindCommands(U,w,S),U},t.prototype.bindCommands=function(x,w,S){x.getAttribute("commandname")&&this.bindCommand(x,w,S);for(var U=x.querySelectorAll("[commandName]"),G=0;G<U.length;G++){var z=U[G];this.bindCommand(z,w,S)}},t.prototype.bindCommand=function(x,w,S){var U=x.getAttribute("commandname"),G=x.getAttribute("commandeventbinding")||"";0===G.length&&(G="click");var z="true"===x.getAttribute("usecapture"),H="true"===x.getAttribute("stoppropagation");this.createEvent(U),this.mapEventListener(x,G,U,w,S,z,H)},t.prototype.mapEventListener=function(x,w,S,U,G,z,H){void 0===z&&(z=!1),void 0===H&&(H=!1);var j=this;H?x.addEventListener(w,(function(x){return x.stopPropagation(),x.preventDefault(),j.triggerEvent(S,this,U,G),!1}),z):x.addEventListener(w,(function(){j.triggerEvent(S,this,U,G)}),z)},t.prototype.createEvent=function(x){if(!this.events[x]){var w=new X;this.events[x]=w}return this.events[x]},t.prototype.triggerEvent=function(x,w,S,U){this.events[x].trigger({sender:w,stateId:U,state:S})},t}(function(){function e(){this.dummyTextGeneratorElement=document.createElement("div")}return e.prototype.createFromHtml=function(x){var w=document.createElement("div");return w.innerHTML=x,w.firstElementChild},e.prototype.htmlTemplate=function(x){for(var w=this,S=[],U=1;U<arguments.length;U++)S[U-1]=arguments[U];var G=x.raw,z="";return S.forEach((function(x,S){var U=G[S];Array.isArray(x)&&(x=x.join("")),U&&U.length>0&&"$"===U[U.length-1]?U=U.slice(0,-1):x=w.htmlEscape(x),z+=U,z+=x})),z+=G[G.length-1]},e.prototype.htmlEscape=function(x){return null==x||0===x.length?x:(this.dummyTextGeneratorElement.innerText=x,this.dummyTextGeneratorElement.innerHTML)},e}()),ar=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),un=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},sr=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return ar(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(ae||(ae=un(['<div>\n            <div childrenContainer="true" class="captureMenuComponent ','">\n            </div>\n            <div class="captureMenuLogComponent ','">\n                <span class="','">',"<span>\n            </div>\n        </div>"],['<div>\n            <div childrenContainer="true" class="captureMenuComponent ','">\n            </div>\n            <div class="captureMenuLogComponent ','">\n                <span class="','">',"<span>\n            </div>\n        </div>"])),x?"active":"",x.logVisible?"active":"",x.logLevel===G.error?"error":"",x.logText);return this.renderElementFromTemplate(S,x,w)},t}(or),lr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),cr=function(x){function t(){var w=x.call(this)||this;return w.onCanvasSelected=w.createEvent("onCanvasSelected"),w}return lr(t,x),t.prototype.render=function(x,w){var S=document.createElement("li"),U=document.createElement("span");return U.innerText="Id: "+x.id+" - Size: "+x.width+"*"+x.height,S.appendChild(U),this.mapEventListener(S,"click","onCanvasSelected",x,w),S},t}(or),ur=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),fn=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},hr=function(x){function t(){var w=x.call(this)||this;return w.onCaptureRequested=w.createEvent("onCaptureRequested"),w.onPlayRequested=w.createEvent("onPlayRequested"),w.onPauseRequested=w.createEvent("onPauseRequested"),w.onPlayNextFrameRequested=w.createEvent("onPlayNextFrameRequested"),w}return ur(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(se||(se=fn(['\n        <div class="captureMenuActionsComponent">\n            <div commandName="onCaptureRequested">\n            </div>\n            $',"\n        </div>"],['\n        <div class="captureMenuActionsComponent">\n            <div commandName="onCaptureRequested">\n            </div>\n            $',"\n        </div>"])),x?'<div commandName="onPauseRequested">\n                </div>':'<div commandName="onPlayRequested">\n                </div>\n                <div commandName="onPlayNextFrameRequested">\n                </div>');return this.renderElementFromTemplate(S,x,w)},t}(or),dr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),_n=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},pr=function(x){function t(){var w=x.call(this)||this;return w.onCanvasSelection=w.createEvent("onCanvasSelection"),w}return dr(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(le||(le=_n(['\n        <div class="canvasListComponent">\n            <span commandName="onCanvasSelection">\n                ','\n            </span>\n            <ul childrenContainer="true" style="','"></ul>\n        </div>'],['\n        <div class="canvasListComponent">\n            <span commandName="onCanvasSelection">\n                ','\n            </span>\n            <ul childrenContainer="true" style="','"></ul>\n        </div>'])),x.currentCanvasInformation?x.currentCanvasInformation.id+" ("+x.currentCanvasInformation.width+"*"+x.currentCanvasInformation.height+")":"Choose Canvas...",x.showList?"display:block;visibility:visible":"display:none;visibility:hidden");return this.renderElementFromTemplate(S,x,w)},t}(or),fr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),mr=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return fr(t,x),t.prototype.render=function(x,w){var S=document.createElement("span");return S.className="fpsCounterComponent",S.innerText=x.toFixed(2)+" Fps",S},t}(or),gr=function(){function e(x){var w=this;void 0===x&&(x={}),this.options=x,this.rootPlaceHolder=x.rootPlaceHolder||document.body,this.mvx=new rr(this.rootPlaceHolder),this.isTrackingCanvas=!1,this.onCanvasSelected=new X,this.onCaptureRequested=new X,this.onPauseRequested=new X,this.onPlayRequested=new X,this.onPlayNextFrameRequested=new X,this.captureMenuComponent=new sr,this.canvasListComponent=new pr,this.canvasListItemComponent=new cr,this.actionsComponent=new hr,this.fpsCounterComponent=new mr,this.rootStateId=this.mvx.addRootState({visible:!0,logLevel:G.info,logText:e.SelectCanvasHelpText,logVisible:!this.options.hideLog},this.captureMenuComponent),this.canvasListStateId=this.mvx.addChildState(this.rootStateId,{currentCanvasInformation:null,showList:!1},this.canvasListComponent),this.actionsStateId=this.mvx.addChildState(this.rootStateId,!0,this.actionsComponent),this.fpsStateId=this.mvx.addChildState(this.rootStateId,0,this.fpsCounterComponent),this.actionsComponent.onCaptureRequested.add((function(){var x=w.getSelectedCanvasInformation();x&&w.updateMenuStateLog(G.info,e.PleaseWaitHelpText,!0),setTimeout((function(){w.onCaptureRequested.trigger(x)}),200)})),this.actionsComponent.onPauseRequested.add((function(){w.onPauseRequested.trigger(w.getSelectedCanvasInformation()),w.mvx.updateState(w.actionsStateId,!1)})),this.actionsComponent.onPlayRequested.add((function(){w.onPlayRequested.trigger(w.getSelectedCanvasInformation()),w.mvx.updateState(w.actionsStateId,!0)})),this.actionsComponent.onPlayNextFrameRequested.add((function(){w.onPlayNextFrameRequested.trigger(w.getSelectedCanvasInformation())})),this.canvasListComponent.onCanvasSelection.add((function(x){w.mvx.updateState(w.canvasListStateId,{currentCanvasInformation:null,showList:!x.state.showList}),w.updateMenuStateLog(G.info,e.SelectCanvasHelpText),w.onCanvasSelected.trigger(null),w.isTrackingCanvas&&w.trackPageCanvases(),x.state.showList?w.showMenuStateLog():w.hideMenuStateLog()})),this.canvasListItemComponent.onCanvasSelected.add((function(x){w.mvx.updateState(w.canvasListStateId,{currentCanvasInformation:x.state,showList:!1}),w.onCanvasSelected.trigger(x.state),w.updateMenuStateLog(G.info,e.ActionsHelpText),w.showMenuStateLog()}))}return e.prototype.getSelectedCanvasInformation=function(){return this.mvx.getGenericState(this.canvasListStateId).currentCanvasInformation},e.prototype.trackPageCanvases=function(){if(this.isTrackingCanvas=!0,document.body){var x=document.body.querySelectorAll("canvas");this.updateCanvasesList(x)}},e.prototype.updateCanvasesList=function(x){this.updateCanvasesListInformationInternal(x,(function(x){return{id:x.id,width:x.width,height:x.height,ref:x}}))},e.prototype.updateCanvasesListInformation=function(x){this.updateCanvasesListInformationInternal(x,(function(x){return{id:x.id,width:x.width,height:x.height,ref:x.ref}}))},e.prototype.display=function(){this.updateMenuStateVisibility(!0)},e.prototype.hide=function(){this.updateMenuStateVisibility(!1)},e.prototype.captureComplete=function(x){x?this.updateMenuStateLog(G.error,x):this.updateMenuStateLog(G.info,e.ActionsHelpText)},e.prototype.setFPS=function(x){this.mvx.updateState(this.fpsStateId,x)},e.prototype.updateCanvasesListInformationInternal=function(x,w){this.mvx.removeChildrenStates(this.canvasListStateId);for(var S=[],U=0;U<x.length;U++){var z=w(x[U]);S.push(z),this.mvx.addChildState(this.canvasListStateId,z,this.canvasListItemComponent)}var H=S.length,j=this.mvx.getGenericState(this.canvasListStateId).showList;if(!j)if(1===H){var X=S[0];this.mvx.updateState(this.canvasListStateId,{currentCanvasInformation:X,showList:j}),this.updateMenuStateLog(G.info,e.ActionsHelpText),this.onCanvasSelected.trigger(X)}else this.updateMenuStateLog(G.info,e.SelectCanvasHelpText),this.onCanvasSelected.trigger(null)},e.prototype.hideMenuStateLog=function(){var x=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:x.visible,logLevel:x.logLevel,logText:x.logText,logVisible:!1})},e.prototype.showMenuStateLog=function(){var x=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:x.visible,logLevel:x.logLevel,logText:x.logText,logVisible:!this.options.hideLog})},e.prototype.updateMenuStateLog=function(x,w,S){void 0===S&&(S=!1);var U=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:U.visible,logLevel:x,logText:w,logVisible:!this.options.hideLog},S)},e.prototype.updateMenuStateVisibility=function(x){var w=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:x,logLevel:w.logLevel,logText:w.logText,logVisible:w.logVisible})},e.SelectCanvasHelpText="Please, select a canvas in the list above.",e.ActionsHelpText="Record with the red button, you can also pause or continue playing the current scene.",e.PleaseWaitHelpText="Capturing, be patient (this can take up to 3 minutes)...",e}(),vr=(S(13),function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}()),yn=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},yr=function(x){function t(){var w=x.call(this)||this;return w.onCaptureLoaded=new X,w}return vr(t,x),t.prototype.render=function(x,w){var S=this,U=this.htmlTemplate(ce||(ce=yn(['\n        <div class="captureListComponent ','">\n            <div class="openCaptureFile">\n                <Span>Drag files here to open a previously saved capture.</span>\n            </div>\n            <ul childrenContainer="true"></ul>\n        </div>'],['\n        <div class="captureListComponent ','">\n            <div class="openCaptureFile">\n                <Span>Drag files here to open a previously saved capture.</span>\n            </div>\n            <ul childrenContainer="true"></ul>\n        </div>'])),x?"active":""),G=this.renderElementFromTemplate(U,x,w),z=G.querySelector(".openCaptureFile");return z.addEventListener("dragenter",(function(x){return S.drag(x),!1}),!1),z.addEventListener("dragover",(function(x){return S.drag(x),!1}),!1),z.addEventListener("drop",(function(x){S.drop(x)}),!1),G},t.prototype.drag=function(x){x.stopPropagation(),x.preventDefault()},t.prototype.drop=function(x){x.stopPropagation(),x.preventDefault(),this.loadFiles(x)},t.prototype.loadFiles=function(x){var w=this,S=null;if(x&&x.dataTransfer&&x.dataTransfer.files&&(S=x.dataTransfer.files),x&&x.target&&x.target.files&&(S=x.target.files),S&&S.length>0)for(var i=function(x){var U=S[x].name.toLowerCase().split(".").pop();if(S[x].type,"json"===U){var G=S[x],z=new FileReader;z.onerror=function(x){j.error("Error while reading file: "+G.name+x)},z.onload=function(x){try{var S=JSON.parse(x.target.result);w.onCaptureLoaded.trigger(S)}catch(x){j.error("Error while reading file: "+G.name+x)}},z.readAsText(G)}},U=0;U<S.length;U++)i(U)},t}(or),_r=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),br=function(x){function t(){var w=x.call(this)||this;return w.onCaptureSelected=w.createEvent("onCaptureSelected"),w.onSaveRequested=w.createEvent("onSaveRequested"),w}return _r(t,x),t.prototype.render=function(x,w){var S=document.createElement("li");if(x.active&&(S.className="active"),x.capture.endState.VisualState.Attachments)for(var U=0,G=x.capture.endState.VisualState.Attachments;U<G.length;U++){var z=G[U],H=document.createElement("img");H.src=encodeURI(z.src),S.appendChild(H)}else{var j=document.createElement("span");j.innerText=x.capture.endState.VisualState.FrameBufferStatus,S.appendChild(j)}var X=document.createElement("span");X.innerText=new Date(x.capture.startTime).toTimeString().split(" ")[0],S.appendChild(X);var q=document.createElement("a");return q.href="#",q.className="captureListItemSave",this.mapEventListener(q,"click","onSaveRequested",x,w,!1,!0),X.appendChild(q),this.mapEventListener(S,"click","onCaptureSelected",x,w),S},t}(or),xr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Ln=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},Er=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return xr(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(ue||(ue=Ln(['\n        <div class="visualStateListComponent">\n            <ul childrenContainer="true"></ul>\n        </div>'],['\n        <div class="visualStateListComponent">\n            <ul childrenContainer="true"></ul>\n        </div>'])));return this.renderElementFromTemplate(S,x,w)},t}(or),wr=function(){function e(){}return e.scrollIntoView=function(x){for(var w=x.getBoundingClientRect(),S=x.parentElement;S&&S.clientHeight===S.offsetHeight;)S=S.parentElement;if(S){var U=S.getBoundingClientRect();w.top<U.top?x.scrollIntoView(!0):w.bottom>U.bottom&&x.scrollIntoView(!1)}},e}(),Sr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Tr=function(x){function t(){var w=x.call(this)||this;return w.onVisualStateSelected=w.createEvent("onVisualStateSelected"),w}return Sr(t,x),t.prototype.render=function(x,w){var S=document.createElement("li");if(x.active&&(S.className="active",setTimeout((function(){wr.scrollIntoView(S)}),1)),x.VisualState.Attachments)for(var U=0,G=x.VisualState.Attachments;U<G.length;U++){var z=G[U];if(z.src){var H=document.createElement("img");if(H.src=encodeURI(z.src),S.appendChild(H),x.VisualState.Attachments.length>1){var j=document.createElement("span");j.innerText=z.attachmentName,S.appendChild(j)}if(z.textureLayer){var X=document.createElement("span");X.innerText="Layer: "+z.textureLayer,S.appendChild(X)}if(z.textureCubeMapFace){var q=document.createElement("span");q.innerText=z.textureCubeMapFace,S.appendChild(q)}}}else{var K=document.createElement("span");K.innerText=x.VisualState.FrameBufferStatus,S.appendChild(K)}var Y=document.createElement("span");return Y.innerText=x.VisualState.FrameBuffer?"Frame buffer: "+x.VisualState.FrameBuffer.__SPECTOR_Object_TAG.id:"Canvas frame buffer",S.appendChild(Y),this.mapEventListener(S,"click","onVisualStateSelected",x,w),S},t}(or),Cr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Pn=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},Ar=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Cr(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(he||(he=Pn(['\n        <div class="commandListComponent">\n            <ul childrenContainer="true"></ul>\n        </div>'],['\n        <div class="commandListComponent">\n            <ul childrenContainer="true"></ul>\n        </div>'])));return this.renderElementFromTemplate(S,x,w)},t}(or),Mr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Rr=function(x){function t(){var w=x.call(this)||this;return w.onCommandSelected=w.createEvent("onCommandSelected"),w.onVertexSelected=w.createEvent("onVertexSelected"),w.onFragmentSelected=w.createEvent("onFragmentSelected"),w}return Mr(t,x),t.prototype.render=function(x,w){var S=document.createElement("li"),U="unknown";switch(x.capture.status){case 50:U="deprecated";break;case 10:U="unused";break;case 20:U="disabled";break;case 30:U="redundant";break;case 40:U="valid"}if(x.capture.VisualState&&(S.className=" drawCall"),x.active&&(S.className=" active",setTimeout((function(){wr.scrollIntoView(S)}),1)),x.capture.marker){var G=document.createElement("span");G.className=U+" marker important",G.innerText=x.capture.marker+" ",G.style.fontWeight="1000",S.appendChild(G)}var z=document.createElement("span"),H=x.capture.text;if(H=H.replace(x.capture.name,'<span class=" '+U+' important">'+x.capture.name+"</span>"),z.innerHTML=H,S.appendChild(z),x.capture.VisualState&&"clear"!==x.capture.name)try{var j=x.capture.DrawCall.shaders[0],X=x.capture.DrawCall.shaders[1],q=document.createElement("a");q.innerText=j.name,q.href="#",S.appendChild(q),this.mapEventListener(q,"click","onVertexSelected",x,w);var K=document.createElement("a");K.innerText=X.name,K.href="#",S.appendChild(K),this.mapEventListener(K,"click","onFragmentSelected",x,w)}catch(x){}return this.mapEventListener(S,"click","onCommandSelected",x,w),S},t}(or),Lr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Un=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},Or=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Lr(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(de||(de=Un(['\n        <div class="commandDetailComponent" childrenContainer="true">\n        </div>'],['\n        <div class="commandDetailComponent" childrenContainer="true">\n        </div>'])));return this.renderElementFromTemplate(S,x,w)},t}(or),Pr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Vn=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},Ir=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Pr(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(pe||(pe=Vn(['\n        <div class="jsonContentComponent" childrenContainer="true">\n        </div>'],['\n        <div class="jsonContentComponent" childrenContainer="true">\n        </div>'])));return this.renderElementFromTemplate(S,x,w)},t}(or),Nr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),jn=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},Fr=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Nr(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(fe||(fe=jn(['\n        <div class="jsonGroupComponent">\n            <div class="jsonGroupComponentTitle">','</div>\n            <ul childrenContainer="true"></ul>\n        </div>'],['\n        <div class="jsonGroupComponent">\n            <div class="jsonGroupComponentTitle">','</div>\n            <ul childrenContainer="true"></ul>\n        </div>'])),x?x.replace(/([A-Z])/g," $1").trim():"");return this.renderElementFromTemplate(S,x,w)},t}(or),Br=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Yn=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},Dr=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Br(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(me||(me=Yn(['\n            <li><span class="jsonItemComponentKey">',': </span><span class="jsonItemComponentValue">',"</span><li>"],['\n            <li><span class="jsonItemComponentKey">',': </span><span class="jsonItemComponentValue">',"</span><li>"])),x.key,x.value);return this.renderElementFromTemplate(S,x,w)},t}(or),kr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Qn=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},Ur=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return kr(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(ge||(ge=Qn(['\n        <li class="jsonItemImageHolder"><div class="jsonItemImage"><img src="','"/><span>',"</span></div></li>"],['\n        <li class="jsonItemImageHolder"><div class="jsonItemImage"><img src="','"/><span>',"</span></div></li>"])),x.value,x.key);return this.renderElementFromTemplate(S,x,w)},t}(or),Gr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),ti=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},Vr=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Gr(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(ve||(ve=ti(['\n            <li><span class="jsonItemComponentKey">',': </span>\n                <span class="jsonItemComponentValue">',' (<a href="','" target="_blank" class="jsonSourceItemComponentOpen">Open help page</a>)\n                </span>\n            <li>'],['\n            <li><span class="jsonItemComponentKey">',': </span>\n                <span class="jsonItemComponentValue">',' (<a href="','" target="_blank" class="jsonSourceItemComponentOpen">Open help page</a>)\n                </span>\n            <li>'])),x.key,x.value,x.help);return this.renderElementFromTemplate(S,x,w)},t}(or),Wr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),zr=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Wr(t,x),t.prototype.render=function(x,w){var S=document.createElement("div");if(S.className="jsonVisualStateItemComponent",x.Attachments)for(var U=0,G=x.Attachments;U<G.length;U++){var z=G[U];if(z.src){var H=document.createElement("img");if(H.src=encodeURI(z.src),S.appendChild(H),x.Attachments.length>1){var j=document.createElement("span");j.innerText=z.attachmentName,S.appendChild(j)}}}else{var X=document.createElement("span");X.innerText=x.FrameBufferStatus,S.appendChild(X)}var q=document.createElement("span");return q.innerText=x.FrameBuffer?x.FrameBuffer.__SPECTOR_Object_TAG.displayText:"Canvas frame buffer",S.appendChild(q),S},t}(or),Hr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),si=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},$r=function(x){function t(){var w=x.call(this)||this;return w.onCapturesClicked=w.createEvent("onCapturesClicked"),w.onCommandsClicked=w.createEvent("onCommandsClicked"),w.onInformationClicked=w.createEvent("onInformationClicked"),w.onInitStateClicked=w.createEvent("onInitStateClicked"),w.onEndStateClicked=w.createEvent("onEndStateClicked"),w.onCloseClicked=w.createEvent("onCloseClicked"),w.onSearchTextChanged=w.createEvent("onSearchTextChanged"),w.onSearchTextCleared=w.createEvent("onSearchTextCleared"),w}return Hr(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(ye||(ye=si(['<ul class="resultViewMenuComponent">\n                <li class="resultViewMenuOpen resultViewMenuSmall"><a href="#" role="button">Menu</a></li>\n\n                <li class="searchContainer">\n                    <input type="text" placeHolder="Search..." value="','" commandName="onSearchTextChanged" commandEventBinding="change">\n                    <a class="clearSearch" stoppropagation="true" CommandName="onSearchTextCleared">X</a>\n                </li>\n                <li><a class="',' href="#" role="button" commandName="onCapturesClicked">Captures</a></li>\n                <li><a class="',' href="#" role="button" commandName="onInformationClicked">Information</a></li>\n                <li><a class="',' href="#" role="button" commandName="onInitStateClicked">Init State</a></li>\n                <li>\n                    <a class="',' href="#" role="button" commandName="onCommandsClicked">\n                        Commands','\n                    </a>\n                </li>\n                <li><a class="',' href="#" role="button" commandName="onEndStateClicked">End State</a></li>\n                <li><a role="button" commandName="onCloseClicked" stoppropagation="true">Close</a></li>\n            </ul>'],['<ul class="resultViewMenuComponent">\n                <li class="resultViewMenuOpen resultViewMenuSmall"><a href="#" role="button">Menu</a></li>\n\n                <li class="searchContainer">\n                    <input type="text" placeHolder="Search..." value="','" commandName="onSearchTextChanged" commandEventBinding="change">\n                    <a class="clearSearch" stoppropagation="true" CommandName="onSearchTextCleared">X</a>\n                </li>\n                <li><a class="',' href="#" role="button" commandName="onCapturesClicked">Captures</a></li>\n                <li><a class="',' href="#" role="button" commandName="onInformationClicked">Information</a></li>\n                <li><a class="',' href="#" role="button" commandName="onInitStateClicked">Init State</a></li>\n                <li>\n                    <a class="',' href="#" role="button" commandName="onCommandsClicked">\n                        Commands','\n                    </a>\n                </li>\n                <li><a class="',' href="#" role="button" commandName="onEndStateClicked">End State</a></li>\n                <li><a role="button" commandName="onCloseClicked" stoppropagation="true">Close</a></li>\n            </ul>'])),x.searchText,0===x.status?"active":"",10===x.status?"active":"",20===x.status?"active":"",40===x.status?"active":"",x.commandCount>0?" ("+x.commandCount+")":"",30===x.status?"active":""),U=this.renderElementFromTemplate(S,x,w),G=U.querySelector(".resultViewMenuOpen"),z=U.querySelectorAll("li:not(.resultViewMenuSmall)");return G.addEventListener("click",(function(x){if("true"===G.getAttribute("open")){G.setAttribute("open","false");for(var w=0;w<z.length;w++)z[w].style.display="none",z[w].style.visibility="hidden"}else for(G.setAttribute("open","true"),w=0;w<z.length;w++)z[w].style.display="block",z[w].style.visibility="visible"})),U},t}(or),jr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),Xr=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return jr(t,x),t.prototype.render=function(x,w){return this.renderElementFromTemplate('<div childrenContainer="true" class="resultViewContentComponent"></div>',x,w)},t}(or),qr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),hi=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},Kr=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return qr(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(_e||(_e=hi(['\n            <div childrenContainer="true" class="resultViewComponent ','">\n            </div>'],['\n            <div childrenContainer="true" class="resultViewComponent ','">\n            </div>'])),x?"active":"");return this.renderElementFromTemplate(S,x,w)},t}(or),Yr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),mi=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},Zr=function(x){function t(){var w=x.call(this)||this;return w.onTranslatedVertexSourceClicked=w.createEvent("onTranslatedVertexSourceClicked"),w.onTranslatedFragmentSourceClicked=w.createEvent("onTranslatedFragmentSourceClicked"),w.onVertexSourceClicked=w.createEvent("onVertexSourceClicked"),w.onFragmentSourceClicked=w.createEvent("onFragmentSourceClicked"),w.onSourceCodeCloseClicked=w.createEvent("onSourceCodeCloseClicked"),w.onSourceCodeChanged=w.createEvent("onSourceCodeChanged"),w}return Yr(t,x),t.prototype.showError=function(x){if(this.editor){var w=[];if(x=x||"")for(var S=/^.*ERROR:\W([0-9]+):([0-9]+):(.*)$/gm,U=S.exec(x);null!=U;)w.push({row:+U[2]-1,column:U[1],text:U[3]||"Error",type:"error"}),U=S.exec(x);this.editor.getSession().setAnnotations(w)}},t.prototype.render=function(x,w){var S,U=this,G=x.fragment?x.sourceFragment:x.sourceVertex;S=x.translated?x.fragment?x.translatedSourceFragment:x.translatedSourceVertex:G?this._indentIfdef(this._beautify(G)):"";var z=this.htmlTemplate(we||(we=mi(['\n        <div class="sourceCodeComponentContainer">\n            <div class="sourceCodeMenuComponentContainer">\n                <ul class="sourceCodeMenuComponent">\n                    $',"\n                    $",'\n                    <li><a class="','" href="#" role="button" commandName="onVertexSourceClicked">Vertex</a></li>\n                    <li><a class="','" href="#" role="button" commandName="onFragmentSourceClicked">Fragment</a></li>\n                    <li><a href="#" role="button" commandName="onSourceCodeCloseClicked">Close</a></li>\n                </ul>\n            </div>\n            $',"\n        </div>"],['\n        <div class="sourceCodeComponentContainer">\n            <div class="sourceCodeMenuComponentContainer">\n                <ul class="sourceCodeMenuComponent">\n                    $',"\n                    $",'\n                    <li><a class="','" href="#" role="button" commandName="onVertexSourceClicked">Vertex</a></li>\n                    <li><a class="','" href="#" role="button" commandName="onFragmentSourceClicked">Fragment</a></li>\n                    <li><a href="#" role="button" commandName="onSourceCodeCloseClicked">Close</a></li>\n                </ul>\n            </div>\n            $',"\n        </div>"])),x.translatedSourceVertex?this.htmlTemplate(be||(be=mi(['<li><a class="','" href="#" role="button" commandName="onTranslatedVertexSourceClicked">Translated Vertex</a></li>'],['<li><a class="','" href="#" role="button" commandName="onTranslatedVertexSourceClicked">Translated Vertex</a></li>'])),!x.fragment&&x.translated?"active":""):"",x.translatedSourceFragment?this.htmlTemplate(xe||(xe=mi(['<li><a class="','" href="#" role="button" commandName="onTranslatedFragmentSourceClicked">Translated Fragment</a></li>'],['<li><a class="','" href="#" role="button" commandName="onTranslatedFragmentSourceClicked">Translated Fragment</a></li>'])),x.fragment&&x.translated?"active":""):"",x.fragment||x.translated?"":"active",x.fragment&&!x.translated?"active":"",this.htmlTemplate(Ee||(Ee=mi(['<div class="sourceCodeComponent">',"</div>"],['<div class="sourceCodeComponent">',"</div>"])),S)),H=this.renderElementFromTemplate(z.replace(/<br>/g,"\n"),x,w);this.editor=ace.edit(H.querySelector(".sourceCodeComponent")),this.editor.setTheme("ace/theme/monokai"),this.editor.getSession().setMode("ace/mode/glsl"),this.editor.setShowPrintMargin(!1);var j=-1;return this.editor.setReadOnly(!x.editable&&!x.translated),this.editor.getSession().on("change",(function(S){-1!==j&&clearTimeout(j),j=setTimeout((function(){U._triggerCompilation(U.editor,x,H,w)}),1500)})),H},t.prototype._triggerCompilation=function(x,w,S,U){w.fragment?w.sourceFragment=x.getValue():w.sourceVertex=x.getValue(),this.triggerEvent("onSourceCodeChanged",S,w,U)},t.prototype._beautify=function(x,w){void 0===w&&(w=0),x=x.trim(),x=this._adaptComments(x);for(var S,U=this._getBracket(x),G=U.firstIteration,z=U.lastIteration,H="",j=0;j<w;j++)H+="    ";if(-1===G)S=x=(x=(x=(x=(x=(x=(x=(x=H+x).replace(/;(?![^\(]*\))\s*(\/\/.*)?/g,(function(x){return x.trim()+"\n"}))).replace(/\s*([*+-/=><\s]*=)\s*/g,(function(x){return" "+x.trim()+" "}))).replace(/\s*(,)\s*/g,(function(x){return x.trim()+" "}))).replace(/\n[ \t]+/g,"\n")).replace(/\n/g,"\n"+H)).replace(/\s+$/g,"")).replace(/\n+$/g,"");else{var X=x.substr(0,G),q=x.substr(z+1,x.length),K=x.substr(G+1,z-G-1).trim(),Y=this._beautify(K,w+1);S=(S=(S=this._beautify(X,w)+" {\n"+Y+"\n"+H+"}\n"+this._beautify(q,w)).replace(/\s*\n+\s*;/g,";")).replace(/#endif[\t \f\v]*{/g,"\n {")}return(S=(S=S.replace(t.semicolonReplacementKeyRegex,";")).replace(t.openCurlyReplacementKeyRegex,"{")).replace(t.closeCurlyReplacementKeyRegex,"}")},t.prototype._adaptComments=function(x){for(var w=!1,S=!1,U=0;U<x.length;U++){var G=x[U];"/"===G?"*"===x[U-1]?S=!1:"*"===x[U+1]?w||(S=!0,U++):"/"===x[U+1]&&(S||(w=!0,U++)):"\n"===G?w=!1:";"===G?(w||S)&&(x=x.substr(0,U)+t.semicolonReplacementKey+x.substr(U+1)):"{"===G?(w||S)&&(x=x.substr(0,U)+t.openCurlyReplacementKey+x.substr(U+1)):"}"===G&&(w||S)&&(x=x.substr(0,U)+t.closeCurlyReplacementKey+x.substr(U+1))}return x},t.prototype._getBracket=function(x,w){void 0===w&&(w=-1);for(var S=x.indexOf("{",w),U=1,G=S,z=0,H=0,j=x.substr(S+1).split("");H<j.length;H++){var X=j[H];if(G++,"{"===X&&U++,"}"===X&&U--,0===U){z=G;break}}return S>-1&&0===z?this._getBracket(x,S+1):{firstIteration:S,lastIteration:z}},t.prototype._indentIfdef=function(x){for(var w=0,S=x.split("\n"),U=0;U<S.length;U++){var G=S[U];-1!==G.indexOf("#endif")&&w--,-1!==G.indexOf("#else")&&w--;for(var z="",H=0;H<w;H++)z+="    ";S[U]=z+G,-1===G.indexOf("#if")&&-1===G.indexOf("#else")||w++}return S.join("\n")},t.semicolonReplacementKey="[[[semicolonReplacementKey]]]",t.semicolonReplacementKeyRegex=new RegExp("\\[\\[\\[semicolonReplacementKey\\]\\]\\]","g"),t.openCurlyReplacementKey="[[[openCurlyReplacementKey]]]",t.openCurlyReplacementKeyRegex=new RegExp("\\[\\[\\[openCurlyReplacementKey\\]\\]\\]","g"),t.closeCurlyReplacementKey="[[[closeCurlyReplacementKey]]]",t.closeCurlyReplacementKeyRegex=new RegExp("\\[\\[\\[closeCurlyReplacementKey\\]\\]\\]","g"),t}(or),Jr=function(){var e=function(x,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)w.hasOwnProperty(S)&&(x[S]=w[S])})(x,w)};return function(x,w){function i(){this.constructor=x}e(x,w),x.prototype=null===w?Object.create(w):(i.prototype=w.prototype,new i)}}(),vi=function(x,w){return Object.defineProperty?Object.defineProperty(x,"raw",{value:w}):x.raw=w,x},Qr=function(x){function t(){return null!==x&&x.apply(this,arguments)||this}return Jr(t,x),t.prototype.render=function(x,w){var S=this.htmlTemplate(Se||(Se=vi(['\n                <div childrenContainer="true" class="','"></div>'],['\n                <div childrenContainer="true" class="','"></div>'])),x?"informationColumnLeftComponent":"informationColumnRightComponent");return this.renderElementFromTemplate(S,x,w)},t}(or),ei=function(){function e(){}return e.getMDNLink=function(x){var w=e.WebGL2Functions[x];if(w)return e.WebGL2RootUrl+w;var S=e.WebGLFunctions[x];return S?e.WebGLRootUrl+S:e.WebGLRootUrl+x},e.WebGL2RootUrl="https://developer.mozilla.org/en-US/docs/Web/API/WebGL2RenderingContext/",e.WebGLRootUrl="https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/",e.WebGL2Functions={beginQuery:"beginQuery",beginTransformFeedback:"beginTransformFeedback",bindBufferBase:"bindBufferBase",bindBufferRange:"bindBufferRange",bindSampler:"bindSampler",bindTransformFeedback:"bindTransformFeedback",bindVertexArray:"bindVertexArray",blitFramebuffer:"blitFramebuffer",clearBufferfv:"clearBuffer",clearBufferiv:"clearBuffer",clearBufferuiv:"clearBuffer",clearBufferfi:"clearBuffer",clientWaitSync:"clientWaitSync",compressedTexImage3D:"compressedTexImage3D",compressedTexSubImage3D:"compressedTexSubImage3D",copyBufferSubData:"copyBufferSubData",copyTexSubImage3D:"copyTexSubImage3D",createQuery:"createQuery",createSampler:"createSampler",createTransformFeedback:"createTransformFeedback",createVertexArray:"createVertexArray",deleteQuery:"deleteQuery",deleteSampler:"deleteSampler",deleteSync:"deleteSync",deleteTransformFeedback:"deleteTransformFeedback",deleteVertexArray:"deleteVertexArray",drawArraysInstanced:"drawArraysInstanced",drawBuffers:"drawBuffers",drawElementsInstanced:"drawElementsInstanced",drawRangeElements:"drawRangeElements",endQuery:"endQuery",endTransformFeedback:"endTransformFeedback",fenceSync:"fenceSync",framebufferTextureLayer:"framebufferTextureLayer",getActiveUniformBlockName:"getActiveUniformBlockName",getActiveUniformBlockParameter:"getActiveUniformBlockParameter",getActiveUniforms:"getActiveUniforms",getBufferSubData:"getBufferSubData",getFragDataLocation:"getFragDataLocation",getIndexedParameter:"getIndexedParameter",getInternalformatParameter:"getInternalformatParameter",getQuery:"getQuery",getQueryParameter:"getQueryParameter",getSamplerParameter:"getSamplerParameter",getSyncParameter:"getSyncParameter",getTransformFeedbackVarying:"getTransformFeedbackVarying",getUniformBlockIndex:"getUniformBlockIndex",getUniformIndices:"getUniformIndices",invalidateFramebuffer:"invalidateFramebuffer",invalidateSubFramebuffer:"invalidateSubFramebuffer",isQuery:"isQuery",isSampler:"isSampler",isSync:"isSync",isTransformFeedback:"isTransformFeedback",isVertexArray:"isVertexArray",pauseTransformFeedback:"pauseTransformFeedback",readBuffer:"readBuffer",renderbufferStorageMultisample:"renderbufferStorageMultisample",resumeTransformFeedback:"resumeTransformFeedback",samplerParameteri:"samplerParameter",samplerParameterf:"samplerParameter",texImage3D:"texImage3D",texStorage2D:"texStorage2D",texStorage3D:"texStorage3D",texSubImage3D:"texSubImage3D",transformFeedbackVaryings:"transformFeedbackVaryings",uniform1ui:"uniform",uniform2ui:"uniform",uniform3ui:"uniform",uniform4ui:"uniform",uniform1fv:"uniform",uniform2fv:"uniform",uniform3fv:"uniform",uniform4fv:"uniform",uniform1iv:"uniform",uniform2iv:"uniform",uniform3iv:"uniform",uniform4iv:"uniform",uniform1uiv:"uniform",uniform2uiv:"uniform",uniform3uiv:"uniform",uniform4uiv:"uniform",uniformBlockBinding:"uniformBlockBinding",uniformMatrix2fv:"uniformMatrix",uniformMatrix3x2fv:"uniformMatrix",uniformMatrix4x2fv:"uniformMatrix",uniformMatrix2x3fv:"uniformMatrix",uniformMatrix3fv:"uniformMatrix",uniformMatrix4x3fv:"uniformMatrix",uniformMatrix2x4fv:"uniformMatrix",uniformMatrix3x4fv:"uniformMatrix",uniformMatrix4fv:"uniformMatrix",vertexAttribDivisor:"vertexAttribDivisor",vertexAttribI4i:"vertexAttribI",vertexAttribI4ui:"vertexAttribI",vertexAttribI4iv:"vertexAttribI",vertexAttribI4uiv:"vertexAttribI",vertexAttribIPointer:"vertexAttribIPointer",waitSync:"waitSync"},e.WebGLFunctions={uniform1f:"uniform",uniform1fv:"uniform",uniform1i:"uniform",uniform1iv:"uniform",uniform2f:"uniform",uniform2fv:"uniform",uniform2i:"uniform",uniform2iv:"uniform",uniform3f:"uniform",uniform3i:"uniform",uniform3iv:"uniform",uniform4f:"uniform",uniform4fv:"uniform",uniform4i:"uniform",uniform4iv:"uniform",uniformMatrix2fv:"uniformMatrix",uniformMatrix3fv:"uniformMatrix",uniformMatrix4fv:"uniformMatrix",vertexAttrib1f:"vertexAttrib",vertexAttrib2f:"vertexAttrib",vertexAttrib3f:"vertexAttrib",vertexAttrib4f:"vertexAttrib",vertexAttrib1fv:"vertexAttrib",vertexAttrib2fv:"vertexAttrib",vertexAttrib3fv:"vertexAttrib",vertexAttrib4fv:"vertexAttrib"},e}(),ni=function(){function e(x){var w=this;void 0===x&&(x=null),this.rootPlaceHolder=x,this.onSourceCodeChanged=new X,this.rootPlaceHolder=this.rootPlaceHolder||document.body,this.mvx=new rr(this.rootPlaceHolder),this.searchText="",this.currentCommandId=-1,this.visible=!1,this.commandCount=0,this.commandListStateId=-1,this.commandDetailStateId=-1,this.currentCaptureStateId=-1,this.currentCommandStateId=-1,this.currentVisualStateId=-1,this.visualStateListStateId=-1,this.initVisualStateId=-1,this.sourceCodeComponentStateId=-1,this.captureListComponent=new yr,this.captureListItemComponent=new br,this.visualStateListComponent=new Er,this.visualStateListItemComponent=new Tr,this.commandListComponent=new Ar,this.commandListItemComponent=new Rr,this.commandDetailComponent=new Or,this.jsonContentComponent=new Ir,this.jsonGroupComponent=new Fr,this.jsonItemComponent=new Dr,this.jsonImageItemComponent=new Ur,this.jsonHelpItemComponent=new Vr,this.jsonVisualStateItemComponent=new zr,this.resultViewMenuComponent=new $r,this.resultViewContentComponent=new Xr,this.resultViewComponent=new Kr,this.sourceCodeComponent=new Zr,this.informationColumnComponent=new Qr,this.rootStateId=this.mvx.addRootState(null,this.resultViewComponent),this.menuStateId=this.mvx.addChildState(this.rootStateId,null,this.resultViewMenuComponent),this.contentStateId=this.mvx.addChildState(this.rootStateId,null,this.resultViewContentComponent),this.captureListStateId=this.mvx.addChildState(this.rootStateId,!1,this.captureListComponent),this.initKeyboardEvents(),this.initMenuComponent(),this.captureListComponent.onCaptureLoaded.add((function(x){w.addCapture(x)})),this.captureListItemComponent.onCaptureSelected.add((function(x){w.selectCapture(x.stateId)})),this.captureListItemComponent.onSaveRequested.add((function(x){w.saveCapture(x.state.capture)})),this.visualStateListItemComponent.onVisualStateSelected.add((function(x){w.selectVisualState(x.stateId)})),this.commandListItemComponent.onCommandSelected.add((function(x){w.selectCommand(x.stateId)})),this.commandListItemComponent.onVertexSelected.add((function(x){w.selectCommand(x.stateId),w.openShader(!1)})),this.commandListItemComponent.onFragmentSelected.add((function(x){w.selectCommand(x.stateId),w.openShader(!0)})),this.sourceCodeComponent.onSourceCodeCloseClicked.add((function(){w.displayCurrentCapture()})),this.sourceCodeComponent.onTranslatedVertexSourceClicked.add((function(x){var S=w.mvx.getGenericState(w.sourceCodeComponentStateId);S.fragment=!1,S.translated=!0,w.mvx.updateState(w.sourceCodeComponentStateId,S)})),this.sourceCodeComponent.onTranslatedFragmentSourceClicked.add((function(x){var S=w.mvx.getGenericState(w.sourceCodeComponentStateId);S.fragment=!0,S.translated=!0,w.mvx.updateState(w.sourceCodeComponentStateId,S)})),this.sourceCodeComponent.onVertexSourceClicked.add((function(x){var S=w.mvx.getGenericState(w.sourceCodeComponentStateId);S.fragment=!1,S.translated=!1,w.mvx.updateState(w.sourceCodeComponentStateId,S)})),this.sourceCodeComponent.onFragmentSourceClicked.add((function(x){var S=w.mvx.getGenericState(w.sourceCodeComponentStateId);S.fragment=!0,S.translated=!1,w.mvx.updateState(w.sourceCodeComponentStateId,S)})),this.sourceCodeComponent.onSourceCodeChanged.add((function(x){w.onSourceCodeChanged.trigger({programId:x.state.programId,sourceFragment:x.state.sourceFragment,sourceVertex:x.state.sourceVertex,translatedSourceFragment:x.state.translatedSourceFragment,translatedSourceVertex:x.state.translatedSourceVertex})})),this.updateViewState()}return e.prototype.saveCapture=function(x){var w=JSON.stringify(x,null,4),S=new Blob([w],{type:"octet/stream"}),U="capture "+new Date(x.startTime).toTimeString().split(" ")[0]+".json";if(navigator.msSaveBlob)navigator.msSaveBlob(S,U);else{var G=document.createElement("a"),z=window.URL.createObjectURL(S);G.setAttribute("href",z),G.setAttribute("download",U),G.click()}},e.prototype.selectCapture=function(x){this.currentCommandId=-1,this.currentCaptureStateId=x,this.displayCurrentCapture()},e.prototype.selectCommand=function(x){this.currentCommandStateId=x,this.currentVisualStateId=this.displayCurrentCommand(),this.displayCurrentVisualState()},e.prototype.selectVisualState=function(x){this.currentVisualStateId=x,this.currentCommandStateId=this.displayCurrentVisualState(),this.displayCurrentCommand()},e.prototype.display=function(){this.visible=!0,this.updateViewState()},e.prototype.hide=function(){this.visible=!1,this.updateViewState()},e.prototype.addCapture=function(x){var w=this.mvx.insertChildState(this.captureListStateId,{capture:x,active:!1},0,this.captureListItemComponent);return this.selectCapture(w),w},e.prototype.showSourceCodeError=function(x){this.sourceCodeComponent.showError(x)},e.prototype.initKeyboardEvents=function(){var x=this;this.rootPlaceHolder.addEventListener("keydown",(function(w){40===x.mvx.getGenericState(x.menuStateId).status&&(38===w.keyCode?(w.preventDefault(),w.stopPropagation(),x.selectPreviousCommand()):40===w.keyCode?(w.preventDefault(),w.stopPropagation(),x.selectNextCommand()):33===w.keyCode?(w.preventDefault(),w.stopPropagation(),x.selectPreviousVisualState()):34===w.keyCode&&(w.preventDefault(),w.stopPropagation(),x.selectNextVisualState()))}))},e.prototype.openShader=function(x){this.mvx.removeChildrenStates(this.contentStateId);var w=this.mvx.getGenericState(this.currentCommandStateId);this.sourceCodeComponentStateId=this.mvx.addChildState(this.contentStateId,{programId:w.capture.DrawCall.programStatus.program.__SPECTOR_Object_TAG.id,nameVertex:w.capture.DrawCall.shaders[0].name,nameFragment:w.capture.DrawCall.shaders[1].name,sourceVertex:w.capture.DrawCall.shaders[0].source,sourceFragment:w.capture.DrawCall.shaders[1].source,translatedSourceVertex:w.capture.DrawCall.shaders[0].translatedSource,translatedSourceFragment:w.capture.DrawCall.shaders[1].translatedSource,fragment:x,translated:!1,editable:w.capture.DrawCall.programStatus.RECOMPILABLE},this.sourceCodeComponent),this.commandDetailStateId=this.mvx.addChildState(this.contentStateId,null,this.commandDetailComponent),this.displayCurrentCommandDetail(w)},e.prototype.selectPreviousCommand=function(){var x=this.mvx.getGenericState(this.currentCommandStateId);x.previousCommandStateId<0||this.selectCommand(x.previousCommandStateId)},e.prototype.selectNextCommand=function(){var x=this.mvx.getGenericState(this.currentCommandStateId);x.nextCommandStateId<0||this.selectCommand(x.nextCommandStateId)},e.prototype.selectPreviousVisualState=function(){var x=this.mvx.getGenericState(this.currentVisualStateId);x.previousVisualStateId<0||this.selectVisualState(x.previousVisualStateId)},e.prototype.selectNextVisualState=function(){var x=this.mvx.getGenericState(this.currentVisualStateId);x.nextVisualStateId<0||this.selectVisualState(x.nextVisualStateId)},e.prototype.initMenuComponent=function(){var x=this;this.mvx.updateState(this.menuStateId,{status:0,searchText:this.searchText,commandCount:0}),this.resultViewMenuComponent.onCloseClicked.add((function(w){x.hide()})),this.resultViewMenuComponent.onCapturesClicked.add((function(w){x.displayCaptures()})),this.resultViewMenuComponent.onCommandsClicked.add((function(w){x.displayCurrentCapture()})),this.resultViewMenuComponent.onInformationClicked.add((function(w){x.displayInformation()})),this.resultViewMenuComponent.onInitStateClicked.add((function(w){x.displayInitState()})),this.resultViewMenuComponent.onEndStateClicked.add((function(w){x.displayEndState()})),this.resultViewMenuComponent.onSearchTextChanged.add((function(w){x.search(w.sender.value)})),this.resultViewMenuComponent.onSearchTextCleared.add((function(w){x.mvx.updateState(x.menuStateId,{status:w.state.status,searchText:"",commandCount:w.state.commandCount}),x.search("")}))},e.prototype.onCaptureRelatedAction=function(x){var w=this.mvx.getGenericState(this.currentCaptureStateId);return this.commandCount=w.capture.commands.length,this.mvx.removeChildrenStates(this.contentStateId),this.mvx.updateState(this.menuStateId,{status:x,searchText:this.searchText,commandCount:this.commandCount}),this.mvx.getGenericState(this.captureListStateId)&&this.mvx.updateState(this.captureListStateId,!1),w.capture},e.prototype.displayCaptures=function(){this.mvx.updateState(this.menuStateId,{status:0,searchText:this.searchText,commandCount:this.commandCount}),this.mvx.updateState(this.captureListStateId,!0)},e.prototype.displayInformation=function(){var x=this.onCaptureRelatedAction(10),w=this.mvx.addChildState(this.contentStateId,!0,this.informationColumnComponent),S=this.mvx.addChildState(this.contentStateId,!1,this.informationColumnComponent),U=this.mvx.addChildState(w,null,this.jsonContentComponent);this.displayJSONGroup(U,"Canvas",x.canvas),this.displayJSONGroup(U,"Context",x.context);for(var G=this.mvx.addChildState(S,null,this.jsonContentComponent),z=0,H=x.analyses;z<H.length;z++){var j=H[z];this.displayJSONGroup(G,j.analyserName,j)}this.displayJSONGroup(G,"Frame Memory Changes",x.frameMemory),this.displayJSONGroup(G,"Total Memory (seconds since application start: bytes)",x.memory)},e.prototype.displayJSON=function(x,w){for(var S in w.VisualState&&this.mvx.addChildState(x,w.VisualState,this.jsonVisualStateItemComponent),w)if("VisualState"!==S&&"analyserName"!==S&&"source"!==S&&"translatedSource"!==S){var U=w[S];if("visual"===S)for(var G in U)U.hasOwnProperty(G)&&U[G]&&this.mvx.addChildState(x,{key:G,value:U[G]},this.jsonImageItemComponent);else{var z=this.getJSONAsString(x,S,U);if(null==z)continue;if(this.toFilter(S)&&this.toFilter(U))continue;this.mvx.addChildState(x,{key:S,value:z},this.jsonItemComponent)}U&&U.__SPECTOR_Metadata&&this.displayJSONGroup(x,"Metadata",U.__SPECTOR_Metadata)}},e.prototype.getJSONAsString=function(x,w,S){if(null===S)return"null";if(void 0===S)return"undefined";if("number"==typeof S)return Math.floor(S)===S?S.toFixed(0):S.toFixed(4);if("string"==typeof S)return S;if("boolean"==typeof S)return S?"true":"false";if(0===S.length)return"Empty Array";if(S.length){for(var U=[],G=0;G<S.length;G++){var z=this.getJSONAsString(x,w+"("+G.toFixed(0)+")",S[G]);null!==z&&U.push(z)}return 0===U.length?null:U.join(", ")}return S.help?(this.mvx.addChildState(x,{key:w,value:S.name,help:S.help},this.jsonHelpItemComponent),null):S.__SPECTOR_Object_TAG?S.__SPECTOR_Object_TAG.displayText:S.displayText?S.displayText:("object"==typeof S&&this.displayJSONGroup(x,w,S),null)},e.prototype.displayJSONGroup=function(x,w,S){if(S){var U=this.mvx.addChildState(x,w,this.jsonGroupComponent);this.displayJSON(U,S),this.mvx.hasChildren(U)||this.mvx.removeState(U)}},e.prototype.displayInitState=function(){var x=this.onCaptureRelatedAction(20),w=this.mvx.addChildState(this.contentStateId,null,this.jsonContentComponent);this.displayJSON(w,x.initState)},e.prototype.displayEndState=function(){var x=this.onCaptureRelatedAction(30),w=this.mvx.addChildState(this.contentStateId,null,this.jsonContentComponent);this.displayJSON(w,x.endState)},e.prototype.displayCurrentCapture=function(){var x=this.onCaptureRelatedAction(40);this.mvx.updateAllChildrenGenericState(this.captureListStateId,(function(x){return x.active=!1,x})),this.mvx.updateState(this.currentCaptureStateId,{capture:x,active:!0}),this.createVisualStates(x),this.commandListStateId=this.mvx.addChildState(this.contentStateId,null,this.commandListComponent),this.commandDetailStateId=this.mvx.addChildState(this.contentStateId,null,this.commandDetailComponent),this.createCommands(x)},e.prototype.displayCurrentCommand=function(){if(40!==this.mvx.getGenericState(this.menuStateId).status)return-1;var x=this.mvx.getGenericState(this.currentCommandStateId),w=x.capture;return this.currentCommandId=w.id,this.mvx.updateAllChildrenGenericState(this.commandListStateId,(function(x){return x.active=!1,x})),this.mvx.updateState(this.currentCommandStateId,{capture:w,visualStateId:x.visualStateId,previousCommandStateId:x.previousCommandStateId,nextCommandStateId:x.nextCommandStateId,active:!0}),this.displayCurrentCommandDetail(x)},e.prototype.displayCurrentCommandDetail=function(x){var w=x.capture;this.mvx.removeChildrenStates(this.commandDetailStateId);var S=this.mvx.getGenericState(x.visualStateId);this.mvx.addChildState(this.commandDetailStateId,S.VisualState,this.jsonVisualStateItemComponent);var U="Unknown";switch(w.status){case 50:U="Deprecated";break;case 10:U="Unused";break;case 20:U="Disabled";break;case 30:U="Redundant";break;case 40:U="Valid"}var G=ei.getMDNLink(w.name);for(var z in w.result?this.displayJSONGroup(this.commandDetailStateId,"Global",{name:{help:G,name:w.name},duration:w.commandEndTime-w.startTime,result:w.result,status:U}):this.displayJSONGroup(this.commandDetailStateId,"Global",{name:{help:G,name:w.name},duration:w.commandEndTime-w.startTime,status:U}),w)"VisualState"!==z&&"result"!==z&&"object"==typeof w[z]&&this.displayJSONGroup(this.commandDetailStateId,z,w[z]);return x.visualStateId},e.prototype.displayCurrentVisualState=function(){if(40!==this.mvx.getGenericState(this.menuStateId).status)return null;var x=this.mvx.getGenericState(this.currentVisualStateId);return x.commandStateId===Number.MIN_VALUE?this.displayInitState():x.commandStateId===Number.MAX_VALUE&&this.displayEndState(),this.mvx.updateAllChildrenGenericState(this.visualStateListStateId,(function(x){return x.active=!1,x})),x.active=!0,this.mvx.updateState(this.currentVisualStateId,x),x.commandStateId},e.prototype.createVisualStates=function(x){this.visualStateListStateId=this.mvx.addChildState(this.contentStateId,null,this.visualStateListComponent),this.mvx.removeChildrenStates(this.visualStateListStateId),this.initVisualStateId=this.mvx.addChildState(this.visualStateListStateId,{VisualState:x.initState.VisualState,time:x.startTime,commandStateId:Number.MIN_VALUE,active:!1},this.visualStateListItemComponent)},e.prototype.createCommands=function(x){this.mvx.removeChildrenStates(this.commandListStateId);for(var w=this.initVisualStateId,S=!1,U=null,G=-1,z=null,H=-1,j=0;j<x.commands.length;j++){var X=x.commands[j];if(!this.toFilter(X.marker)||!this.toFilter(X.name)||X.id===this.currentCommandId){var q={capture:X,previousCommandStateId:G,nextCommandStateId:-1,visualStateId:void 0,active:!1},K=this.mvx.addChildState(this.commandListStateId,q,this.commandListItemComponent);if(U&&((U=this.mvx.getGenericState(G)).nextCommandStateId=K,this.mvx.updateState(G,U)),G=K,U=q,X.VisualState){var Y={VisualState:X.VisualState,time:X.endTime,commandStateId:K,active:!1,previousVisualStateId:H,nextVisualStateId:-1};w=this.mvx.addChildState(this.visualStateListStateId,Y,this.visualStateListItemComponent),z&&((z=this.mvx.getGenericState(H)).nextVisualStateId=w,this.mvx.updateState(H,z)),z=Y,H=w,S=!0}else if(!S){var Z=this.mvx.getGenericState(this.initVisualStateId);Z.commandStateId=K,Z.previousVisualStateId=-1,Z.nextVisualStateId=-1,this.mvx.updateState(this.initVisualStateId,Z),z=Z,H=w,S=!0}q.visualStateId=w,this.mvx.updateState(K,q),(-1===this.currentCommandId&&0===j||this.currentCommandId===X.id)&&(this.currentCommandStateId=K,this.displayCurrentCommand(),this.currentVisualStateId=w,this.displayCurrentVisualState())}}},e.prototype.updateViewState=function(){this.mvx.updateState(this.rootStateId,this.visible)},e.prototype.toFilter=function(x){return x=(x+="").toLowerCase(),!!(this.searchText&&this.searchText.length>2&&-1===x.indexOf(this.searchText.toLowerCase()))},e.prototype.search=function(x){switch(this.searchText=x,this.mvx.getGenericState(this.menuStateId).status){case 0:case 40:this.displayCurrentCapture();break;case 30:this.displayEndState();break;case 10:this.displayInformation();break;case 20:this.displayInitState()}this.searchText=""},e}(),ri={CaptureMenu:gr,ResultView:ni},ii=function(){function e(){this.noFrameTimeout=-1,this.captureNextFrames=0,this.captureNextCommands=0,this.quickCapture=!1,this.fullCapture=!1,this.retry=0,this.contexts=[],this.timeSpy=new Zn,this.onCaptureStarted=new X,this.onCapture=new X,this.onError=new X,this.timeSpy.onFrameStart.add(this.onFrameStart,this),this.timeSpy.onFrameEnd.add(this.onFrameEnd,this),this.timeSpy.onError.add(this.onErrorInternal,this)}return e.getFirstAvailable3dContext=function(x){return this.tryGetContextFromHelperField(x)||this.tryGetContextFromCanvas(x,"webgl")||this.tryGetContextFromCanvas(x,"experimental-webgl")||this.tryGetContextFromCanvas(x,"webgl2")||this.tryGetContextFromCanvas(x,"experimental-webgl2")},e.tryGetContextFromHelperField=function(x){var w=x instanceof HTMLCanvasElement?x.getAttribute("__spector_context_type"):x.__spector_context_type;if(w)return this.tryGetContextFromCanvas(x,w)},e.tryGetContextFromCanvas=function(x,w){var S;try{S=x.getContext(w)}catch(x){}return S},e.prototype.displayUI=function(x){var w=this;void 0===x&&(x=!1),this.captureMenu||(this.getCaptureUI(),this.captureMenu.onPauseRequested.add(this.pause,this),this.captureMenu.onPlayRequested.add(this.play,this),this.captureMenu.onPlayNextFrameRequested.add(this.playNextFrame,this),this.captureMenu.onCaptureRequested.add((function(x){x&&w.captureCanvas(x.ref)}),this),setInterval((function(){w.captureMenu.setFPS(w.getFps())}),1e3),x||this.captureMenu.trackPageCanvases(),this.captureMenu.display()),this.resultView||(this.getResultUI(),this.onCapture.add((function(x){w.resultView.display(),w.resultView.addCapture(x)})))},e.prototype.getResultUI=function(){var x=this;return this.resultView||(this.resultView=new ni,this.resultView.onSourceCodeChanged.add((function(w){x.rebuildProgramFromProgramId(w.programId,w.sourceVertex,w.sourceFragment,(function(S){x.referenceNewProgram(w.programId,S),x.resultView.showSourceCodeError(null)}),(function(w){x.resultView.showSourceCodeError(w)}))}))),this.resultView},e.prototype.getCaptureUI=function(){return this.captureMenu||(this.captureMenu=new gr),this.captureMenu},e.prototype.rebuildProgramFromProgramId=function(x,w,S,U,G){var z=sn.getFromGlobalStore(x);this.rebuildProgram(z,w,S,U,G)},e.prototype.rebuildProgram=function(x,w,S,U,G){z.rebuildProgram(x,w,S,U,G)},e.prototype.referenceNewProgram=function(x,w){sn.updateInGlobalStore(x,w)},e.prototype.pause=function(){this.timeSpy.changeSpeedRatio(0)},e.prototype.play=function(){this.timeSpy.changeSpeedRatio(1)},e.prototype.playNextFrame=function(){this.timeSpy.playNextFrame()},e.prototype.drawOnlyEveryXFrame=function(x){this.timeSpy.changeSpeedRatio(x)},e.prototype.getFps=function(){return this.timeSpy.getFps()},e.prototype.spyCanvases=function(){this.canvasSpy?this.onErrorInternal("Already spying canvas."):(this.canvasSpy=new Jn,this.canvasSpy.onContextRequested.add(this.spyContext,this))},e.prototype.spyCanvas=function(x){this.canvasSpy?this.onErrorInternal("Already spying canvas."):(this.canvasSpy=new Jn(x),this.canvasSpy.onContextRequested.add(this.spyContext,this))},e.prototype.getAvailableContexts=function(){return this.getAvailableContexts()},e.prototype.captureCanvas=function(x,w,S,U){void 0===w&&(w=0),void 0===S&&(S=!1),void 0===U&&(U=!1);var G=this.getAvailableContextSpyByCanvas(x);if(G)this.captureContextSpy(G,w,S,U);else{var z=e.getFirstAvailable3dContext(x);z?this.captureContext(z,w,S,U):j.error("No webgl context available on the chosen canvas.")}},e.prototype.captureContext=function(x,w,S,U){void 0===w&&(w=0),void 0===S&&(S=!1),void 0===U&&(U=!1);var G=this.getAvailableContextSpyByCanvas(x.canvas);G||((G=x.getIndexedParameter?new Kn({context:x,version:2,recordAlways:!1}):new Kn({context:x,version:1,recordAlways:!1})).onMaxCommand.add(this.stopCapture,this),this.contexts.push({canvas:G.context.canvas,contextSpy:G})),G&&this.captureContextSpy(G,w,S,U)},e.prototype.captureContextSpy=function(x,w,S,U){var G=this;void 0===w&&(w=0),void 0===S&&(S=!1),void 0===U&&(U=!1),this.quickCapture=S,this.fullCapture=U,this.capturingContext?this.onErrorInternal("Already capturing a context."):(this.retry=0,this.capturingContext=x,this.capturingContext.setMarker(this.marker),(w=Math.min(w,5e3))>0?this.captureCommands(w):this.captureFrames(1),this.noFrameTimeout=setTimeout((function(){w>0?G.stopCapture():G.capturingContext&&G.retry>1?G.onErrorInternal("No frames with gl commands detected. Try moving the camera."):G.onErrorInternal("No frames detected. Try moving the camera or implementing requestAnimationFrame.")}),1e4))},e.prototype.captureNextFrame=function(x,w,S){void 0===w&&(w=!1),void 0===S&&(S=!1),x instanceof HTMLCanvasElement||self.OffscreenCanvas&&x instanceof OffscreenCanvas?this.captureCanvas(x,0,w,S):this.captureContext(x,0,w,S)},e.prototype.startCapture=function(x,w,S,U){void 0===S&&(S=!1),void 0===U&&(U=!1),x instanceof HTMLCanvasElement||self.OffscreenCanvas&&x instanceof OffscreenCanvas?this.captureCanvas(x,w,S,U):this.captureContext(x,w,S,U)},e.prototype.stopCapture=function(){if(this.capturingContext){var x=this.capturingContext.stopCapture();if(x.commands.length>0)return this.noFrameTimeout>-1&&clearTimeout(this.noFrameTimeout),this.triggerCapture(x),this.capturingContext=void 0,this.captureNextFrames=0,this.captureNextCommands=0,x;0===this.captureNextCommands&&(this.retry++,this.captureFrames(1))}},e.prototype.setMarker=function(x){this.marker=x,this.capturingContext&&this.capturingContext.setMarker(x)},e.prototype.clearMarker=function(){this.marker=null,this.capturingContext&&this.capturingContext.clearMarker()},e.prototype.captureFrames=function(x){this.captureNextFrames=x,this.captureNextCommands=0,this.playNextFrame()},e.prototype.captureCommands=function(x){this.captureNextFrames=0,this.captureNextCommands=x,this.play(),this.capturingContext?(this.onCaptureStarted.trigger(void 0),this.capturingContext.startCapture(x,this.quickCapture,this.fullCapture)):(this.onErrorInternal("No context to capture from."),this.captureNextCommands=0)},e.prototype.spyContext=function(x){var w=this.getAvailableContextSpyByCanvas(x.context.canvas);w||((w=new Kn({context:x.context,version:x.contextVersion,recordAlways:!0})).onMaxCommand.add(this.stopCapture,this),this.contexts.push({canvas:w.context.canvas,contextSpy:w})),w.spy()},e.prototype.getAvailableContextSpyByCanvas=function(x){for(var w=0,S=this.contexts;w<S.length;w++){var U=S[w];if(U.canvas===x)return U.contextSpy}},e.prototype.onFrameStart=function(){this.captureNextCommands>0||(this.captureNextFrames>0?(this.capturingContext&&(this.onCaptureStarted.trigger(void 0),this.capturingContext.startCapture(0,this.quickCapture,this.fullCapture)),this.captureNextFrames--):this.capturingContext=void 0)},e.prototype.onFrameEnd=function(){this.captureNextCommands>0||0===this.captureNextFrames&&this.stopCapture()},e.prototype.triggerCapture=function(x){this.captureMenu&&this.captureMenu.captureComplete(null),this.onCapture.trigger(x)},e.prototype.onErrorInternal=function(x){if(j.error(x),this.noFrameTimeout>-1&&clearTimeout(this.noFrameTimeout),!this.capturingContext)throw x;this.capturingContext=void 0,this.captureNextFrames=0,this.captureNextCommands=0,this.retry=0,this.captureMenu&&this.captureMenu.captureComplete(x),this.onError.trigger(x)},e}()}])},2792:function(x){x.exports=function(){"use strict";var c=function(){var x=0,w=document.createElement("div");function e(x){return w.appendChild(x.dom),x}function t(S){for(var U=0;U<w.children.length;U++)w.children[U].style.display=U===S?"block":"none";x=S}w.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",w.addEventListener("click",(function(S){S.preventDefault(),t(++x%w.children.length)}),!1);var S=(performance||Date).now(),U=S,G=0,z=e(new c.Panel("FPS","#0ff","#002")),H=e(new c.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var j=e(new c.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:w,addPanel:e,showPanel:t,begin:function(){S=(performance||Date).now()},end:function(){G++;var x=(performance||Date).now();if(H.update(x-S,200),U+1e3<=x&&(z.update(1e3*G/(x-U),100),U=x,G=0,j)){var w=performance.memory;j.update(w.usedJSHeapSize/1048576,w.jsHeapSizeLimit/1048576)}return x},update:function(){S=this.end()},domElement:w,setMode:t}};return c.Panel=function(x,w,S){var U=1/0,G=0,z=Math.round,H=z(window.devicePixelRatio||1),j=80*H,X=48*H,q=3*H,K=2*H,Y=3*H,Z=15*H,J=74*H,Q=30*H,ee=document.createElement("canvas");ee.width=j,ee.height=X,ee.style.cssText="width:80px;height:48px";var te=ee.getContext("2d");return te.font="bold "+9*H+"px Helvetica,Arial,sans-serif",te.textBaseline="top",te.fillStyle=S,te.fillRect(0,0,j,X),te.fillStyle=w,te.fillText(x,q,K),te.fillRect(Y,Z,J,Q),te.fillStyle=S,te.globalAlpha=.9,te.fillRect(Y,Z,J,Q),{dom:ee,update:function(X,ne){U=Math.min(U,X),G=Math.max(G,X),te.fillStyle=S,te.globalAlpha=1,te.fillRect(0,0,j,Z),te.fillStyle=w,te.fillText(z(X)+" "+x+" ("+z(U)+"-"+z(G)+")",q,K),te.drawImage(ee,Y+H,Z,J-H,Q,Y,Z,J-H,Q),te.fillRect(Y+J-H,Z,H,Q),te.fillStyle=S,te.globalAlpha=.9,te.fillRect(Y+J-H,Z,H,z((1-X/ne)*Q))}}},c}()},5581:(x,w,S)=>{var U=S(5108),G=S(2212);G.OrbitControls=function(x,w){var S,z,H,j,X;void 0===w&&U.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),w===document&&U.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=x,this.domElement=w,this.enabled=!0,this.target=new G.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:G.MOUSE.ROTATE,MIDDLE:G.MOUSE.DOLLY,RIGHT:G.MOUSE.PAN},this.touches={ONE:G.TOUCH.ROTATE,TWO:G.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return te.phi},this.getAzimuthalAngle=function(){return te.theta},this.saveState=function(){q.target0.copy(q.target),q.position0.copy(q.object.position),q.zoom0=q.object.zoom},this.reset=function(){q.target.copy(q.target0),q.object.position.copy(q.position0),q.object.zoom=q.zoom0,q.object.updateProjectionMatrix(),q.dispatchEvent(K),q.update(),Q=J.NONE},this.update=(S=new G.Vector3,z=(new G.Quaternion).setFromUnitVectors(x.up,new G.Vector3(0,1,0)),H=z.clone().inverse(),j=new G.Vector3,X=new G.Quaternion,function update(){var x=q.object.position;return S.copy(x).sub(q.target),S.applyQuaternion(z),te.setFromVector3(S),q.autoRotate&&Q===J.NONE&&rotateLeft(function getAutoRotationAngle(){return 2*Math.PI/60/60*q.autoRotateSpeed}()),q.enableDamping?(te.theta+=ne.theta*q.dampingFactor,te.phi+=ne.phi*q.dampingFactor):(te.theta+=ne.theta,te.phi+=ne.phi),te.theta=Math.max(q.minAzimuthAngle,Math.min(q.maxAzimuthAngle,te.theta)),te.phi=Math.max(q.minPolarAngle,Math.min(q.maxPolarAngle,te.phi)),te.makeSafe(),te.radius*=re,te.radius=Math.max(q.minDistance,Math.min(q.maxDistance,te.radius)),!0===q.enableDamping?q.target.addScaledVector(ie,q.dampingFactor):q.target.add(ie),S.setFromSpherical(te),S.applyQuaternion(H),x.copy(q.target).add(S),q.object.lookAt(q.target),!0===q.enableDamping?(ne.theta*=1-q.dampingFactor,ne.phi*=1-q.dampingFactor,ie.multiplyScalar(1-q.dampingFactor)):(ne.set(0,0,0),ie.set(0,0,0)),re=1,!!(oe||j.distanceToSquared(q.object.position)>ee||8*(1-X.dot(q.object.quaternion))>ee)&&(q.dispatchEvent(K),j.copy(q.object.position),X.copy(q.object.quaternion),oe=!1,!0)}),this.dispose=function(){q.domElement.removeEventListener("contextmenu",onContextMenu,!1),q.domElement.removeEventListener("mousedown",onMouseDown,!1),q.domElement.removeEventListener("wheel",onMouseWheel,!1),q.domElement.removeEventListener("touchstart",onTouchStart,!1),q.domElement.removeEventListener("touchend",onTouchEnd,!1),q.domElement.removeEventListener("touchmove",onTouchMove,!1),document.removeEventListener("mousemove",onMouseMove,!1),document.removeEventListener("mouseup",onMouseUp,!1),q.domElement.removeEventListener("keydown",onKeyDown,!1)};var q=this,K={type:"change"},Y={type:"start"},Z={type:"end"},J={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Q=J.NONE,ee=1e-6,te=new G.Spherical,ne=new G.Spherical,re=1,ie=new G.Vector3,oe=!1,ae=new G.Vector2,se=new G.Vector2,le=new G.Vector2,ce=new G.Vector2,ue=new G.Vector2,he=new G.Vector2,de=new G.Vector2,pe=new G.Vector2,fe=new G.Vector2;function getZoomScale(){return Math.pow(.95,q.zoomSpeed)}function rotateLeft(x){ne.theta-=x}function rotateUp(x){ne.phi-=x}var me,ge=(me=new G.Vector3,function panLeft(x,w){me.setFromMatrixColumn(w,0),me.multiplyScalar(-x),ie.add(me)}),ve=function(){var x=new G.Vector3;return function panUp(w,S){!0===q.screenSpacePanning?x.setFromMatrixColumn(S,1):(x.setFromMatrixColumn(S,0),x.crossVectors(q.object.up,x)),x.multiplyScalar(w),ie.add(x)}}(),ye=function(){var x=new G.Vector3;return function pan(w,S){var G=q.domElement;if(q.object.isPerspectiveCamera){var z=q.object.position;x.copy(z).sub(q.target);var H=x.length();H*=Math.tan(q.object.fov/2*Math.PI/180),ge(2*w*H/G.clientHeight,q.object.matrix),ve(2*S*H/G.clientHeight,q.object.matrix)}else q.object.isOrthographicCamera?(ge(w*(q.object.right-q.object.left)/q.object.zoom/G.clientWidth,q.object.matrix),ve(S*(q.object.top-q.object.bottom)/q.object.zoom/G.clientHeight,q.object.matrix)):(U.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),q.enablePan=!1)}}();function dollyIn(x){q.object.isPerspectiveCamera?re/=x:q.object.isOrthographicCamera?(q.object.zoom=Math.max(q.minZoom,Math.min(q.maxZoom,q.object.zoom*x)),q.object.updateProjectionMatrix(),oe=!0):(U.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),q.enableZoom=!1)}function dollyOut(x){q.object.isPerspectiveCamera?re*=x:q.object.isOrthographicCamera?(q.object.zoom=Math.max(q.minZoom,Math.min(q.maxZoom,q.object.zoom/x)),q.object.updateProjectionMatrix(),oe=!0):(U.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),q.enableZoom=!1)}function handleMouseDownRotate(x){ae.set(x.clientX,x.clientY)}function handleMouseDownPan(x){ce.set(x.clientX,x.clientY)}function handleTouchStartRotate(x){if(1==x.touches.length)ae.set(x.touches[0].pageX,x.touches[0].pageY);else{var w=.5*(x.touches[0].pageX+x.touches[1].pageX),S=.5*(x.touches[0].pageY+x.touches[1].pageY);ae.set(w,S)}}function handleTouchStartPan(x){if(1==x.touches.length)ce.set(x.touches[0].pageX,x.touches[0].pageY);else{var w=.5*(x.touches[0].pageX+x.touches[1].pageX),S=.5*(x.touches[0].pageY+x.touches[1].pageY);ce.set(w,S)}}function handleTouchStartDolly(x){var w=x.touches[0].pageX-x.touches[1].pageX,S=x.touches[0].pageY-x.touches[1].pageY,U=Math.sqrt(w*w+S*S);de.set(0,U)}function handleTouchMoveRotate(x){if(1==x.touches.length)se.set(x.touches[0].pageX,x.touches[0].pageY);else{var w=.5*(x.touches[0].pageX+x.touches[1].pageX),S=.5*(x.touches[0].pageY+x.touches[1].pageY);se.set(w,S)}le.subVectors(se,ae).multiplyScalar(q.rotateSpeed);var U=q.domElement;rotateLeft(2*Math.PI*le.x/U.clientHeight),rotateUp(2*Math.PI*le.y/U.clientHeight),ae.copy(se)}function handleTouchMovePan(x){if(1==x.touches.length)ue.set(x.touches[0].pageX,x.touches[0].pageY);else{var w=.5*(x.touches[0].pageX+x.touches[1].pageX),S=.5*(x.touches[0].pageY+x.touches[1].pageY);ue.set(w,S)}he.subVectors(ue,ce).multiplyScalar(q.panSpeed),ye(he.x,he.y),ce.copy(ue)}function handleTouchMoveDolly(x){var w=x.touches[0].pageX-x.touches[1].pageX,S=x.touches[0].pageY-x.touches[1].pageY,U=Math.sqrt(w*w+S*S);pe.set(0,U),fe.set(0,Math.pow(pe.y/de.y,q.zoomSpeed)),dollyIn(fe.y),de.copy(pe)}function onMouseDown(x){if(!1!==q.enabled){switch(x.preventDefault(),q.domElement.focus?q.domElement.focus():window.focus(),x.button){case 0:switch(q.mouseButtons.LEFT){case G.MOUSE.ROTATE:if(x.ctrlKey||x.metaKey||x.shiftKey){if(!1===q.enablePan)return;handleMouseDownPan(x),Q=J.PAN}else{if(!1===q.enableRotate)return;handleMouseDownRotate(x),Q=J.ROTATE}break;case G.MOUSE.PAN:if(x.ctrlKey||x.metaKey||x.shiftKey){if(!1===q.enableRotate)return;handleMouseDownRotate(x),Q=J.ROTATE}else{if(!1===q.enablePan)return;handleMouseDownPan(x),Q=J.PAN}break;default:Q=J.NONE}break;case 1:if(q.mouseButtons.MIDDLE===G.MOUSE.DOLLY){if(!1===q.enableZoom)return;!function handleMouseDownDolly(x){de.set(x.clientX,x.clientY)}(x),Q=J.DOLLY}else Q=J.NONE;break;case 2:switch(q.mouseButtons.RIGHT){case G.MOUSE.ROTATE:if(!1===q.enableRotate)return;handleMouseDownRotate(x),Q=J.ROTATE;break;case G.MOUSE.PAN:if(!1===q.enablePan)return;handleMouseDownPan(x),Q=J.PAN;break;default:Q=J.NONE}}Q!==J.NONE&&(document.addEventListener("mousemove",onMouseMove,!1),document.addEventListener("mouseup",onMouseUp,!1),q.dispatchEvent(Y))}}function onMouseMove(x){if(!1!==q.enabled)switch(x.preventDefault(),Q){case J.ROTATE:if(!1===q.enableRotate)return;!function handleMouseMoveRotate(x){se.set(x.clientX,x.clientY),le.subVectors(se,ae).multiplyScalar(q.rotateSpeed);var w=q.domElement;rotateLeft(2*Math.PI*le.x/w.clientHeight),rotateUp(2*Math.PI*le.y/w.clientHeight),ae.copy(se),q.update()}(x);break;case J.DOLLY:if(!1===q.enableZoom)return;!function handleMouseMoveDolly(x){pe.set(x.clientX,x.clientY),fe.subVectors(pe,de),fe.y>0?dollyIn(getZoomScale()):fe.y<0&&dollyOut(getZoomScale()),de.copy(pe),q.update()}(x);break;case J.PAN:if(!1===q.enablePan)return;!function handleMouseMovePan(x){ue.set(x.clientX,x.clientY),he.subVectors(ue,ce).multiplyScalar(q.panSpeed),ye(he.x,he.y),ce.copy(ue),q.update()}(x)}}function onMouseUp(x){!1!==q.enabled&&(document.removeEventListener("mousemove",onMouseMove,!1),document.removeEventListener("mouseup",onMouseUp,!1),q.dispatchEvent(Z),Q=J.NONE)}function onMouseWheel(x){!1===q.enabled||!1===q.enableZoom||Q!==J.NONE&&Q!==J.ROTATE||(x.preventDefault(),x.stopPropagation(),q.dispatchEvent(Y),function handleMouseWheel(x){x.deltaY<0?dollyOut(getZoomScale()):x.deltaY>0&&dollyIn(getZoomScale()),q.update()}(x),q.dispatchEvent(Z))}function onKeyDown(x){!1!==q.enabled&&!1!==q.enableKeys&&!1!==q.enablePan&&function handleKeyDown(x){var w=!1;switch(x.keyCode){case q.keys.UP:ye(0,q.keyPanSpeed),w=!0;break;case q.keys.BOTTOM:ye(0,-q.keyPanSpeed),w=!0;break;case q.keys.LEFT:ye(q.keyPanSpeed,0),w=!0;break;case q.keys.RIGHT:ye(-q.keyPanSpeed,0),w=!0}w&&(x.preventDefault(),q.update())}(x)}function onTouchStart(x){if(!1!==q.enabled){switch(x.preventDefault(),x.touches.length){case 1:switch(q.touches.ONE){case G.TOUCH.ROTATE:if(!1===q.enableRotate)return;handleTouchStartRotate(x),Q=J.TOUCH_ROTATE;break;case G.TOUCH.PAN:if(!1===q.enablePan)return;handleTouchStartPan(x),Q=J.TOUCH_PAN;break;default:Q=J.NONE}break;case 2:switch(q.touches.TWO){case G.TOUCH.DOLLY_PAN:if(!1===q.enableZoom&&!1===q.enablePan)return;!function handleTouchStartDollyPan(x){q.enableZoom&&handleTouchStartDolly(x),q.enablePan&&handleTouchStartPan(x)}(x),Q=J.TOUCH_DOLLY_PAN;break;case G.TOUCH.DOLLY_ROTATE:if(!1===q.enableZoom&&!1===q.enableRotate)return;!function handleTouchStartDollyRotate(x){q.enableZoom&&handleTouchStartDolly(x),q.enableRotate&&handleTouchStartRotate(x)}(x),Q=J.TOUCH_DOLLY_ROTATE;break;default:Q=J.NONE}break;default:Q=J.NONE}Q!==J.NONE&&q.dispatchEvent(Y)}}function onTouchMove(x){if(!1!==q.enabled)switch(x.preventDefault(),x.stopPropagation(),Q){case J.TOUCH_ROTATE:if(!1===q.enableRotate)return;handleTouchMoveRotate(x),q.update();break;case J.TOUCH_PAN:if(!1===q.enablePan)return;handleTouchMovePan(x),q.update();break;case J.TOUCH_DOLLY_PAN:if(!1===q.enableZoom&&!1===q.enablePan)return;!function handleTouchMoveDollyPan(x){q.enableZoom&&handleTouchMoveDolly(x),q.enablePan&&handleTouchMovePan(x)}(x),q.update();break;case J.TOUCH_DOLLY_ROTATE:if(!1===q.enableZoom&&!1===q.enableRotate)return;!function handleTouchMoveDollyRotate(x){q.enableZoom&&handleTouchMoveDolly(x),q.enableRotate&&handleTouchMoveRotate(x)}(x),q.update();break;default:Q=J.NONE}}function onTouchEnd(x){!1!==q.enabled&&(q.dispatchEvent(Z),Q=J.NONE)}function onContextMenu(x){!1!==q.enabled&&x.preventDefault()}q.domElement.addEventListener("contextmenu",onContextMenu,!1),q.domElement.addEventListener("mousedown",onMouseDown,!1),q.domElement.addEventListener("wheel",onMouseWheel,!1),q.domElement.addEventListener("touchstart",onTouchStart,!1),q.domElement.addEventListener("touchend",onTouchEnd,!1),q.domElement.addEventListener("touchmove",onTouchMove,!1),q.domElement.addEventListener("keydown",onKeyDown,!1),-1===q.domElement.tabIndex&&(q.domElement.tabIndex=0),this.update()},G.OrbitControls.prototype=Object.create(G.EventDispatcher.prototype),G.OrbitControls.prototype.constructor=G.OrbitControls,G.MapControls=function(x,w){G.OrbitControls.call(this,x,w),this.mouseButtons.LEFT=G.MOUSE.PAN,this.mouseButtons.RIGHT=G.MOUSE.ROTATE,this.touches.ONE=G.TOUCH.PAN,this.touches.TWO=G.TOUCH.DOLLY_ROTATE},G.MapControls.prototype=Object.create(G.EventDispatcher.prototype),G.MapControls.prototype.constructor=G.MapControls,x.exports=w.default=G.OrbitControls},2212:(x,w,S)=>{"use strict";S.r(w),S.d(w,{ACESFilmicToneMapping:()=>We,AddEquation:()=>he,AddOperation:()=>De,AdditiveAnimationBlendMode:()=>zn,AdditiveBlending:()=>se,AlphaFormat:()=>wt,AlwaysDepth:()=>Me,AlwaysStencilFunc:()=>wr,AmbientLight:()=>AmbientLight,AmbientLightProbe:()=>AmbientLightProbe,AnimationClip:()=>AnimationClip,AnimationLoader:()=>AnimationLoader,AnimationMixer:()=>AnimationMixer,AnimationObjectGroup:()=>AnimationObjectGroup,AnimationUtils:()=>ms,ArcCurve:()=>ArcCurve,ArrayCamera:()=>ArrayCamera,ArrowHelper:()=>ArrowHelper,Audio:()=>Audio,AudioAnalyser:()=>AudioAnalyser,AudioContext:()=>Rs,AudioListener:()=>AudioListener,AudioLoader:()=>AudioLoader,AxesHelper:()=>AxesHelper,AxisHelper:()=>AxisHelper,BackSide:()=>te,BasicDepthPacking:()=>ir,BasicShadowMap:()=>Y,BinaryTextureLoader:()=>BinaryTextureLoader,Bone:()=>Bone,BooleanKeyframeTrack:()=>BooleanKeyframeTrack,BoundingBoxHelper:()=>BoundingBoxHelper,Box2:()=>Box2,Box3:()=>Box3,Box3Helper:()=>Box3Helper,BoxBufferGeometry:()=>BoxGeometry,BoxGeometry:()=>BoxGeometry,BoxHelper:()=>BoxHelper,BufferAttribute:()=>BufferAttribute,BufferGeometry:()=>BufferGeometry,BufferGeometryLoader:()=>BufferGeometryLoader,ByteType:()=>ht,Cache:()=>gs,Camera:()=>Camera,CameraHelper:()=>CameraHelper,CanvasRenderer:()=>CanvasRenderer,CanvasTexture:()=>CanvasTexture,CatmullRomCurve3:()=>CatmullRomCurve3,CineonToneMapping:()=>Ve,CircleBufferGeometry:()=>CircleGeometry,CircleGeometry:()=>CircleGeometry,ClampToEdgeWrapping:()=>Je,Clock:()=>Clock,Color:()=>Color,ColorKeyframeTrack:()=>ColorKeyframeTrack,CompressedTexture:()=>CompressedTexture,CompressedTextureLoader:()=>CompressedTextureLoader,ConeBufferGeometry:()=>ConeGeometry,ConeGeometry:()=>ConeGeometry,CubeCamera:()=>CubeCamera,CubeReflectionMapping:()=>$e,CubeRefractionMapping:()=>je,CubeTexture:()=>CubeTexture,CubeTextureLoader:()=>CubeTextureLoader,CubeUVReflectionMapping:()=>Ke,CubeUVRefractionMapping:()=>Ye,CubicBezierCurve:()=>CubicBezierCurve,CubicBezierCurve3:()=>CubicBezierCurve3,CubicInterpolant:()=>CubicInterpolant,CullFaceBack:()=>X,CullFaceFront:()=>q,CullFaceFrontBack:()=>K,CullFaceNone:()=>j,Curve:()=>Curve,CurvePath:()=>CurvePath,CustomBlending:()=>ue,CustomToneMapping:()=>ze,CylinderBufferGeometry:()=>CylinderGeometry,CylinderGeometry:()=>CylinderGeometry,Cylindrical:()=>Cylindrical,DataTexture:()=>DataTexture,DataTexture2DArray:()=>DataTexture2DArray,DataTexture3D:()=>DataTexture3D,DataTextureLoader:()=>DataTextureLoader,DataUtils:()=>DataUtils,DecrementStencilOp:()=>dr,DecrementWrapStencilOp:()=>fr,DefaultLoadingManager:()=>vs,DepthFormat:()=>Rt,DepthStencilFormat:()=>Lt,DepthTexture:()=>DepthTexture,DirectionalLight:()=>DirectionalLight,DirectionalLightHelper:()=>DirectionalLightHelper,DiscreteInterpolant:()=>DiscreteInterpolant,DodecahedronBufferGeometry:()=>DodecahedronGeometry,DodecahedronGeometry:()=>DodecahedronGeometry,DoubleSide:()=>ne,DstAlphaFactor:()=>Ee,DstColorFactor:()=>Se,DynamicBufferAttribute:()=>DynamicBufferAttribute,DynamicCopyUsage:()=>Or,DynamicDrawUsage:()=>Tr,DynamicReadUsage:()=>Mr,EdgesGeometry:()=>EdgesGeometry,EdgesHelper:()=>EdgesHelper,EllipseCurve:()=>EllipseCurve,EqualDepth:()=>Oe,EqualStencilFunc:()=>yr,EquirectangularReflectionMapping:()=>Xe,EquirectangularRefractionMapping:()=>qe,Euler:()=>Euler,EventDispatcher:()=>EventDispatcher,ExtrudeBufferGeometry:()=>ExtrudeGeometry,ExtrudeGeometry:()=>ExtrudeGeometry,FaceColors:()=>bl,FileLoader:()=>FileLoader,FlatShading:()=>re,Float16BufferAttribute:()=>Float16BufferAttribute,Float32Attribute:()=>Float32Attribute,Float32BufferAttribute:()=>Float32BufferAttribute,Float64Attribute:()=>Float64Attribute,Float64BufferAttribute:()=>Float64BufferAttribute,FloatType:()=>vt,Fog:()=>Fog,FogExp2:()=>FogExp2,Font:()=>Font,FontLoader:()=>FontLoader,FrontSide:()=>ee,Frustum:()=>Frustum,GLBufferAttribute:()=>GLBufferAttribute,GLSL1:()=>Ir,GLSL3:()=>Nr,GammaEncoding:()=>Zn,GreaterDepth:()=>Ie,GreaterEqualDepth:()=>Pe,GreaterEqualStencilFunc:()=>Er,GreaterStencilFunc:()=>br,GridHelper:()=>GridHelper,Group:()=>Group,HalfFloatType:()=>yt,HemisphereLight:()=>HemisphereLight,HemisphereLightHelper:()=>HemisphereLightHelper,HemisphereLightProbe:()=>HemisphereLightProbe,IcosahedronBufferGeometry:()=>IcosahedronGeometry,IcosahedronGeometry:()=>IcosahedronGeometry,ImageBitmapLoader:()=>ImageBitmapLoader,ImageLoader:()=>ImageLoader,ImageUtils:()=>ImageUtils,ImmediateRenderObject:()=>ImmediateRenderObject,IncrementStencilOp:()=>hr,IncrementWrapStencilOp:()=>pr,InstancedBufferAttribute:()=>InstancedBufferAttribute,InstancedBufferGeometry:()=>InstancedBufferGeometry,InstancedInterleavedBuffer:()=>InstancedInterleavedBuffer,InstancedMesh:()=>InstancedMesh,Int16Attribute:()=>Int16Attribute,Int16BufferAttribute:()=>Int16BufferAttribute,Int32Attribute:()=>Int32Attribute,Int32BufferAttribute:()=>Int32BufferAttribute,Int8Attribute:()=>Int8Attribute,Int8BufferAttribute:()=>Int8BufferAttribute,IntType:()=>mt,InterleavedBuffer:()=>InterleavedBuffer,InterleavedBufferAttribute:()=>InterleavedBufferAttribute,Interpolant:()=>Interpolant,InterpolateDiscrete:()=>Nn,InterpolateLinear:()=>Fn,InterpolateSmooth:()=>Bn,InvertStencilOp:()=>mr,JSONLoader:()=>JSONLoader,KeepStencilOp:()=>cr,KeyframeTrack:()=>KeyframeTrack,LOD:()=>LOD,LatheBufferGeometry:()=>LatheGeometry,LatheGeometry:()=>LatheGeometry,Layers:()=>Layers,LensFlare:()=>LensFlare,LessDepth:()=>Re,LessEqualDepth:()=>Le,LessEqualStencilFunc:()=>_r,LessStencilFunc:()=>vr,Light:()=>Light,LightProbe:()=>LightProbe,Line:()=>Line,Line3:()=>Line3,LineBasicMaterial:()=>LineBasicMaterial,LineCurve:()=>LineCurve,LineCurve3:()=>LineCurve3,LineDashedMaterial:()=>LineDashedMaterial,LineLoop:()=>LineLoop,LinePieces:()=>yl,LineSegments:()=>LineSegments,LineStrip:()=>vl,LinearEncoding:()=>qn,LinearFilter:()=>ot,LinearInterpolant:()=>LinearInterpolant,LinearMipMapLinearFilter:()=>ct,LinearMipMapNearestFilter:()=>st,LinearMipmapLinearFilter:()=>lt,LinearMipmapNearestFilter:()=>at,LinearToneMapping:()=>Ue,Loader:()=>Loader,LoaderUtils:()=>LoaderUtils,LoadingManager:()=>LoadingManager,LogLuvEncoding:()=>er,LoopOnce:()=>Rn,LoopPingPong:()=>In,LoopRepeat:()=>On,LuminanceAlphaFormat:()=>At,LuminanceFormat:()=>Ct,MOUSE:()=>z,Material:()=>Material,MaterialLoader:()=>MaterialLoader,Math:()=>Gr,MathUtils:()=>Gr,Matrix3:()=>Matrix3,Matrix4:()=>Matrix4,MaxEquation:()=>me,Mesh:()=>Mesh,MeshBasicMaterial:()=>MeshBasicMaterial,MeshDepthMaterial:()=>MeshDepthMaterial,MeshDistanceMaterial:()=>MeshDistanceMaterial,MeshFaceMaterial:()=>MeshFaceMaterial,MeshLambertMaterial:()=>MeshLambertMaterial,MeshMatcapMaterial:()=>MeshMatcapMaterial,MeshNormalMaterial:()=>MeshNormalMaterial,MeshPhongMaterial:()=>MeshPhongMaterial,MeshPhysicalMaterial:()=>MeshPhysicalMaterial,MeshStandardMaterial:()=>MeshStandardMaterial,MeshToonMaterial:()=>MeshToonMaterial,MinEquation:()=>fe,MirroredRepeatWrapping:()=>Qe,MixOperation:()=>Be,MultiMaterial:()=>MultiMaterial,MultiplyBlending:()=>ce,MultiplyOperation:()=>Fe,NearestFilter:()=>et,NearestMipMapLinearFilter:()=>it,NearestMipMapNearestFilter:()=>nt,NearestMipmapLinearFilter:()=>rt,NearestMipmapNearestFilter:()=>tt,NeverDepth:()=>Ae,NeverStencilFunc:()=>gr,NoBlending:()=>oe,NoColors:()=>_l,NoToneMapping:()=>ke,NormalAnimationBlendMode:()=>Wn,NormalBlending:()=>ae,NotEqualDepth:()=>Ne,NotEqualStencilFunc:()=>xr,NumberKeyframeTrack:()=>NumberKeyframeTrack,Object3D:()=>Object3D,ObjectLoader:()=>ObjectLoader,ObjectSpaceNormalMap:()=>sr,OctahedronBufferGeometry:()=>OctahedronGeometry,OctahedronGeometry:()=>OctahedronGeometry,OneFactor:()=>ve,OneMinusDstAlphaFactor:()=>we,OneMinusDstColorFactor:()=>Te,OneMinusSrcAlphaFactor:()=>xe,OneMinusSrcColorFactor:()=>_e,OrthographicCamera:()=>OrthographicCamera,PCFShadowMap:()=>Z,PCFSoftShadowMap:()=>J,PMREMGenerator:()=>PMREMGenerator,ParametricGeometry:()=>ParametricGeometry,Particle:()=>Particle,ParticleBasicMaterial:()=>ParticleBasicMaterial,ParticleSystem:()=>ParticleSystem,ParticleSystemMaterial:()=>ParticleSystemMaterial,Path:()=>Path,PerspectiveCamera:()=>PerspectiveCamera,Plane:()=>Plane,PlaneBufferGeometry:()=>PlaneGeometry,PlaneGeometry:()=>PlaneGeometry,PlaneHelper:()=>PlaneHelper,PointCloud:()=>PointCloud,PointCloudMaterial:()=>PointCloudMaterial,PointLight:()=>PointLight,PointLightHelper:()=>PointLightHelper,Points:()=>Points,PointsMaterial:()=>PointsMaterial,PolarGridHelper:()=>PolarGridHelper,PolyhedronBufferGeometry:()=>PolyhedronGeometry,PolyhedronGeometry:()=>PolyhedronGeometry,PositionalAudio:()=>PositionalAudio,PropertyBinding:()=>PropertyBinding,PropertyMixer:()=>PropertyMixer,QuadraticBezierCurve:()=>QuadraticBezierCurve,QuadraticBezierCurve3:()=>QuadraticBezierCurve3,Quaternion:()=>Quaternion,QuaternionKeyframeTrack:()=>QuaternionKeyframeTrack,QuaternionLinearInterpolant:()=>QuaternionLinearInterpolant,REVISION:()=>G,RGBADepthPacking:()=>or,RGBAFormat:()=>Tt,RGBAIntegerFormat:()=>Dt,RGBA_ASTC_10x10_Format:()=>sn,RGBA_ASTC_10x5_Format:()=>rn,RGBA_ASTC_10x6_Format:()=>on,RGBA_ASTC_10x8_Format:()=>an,RGBA_ASTC_12x10_Format:()=>ln,RGBA_ASTC_12x12_Format:()=>cn,RGBA_ASTC_4x4_Format:()=>Kt,RGBA_ASTC_5x4_Format:()=>Yt,RGBA_ASTC_5x5_Format:()=>Zt,RGBA_ASTC_6x5_Format:()=>Jt,RGBA_ASTC_6x6_Format:()=>Qt,RGBA_ASTC_8x5_Format:()=>en,RGBA_ASTC_8x6_Format:()=>tn,RGBA_ASTC_8x8_Format:()=>nn,RGBA_BPTC_Format:()=>hn,RGBA_ETC2_EAC_Format:()=>qt,RGBA_PVRTC_2BPPV1_Format:()=>$t,RGBA_PVRTC_4BPPV1_Format:()=>Ht,RGBA_S3TC_DXT1_Format:()=>Ut,RGBA_S3TC_DXT3_Format:()=>Gt,RGBA_S3TC_DXT5_Format:()=>Vt,RGBDEncoding:()=>rr,RGBEEncoding:()=>Jn,RGBEFormat:()=>Mt,RGBFormat:()=>St,RGBIntegerFormat:()=>Bt,RGBM16Encoding:()=>nr,RGBM7Encoding:()=>tr,RGB_ETC1_Format:()=>jt,RGB_ETC2_Format:()=>Xt,RGB_PVRTC_2BPPV1_Format:()=>zt,RGB_PVRTC_4BPPV1_Format:()=>Wt,RGB_S3TC_DXT1_Format:()=>kt,RGFormat:()=>Nt,RGIntegerFormat:()=>Ft,RawShaderMaterial:()=>RawShaderMaterial,Ray:()=>Ray,Raycaster:()=>Raycaster,RectAreaLight:()=>RectAreaLight,RedFormat:()=>Pt,RedIntegerFormat:()=>It,ReinhardToneMapping:()=>Ge,RepeatWrapping:()=>Ze,ReplaceStencilOp:()=>ur,ReverseSubtractEquation:()=>pe,RingBufferGeometry:()=>RingGeometry,RingGeometry:()=>RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format:()=>Cn,SRGB8_ALPHA8_ASTC_10x5_Format:()=>wn,SRGB8_ALPHA8_ASTC_10x6_Format:()=>Sn,SRGB8_ALPHA8_ASTC_10x8_Format:()=>Tn,SRGB8_ALPHA8_ASTC_12x10_Format:()=>An,SRGB8_ALPHA8_ASTC_12x12_Format:()=>Mn,SRGB8_ALPHA8_ASTC_4x4_Format:()=>dn,SRGB8_ALPHA8_ASTC_5x4_Format:()=>pn,SRGB8_ALPHA8_ASTC_5x5_Format:()=>mn,SRGB8_ALPHA8_ASTC_6x5_Format:()=>gn,SRGB8_ALPHA8_ASTC_6x6_Format:()=>vn,SRGB8_ALPHA8_ASTC_8x5_Format:()=>bn,SRGB8_ALPHA8_ASTC_8x6_Format:()=>xn,SRGB8_ALPHA8_ASTC_8x8_Format:()=>En,Scene:()=>Scene,SceneUtils:()=>El,ShaderChunk:()=>Do,ShaderLib:()=>Uo,ShaderMaterial:()=>ShaderMaterial,ShadowMaterial:()=>ShadowMaterial,Shape:()=>Shape,ShapeBufferGeometry:()=>ShapeGeometry,ShapeGeometry:()=>ShapeGeometry,ShapePath:()=>ShapePath,ShapeUtils:()=>ShapeUtils,ShortType:()=>pt,Skeleton:()=>Skeleton,SkeletonHelper:()=>SkeletonHelper,SkinnedMesh:()=>SkinnedMesh,SmoothShading:()=>ie,Sphere:()=>Sphere,SphereBufferGeometry:()=>SphereGeometry,SphereGeometry:()=>SphereGeometry,Spherical:()=>Spherical,SphericalHarmonics3:()=>SphericalHarmonics3,SplineCurve:()=>SplineCurve,SpotLight:()=>SpotLight,SpotLightHelper:()=>SpotLightHelper,Sprite:()=>Sprite,SpriteMaterial:()=>SpriteMaterial,SrcAlphaFactor:()=>be,SrcAlphaSaturateFactor:()=>Ce,SrcColorFactor:()=>ye,StaticCopyUsage:()=>Lr,StaticDrawUsage:()=>Sr,StaticReadUsage:()=>Ar,StereoCamera:()=>StereoCamera,StreamCopyUsage:()=>Pr,StreamDrawUsage:()=>Cr,StreamReadUsage:()=>Rr,StringKeyframeTrack:()=>StringKeyframeTrack,SubtractEquation:()=>de,SubtractiveBlending:()=>le,TOUCH:()=>H,TangentSpaceNormalMap:()=>ar,TetrahedronBufferGeometry:()=>TetrahedronGeometry,TetrahedronGeometry:()=>TetrahedronGeometry,TextGeometry:()=>TextGeometry,Texture:()=>Texture,TextureLoader:()=>TextureLoader,TorusBufferGeometry:()=>TorusGeometry,TorusGeometry:()=>TorusGeometry,TorusKnotBufferGeometry:()=>TorusKnotGeometry,TorusKnotGeometry:()=>TorusKnotGeometry,Triangle:()=>Triangle,TriangleFanDrawMode:()=>Xn,TriangleStripDrawMode:()=>$n,TrianglesDrawMode:()=>Hn,TubeBufferGeometry:()=>TubeGeometry,TubeGeometry:()=>TubeGeometry,UVMapping:()=>He,Uint16Attribute:()=>Uint16Attribute,Uint16BufferAttribute:()=>Uint16BufferAttribute,Uint32Attribute:()=>Uint32Attribute,Uint32BufferAttribute:()=>Uint32BufferAttribute,Uint8Attribute:()=>Uint8Attribute,Uint8BufferAttribute:()=>Uint8BufferAttribute,Uint8ClampedAttribute:()=>Uint8ClampedAttribute,Uint8ClampedBufferAttribute:()=>Uint8ClampedBufferAttribute,Uniform:()=>Uniform,UniformsLib:()=>ko,UniformsUtils:()=>Lo,UnsignedByteType:()=>ut,UnsignedInt248Type:()=>Et,UnsignedIntType:()=>gt,UnsignedShort4444Type:()=>_t,UnsignedShort5551Type:()=>bt,UnsignedShort565Type:()=>xt,UnsignedShortType:()=>ft,VSMShadowMap:()=>Q,Vector2:()=>Vector2,Vector3:()=>Vector3,Vector4:()=>Vector4,VectorKeyframeTrack:()=>VectorKeyframeTrack,Vertex:()=>Vertex,VertexColors:()=>xl,VideoTexture:()=>VideoTexture,WebGL1Renderer:()=>WebGL1Renderer,WebGLCubeRenderTarget:()=>WebGLCubeRenderTarget,WebGLMultipleRenderTargets:()=>WebGLMultipleRenderTargets,WebGLMultisampleRenderTarget:()=>WebGLMultisampleRenderTarget,WebGLRenderTarget:()=>WebGLRenderTarget,WebGLRenderTargetCube:()=>WebGLRenderTargetCube,WebGLRenderer:()=>WebGLRenderer,WebGLUtils:()=>WebGLUtils,WireframeGeometry:()=>WireframeGeometry,WireframeHelper:()=>WireframeHelper,WrapAroundEnding:()=>Gn,XHRLoader:()=>XHRLoader,ZeroCurvatureEnding:()=>Dn,ZeroFactor:()=>ge,ZeroSlopeEnding:()=>kn,ZeroStencilOp:()=>lr,sRGBEncoding:()=>Kn});var U=S(5108);const G="133",z={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},H={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},j=0,X=1,q=2,K=3,Y=0,Z=1,J=2,Q=3,ee=0,te=1,ne=2,re=1,ie=2,oe=0,ae=1,se=2,le=3,ce=4,ue=5,he=100,de=101,pe=102,fe=103,me=104,ge=200,ve=201,ye=202,_e=203,be=204,xe=205,Ee=206,we=207,Se=208,Te=209,Ce=210,Ae=0,Me=1,Re=2,Le=3,Oe=4,Pe=5,Ie=6,Ne=7,Fe=0,Be=1,De=2,ke=0,Ue=1,Ge=2,Ve=3,We=4,ze=5,He=300,$e=301,je=302,Xe=303,qe=304,Ke=306,Ye=307,Ze=1e3,Je=1001,Qe=1002,et=1003,tt=1004,nt=1004,rt=1005,it=1005,ot=1006,at=1007,st=1007,lt=1008,ct=1008,ut=1009,ht=1010,pt=1011,ft=1012,mt=1013,gt=1014,vt=1015,yt=1016,_t=1017,bt=1018,xt=1019,Et=1020,wt=1021,St=1022,Tt=1023,Ct=1024,At=1025,Mt=Tt,Rt=1026,Lt=1027,Pt=1028,It=1029,Nt=1030,Ft=1031,Bt=1032,Dt=1033,kt=33776,Ut=33777,Gt=33778,Vt=33779,Wt=35840,zt=35841,Ht=35842,$t=35843,jt=36196,Xt=37492,qt=37496,Kt=37808,Yt=37809,Zt=37810,Jt=37811,Qt=37812,en=37813,tn=37814,nn=37815,rn=37816,on=37817,an=37818,sn=37819,ln=37820,cn=37821,hn=36492,dn=37840,pn=37841,mn=37842,gn=37843,vn=37844,bn=37845,xn=37846,En=37847,wn=37848,Sn=37849,Tn=37850,Cn=37851,An=37852,Mn=37853,Rn=2200,On=2201,In=2202,Nn=2300,Fn=2301,Bn=2302,Dn=2400,kn=2401,Gn=2402,Wn=2500,zn=2501,Hn=0,$n=1,Xn=2,qn=3e3,Kn=3001,Zn=3007,Jn=3002,er=3003,tr=3004,nr=3005,rr=3006,ir=3200,or=3201,ar=0,sr=1,lr=0,cr=7680,ur=7681,hr=7682,dr=7683,pr=34055,fr=34056,mr=5386,gr=512,vr=513,yr=514,_r=515,br=516,xr=517,Er=518,wr=519,Sr=35044,Tr=35048,Cr=35040,Ar=35045,Mr=35049,Rr=35041,Lr=35046,Or=35050,Pr=35042,Ir="100",Nr="300 es";class EventDispatcher{addEventListener(x,w){void 0===this._listeners&&(this._listeners={});const S=this._listeners;void 0===S[x]&&(S[x]=[]),-1===S[x].indexOf(w)&&S[x].push(w)}hasEventListener(x,w){if(void 0===this._listeners)return!1;const S=this._listeners;return void 0!==S[x]&&-1!==S[x].indexOf(w)}removeEventListener(x,w){if(void 0===this._listeners)return;const S=this._listeners[x];if(void 0!==S){const x=S.indexOf(w);-1!==x&&S.splice(x,1)}}dispatchEvent(x){if(void 0===this._listeners)return;const w=this._listeners[x.type];if(void 0!==w){x.target=this;const S=w.slice(0);for(let w=0,U=S.length;w<U;w++)S[w].call(this,x);x.target=null}}}let Fr=1234567;const Br=Math.PI/180,Dr=180/Math.PI,kr=[];for(let x=0;x<256;x++)kr[x]=(x<16?"0":"")+x.toString(16);const Ur="undefined"!=typeof crypto&&"randomUUID"in crypto;function generateUUID(){if(Ur)return crypto.randomUUID().toUpperCase();const x=4294967295*Math.random()|0,w=4294967295*Math.random()|0,S=4294967295*Math.random()|0,U=4294967295*Math.random()|0;return(kr[255&x]+kr[x>>8&255]+kr[x>>16&255]+kr[x>>24&255]+"-"+kr[255&w]+kr[w>>8&255]+"-"+kr[w>>16&15|64]+kr[w>>24&255]+"-"+kr[63&S|128]+kr[S>>8&255]+"-"+kr[S>>16&255]+kr[S>>24&255]+kr[255&U]+kr[U>>8&255]+kr[U>>16&255]+kr[U>>24&255]).toUpperCase()}function clamp(x,w,S){return Math.max(w,Math.min(S,x))}function euclideanModulo(x,w){return(x%w+w)%w}function lerp(x,w,S){return(1-S)*x+S*w}function isPowerOfTwo(x){return 0==(x&x-1)&&0!==x}function ceilPowerOfTwo(x){return Math.pow(2,Math.ceil(Math.log(x)/Math.LN2))}function floorPowerOfTwo(x){return Math.pow(2,Math.floor(Math.log(x)/Math.LN2))}var Gr=Object.freeze({__proto__:null,DEG2RAD:Br,RAD2DEG:Dr,generateUUID,clamp,euclideanModulo,mapLinear:function mapLinear(x,w,S,U,G){return U+(x-w)*(G-U)/(S-w)},inverseLerp:function inverseLerp(x,w,S){return x!==w?(S-x)/(w-x):0},lerp,damp:function damp(x,w,S,U){return lerp(x,w,1-Math.exp(-S*U))},pingpong:function pingpong(x,w=1){return w-Math.abs(euclideanModulo(x,2*w)-w)},smoothstep:function smoothstep(x,w,S){return x<=w?0:x>=S?1:(x=(x-w)/(S-w))*x*(3-2*x)},smootherstep:function smootherstep(x,w,S){return x<=w?0:x>=S?1:(x=(x-w)/(S-w))*x*x*(x*(6*x-15)+10)},randInt:function randInt(x,w){return x+Math.floor(Math.random()*(w-x+1))},randFloat:function randFloat(x,w){return x+Math.random()*(w-x)},randFloatSpread:function randFloatSpread(x){return x*(.5-Math.random())},seededRandom:function seededRandom(x){return void 0!==x&&(Fr=x%2147483647),Fr=16807*Fr%2147483647,(Fr-1)/2147483646},degToRad:function degToRad(x){return x*Br},radToDeg:function radToDeg(x){return x*Dr},isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler:function setQuaternionFromProperEuler(x,w,S,G,z){const H=Math.cos,j=Math.sin,X=H(S/2),q=j(S/2),K=H((w+G)/2),Y=j((w+G)/2),Z=H((w-G)/2),J=j((w-G)/2),Q=H((G-w)/2),ee=j((G-w)/2);switch(z){case"XYX":x.set(X*Y,q*Z,q*J,X*K);break;case"YZY":x.set(q*J,X*Y,q*Z,X*K);break;case"ZXZ":x.set(q*Z,q*J,X*Y,X*K);break;case"XZX":x.set(X*Y,q*ee,q*Q,X*K);break;case"YXY":x.set(q*Q,X*Y,q*ee,X*K);break;case"ZYZ":x.set(q*ee,q*Q,X*Y,X*K);break;default:U.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+z)}}});class Vector2{constructor(x=0,w=0){this.x=x,this.y=w}get width(){return this.x}set width(x){this.x=x}get height(){return this.y}set height(x){this.y=x}set(x,w){return this.x=x,this.y=w,this}setScalar(x){return this.x=x,this.y=x,this}setX(x){return this.x=x,this}setY(x){return this.y=x,this}setComponent(x,w){switch(x){case 0:this.x=w;break;case 1:this.y=w;break;default:throw new Error("index is out of range: "+x)}return this}getComponent(x){switch(x){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+x)}}clone(){return new this.constructor(this.x,this.y)}copy(x){return this.x=x.x,this.y=x.y,this}add(x,w){return void 0!==w?(U.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(x,w)):(this.x+=x.x,this.y+=x.y,this)}addScalar(x){return this.x+=x,this.y+=x,this}addVectors(x,w){return this.x=x.x+w.x,this.y=x.y+w.y,this}addScaledVector(x,w){return this.x+=x.x*w,this.y+=x.y*w,this}sub(x,w){return void 0!==w?(U.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(x,w)):(this.x-=x.x,this.y-=x.y,this)}subScalar(x){return this.x-=x,this.y-=x,this}subVectors(x,w){return this.x=x.x-w.x,this.y=x.y-w.y,this}multiply(x){return this.x*=x.x,this.y*=x.y,this}multiplyScalar(x){return this.x*=x,this.y*=x,this}divide(x){return this.x/=x.x,this.y/=x.y,this}divideScalar(x){return this.multiplyScalar(1/x)}applyMatrix3(x){const w=this.x,S=this.y,U=x.elements;return this.x=U[0]*w+U[3]*S+U[6],this.y=U[1]*w+U[4]*S+U[7],this}min(x){return this.x=Math.min(this.x,x.x),this.y=Math.min(this.y,x.y),this}max(x){return this.x=Math.max(this.x,x.x),this.y=Math.max(this.y,x.y),this}clamp(x,w){return this.x=Math.max(x.x,Math.min(w.x,this.x)),this.y=Math.max(x.y,Math.min(w.y,this.y)),this}clampScalar(x,w){return this.x=Math.max(x,Math.min(w,this.x)),this.y=Math.max(x,Math.min(w,this.y)),this}clampLength(x,w){const S=this.length();return this.divideScalar(S||1).multiplyScalar(Math.max(x,Math.min(w,S)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(x){return this.x*x.x+this.y*x.y}cross(x){return this.x*x.y-this.y*x.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(x){return Math.sqrt(this.distanceToSquared(x))}distanceToSquared(x){const w=this.x-x.x,S=this.y-x.y;return w*w+S*S}manhattanDistanceTo(x){return Math.abs(this.x-x.x)+Math.abs(this.y-x.y)}setLength(x){return this.normalize().multiplyScalar(x)}lerp(x,w){return this.x+=(x.x-this.x)*w,this.y+=(x.y-this.y)*w,this}lerpVectors(x,w,S){return this.x=x.x+(w.x-x.x)*S,this.y=x.y+(w.y-x.y)*S,this}equals(x){return x.x===this.x&&x.y===this.y}fromArray(x,w=0){return this.x=x[w],this.y=x[w+1],this}toArray(x=[],w=0){return x[w]=this.x,x[w+1]=this.y,x}fromBufferAttribute(x,w,S){return void 0!==S&&U.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=x.getX(w),this.y=x.getY(w),this}rotateAround(x,w){const S=Math.cos(w),U=Math.sin(w),G=this.x-x.x,z=this.y-x.y;return this.x=G*S-z*U+x.x,this.y=G*U+z*S+x.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Vector2.prototype.isVector2=!0;class Matrix3{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&U.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(x,w,S,U,G,z,H,j,X){const q=this.elements;return q[0]=x,q[1]=U,q[2]=H,q[3]=w,q[4]=G,q[5]=j,q[6]=S,q[7]=z,q[8]=X,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(x){const w=this.elements,S=x.elements;return w[0]=S[0],w[1]=S[1],w[2]=S[2],w[3]=S[3],w[4]=S[4],w[5]=S[5],w[6]=S[6],w[7]=S[7],w[8]=S[8],this}extractBasis(x,w,S){return x.setFromMatrix3Column(this,0),w.setFromMatrix3Column(this,1),S.setFromMatrix3Column(this,2),this}setFromMatrix4(x){const w=x.elements;return this.set(w[0],w[4],w[8],w[1],w[5],w[9],w[2],w[6],w[10]),this}multiply(x){return this.multiplyMatrices(this,x)}premultiply(x){return this.multiplyMatrices(x,this)}multiplyMatrices(x,w){const S=x.elements,U=w.elements,G=this.elements,z=S[0],H=S[3],j=S[6],X=S[1],q=S[4],K=S[7],Y=S[2],Z=S[5],J=S[8],Q=U[0],ee=U[3],te=U[6],ne=U[1],re=U[4],ie=U[7],oe=U[2],ae=U[5],se=U[8];return G[0]=z*Q+H*ne+j*oe,G[3]=z*ee+H*re+j*ae,G[6]=z*te+H*ie+j*se,G[1]=X*Q+q*ne+K*oe,G[4]=X*ee+q*re+K*ae,G[7]=X*te+q*ie+K*se,G[2]=Y*Q+Z*ne+J*oe,G[5]=Y*ee+Z*re+J*ae,G[8]=Y*te+Z*ie+J*se,this}multiplyScalar(x){const w=this.elements;return w[0]*=x,w[3]*=x,w[6]*=x,w[1]*=x,w[4]*=x,w[7]*=x,w[2]*=x,w[5]*=x,w[8]*=x,this}determinant(){const x=this.elements,w=x[0],S=x[1],U=x[2],G=x[3],z=x[4],H=x[5],j=x[6],X=x[7],q=x[8];return w*z*q-w*H*X-S*G*q+S*H*j+U*G*X-U*z*j}invert(){const x=this.elements,w=x[0],S=x[1],U=x[2],G=x[3],z=x[4],H=x[5],j=x[6],X=x[7],q=x[8],K=q*z-H*X,Y=H*j-q*G,Z=X*G-z*j,J=w*K+S*Y+U*Z;if(0===J)return this.set(0,0,0,0,0,0,0,0,0);const Q=1/J;return x[0]=K*Q,x[1]=(U*X-q*S)*Q,x[2]=(H*S-U*z)*Q,x[3]=Y*Q,x[4]=(q*w-U*j)*Q,x[5]=(U*G-H*w)*Q,x[6]=Z*Q,x[7]=(S*j-X*w)*Q,x[8]=(z*w-S*G)*Q,this}transpose(){let x;const w=this.elements;return x=w[1],w[1]=w[3],w[3]=x,x=w[2],w[2]=w[6],w[6]=x,x=w[5],w[5]=w[7],w[7]=x,this}getNormalMatrix(x){return this.setFromMatrix4(x).invert().transpose()}transposeIntoArray(x){const w=this.elements;return x[0]=w[0],x[1]=w[3],x[2]=w[6],x[3]=w[1],x[4]=w[4],x[5]=w[7],x[6]=w[2],x[7]=w[5],x[8]=w[8],this}setUvTransform(x,w,S,U,G,z,H){const j=Math.cos(G),X=Math.sin(G);return this.set(S*j,S*X,-S*(j*z+X*H)+z+x,-U*X,U*j,-U*(-X*z+j*H)+H+w,0,0,1),this}scale(x,w){const S=this.elements;return S[0]*=x,S[3]*=x,S[6]*=x,S[1]*=w,S[4]*=w,S[7]*=w,this}rotate(x){const w=Math.cos(x),S=Math.sin(x),U=this.elements,G=U[0],z=U[3],H=U[6],j=U[1],X=U[4],q=U[7];return U[0]=w*G+S*j,U[3]=w*z+S*X,U[6]=w*H+S*q,U[1]=-S*G+w*j,U[4]=-S*z+w*X,U[7]=-S*H+w*q,this}translate(x,w){const S=this.elements;return S[0]+=x*S[2],S[3]+=x*S[5],S[6]+=x*S[8],S[1]+=w*S[2],S[4]+=w*S[5],S[7]+=w*S[8],this}equals(x){const w=this.elements,S=x.elements;for(let x=0;x<9;x++)if(w[x]!==S[x])return!1;return!0}fromArray(x,w=0){for(let S=0;S<9;S++)this.elements[S]=x[S+w];return this}toArray(x=[],w=0){const S=this.elements;return x[w]=S[0],x[w+1]=S[1],x[w+2]=S[2],x[w+3]=S[3],x[w+4]=S[4],x[w+5]=S[5],x[w+6]=S[6],x[w+7]=S[7],x[w+8]=S[8],x}clone(){return(new this.constructor).fromArray(this.elements)}}function arrayMax(x){if(0===x.length)return-1/0;let w=x[0];for(let S=1,U=x.length;S<U;++S)x[S]>w&&(w=x[S]);return w}Matrix3.prototype.isMatrix3=!0;const Vr={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(x,w){return new Vr[x](w)}function createElementNS(x){return document.createElementNS("http://www.w3.org/1999/xhtml",x)}let Wr;class ImageUtils{static getDataURL(x){if(/^data:/i.test(x.src))return x.src;if("undefined"==typeof HTMLCanvasElement)return x.src;let w;if(x instanceof HTMLCanvasElement)w=x;else{void 0===Wr&&(Wr=createElementNS("canvas")),Wr.width=x.width,Wr.height=x.height;const S=Wr.getContext("2d");x instanceof ImageData?S.putImageData(x,0,0):S.drawImage(x,0,0,x.width,x.height),w=Wr}return w.width>2048||w.height>2048?(U.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",x),w.toDataURL("image/jpeg",.6)):w.toDataURL("image/png")}}let zr=0;class Texture extends EventDispatcher{constructor(x=Texture.DEFAULT_IMAGE,w=Texture.DEFAULT_MAPPING,S=Je,U=Je,G=ot,z=lt,H=Tt,j=ut,X=1,q=qn){super(),Object.defineProperty(this,"id",{value:zr++}),this.uuid=generateUUID(),this.name="",this.image=x,this.mipmaps=[],this.mapping=w,this.wrapS=S,this.wrapT=U,this.magFilter=G,this.minFilter=z,this.anisotropy=X,this.format=H,this.internalFormat=null,this.type=j,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=q,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(x){return this.name=x.name,this.image=x.image,this.mipmaps=x.mipmaps.slice(0),this.mapping=x.mapping,this.wrapS=x.wrapS,this.wrapT=x.wrapT,this.magFilter=x.magFilter,this.minFilter=x.minFilter,this.anisotropy=x.anisotropy,this.format=x.format,this.internalFormat=x.internalFormat,this.type=x.type,this.offset.copy(x.offset),this.repeat.copy(x.repeat),this.center.copy(x.center),this.rotation=x.rotation,this.matrixAutoUpdate=x.matrixAutoUpdate,this.matrix.copy(x.matrix),this.generateMipmaps=x.generateMipmaps,this.premultiplyAlpha=x.premultiplyAlpha,this.flipY=x.flipY,this.unpackAlignment=x.unpackAlignment,this.encoding=x.encoding,this}toJSON(x){const w=void 0===x||"string"==typeof x;if(!w&&void 0!==x.textures[this.uuid])return x.textures[this.uuid];const S={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const U=this.image;if(void 0===U.uuid&&(U.uuid=generateUUID()),!w&&void 0===x.images[U.uuid]){let w;if(Array.isArray(U)){w=[];for(let x=0,S=U.length;x<S;x++)U[x].isDataTexture?w.push(serializeImage(U[x].image)):w.push(serializeImage(U[x]))}else w=serializeImage(U);x.images[U.uuid]={uuid:U.uuid,url:w}}S.image=U.uuid}return w||(x.textures[this.uuid]=S),S}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(x){if(this.mapping!==He)return x;if(x.applyMatrix3(this.matrix),x.x<0||x.x>1)switch(this.wrapS){case Ze:x.x=x.x-Math.floor(x.x);break;case Je:x.x=x.x<0?0:1;break;case Qe:1===Math.abs(Math.floor(x.x)%2)?x.x=Math.ceil(x.x)-x.x:x.x=x.x-Math.floor(x.x)}if(x.y<0||x.y>1)switch(this.wrapT){case Ze:x.y=x.y-Math.floor(x.y);break;case Je:x.y=x.y<0?0:1;break;case Qe:1===Math.abs(Math.floor(x.y)%2)?x.y=Math.ceil(x.y)-x.y:x.y=x.y-Math.floor(x.y)}return this.flipY&&(x.y=1-x.y),x}set needsUpdate(x){!0===x&&this.version++}}function serializeImage(x){return"undefined"!=typeof HTMLImageElement&&x instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&x instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&x instanceof ImageBitmap?ImageUtils.getDataURL(x):x.data?{data:Array.prototype.slice.call(x.data),width:x.width,height:x.height,type:x.data.constructor.name}:(U.warn("THREE.Texture: Unable to serialize Texture."),{})}Texture.DEFAULT_IMAGE=void 0,Texture.DEFAULT_MAPPING=He,Texture.prototype.isTexture=!0;class Vector4{constructor(x=0,w=0,S=0,U=1){this.x=x,this.y=w,this.z=S,this.w=U}get width(){return this.z}set width(x){this.z=x}get height(){return this.w}set height(x){this.w=x}set(x,w,S,U){return this.x=x,this.y=w,this.z=S,this.w=U,this}setScalar(x){return this.x=x,this.y=x,this.z=x,this.w=x,this}setX(x){return this.x=x,this}setY(x){return this.y=x,this}setZ(x){return this.z=x,this}setW(x){return this.w=x,this}setComponent(x,w){switch(x){case 0:this.x=w;break;case 1:this.y=w;break;case 2:this.z=w;break;case 3:this.w=w;break;default:throw new Error("index is out of range: "+x)}return this}getComponent(x){switch(x){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+x)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(x){return this.x=x.x,this.y=x.y,this.z=x.z,this.w=void 0!==x.w?x.w:1,this}add(x,w){return void 0!==w?(U.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(x,w)):(this.x+=x.x,this.y+=x.y,this.z+=x.z,this.w+=x.w,this)}addScalar(x){return this.x+=x,this.y+=x,this.z+=x,this.w+=x,this}addVectors(x,w){return this.x=x.x+w.x,this.y=x.y+w.y,this.z=x.z+w.z,this.w=x.w+w.w,this}addScaledVector(x,w){return this.x+=x.x*w,this.y+=x.y*w,this.z+=x.z*w,this.w+=x.w*w,this}sub(x,w){return void 0!==w?(U.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(x,w)):(this.x-=x.x,this.y-=x.y,this.z-=x.z,this.w-=x.w,this)}subScalar(x){return this.x-=x,this.y-=x,this.z-=x,this.w-=x,this}subVectors(x,w){return this.x=x.x-w.x,this.y=x.y-w.y,this.z=x.z-w.z,this.w=x.w-w.w,this}multiply(x){return this.x*=x.x,this.y*=x.y,this.z*=x.z,this.w*=x.w,this}multiplyScalar(x){return this.x*=x,this.y*=x,this.z*=x,this.w*=x,this}applyMatrix4(x){const w=this.x,S=this.y,U=this.z,G=this.w,z=x.elements;return this.x=z[0]*w+z[4]*S+z[8]*U+z[12]*G,this.y=z[1]*w+z[5]*S+z[9]*U+z[13]*G,this.z=z[2]*w+z[6]*S+z[10]*U+z[14]*G,this.w=z[3]*w+z[7]*S+z[11]*U+z[15]*G,this}divideScalar(x){return this.multiplyScalar(1/x)}setAxisAngleFromQuaternion(x){this.w=2*Math.acos(x.w);const w=Math.sqrt(1-x.w*x.w);return w<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=x.x/w,this.y=x.y/w,this.z=x.z/w),this}setAxisAngleFromRotationMatrix(x){let w,S,U,G;const z=.01,H=.1,j=x.elements,X=j[0],q=j[4],K=j[8],Y=j[1],Z=j[5],J=j[9],Q=j[2],ee=j[6],te=j[10];if(Math.abs(q-Y)<z&&Math.abs(K-Q)<z&&Math.abs(J-ee)<z){if(Math.abs(q+Y)<H&&Math.abs(K+Q)<H&&Math.abs(J+ee)<H&&Math.abs(X+Z+te-3)<H)return this.set(1,0,0,0),this;w=Math.PI;const x=(X+1)/2,j=(Z+1)/2,ne=(te+1)/2,re=(q+Y)/4,ie=(K+Q)/4,oe=(J+ee)/4;return x>j&&x>ne?x<z?(S=0,U=.707106781,G=.707106781):(S=Math.sqrt(x),U=re/S,G=ie/S):j>ne?j<z?(S=.707106781,U=0,G=.707106781):(U=Math.sqrt(j),S=re/U,G=oe/U):ne<z?(S=.707106781,U=.707106781,G=0):(G=Math.sqrt(ne),S=ie/G,U=oe/G),this.set(S,U,G,w),this}let ne=Math.sqrt((ee-J)*(ee-J)+(K-Q)*(K-Q)+(Y-q)*(Y-q));return Math.abs(ne)<.001&&(ne=1),this.x=(ee-J)/ne,this.y=(K-Q)/ne,this.z=(Y-q)/ne,this.w=Math.acos((X+Z+te-1)/2),this}min(x){return this.x=Math.min(this.x,x.x),this.y=Math.min(this.y,x.y),this.z=Math.min(this.z,x.z),this.w=Math.min(this.w,x.w),this}max(x){return this.x=Math.max(this.x,x.x),this.y=Math.max(this.y,x.y),this.z=Math.max(this.z,x.z),this.w=Math.max(this.w,x.w),this}clamp(x,w){return this.x=Math.max(x.x,Math.min(w.x,this.x)),this.y=Math.max(x.y,Math.min(w.y,this.y)),this.z=Math.max(x.z,Math.min(w.z,this.z)),this.w=Math.max(x.w,Math.min(w.w,this.w)),this}clampScalar(x,w){return this.x=Math.max(x,Math.min(w,this.x)),this.y=Math.max(x,Math.min(w,this.y)),this.z=Math.max(x,Math.min(w,this.z)),this.w=Math.max(x,Math.min(w,this.w)),this}clampLength(x,w){const S=this.length();return this.divideScalar(S||1).multiplyScalar(Math.max(x,Math.min(w,S)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(x){return this.x*x.x+this.y*x.y+this.z*x.z+this.w*x.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(x){return this.normalize().multiplyScalar(x)}lerp(x,w){return this.x+=(x.x-this.x)*w,this.y+=(x.y-this.y)*w,this.z+=(x.z-this.z)*w,this.w+=(x.w-this.w)*w,this}lerpVectors(x,w,S){return this.x=x.x+(w.x-x.x)*S,this.y=x.y+(w.y-x.y)*S,this.z=x.z+(w.z-x.z)*S,this.w=x.w+(w.w-x.w)*S,this}equals(x){return x.x===this.x&&x.y===this.y&&x.z===this.z&&x.w===this.w}fromArray(x,w=0){return this.x=x[w],this.y=x[w+1],this.z=x[w+2],this.w=x[w+3],this}toArray(x=[],w=0){return x[w]=this.x,x[w+1]=this.y,x[w+2]=this.z,x[w+3]=this.w,x}fromBufferAttribute(x,w,S){return void 0!==S&&U.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=x.getX(w),this.y=x.getY(w),this.z=x.getZ(w),this.w=x.getW(w),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Vector4.prototype.isVector4=!0;class WebGLRenderTarget extends EventDispatcher{constructor(x,w,S={}){super(),this.width=x,this.height=w,this.depth=1,this.scissor=new Vector4(0,0,x,w),this.scissorTest=!1,this.viewport=new Vector4(0,0,x,w),this.texture=new Texture(void 0,S.mapping,S.wrapS,S.wrapT,S.magFilter,S.minFilter,S.format,S.type,S.anisotropy,S.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:x,height:w,depth:1},this.texture.generateMipmaps=void 0!==S.generateMipmaps&&S.generateMipmaps,this.texture.internalFormat=void 0!==S.internalFormat?S.internalFormat:null,this.texture.minFilter=void 0!==S.minFilter?S.minFilter:ot,this.depthBuffer=void 0===S.depthBuffer||S.depthBuffer,this.stencilBuffer=void 0!==S.stencilBuffer&&S.stencilBuffer,this.depthTexture=void 0!==S.depthTexture?S.depthTexture:null}setTexture(x){x.image={width:this.width,height:this.height,depth:this.depth},this.texture=x}setSize(x,w,S=1){this.width===x&&this.height===w&&this.depth===S||(this.width=x,this.height=w,this.depth=S,this.texture.image.width=x,this.texture.image.height=w,this.texture.image.depth=S,this.dispose()),this.viewport.set(0,0,x,w),this.scissor.set(0,0,x,w)}clone(){return(new this.constructor).copy(this)}copy(x){return this.width=x.width,this.height=x.height,this.depth=x.depth,this.viewport.copy(x.viewport),this.texture=x.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=x.depthBuffer,this.stencilBuffer=x.stencilBuffer,this.depthTexture=x.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}WebGLRenderTarget.prototype.isWebGLRenderTarget=!0;class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(x,w,S){super(x,w);const U=this.texture;this.texture=[];for(let x=0;x<S;x++)this.texture[x]=U.clone()}setSize(x,w,S=1){if(this.width!==x||this.height!==w||this.depth!==S){this.width=x,this.height=w,this.depth=S;for(let U=0,G=this.texture.length;U<G;U++)this.texture[U].image.width=x,this.texture[U].image.height=w,this.texture[U].image.depth=S;this.dispose()}return this.viewport.set(0,0,x,w),this.scissor.set(0,0,x,w),this}copy(x){this.dispose(),this.width=x.width,this.height=x.height,this.depth=x.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=x.depthBuffer,this.stencilBuffer=x.stencilBuffer,this.depthTexture=x.depthTexture,this.texture.length=0;for(let w=0,S=x.texture.length;w<S;w++)this.texture[w]=x.texture[w].clone();return this}}WebGLMultipleRenderTargets.prototype.isWebGLMultipleRenderTargets=!0;class WebGLMultisampleRenderTarget extends WebGLRenderTarget{constructor(x,w,S){super(x,w,S),this.samples=4}copy(x){return super.copy.call(this,x),this.samples=x.samples,this}}WebGLMultisampleRenderTarget.prototype.isWebGLMultisampleRenderTarget=!0;class Quaternion{constructor(x=0,w=0,S=0,U=1){this._x=x,this._y=w,this._z=S,this._w=U}static slerp(x,w,S,G){return U.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),S.slerpQuaternions(x,w,G)}static slerpFlat(x,w,S,U,G,z,H){let j=S[U+0],X=S[U+1],q=S[U+2],K=S[U+3];const Y=G[z+0],Z=G[z+1],J=G[z+2],Q=G[z+3];if(0===H)return x[w+0]=j,x[w+1]=X,x[w+2]=q,void(x[w+3]=K);if(1===H)return x[w+0]=Y,x[w+1]=Z,x[w+2]=J,void(x[w+3]=Q);if(K!==Q||j!==Y||X!==Z||q!==J){let x=1-H;const w=j*Y+X*Z+q*J+K*Q,S=w>=0?1:-1,U=1-w*w;if(U>Number.EPSILON){const G=Math.sqrt(U),z=Math.atan2(G,w*S);x=Math.sin(x*z)/G,H=Math.sin(H*z)/G}const G=H*S;if(j=j*x+Y*G,X=X*x+Z*G,q=q*x+J*G,K=K*x+Q*G,x===1-H){const x=1/Math.sqrt(j*j+X*X+q*q+K*K);j*=x,X*=x,q*=x,K*=x}}x[w]=j,x[w+1]=X,x[w+2]=q,x[w+3]=K}static multiplyQuaternionsFlat(x,w,S,U,G,z){const H=S[U],j=S[U+1],X=S[U+2],q=S[U+3],K=G[z],Y=G[z+1],Z=G[z+2],J=G[z+3];return x[w]=H*J+q*K+j*Z-X*Y,x[w+1]=j*J+q*Y+X*K-H*Z,x[w+2]=X*J+q*Z+H*Y-j*K,x[w+3]=q*J-H*K-j*Y-X*Z,x}get x(){return this._x}set x(x){this._x=x,this._onChangeCallback()}get y(){return this._y}set y(x){this._y=x,this._onChangeCallback()}get z(){return this._z}set z(x){this._z=x,this._onChangeCallback()}get w(){return this._w}set w(x){this._w=x,this._onChangeCallback()}set(x,w,S,U){return this._x=x,this._y=w,this._z=S,this._w=U,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(x){return this._x=x.x,this._y=x.y,this._z=x.z,this._w=x.w,this._onChangeCallback(),this}setFromEuler(x,w){if(!x||!x.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const S=x._x,G=x._y,z=x._z,H=x._order,j=Math.cos,X=Math.sin,q=j(S/2),K=j(G/2),Y=j(z/2),Z=X(S/2),J=X(G/2),Q=X(z/2);switch(H){case"XYZ":this._x=Z*K*Y+q*J*Q,this._y=q*J*Y-Z*K*Q,this._z=q*K*Q+Z*J*Y,this._w=q*K*Y-Z*J*Q;break;case"YXZ":this._x=Z*K*Y+q*J*Q,this._y=q*J*Y-Z*K*Q,this._z=q*K*Q-Z*J*Y,this._w=q*K*Y+Z*J*Q;break;case"ZXY":this._x=Z*K*Y-q*J*Q,this._y=q*J*Y+Z*K*Q,this._z=q*K*Q+Z*J*Y,this._w=q*K*Y-Z*J*Q;break;case"ZYX":this._x=Z*K*Y-q*J*Q,this._y=q*J*Y+Z*K*Q,this._z=q*K*Q-Z*J*Y,this._w=q*K*Y+Z*J*Q;break;case"YZX":this._x=Z*K*Y+q*J*Q,this._y=q*J*Y+Z*K*Q,this._z=q*K*Q-Z*J*Y,this._w=q*K*Y-Z*J*Q;break;case"XZY":this._x=Z*K*Y-q*J*Q,this._y=q*J*Y-Z*K*Q,this._z=q*K*Q+Z*J*Y,this._w=q*K*Y+Z*J*Q;break;default:U.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+H)}return!1!==w&&this._onChangeCallback(),this}setFromAxisAngle(x,w){const S=w/2,U=Math.sin(S);return this._x=x.x*U,this._y=x.y*U,this._z=x.z*U,this._w=Math.cos(S),this._onChangeCallback(),this}setFromRotationMatrix(x){const w=x.elements,S=w[0],U=w[4],G=w[8],z=w[1],H=w[5],j=w[9],X=w[2],q=w[6],K=w[10],Y=S+H+K;if(Y>0){const x=.5/Math.sqrt(Y+1);this._w=.25/x,this._x=(q-j)*x,this._y=(G-X)*x,this._z=(z-U)*x}else if(S>H&&S>K){const x=2*Math.sqrt(1+S-H-K);this._w=(q-j)/x,this._x=.25*x,this._y=(U+z)/x,this._z=(G+X)/x}else if(H>K){const x=2*Math.sqrt(1+H-S-K);this._w=(G-X)/x,this._x=(U+z)/x,this._y=.25*x,this._z=(j+q)/x}else{const x=2*Math.sqrt(1+K-S-H);this._w=(z-U)/x,this._x=(G+X)/x,this._y=(j+q)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(x,w){let S=x.dot(w)+1;return S<Number.EPSILON?(S=0,Math.abs(x.x)>Math.abs(x.z)?(this._x=-x.y,this._y=x.x,this._z=0,this._w=S):(this._x=0,this._y=-x.z,this._z=x.y,this._w=S)):(this._x=x.y*w.z-x.z*w.y,this._y=x.z*w.x-x.x*w.z,this._z=x.x*w.y-x.y*w.x,this._w=S),this.normalize()}angleTo(x){return 2*Math.acos(Math.abs(clamp(this.dot(x),-1,1)))}rotateTowards(x,w){const S=this.angleTo(x);if(0===S)return this;const U=Math.min(1,w/S);return this.slerp(x,U),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(x){return this._x*x._x+this._y*x._y+this._z*x._z+this._w*x._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let x=this.length();return 0===x?(this._x=0,this._y=0,this._z=0,this._w=1):(x=1/x,this._x=this._x*x,this._y=this._y*x,this._z=this._z*x,this._w=this._w*x),this._onChangeCallback(),this}multiply(x,w){return void 0!==w?(U.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(x,w)):this.multiplyQuaternions(this,x)}premultiply(x){return this.multiplyQuaternions(x,this)}multiplyQuaternions(x,w){const S=x._x,U=x._y,G=x._z,z=x._w,H=w._x,j=w._y,X=w._z,q=w._w;return this._x=S*q+z*H+U*X-G*j,this._y=U*q+z*j+G*H-S*X,this._z=G*q+z*X+S*j-U*H,this._w=z*q-S*H-U*j-G*X,this._onChangeCallback(),this}slerp(x,w){if(0===w)return this;if(1===w)return this.copy(x);const S=this._x,U=this._y,G=this._z,z=this._w;let H=z*x._w+S*x._x+U*x._y+G*x._z;if(H<0?(this._w=-x._w,this._x=-x._x,this._y=-x._y,this._z=-x._z,H=-H):this.copy(x),H>=1)return this._w=z,this._x=S,this._y=U,this._z=G,this;const j=1-H*H;if(j<=Number.EPSILON){const x=1-w;return this._w=x*z+w*this._w,this._x=x*S+w*this._x,this._y=x*U+w*this._y,this._z=x*G+w*this._z,this.normalize(),this._onChangeCallback(),this}const X=Math.sqrt(j),q=Math.atan2(X,H),K=Math.sin((1-w)*q)/X,Y=Math.sin(w*q)/X;return this._w=z*K+this._w*Y,this._x=S*K+this._x*Y,this._y=U*K+this._y*Y,this._z=G*K+this._z*Y,this._onChangeCallback(),this}slerpQuaternions(x,w,S){this.copy(x).slerp(w,S)}random(){const x=Math.random(),w=Math.sqrt(1-x),S=Math.sqrt(x),U=2*Math.PI*Math.random(),G=2*Math.PI*Math.random();return this.set(w*Math.cos(U),S*Math.sin(G),S*Math.cos(G),w*Math.sin(U))}equals(x){return x._x===this._x&&x._y===this._y&&x._z===this._z&&x._w===this._w}fromArray(x,w=0){return this._x=x[w],this._y=x[w+1],this._z=x[w+2],this._w=x[w+3],this._onChangeCallback(),this}toArray(x=[],w=0){return x[w]=this._x,x[w+1]=this._y,x[w+2]=this._z,x[w+3]=this._w,x}fromBufferAttribute(x,w){return this._x=x.getX(w),this._y=x.getY(w),this._z=x.getZ(w),this._w=x.getW(w),this}_onChange(x){return this._onChangeCallback=x,this}_onChangeCallback(){}}Quaternion.prototype.isQuaternion=!0;class Vector3{constructor(x=0,w=0,S=0){this.x=x,this.y=w,this.z=S}set(x,w,S){return void 0===S&&(S=this.z),this.x=x,this.y=w,this.z=S,this}setScalar(x){return this.x=x,this.y=x,this.z=x,this}setX(x){return this.x=x,this}setY(x){return this.y=x,this}setZ(x){return this.z=x,this}setComponent(x,w){switch(x){case 0:this.x=w;break;case 1:this.y=w;break;case 2:this.z=w;break;default:throw new Error("index is out of range: "+x)}return this}getComponent(x){switch(x){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+x)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(x){return this.x=x.x,this.y=x.y,this.z=x.z,this}add(x,w){return void 0!==w?(U.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(x,w)):(this.x+=x.x,this.y+=x.y,this.z+=x.z,this)}addScalar(x){return this.x+=x,this.y+=x,this.z+=x,this}addVectors(x,w){return this.x=x.x+w.x,this.y=x.y+w.y,this.z=x.z+w.z,this}addScaledVector(x,w){return this.x+=x.x*w,this.y+=x.y*w,this.z+=x.z*w,this}sub(x,w){return void 0!==w?(U.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(x,w)):(this.x-=x.x,this.y-=x.y,this.z-=x.z,this)}subScalar(x){return this.x-=x,this.y-=x,this.z-=x,this}subVectors(x,w){return this.x=x.x-w.x,this.y=x.y-w.y,this.z=x.z-w.z,this}multiply(x,w){return void 0!==w?(U.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(x,w)):(this.x*=x.x,this.y*=x.y,this.z*=x.z,this)}multiplyScalar(x){return this.x*=x,this.y*=x,this.z*=x,this}multiplyVectors(x,w){return this.x=x.x*w.x,this.y=x.y*w.y,this.z=x.z*w.z,this}applyEuler(x){return x&&x.isEuler||U.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion($r.setFromEuler(x))}applyAxisAngle(x,w){return this.applyQuaternion($r.setFromAxisAngle(x,w))}applyMatrix3(x){const w=this.x,S=this.y,U=this.z,G=x.elements;return this.x=G[0]*w+G[3]*S+G[6]*U,this.y=G[1]*w+G[4]*S+G[7]*U,this.z=G[2]*w+G[5]*S+G[8]*U,this}applyNormalMatrix(x){return this.applyMatrix3(x).normalize()}applyMatrix4(x){const w=this.x,S=this.y,U=this.z,G=x.elements,z=1/(G[3]*w+G[7]*S+G[11]*U+G[15]);return this.x=(G[0]*w+G[4]*S+G[8]*U+G[12])*z,this.y=(G[1]*w+G[5]*S+G[9]*U+G[13])*z,this.z=(G[2]*w+G[6]*S+G[10]*U+G[14])*z,this}applyQuaternion(x){const w=this.x,S=this.y,U=this.z,G=x.x,z=x.y,H=x.z,j=x.w,X=j*w+z*U-H*S,q=j*S+H*w-G*U,K=j*U+G*S-z*w,Y=-G*w-z*S-H*U;return this.x=X*j+Y*-G+q*-H-K*-z,this.y=q*j+Y*-z+K*-G-X*-H,this.z=K*j+Y*-H+X*-z-q*-G,this}project(x){return this.applyMatrix4(x.matrixWorldInverse).applyMatrix4(x.projectionMatrix)}unproject(x){return this.applyMatrix4(x.projectionMatrixInverse).applyMatrix4(x.matrixWorld)}transformDirection(x){const w=this.x,S=this.y,U=this.z,G=x.elements;return this.x=G[0]*w+G[4]*S+G[8]*U,this.y=G[1]*w+G[5]*S+G[9]*U,this.z=G[2]*w+G[6]*S+G[10]*U,this.normalize()}divide(x){return this.x/=x.x,this.y/=x.y,this.z/=x.z,this}divideScalar(x){return this.multiplyScalar(1/x)}min(x){return this.x=Math.min(this.x,x.x),this.y=Math.min(this.y,x.y),this.z=Math.min(this.z,x.z),this}max(x){return this.x=Math.max(this.x,x.x),this.y=Math.max(this.y,x.y),this.z=Math.max(this.z,x.z),this}clamp(x,w){return this.x=Math.max(x.x,Math.min(w.x,this.x)),this.y=Math.max(x.y,Math.min(w.y,this.y)),this.z=Math.max(x.z,Math.min(w.z,this.z)),this}clampScalar(x,w){return this.x=Math.max(x,Math.min(w,this.x)),this.y=Math.max(x,Math.min(w,this.y)),this.z=Math.max(x,Math.min(w,this.z)),this}clampLength(x,w){const S=this.length();return this.divideScalar(S||1).multiplyScalar(Math.max(x,Math.min(w,S)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(x){return this.x*x.x+this.y*x.y+this.z*x.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(x){return this.normalize().multiplyScalar(x)}lerp(x,w){return this.x+=(x.x-this.x)*w,this.y+=(x.y-this.y)*w,this.z+=(x.z-this.z)*w,this}lerpVectors(x,w,S){return this.x=x.x+(w.x-x.x)*S,this.y=x.y+(w.y-x.y)*S,this.z=x.z+(w.z-x.z)*S,this}cross(x,w){return void 0!==w?(U.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(x,w)):this.crossVectors(this,x)}crossVectors(x,w){const S=x.x,U=x.y,G=x.z,z=w.x,H=w.y,j=w.z;return this.x=U*j-G*H,this.y=G*z-S*j,this.z=S*H-U*z,this}projectOnVector(x){const w=x.lengthSq();if(0===w)return this.set(0,0,0);const S=x.dot(this)/w;return this.copy(x).multiplyScalar(S)}projectOnPlane(x){return Hr.copy(this).projectOnVector(x),this.sub(Hr)}reflect(x){return this.sub(Hr.copy(x).multiplyScalar(2*this.dot(x)))}angleTo(x){const w=Math.sqrt(this.lengthSq()*x.lengthSq());if(0===w)return Math.PI/2;const S=this.dot(x)/w;return Math.acos(clamp(S,-1,1))}distanceTo(x){return Math.sqrt(this.distanceToSquared(x))}distanceToSquared(x){const w=this.x-x.x,S=this.y-x.y,U=this.z-x.z;return w*w+S*S+U*U}manhattanDistanceTo(x){return Math.abs(this.x-x.x)+Math.abs(this.y-x.y)+Math.abs(this.z-x.z)}setFromSpherical(x){return this.setFromSphericalCoords(x.radius,x.phi,x.theta)}setFromSphericalCoords(x,w,S){const U=Math.sin(w)*x;return this.x=U*Math.sin(S),this.y=Math.cos(w)*x,this.z=U*Math.cos(S),this}setFromCylindrical(x){return this.setFromCylindricalCoords(x.radius,x.theta,x.y)}setFromCylindricalCoords(x,w,S){return this.x=x*Math.sin(w),this.y=S,this.z=x*Math.cos(w),this}setFromMatrixPosition(x){const w=x.elements;return this.x=w[12],this.y=w[13],this.z=w[14],this}setFromMatrixScale(x){const w=this.setFromMatrixColumn(x,0).length(),S=this.setFromMatrixColumn(x,1).length(),U=this.setFromMatrixColumn(x,2).length();return this.x=w,this.y=S,this.z=U,this}setFromMatrixColumn(x,w){return this.fromArray(x.elements,4*w)}setFromMatrix3Column(x,w){return this.fromArray(x.elements,3*w)}equals(x){return x.x===this.x&&x.y===this.y&&x.z===this.z}fromArray(x,w=0){return this.x=x[w],this.y=x[w+1],this.z=x[w+2],this}toArray(x=[],w=0){return x[w]=this.x,x[w+1]=this.y,x[w+2]=this.z,x}fromBufferAttribute(x,w,S){return void 0!==S&&U.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=x.getX(w),this.y=x.getY(w),this.z=x.getZ(w),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const x=2*(Math.random()-.5),w=Math.random()*Math.PI*2,S=Math.sqrt(1-x**2);return this.x=S*Math.cos(w),this.y=S*Math.sin(w),this.z=x,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Vector3.prototype.isVector3=!0;const Hr=new Vector3,$r=new Quaternion;class Box3{constructor(x=new Vector3(1/0,1/0,1/0),w=new Vector3(-1/0,-1/0,-1/0)){this.min=x,this.max=w}set(x,w){return this.min.copy(x),this.max.copy(w),this}setFromArray(x){let w=1/0,S=1/0,U=1/0,G=-1/0,z=-1/0,H=-1/0;for(let j=0,X=x.length;j<X;j+=3){const X=x[j],q=x[j+1],K=x[j+2];X<w&&(w=X),q<S&&(S=q),K<U&&(U=K),X>G&&(G=X),q>z&&(z=q),K>H&&(H=K)}return this.min.set(w,S,U),this.max.set(G,z,H),this}setFromBufferAttribute(x){let w=1/0,S=1/0,U=1/0,G=-1/0,z=-1/0,H=-1/0;for(let j=0,X=x.count;j<X;j++){const X=x.getX(j),q=x.getY(j),K=x.getZ(j);X<w&&(w=X),q<S&&(S=q),K<U&&(U=K),X>G&&(G=X),q>z&&(z=q),K>H&&(H=K)}return this.min.set(w,S,U),this.max.set(G,z,H),this}setFromPoints(x){this.makeEmpty();for(let w=0,S=x.length;w<S;w++)this.expandByPoint(x[w]);return this}setFromCenterAndSize(x,w){const S=Xr.copy(w).multiplyScalar(.5);return this.min.copy(x).sub(S),this.max.copy(x).add(S),this}setFromObject(x){return this.makeEmpty(),this.expandByObject(x)}clone(){return(new this.constructor).copy(this)}copy(x){return this.min.copy(x.min),this.max.copy(x.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(x){return this.isEmpty()?x.set(0,0,0):x.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(x){return this.isEmpty()?x.set(0,0,0):x.subVectors(this.max,this.min)}expandByPoint(x){return this.min.min(x),this.max.max(x),this}expandByVector(x){return this.min.sub(x),this.max.add(x),this}expandByScalar(x){return this.min.addScalar(-x),this.max.addScalar(x),this}expandByObject(x){x.updateWorldMatrix(!1,!1);const w=x.geometry;void 0!==w&&(null===w.boundingBox&&w.computeBoundingBox(),qr.copy(w.boundingBox),qr.applyMatrix4(x.matrixWorld),this.union(qr));const S=x.children;for(let x=0,w=S.length;x<w;x++)this.expandByObject(S[x]);return this}containsPoint(x){return!(x.x<this.min.x||x.x>this.max.x||x.y<this.min.y||x.y>this.max.y||x.z<this.min.z||x.z>this.max.z)}containsBox(x){return this.min.x<=x.min.x&&x.max.x<=this.max.x&&this.min.y<=x.min.y&&x.max.y<=this.max.y&&this.min.z<=x.min.z&&x.max.z<=this.max.z}getParameter(x,w){return w.set((x.x-this.min.x)/(this.max.x-this.min.x),(x.y-this.min.y)/(this.max.y-this.min.y),(x.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(x){return!(x.max.x<this.min.x||x.min.x>this.max.x||x.max.y<this.min.y||x.min.y>this.max.y||x.max.z<this.min.z||x.min.z>this.max.z)}intersectsSphere(x){return this.clampPoint(x.center,Xr),Xr.distanceToSquared(x.center)<=x.radius*x.radius}intersectsPlane(x){let w,S;return x.normal.x>0?(w=x.normal.x*this.min.x,S=x.normal.x*this.max.x):(w=x.normal.x*this.max.x,S=x.normal.x*this.min.x),x.normal.y>0?(w+=x.normal.y*this.min.y,S+=x.normal.y*this.max.y):(w+=x.normal.y*this.max.y,S+=x.normal.y*this.min.y),x.normal.z>0?(w+=x.normal.z*this.min.z,S+=x.normal.z*this.max.z):(w+=x.normal.z*this.max.z,S+=x.normal.z*this.min.z),w<=-x.constant&&S>=-x.constant}intersectsTriangle(x){if(this.isEmpty())return!1;this.getCenter(ni),ri.subVectors(this.max,ni),Kr.subVectors(x.a,ni),Yr.subVectors(x.b,ni),Zr.subVectors(x.c,ni),Jr.subVectors(Yr,Kr),Qr.subVectors(Zr,Yr),ei.subVectors(Kr,Zr);let w=[0,-Jr.z,Jr.y,0,-Qr.z,Qr.y,0,-ei.z,ei.y,Jr.z,0,-Jr.x,Qr.z,0,-Qr.x,ei.z,0,-ei.x,-Jr.y,Jr.x,0,-Qr.y,Qr.x,0,-ei.y,ei.x,0];return!!satForAxes(w,Kr,Yr,Zr,ri)&&(w=[1,0,0,0,1,0,0,0,1],!!satForAxes(w,Kr,Yr,Zr,ri)&&(ii.crossVectors(Jr,Qr),w=[ii.x,ii.y,ii.z],satForAxes(w,Kr,Yr,Zr,ri)))}clampPoint(x,w){return w.copy(x).clamp(this.min,this.max)}distanceToPoint(x){return Xr.copy(x).clamp(this.min,this.max).sub(x).length()}getBoundingSphere(x){return this.getCenter(x.center),x.radius=.5*this.getSize(Xr).length(),x}intersect(x){return this.min.max(x.min),this.max.min(x.max),this.isEmpty()&&this.makeEmpty(),this}union(x){return this.min.min(x.min),this.max.max(x.max),this}applyMatrix4(x){return this.isEmpty()||(jr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(x),jr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(x),jr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(x),jr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(x),jr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(x),jr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(x),jr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(x),jr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(x),this.setFromPoints(jr)),this}translate(x){return this.min.add(x),this.max.add(x),this}equals(x){return x.min.equals(this.min)&&x.max.equals(this.max)}}Box3.prototype.isBox3=!0;const jr=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],Xr=new Vector3,qr=new Box3,Kr=new Vector3,Yr=new Vector3,Zr=new Vector3,Jr=new Vector3,Qr=new Vector3,ei=new Vector3,ni=new Vector3,ri=new Vector3,ii=new Vector3,oi=new Vector3;function satForAxes(x,w,S,U,G){for(let z=0,H=x.length-3;z<=H;z+=3){oi.fromArray(x,z);const H=G.x*Math.abs(oi.x)+G.y*Math.abs(oi.y)+G.z*Math.abs(oi.z),j=w.dot(oi),X=S.dot(oi),q=U.dot(oi);if(Math.max(-Math.max(j,X,q),Math.min(j,X,q))>H)return!1}return!0}const ai=new Box3,li=new Vector3,ci=new Vector3,ui=new Vector3;class Sphere{constructor(x=new Vector3,w=-1){this.center=x,this.radius=w}set(x,w){return this.center.copy(x),this.radius=w,this}setFromPoints(x,w){const S=this.center;void 0!==w?S.copy(w):ai.setFromPoints(x).getCenter(S);let U=0;for(let w=0,G=x.length;w<G;w++)U=Math.max(U,S.distanceToSquared(x[w]));return this.radius=Math.sqrt(U),this}copy(x){return this.center.copy(x.center),this.radius=x.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(x){return x.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(x){return x.distanceTo(this.center)-this.radius}intersectsSphere(x){const w=this.radius+x.radius;return x.center.distanceToSquared(this.center)<=w*w}intersectsBox(x){return x.intersectsSphere(this)}intersectsPlane(x){return Math.abs(x.distanceToPoint(this.center))<=this.radius}clampPoint(x,w){const S=this.center.distanceToSquared(x);return w.copy(x),S>this.radius*this.radius&&(w.sub(this.center).normalize(),w.multiplyScalar(this.radius).add(this.center)),w}getBoundingBox(x){return this.isEmpty()?(x.makeEmpty(),x):(x.set(this.center,this.center),x.expandByScalar(this.radius),x)}applyMatrix4(x){return this.center.applyMatrix4(x),this.radius=this.radius*x.getMaxScaleOnAxis(),this}translate(x){return this.center.add(x),this}expandByPoint(x){ui.subVectors(x,this.center);const w=ui.lengthSq();if(w>this.radius*this.radius){const x=Math.sqrt(w),S=.5*(x-this.radius);this.center.add(ui.multiplyScalar(S/x)),this.radius+=S}return this}union(x){return ci.subVectors(x.center,this.center).normalize().multiplyScalar(x.radius),this.expandByPoint(li.copy(x.center).add(ci)),this.expandByPoint(li.copy(x.center).sub(ci)),this}equals(x){return x.center.equals(this.center)&&x.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const di=new Vector3,pi=new Vector3,fi=new Vector3,gi=new Vector3,yi=new Vector3,_i=new Vector3,bi=new Vector3;class Ray{constructor(x=new Vector3,w=new Vector3(0,0,-1)){this.origin=x,this.direction=w}set(x,w){return this.origin.copy(x),this.direction.copy(w),this}copy(x){return this.origin.copy(x.origin),this.direction.copy(x.direction),this}at(x,w){return w.copy(this.direction).multiplyScalar(x).add(this.origin)}lookAt(x){return this.direction.copy(x).sub(this.origin).normalize(),this}recast(x){return this.origin.copy(this.at(x,di)),this}closestPointToPoint(x,w){w.subVectors(x,this.origin);const S=w.dot(this.direction);return S<0?w.copy(this.origin):w.copy(this.direction).multiplyScalar(S).add(this.origin)}distanceToPoint(x){return Math.sqrt(this.distanceSqToPoint(x))}distanceSqToPoint(x){const w=di.subVectors(x,this.origin).dot(this.direction);return w<0?this.origin.distanceToSquared(x):(di.copy(this.direction).multiplyScalar(w).add(this.origin),di.distanceToSquared(x))}distanceSqToSegment(x,w,S,U){pi.copy(x).add(w).multiplyScalar(.5),fi.copy(w).sub(x).normalize(),gi.copy(this.origin).sub(pi);const G=.5*x.distanceTo(w),z=-this.direction.dot(fi),H=gi.dot(this.direction),j=-gi.dot(fi),X=gi.lengthSq(),q=Math.abs(1-z*z);let K,Y,Z,J;if(q>0)if(K=z*j-H,Y=z*H-j,J=G*q,K>=0)if(Y>=-J)if(Y<=J){const x=1/q;K*=x,Y*=x,Z=K*(K+z*Y+2*H)+Y*(z*K+Y+2*j)+X}else Y=G,K=Math.max(0,-(z*Y+H)),Z=-K*K+Y*(Y+2*j)+X;else Y=-G,K=Math.max(0,-(z*Y+H)),Z=-K*K+Y*(Y+2*j)+X;else Y<=-J?(K=Math.max(0,-(-z*G+H)),Y=K>0?-G:Math.min(Math.max(-G,-j),G),Z=-K*K+Y*(Y+2*j)+X):Y<=J?(K=0,Y=Math.min(Math.max(-G,-j),G),Z=Y*(Y+2*j)+X):(K=Math.max(0,-(z*G+H)),Y=K>0?G:Math.min(Math.max(-G,-j),G),Z=-K*K+Y*(Y+2*j)+X);else Y=z>0?-G:G,K=Math.max(0,-(z*Y+H)),Z=-K*K+Y*(Y+2*j)+X;return S&&S.copy(this.direction).multiplyScalar(K).add(this.origin),U&&U.copy(fi).multiplyScalar(Y).add(pi),Z}intersectSphere(x,w){di.subVectors(x.center,this.origin);const S=di.dot(this.direction),U=di.dot(di)-S*S,G=x.radius*x.radius;if(U>G)return null;const z=Math.sqrt(G-U),H=S-z,j=S+z;return H<0&&j<0?null:H<0?this.at(j,w):this.at(H,w)}intersectsSphere(x){return this.distanceSqToPoint(x.center)<=x.radius*x.radius}distanceToPlane(x){const w=x.normal.dot(this.direction);if(0===w)return 0===x.distanceToPoint(this.origin)?0:null;const S=-(this.origin.dot(x.normal)+x.constant)/w;return S>=0?S:null}intersectPlane(x,w){const S=this.distanceToPlane(x);return null===S?null:this.at(S,w)}intersectsPlane(x){const w=x.distanceToPoint(this.origin);if(0===w)return!0;return x.normal.dot(this.direction)*w<0}intersectBox(x,w){let S,U,G,z,H,j;const X=1/this.direction.x,q=1/this.direction.y,K=1/this.direction.z,Y=this.origin;return X>=0?(S=(x.min.x-Y.x)*X,U=(x.max.x-Y.x)*X):(S=(x.max.x-Y.x)*X,U=(x.min.x-Y.x)*X),q>=0?(G=(x.min.y-Y.y)*q,z=(x.max.y-Y.y)*q):(G=(x.max.y-Y.y)*q,z=(x.min.y-Y.y)*q),S>z||G>U?null:((G>S||S!=S)&&(S=G),(z<U||U!=U)&&(U=z),K>=0?(H=(x.min.z-Y.z)*K,j=(x.max.z-Y.z)*K):(H=(x.max.z-Y.z)*K,j=(x.min.z-Y.z)*K),S>j||H>U?null:((H>S||S!=S)&&(S=H),(j<U||U!=U)&&(U=j),U<0?null:this.at(S>=0?S:U,w)))}intersectsBox(x){return null!==this.intersectBox(x,di)}intersectTriangle(x,w,S,U,G){yi.subVectors(w,x),_i.subVectors(S,x),bi.crossVectors(yi,_i);let z,H=this.direction.dot(bi);if(H>0){if(U)return null;z=1}else{if(!(H<0))return null;z=-1,H=-H}gi.subVectors(this.origin,x);const j=z*this.direction.dot(_i.crossVectors(gi,_i));if(j<0)return null;const X=z*this.direction.dot(yi.cross(gi));if(X<0)return null;if(j+X>H)return null;const q=-z*gi.dot(bi);return q<0?null:this.at(q/H,G)}applyMatrix4(x){return this.origin.applyMatrix4(x),this.direction.transformDirection(x),this}equals(x){return x.origin.equals(this.origin)&&x.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Matrix4{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&U.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(x,w,S,U,G,z,H,j,X,q,K,Y,Z,J,Q,ee){const te=this.elements;return te[0]=x,te[4]=w,te[8]=S,te[12]=U,te[1]=G,te[5]=z,te[9]=H,te[13]=j,te[2]=X,te[6]=q,te[10]=K,te[14]=Y,te[3]=Z,te[7]=J,te[11]=Q,te[15]=ee,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Matrix4).fromArray(this.elements)}copy(x){const w=this.elements,S=x.elements;return w[0]=S[0],w[1]=S[1],w[2]=S[2],w[3]=S[3],w[4]=S[4],w[5]=S[5],w[6]=S[6],w[7]=S[7],w[8]=S[8],w[9]=S[9],w[10]=S[10],w[11]=S[11],w[12]=S[12],w[13]=S[13],w[14]=S[14],w[15]=S[15],this}copyPosition(x){const w=this.elements,S=x.elements;return w[12]=S[12],w[13]=S[13],w[14]=S[14],this}setFromMatrix3(x){const w=x.elements;return this.set(w[0],w[3],w[6],0,w[1],w[4],w[7],0,w[2],w[5],w[8],0,0,0,0,1),this}extractBasis(x,w,S){return x.setFromMatrixColumn(this,0),w.setFromMatrixColumn(this,1),S.setFromMatrixColumn(this,2),this}makeBasis(x,w,S){return this.set(x.x,w.x,S.x,0,x.y,w.y,S.y,0,x.z,w.z,S.z,0,0,0,0,1),this}extractRotation(x){const w=this.elements,S=x.elements,U=1/xi.setFromMatrixColumn(x,0).length(),G=1/xi.setFromMatrixColumn(x,1).length(),z=1/xi.setFromMatrixColumn(x,2).length();return w[0]=S[0]*U,w[1]=S[1]*U,w[2]=S[2]*U,w[3]=0,w[4]=S[4]*G,w[5]=S[5]*G,w[6]=S[6]*G,w[7]=0,w[8]=S[8]*z,w[9]=S[9]*z,w[10]=S[10]*z,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,this}makeRotationFromEuler(x){x&&x.isEuler||U.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const w=this.elements,S=x.x,G=x.y,z=x.z,H=Math.cos(S),j=Math.sin(S),X=Math.cos(G),q=Math.sin(G),K=Math.cos(z),Y=Math.sin(z);if("XYZ"===x.order){const x=H*K,S=H*Y,U=j*K,G=j*Y;w[0]=X*K,w[4]=-X*Y,w[8]=q,w[1]=S+U*q,w[5]=x-G*q,w[9]=-j*X,w[2]=G-x*q,w[6]=U+S*q,w[10]=H*X}else if("YXZ"===x.order){const x=X*K,S=X*Y,U=q*K,G=q*Y;w[0]=x+G*j,w[4]=U*j-S,w[8]=H*q,w[1]=H*Y,w[5]=H*K,w[9]=-j,w[2]=S*j-U,w[6]=G+x*j,w[10]=H*X}else if("ZXY"===x.order){const x=X*K,S=X*Y,U=q*K,G=q*Y;w[0]=x-G*j,w[4]=-H*Y,w[8]=U+S*j,w[1]=S+U*j,w[5]=H*K,w[9]=G-x*j,w[2]=-H*q,w[6]=j,w[10]=H*X}else if("ZYX"===x.order){const x=H*K,S=H*Y,U=j*K,G=j*Y;w[0]=X*K,w[4]=U*q-S,w[8]=x*q+G,w[1]=X*Y,w[5]=G*q+x,w[9]=S*q-U,w[2]=-q,w[6]=j*X,w[10]=H*X}else if("YZX"===x.order){const x=H*X,S=H*q,U=j*X,G=j*q;w[0]=X*K,w[4]=G-x*Y,w[8]=U*Y+S,w[1]=Y,w[5]=H*K,w[9]=-j*K,w[2]=-q*K,w[6]=S*Y+U,w[10]=x-G*Y}else if("XZY"===x.order){const x=H*X,S=H*q,U=j*X,G=j*q;w[0]=X*K,w[4]=-Y,w[8]=q*K,w[1]=x*Y+G,w[5]=H*K,w[9]=S*Y-U,w[2]=U*Y-S,w[6]=j*K,w[10]=G*Y+x}return w[3]=0,w[7]=0,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,this}makeRotationFromQuaternion(x){return this.compose(wi,x,Si)}lookAt(x,w,S){const U=this.elements;return Ai.subVectors(x,w),0===Ai.lengthSq()&&(Ai.z=1),Ai.normalize(),Ti.crossVectors(S,Ai),0===Ti.lengthSq()&&(1===Math.abs(S.z)?Ai.x+=1e-4:Ai.z+=1e-4,Ai.normalize(),Ti.crossVectors(S,Ai)),Ti.normalize(),Ci.crossVectors(Ai,Ti),U[0]=Ti.x,U[4]=Ci.x,U[8]=Ai.x,U[1]=Ti.y,U[5]=Ci.y,U[9]=Ai.y,U[2]=Ti.z,U[6]=Ci.z,U[10]=Ai.z,this}multiply(x,w){return void 0!==w?(U.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(x,w)):this.multiplyMatrices(this,x)}premultiply(x){return this.multiplyMatrices(x,this)}multiplyMatrices(x,w){const S=x.elements,U=w.elements,G=this.elements,z=S[0],H=S[4],j=S[8],X=S[12],q=S[1],K=S[5],Y=S[9],Z=S[13],J=S[2],Q=S[6],ee=S[10],te=S[14],ne=S[3],re=S[7],ie=S[11],oe=S[15],ae=U[0],se=U[4],le=U[8],ce=U[12],ue=U[1],he=U[5],de=U[9],pe=U[13],fe=U[2],me=U[6],ge=U[10],ve=U[14],ye=U[3],_e=U[7],be=U[11],xe=U[15];return G[0]=z*ae+H*ue+j*fe+X*ye,G[4]=z*se+H*he+j*me+X*_e,G[8]=z*le+H*de+j*ge+X*be,G[12]=z*ce+H*pe+j*ve+X*xe,G[1]=q*ae+K*ue+Y*fe+Z*ye,G[5]=q*se+K*he+Y*me+Z*_e,G[9]=q*le+K*de+Y*ge+Z*be,G[13]=q*ce+K*pe+Y*ve+Z*xe,G[2]=J*ae+Q*ue+ee*fe+te*ye,G[6]=J*se+Q*he+ee*me+te*_e,G[10]=J*le+Q*de+ee*ge+te*be,G[14]=J*ce+Q*pe+ee*ve+te*xe,G[3]=ne*ae+re*ue+ie*fe+oe*ye,G[7]=ne*se+re*he+ie*me+oe*_e,G[11]=ne*le+re*de+ie*ge+oe*be,G[15]=ne*ce+re*pe+ie*ve+oe*xe,this}multiplyScalar(x){const w=this.elements;return w[0]*=x,w[4]*=x,w[8]*=x,w[12]*=x,w[1]*=x,w[5]*=x,w[9]*=x,w[13]*=x,w[2]*=x,w[6]*=x,w[10]*=x,w[14]*=x,w[3]*=x,w[7]*=x,w[11]*=x,w[15]*=x,this}determinant(){const x=this.elements,w=x[0],S=x[4],U=x[8],G=x[12],z=x[1],H=x[5],j=x[9],X=x[13],q=x[2],K=x[6],Y=x[10],Z=x[14];return x[3]*(+G*j*K-U*X*K-G*H*Y+S*X*Y+U*H*Z-S*j*Z)+x[7]*(+w*j*Z-w*X*Y+G*z*Y-U*z*Z+U*X*q-G*j*q)+x[11]*(+w*X*K-w*H*Z-G*z*K+S*z*Z+G*H*q-S*X*q)+x[15]*(-U*H*q-w*j*K+w*H*Y+U*z*K-S*z*Y+S*j*q)}transpose(){const x=this.elements;let w;return w=x[1],x[1]=x[4],x[4]=w,w=x[2],x[2]=x[8],x[8]=w,w=x[6],x[6]=x[9],x[9]=w,w=x[3],x[3]=x[12],x[12]=w,w=x[7],x[7]=x[13],x[13]=w,w=x[11],x[11]=x[14],x[14]=w,this}setPosition(x,w,S){const U=this.elements;return x.isVector3?(U[12]=x.x,U[13]=x.y,U[14]=x.z):(U[12]=x,U[13]=w,U[14]=S),this}invert(){const x=this.elements,w=x[0],S=x[1],U=x[2],G=x[3],z=x[4],H=x[5],j=x[6],X=x[7],q=x[8],K=x[9],Y=x[10],Z=x[11],J=x[12],Q=x[13],ee=x[14],te=x[15],ne=K*ee*X-Q*Y*X+Q*j*Z-H*ee*Z-K*j*te+H*Y*te,re=J*Y*X-q*ee*X-J*j*Z+z*ee*Z+q*j*te-z*Y*te,ie=q*Q*X-J*K*X+J*H*Z-z*Q*Z-q*H*te+z*K*te,oe=J*K*j-q*Q*j-J*H*Y+z*Q*Y+q*H*ee-z*K*ee,ae=w*ne+S*re+U*ie+G*oe;if(0===ae)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const se=1/ae;return x[0]=ne*se,x[1]=(Q*Y*G-K*ee*G-Q*U*Z+S*ee*Z+K*U*te-S*Y*te)*se,x[2]=(H*ee*G-Q*j*G+Q*U*X-S*ee*X-H*U*te+S*j*te)*se,x[3]=(K*j*G-H*Y*G-K*U*X+S*Y*X+H*U*Z-S*j*Z)*se,x[4]=re*se,x[5]=(q*ee*G-J*Y*G+J*U*Z-w*ee*Z-q*U*te+w*Y*te)*se,x[6]=(J*j*G-z*ee*G-J*U*X+w*ee*X+z*U*te-w*j*te)*se,x[7]=(z*Y*G-q*j*G+q*U*X-w*Y*X-z*U*Z+w*j*Z)*se,x[8]=ie*se,x[9]=(J*K*G-q*Q*G-J*S*Z+w*Q*Z+q*S*te-w*K*te)*se,x[10]=(z*Q*G-J*H*G+J*S*X-w*Q*X-z*S*te+w*H*te)*se,x[11]=(q*H*G-z*K*G-q*S*X+w*K*X+z*S*Z-w*H*Z)*se,x[12]=oe*se,x[13]=(q*Q*U-J*K*U+J*S*Y-w*Q*Y-q*S*ee+w*K*ee)*se,x[14]=(J*H*U-z*Q*U-J*S*j+w*Q*j+z*S*ee-w*H*ee)*se,x[15]=(z*K*U-q*H*U+q*S*j-w*K*j-z*S*Y+w*H*Y)*se,this}scale(x){const w=this.elements,S=x.x,U=x.y,G=x.z;return w[0]*=S,w[4]*=U,w[8]*=G,w[1]*=S,w[5]*=U,w[9]*=G,w[2]*=S,w[6]*=U,w[10]*=G,w[3]*=S,w[7]*=U,w[11]*=G,this}getMaxScaleOnAxis(){const x=this.elements,w=x[0]*x[0]+x[1]*x[1]+x[2]*x[2],S=x[4]*x[4]+x[5]*x[5]+x[6]*x[6],U=x[8]*x[8]+x[9]*x[9]+x[10]*x[10];return Math.sqrt(Math.max(w,S,U))}makeTranslation(x,w,S){return this.set(1,0,0,x,0,1,0,w,0,0,1,S,0,0,0,1),this}makeRotationX(x){const w=Math.cos(x),S=Math.sin(x);return this.set(1,0,0,0,0,w,-S,0,0,S,w,0,0,0,0,1),this}makeRotationY(x){const w=Math.cos(x),S=Math.sin(x);return this.set(w,0,S,0,0,1,0,0,-S,0,w,0,0,0,0,1),this}makeRotationZ(x){const w=Math.cos(x),S=Math.sin(x);return this.set(w,-S,0,0,S,w,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(x,w){const S=Math.cos(w),U=Math.sin(w),G=1-S,z=x.x,H=x.y,j=x.z,X=G*z,q=G*H;return this.set(X*z+S,X*H-U*j,X*j+U*H,0,X*H+U*j,q*H+S,q*j-U*z,0,X*j-U*H,q*j+U*z,G*j*j+S,0,0,0,0,1),this}makeScale(x,w,S){return this.set(x,0,0,0,0,w,0,0,0,0,S,0,0,0,0,1),this}makeShear(x,w,S,U,G,z){return this.set(1,S,G,0,x,1,z,0,w,U,1,0,0,0,0,1),this}compose(x,w,S){const U=this.elements,G=w._x,z=w._y,H=w._z,j=w._w,X=G+G,q=z+z,K=H+H,Y=G*X,Z=G*q,J=G*K,Q=z*q,ee=z*K,te=H*K,ne=j*X,re=j*q,ie=j*K,oe=S.x,ae=S.y,se=S.z;return U[0]=(1-(Q+te))*oe,U[1]=(Z+ie)*oe,U[2]=(J-re)*oe,U[3]=0,U[4]=(Z-ie)*ae,U[5]=(1-(Y+te))*ae,U[6]=(ee+ne)*ae,U[7]=0,U[8]=(J+re)*se,U[9]=(ee-ne)*se,U[10]=(1-(Y+Q))*se,U[11]=0,U[12]=x.x,U[13]=x.y,U[14]=x.z,U[15]=1,this}decompose(x,w,S){const U=this.elements;let G=xi.set(U[0],U[1],U[2]).length();const z=xi.set(U[4],U[5],U[6]).length(),H=xi.set(U[8],U[9],U[10]).length();this.determinant()<0&&(G=-G),x.x=U[12],x.y=U[13],x.z=U[14],Ei.copy(this);const j=1/G,X=1/z,q=1/H;return Ei.elements[0]*=j,Ei.elements[1]*=j,Ei.elements[2]*=j,Ei.elements[4]*=X,Ei.elements[5]*=X,Ei.elements[6]*=X,Ei.elements[8]*=q,Ei.elements[9]*=q,Ei.elements[10]*=q,w.setFromRotationMatrix(Ei),S.x=G,S.y=z,S.z=H,this}makePerspective(x,w,S,G,z,H){void 0===H&&U.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const j=this.elements,X=2*z/(w-x),q=2*z/(S-G),K=(w+x)/(w-x),Y=(S+G)/(S-G),Z=-(H+z)/(H-z),J=-2*H*z/(H-z);return j[0]=X,j[4]=0,j[8]=K,j[12]=0,j[1]=0,j[5]=q,j[9]=Y,j[13]=0,j[2]=0,j[6]=0,j[10]=Z,j[14]=J,j[3]=0,j[7]=0,j[11]=-1,j[15]=0,this}makeOrthographic(x,w,S,U,G,z){const H=this.elements,j=1/(w-x),X=1/(S-U),q=1/(z-G),K=(w+x)*j,Y=(S+U)*X,Z=(z+G)*q;return H[0]=2*j,H[4]=0,H[8]=0,H[12]=-K,H[1]=0,H[5]=2*X,H[9]=0,H[13]=-Y,H[2]=0,H[6]=0,H[10]=-2*q,H[14]=-Z,H[3]=0,H[7]=0,H[11]=0,H[15]=1,this}equals(x){const w=this.elements,S=x.elements;for(let x=0;x<16;x++)if(w[x]!==S[x])return!1;return!0}fromArray(x,w=0){for(let S=0;S<16;S++)this.elements[S]=x[S+w];return this}toArray(x=[],w=0){const S=this.elements;return x[w]=S[0],x[w+1]=S[1],x[w+2]=S[2],x[w+3]=S[3],x[w+4]=S[4],x[w+5]=S[5],x[w+6]=S[6],x[w+7]=S[7],x[w+8]=S[8],x[w+9]=S[9],x[w+10]=S[10],x[w+11]=S[11],x[w+12]=S[12],x[w+13]=S[13],x[w+14]=S[14],x[w+15]=S[15],x}}Matrix4.prototype.isMatrix4=!0;const xi=new Vector3,Ei=new Matrix4,wi=new Vector3(0,0,0),Si=new Vector3(1,1,1),Ti=new Vector3,Ci=new Vector3,Ai=new Vector3,Mi=new Matrix4,Ri=new Quaternion;class Euler{constructor(x=0,w=0,S=0,U=Euler.DefaultOrder){this._x=x,this._y=w,this._z=S,this._order=U}get x(){return this._x}set x(x){this._x=x,this._onChangeCallback()}get y(){return this._y}set y(x){this._y=x,this._onChangeCallback()}get z(){return this._z}set z(x){this._z=x,this._onChangeCallback()}get order(){return this._order}set order(x){this._order=x,this._onChangeCallback()}set(x,w,S,U=this._order){return this._x=x,this._y=w,this._z=S,this._order=U,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(x){return this._x=x._x,this._y=x._y,this._z=x._z,this._order=x._order,this._onChangeCallback(),this}setFromRotationMatrix(x,w=this._order,S=!0){const G=x.elements,z=G[0],H=G[4],j=G[8],X=G[1],q=G[5],K=G[9],Y=G[2],Z=G[6],J=G[10];switch(w){case"XYZ":this._y=Math.asin(clamp(j,-1,1)),Math.abs(j)<.9999999?(this._x=Math.atan2(-K,J),this._z=Math.atan2(-H,z)):(this._x=Math.atan2(Z,q),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(K,-1,1)),Math.abs(K)<.9999999?(this._y=Math.atan2(j,J),this._z=Math.atan2(X,q)):(this._y=Math.atan2(-Y,z),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(Z,-1,1)),Math.abs(Z)<.9999999?(this._y=Math.atan2(-Y,J),this._z=Math.atan2(-H,q)):(this._y=0,this._z=Math.atan2(X,z));break;case"ZYX":this._y=Math.asin(-clamp(Y,-1,1)),Math.abs(Y)<.9999999?(this._x=Math.atan2(Z,J),this._z=Math.atan2(X,z)):(this._x=0,this._z=Math.atan2(-H,q));break;case"YZX":this._z=Math.asin(clamp(X,-1,1)),Math.abs(X)<.9999999?(this._x=Math.atan2(-K,q),this._y=Math.atan2(-Y,z)):(this._x=0,this._y=Math.atan2(j,J));break;case"XZY":this._z=Math.asin(-clamp(H,-1,1)),Math.abs(H)<.9999999?(this._x=Math.atan2(Z,q),this._y=Math.atan2(j,z)):(this._x=Math.atan2(-K,J),this._y=0);break;default:U.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+w)}return this._order=w,!0===S&&this._onChangeCallback(),this}setFromQuaternion(x,w,S){return Mi.makeRotationFromQuaternion(x),this.setFromRotationMatrix(Mi,w,S)}setFromVector3(x,w=this._order){return this.set(x.x,x.y,x.z,w)}reorder(x){return Ri.setFromEuler(this),this.setFromQuaternion(Ri,x)}equals(x){return x._x===this._x&&x._y===this._y&&x._z===this._z&&x._order===this._order}fromArray(x){return this._x=x[0],this._y=x[1],this._z=x[2],void 0!==x[3]&&(this._order=x[3]),this._onChangeCallback(),this}toArray(x=[],w=0){return x[w]=this._x,x[w+1]=this._y,x[w+2]=this._z,x[w+3]=this._order,x}toVector3(x){return x?x.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)}_onChange(x){return this._onChangeCallback=x,this}_onChangeCallback(){}}Euler.prototype.isEuler=!0,Euler.DefaultOrder="XYZ",Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Layers{constructor(){this.mask=1}set(x){this.mask=1<<x|0}enable(x){this.mask|=1<<x|0}enableAll(){this.mask=-1}toggle(x){this.mask^=1<<x|0}disable(x){this.mask&=~(1<<x|0)}disableAll(){this.mask=0}test(x){return 0!=(this.mask&x.mask)}}let Li=0;const Oi=new Vector3,Pi=new Quaternion,Ii=new Matrix4,Ni=new Vector3,Fi=new Vector3,Bi=new Vector3,Di=new Quaternion,ki=new Vector3(1,0,0),Ui=new Vector3(0,1,0),Gi=new Vector3(0,0,1),Vi={type:"added"},Wi={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),Object.defineProperty(this,"id",{value:Li++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();const x=new Vector3,w=new Euler,S=new Quaternion,U=new Vector3(1,1,1);w._onChange((function onRotationChange(){S.setFromEuler(w,!1)})),S._onChange((function onQuaternionChange(){w.setFromQuaternion(S,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:x},rotation:{configurable:!0,enumerable:!0,value:w},quaternion:{configurable:!0,enumerable:!0,value:S},scale:{configurable:!0,enumerable:!0,value:U},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(x){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(x),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(x){return this.quaternion.premultiply(x),this}setRotationFromAxisAngle(x,w){this.quaternion.setFromAxisAngle(x,w)}setRotationFromEuler(x){this.quaternion.setFromEuler(x,!0)}setRotationFromMatrix(x){this.quaternion.setFromRotationMatrix(x)}setRotationFromQuaternion(x){this.quaternion.copy(x)}rotateOnAxis(x,w){return Pi.setFromAxisAngle(x,w),this.quaternion.multiply(Pi),this}rotateOnWorldAxis(x,w){return Pi.setFromAxisAngle(x,w),this.quaternion.premultiply(Pi),this}rotateX(x){return this.rotateOnAxis(ki,x)}rotateY(x){return this.rotateOnAxis(Ui,x)}rotateZ(x){return this.rotateOnAxis(Gi,x)}translateOnAxis(x,w){return Oi.copy(x).applyQuaternion(this.quaternion),this.position.add(Oi.multiplyScalar(w)),this}translateX(x){return this.translateOnAxis(ki,x)}translateY(x){return this.translateOnAxis(Ui,x)}translateZ(x){return this.translateOnAxis(Gi,x)}localToWorld(x){return x.applyMatrix4(this.matrixWorld)}worldToLocal(x){return x.applyMatrix4(Ii.copy(this.matrixWorld).invert())}lookAt(x,w,S){x.isVector3?Ni.copy(x):Ni.set(x,w,S);const U=this.parent;this.updateWorldMatrix(!0,!1),Fi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ii.lookAt(Fi,Ni,this.up):Ii.lookAt(Ni,Fi,this.up),this.quaternion.setFromRotationMatrix(Ii),U&&(Ii.extractRotation(U.matrixWorld),Pi.setFromRotationMatrix(Ii),this.quaternion.premultiply(Pi.invert()))}add(x){if(arguments.length>1){for(let x=0;x<arguments.length;x++)this.add(arguments[x]);return this}return x===this?(U.error("THREE.Object3D.add: object can't be added as a child of itself.",x),this):(x&&x.isObject3D?(null!==x.parent&&x.parent.remove(x),x.parent=this,this.children.push(x),x.dispatchEvent(Vi)):U.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",x),this)}remove(x){if(arguments.length>1){for(let x=0;x<arguments.length;x++)this.remove(arguments[x]);return this}const w=this.children.indexOf(x);return-1!==w&&(x.parent=null,this.children.splice(w,1),x.dispatchEvent(Wi)),this}removeFromParent(){const x=this.parent;return null!==x&&x.remove(this),this}clear(){for(let x=0;x<this.children.length;x++){const w=this.children[x];w.parent=null,w.dispatchEvent(Wi)}return this.children.length=0,this}attach(x){return this.updateWorldMatrix(!0,!1),Ii.copy(this.matrixWorld).invert(),null!==x.parent&&(x.parent.updateWorldMatrix(!0,!1),Ii.multiply(x.parent.matrixWorld)),x.applyMatrix4(Ii),this.add(x),x.updateWorldMatrix(!1,!0),this}getObjectById(x){return this.getObjectByProperty("id",x)}getObjectByName(x){return this.getObjectByProperty("name",x)}getObjectByProperty(x,w){if(this[x]===w)return this;for(let S=0,U=this.children.length;S<U;S++){const U=this.children[S].getObjectByProperty(x,w);if(void 0!==U)return U}}getWorldPosition(x){return this.updateWorldMatrix(!0,!1),x.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(x){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fi,x,Bi),x}getWorldScale(x){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fi,Di,x),x}getWorldDirection(x){this.updateWorldMatrix(!0,!1);const w=this.matrixWorld.elements;return x.set(w[8],w[9],w[10]).normalize()}raycast(){}traverse(x){x(this);const w=this.children;for(let S=0,U=w.length;S<U;S++)w[S].traverse(x)}traverseVisible(x){if(!1===this.visible)return;x(this);const w=this.children;for(let S=0,U=w.length;S<U;S++)w[S].traverseVisible(x)}traverseAncestors(x){const w=this.parent;null!==w&&(x(w),w.traverseAncestors(x))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(x){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||x)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,x=!0);const w=this.children;for(let S=0,U=w.length;S<U;S++)w[S].updateMatrixWorld(x)}updateWorldMatrix(x,w){const S=this.parent;if(!0===x&&null!==S&&S.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===w){const x=this.children;for(let w=0,S=x.length;w<S;w++)x[w].updateWorldMatrix(!1,!0)}}toJSON(x){const w=void 0===x||"string"==typeof x,S={};w&&(x={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},S.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const U={};function serialize(w,S){return void 0===w[S.uuid]&&(w[S.uuid]=S.toJSON(x)),S.uuid}if(U.uuid=this.uuid,U.type=this.type,""!==this.name&&(U.name=this.name),!0===this.castShadow&&(U.castShadow=!0),!0===this.receiveShadow&&(U.receiveShadow=!0),!1===this.visible&&(U.visible=!1),!1===this.frustumCulled&&(U.frustumCulled=!1),0!==this.renderOrder&&(U.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(U.userData=this.userData),U.layers=this.layers.mask,U.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(U.matrixAutoUpdate=!1),this.isInstancedMesh&&(U.type="InstancedMesh",U.count=this.count,U.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(U.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?U.background=this.background.toJSON():this.background.isTexture&&(U.background=this.background.toJSON(x).uuid)),this.environment&&this.environment.isTexture&&(U.environment=this.environment.toJSON(x).uuid);else if(this.isMesh||this.isLine||this.isPoints){U.geometry=serialize(x.geometries,this.geometry);const w=this.geometry.parameters;if(void 0!==w&&void 0!==w.shapes){const S=w.shapes;if(Array.isArray(S))for(let w=0,U=S.length;w<U;w++){const U=S[w];serialize(x.shapes,U)}else serialize(x.shapes,S)}}if(this.isSkinnedMesh&&(U.bindMode=this.bindMode,U.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(serialize(x.skeletons,this.skeleton),U.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const w=[];for(let S=0,U=this.material.length;S<U;S++)w.push(serialize(x.materials,this.material[S]));U.material=w}else U.material=serialize(x.materials,this.material);if(this.children.length>0){U.children=[];for(let w=0;w<this.children.length;w++)U.children.push(this.children[w].toJSON(x).object)}if(this.animations.length>0){U.animations=[];for(let w=0;w<this.animations.length;w++){const S=this.animations[w];U.animations.push(serialize(x.animations,S))}}if(w){const w=extractFromCache(x.geometries),U=extractFromCache(x.materials),G=extractFromCache(x.textures),z=extractFromCache(x.images),H=extractFromCache(x.shapes),j=extractFromCache(x.skeletons),X=extractFromCache(x.animations);w.length>0&&(S.geometries=w),U.length>0&&(S.materials=U),G.length>0&&(S.textures=G),z.length>0&&(S.images=z),H.length>0&&(S.shapes=H),j.length>0&&(S.skeletons=j),X.length>0&&(S.animations=X)}return S.object=U,S;function extractFromCache(x){const w=[];for(const S in x){const U=x[S];delete U.metadata,w.push(U)}return w}}clone(x){return(new this.constructor).copy(this,x)}copy(x,w=!0){if(this.name=x.name,this.up.copy(x.up),this.position.copy(x.position),this.rotation.order=x.rotation.order,this.quaternion.copy(x.quaternion),this.scale.copy(x.scale),this.matrix.copy(x.matrix),this.matrixWorld.copy(x.matrixWorld),this.matrixAutoUpdate=x.matrixAutoUpdate,this.matrixWorldNeedsUpdate=x.matrixWorldNeedsUpdate,this.layers.mask=x.layers.mask,this.visible=x.visible,this.castShadow=x.castShadow,this.receiveShadow=x.receiveShadow,this.frustumCulled=x.frustumCulled,this.renderOrder=x.renderOrder,this.userData=JSON.parse(JSON.stringify(x.userData)),!0===w)for(let w=0;w<x.children.length;w++){const S=x.children[w];this.add(S.clone())}return this}}Object3D.DefaultUp=new Vector3(0,1,0),Object3D.DefaultMatrixAutoUpdate=!0,Object3D.prototype.isObject3D=!0;const zi=new Vector3,Hi=new Vector3,$i=new Vector3,ji=new Vector3,Xi=new Vector3,qi=new Vector3,Ki=new Vector3,Yi=new Vector3,Zi=new Vector3,Ji=new Vector3;class Triangle{constructor(x=new Vector3,w=new Vector3,S=new Vector3){this.a=x,this.b=w,this.c=S}static getNormal(x,w,S,U){U.subVectors(S,w),zi.subVectors(x,w),U.cross(zi);const G=U.lengthSq();return G>0?U.multiplyScalar(1/Math.sqrt(G)):U.set(0,0,0)}static getBarycoord(x,w,S,U,G){zi.subVectors(U,w),Hi.subVectors(S,w),$i.subVectors(x,w);const z=zi.dot(zi),H=zi.dot(Hi),j=zi.dot($i),X=Hi.dot(Hi),q=Hi.dot($i),K=z*X-H*H;if(0===K)return G.set(-2,-1,-1);const Y=1/K,Z=(X*j-H*q)*Y,J=(z*q-H*j)*Y;return G.set(1-Z-J,J,Z)}static containsPoint(x,w,S,U){return this.getBarycoord(x,w,S,U,ji),ji.x>=0&&ji.y>=0&&ji.x+ji.y<=1}static getUV(x,w,S,U,G,z,H,j){return this.getBarycoord(x,w,S,U,ji),j.set(0,0),j.addScaledVector(G,ji.x),j.addScaledVector(z,ji.y),j.addScaledVector(H,ji.z),j}static isFrontFacing(x,w,S,U){return zi.subVectors(S,w),Hi.subVectors(x,w),zi.cross(Hi).dot(U)<0}set(x,w,S){return this.a.copy(x),this.b.copy(w),this.c.copy(S),this}setFromPointsAndIndices(x,w,S,U){return this.a.copy(x[w]),this.b.copy(x[S]),this.c.copy(x[U]),this}setFromAttributeAndIndices(x,w,S,U){return this.a.fromBufferAttribute(x,w),this.b.fromBufferAttribute(x,S),this.c.fromBufferAttribute(x,U),this}clone(){return(new this.constructor).copy(this)}copy(x){return this.a.copy(x.a),this.b.copy(x.b),this.c.copy(x.c),this}getArea(){return zi.subVectors(this.c,this.b),Hi.subVectors(this.a,this.b),.5*zi.cross(Hi).length()}getMidpoint(x){return x.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(x){return Triangle.getNormal(this.a,this.b,this.c,x)}getPlane(x){return x.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(x,w){return Triangle.getBarycoord(x,this.a,this.b,this.c,w)}getUV(x,w,S,U,G){return Triangle.getUV(x,this.a,this.b,this.c,w,S,U,G)}containsPoint(x){return Triangle.containsPoint(x,this.a,this.b,this.c)}isFrontFacing(x){return Triangle.isFrontFacing(this.a,this.b,this.c,x)}intersectsBox(x){return x.intersectsTriangle(this)}closestPointToPoint(x,w){const S=this.a,U=this.b,G=this.c;let z,H;Xi.subVectors(U,S),qi.subVectors(G,S),Yi.subVectors(x,S);const j=Xi.dot(Yi),X=qi.dot(Yi);if(j<=0&&X<=0)return w.copy(S);Zi.subVectors(x,U);const q=Xi.dot(Zi),K=qi.dot(Zi);if(q>=0&&K<=q)return w.copy(U);const Y=j*K-q*X;if(Y<=0&&j>=0&&q<=0)return z=j/(j-q),w.copy(S).addScaledVector(Xi,z);Ji.subVectors(x,G);const Z=Xi.dot(Ji),J=qi.dot(Ji);if(J>=0&&Z<=J)return w.copy(G);const Q=Z*X-j*J;if(Q<=0&&X>=0&&J<=0)return H=X/(X-J),w.copy(S).addScaledVector(qi,H);const ee=q*J-Z*K;if(ee<=0&&K-q>=0&&Z-J>=0)return Ki.subVectors(G,U),H=(K-q)/(K-q+(Z-J)),w.copy(U).addScaledVector(Ki,H);const te=1/(ee+Q+Y);return z=Q*te,H=Y*te,w.copy(S).addScaledVector(Xi,z).addScaledVector(qi,H)}equals(x){return x.a.equals(this.a)&&x.b.equals(this.b)&&x.c.equals(this.c)}}let Qi=0;class Material extends EventDispatcher{constructor(){super(),Object.defineProperty(this,"id",{value:Qi++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=ae,this.side=ee,this.vertexColors=!1,this.opacity=1,this.format=Tt,this.transparent=!1,this.blendSrc=be,this.blendDst=xe,this.blendEquation=he,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Le,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=wr,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=cr,this.stencilZFail=cr,this.stencilZPass=cr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(x){this._alphaTest>0!=x>0&&this.version++,this._alphaTest=x}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(x){if(void 0!==x)for(const w in x){const S=x[w];if(void 0===S){U.warn("THREE.Material: '"+w+"' parameter is undefined.");continue}if("shading"===w){U.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=S===re;continue}const G=this[w];void 0!==G?G&&G.isColor?G.set(S):G&&G.isVector3&&S&&S.isVector3?G.copy(S):this[w]=S:U.warn("THREE."+this.type+": '"+w+"' is not a property of this material.")}}toJSON(x){const w=void 0===x||"string"==typeof x;w&&(x={textures:{},images:{}});const S={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function extractFromCache(x){const w=[];for(const S in x){const U=x[S];delete U.metadata,w.push(U)}return w}if(S.uuid=this.uuid,S.type=this.type,""!==this.name&&(S.name=this.name),this.color&&this.color.isColor&&(S.color=this.color.getHex()),void 0!==this.roughness&&(S.roughness=this.roughness),void 0!==this.metalness&&(S.metalness=this.metalness),void 0!==this.sheen&&(S.sheen=this.sheen),this.sheenTint&&this.sheenTint.isColor&&(S.sheenTint=this.sheenTint.getHex()),void 0!==this.sheenRoughness&&(S.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(S.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(S.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(S.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(S.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(S.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(S.shininess=this.shininess),void 0!==this.clearcoat&&(S.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(S.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(S.clearcoatMap=this.clearcoatMap.toJSON(x).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(S.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(x).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(S.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(x).uuid,S.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(S.map=this.map.toJSON(x).uuid),this.matcap&&this.matcap.isTexture&&(S.matcap=this.matcap.toJSON(x).uuid),this.alphaMap&&this.alphaMap.isTexture&&(S.alphaMap=this.alphaMap.toJSON(x).uuid),this.lightMap&&this.lightMap.isTexture&&(S.lightMap=this.lightMap.toJSON(x).uuid,S.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(S.aoMap=this.aoMap.toJSON(x).uuid,S.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(S.bumpMap=this.bumpMap.toJSON(x).uuid,S.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(S.normalMap=this.normalMap.toJSON(x).uuid,S.normalMapType=this.normalMapType,S.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(S.displacementMap=this.displacementMap.toJSON(x).uuid,S.displacementScale=this.displacementScale,S.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(S.roughnessMap=this.roughnessMap.toJSON(x).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(S.metalnessMap=this.metalnessMap.toJSON(x).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(S.emissiveMap=this.emissiveMap.toJSON(x).uuid),this.specularMap&&this.specularMap.isTexture&&(S.specularMap=this.specularMap.toJSON(x).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(S.specularIntensityMap=this.specularIntensityMap.toJSON(x).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(S.specularTintMap=this.specularTintMap.toJSON(x).uuid),this.envMap&&this.envMap.isTexture&&(S.envMap=this.envMap.toJSON(x).uuid,void 0!==this.combine&&(S.combine=this.combine)),void 0!==this.envMapIntensity&&(S.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(S.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(S.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(S.gradientMap=this.gradientMap.toJSON(x).uuid),void 0!==this.transmission&&(S.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(S.transmissionMap=this.transmissionMap.toJSON(x).uuid),void 0!==this.thickness&&(S.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(S.thicknessMap=this.thicknessMap.toJSON(x).uuid),void 0!==this.attenuationDistance&&(S.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(S.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(S.size=this.size),null!==this.shadowSide&&(S.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(S.sizeAttenuation=this.sizeAttenuation),this.blending!==ae&&(S.blending=this.blending),this.side!==ee&&(S.side=this.side),this.vertexColors&&(S.vertexColors=!0),this.opacity<1&&(S.opacity=this.opacity),this.format!==Tt&&(S.format=this.format),!0===this.transparent&&(S.transparent=this.transparent),S.depthFunc=this.depthFunc,S.depthTest=this.depthTest,S.depthWrite=this.depthWrite,S.colorWrite=this.colorWrite,S.stencilWrite=this.stencilWrite,S.stencilWriteMask=this.stencilWriteMask,S.stencilFunc=this.stencilFunc,S.stencilRef=this.stencilRef,S.stencilFuncMask=this.stencilFuncMask,S.stencilFail=this.stencilFail,S.stencilZFail=this.stencilZFail,S.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(S.rotation=this.rotation),!0===this.polygonOffset&&(S.polygonOffset=!0),0!==this.polygonOffsetFactor&&(S.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(S.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(S.linewidth=this.linewidth),void 0!==this.dashSize&&(S.dashSize=this.dashSize),void 0!==this.gapSize&&(S.gapSize=this.gapSize),void 0!==this.scale&&(S.scale=this.scale),!0===this.dithering&&(S.dithering=!0),this.alphaTest>0&&(S.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(S.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(S.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(S.wireframe=this.wireframe),this.wireframeLinewidth>1&&(S.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(S.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(S.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(S.flatShading=this.flatShading),!1===this.visible&&(S.visible=!1),!1===this.toneMapped&&(S.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(S.userData=this.userData),w){const w=extractFromCache(x.textures),U=extractFromCache(x.images);w.length>0&&(S.textures=w),U.length>0&&(S.images=U)}return S}clone(){return(new this.constructor).copy(this)}copy(x){this.name=x.name,this.fog=x.fog,this.blending=x.blending,this.side=x.side,this.vertexColors=x.vertexColors,this.opacity=x.opacity,this.format=x.format,this.transparent=x.transparent,this.blendSrc=x.blendSrc,this.blendDst=x.blendDst,this.blendEquation=x.blendEquation,this.blendSrcAlpha=x.blendSrcAlpha,this.blendDstAlpha=x.blendDstAlpha,this.blendEquationAlpha=x.blendEquationAlpha,this.depthFunc=x.depthFunc,this.depthTest=x.depthTest,this.depthWrite=x.depthWrite,this.stencilWriteMask=x.stencilWriteMask,this.stencilFunc=x.stencilFunc,this.stencilRef=x.stencilRef,this.stencilFuncMask=x.stencilFuncMask,this.stencilFail=x.stencilFail,this.stencilZFail=x.stencilZFail,this.stencilZPass=x.stencilZPass,this.stencilWrite=x.stencilWrite;const w=x.clippingPlanes;let S=null;if(null!==w){const x=w.length;S=new Array(x);for(let U=0;U!==x;++U)S[U]=w[U].clone()}return this.clippingPlanes=S,this.clipIntersection=x.clipIntersection,this.clipShadows=x.clipShadows,this.shadowSide=x.shadowSide,this.colorWrite=x.colorWrite,this.precision=x.precision,this.polygonOffset=x.polygonOffset,this.polygonOffsetFactor=x.polygonOffsetFactor,this.polygonOffsetUnits=x.polygonOffsetUnits,this.dithering=x.dithering,this.alphaTest=x.alphaTest,this.alphaToCoverage=x.alphaToCoverage,this.premultipliedAlpha=x.premultipliedAlpha,this.visible=x.visible,this.toneMapped=x.toneMapped,this.userData=JSON.parse(JSON.stringify(x.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(x){!0===x&&this.version++}}Material.prototype.isMaterial=!0;const eo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},to={h:0,s:0,l:0},no={h:0,s:0,l:0};function hue2rgb(x,w,S){return S<0&&(S+=1),S>1&&(S-=1),S<1/6?x+6*(w-x)*S:S<.5?w:S<2/3?x+6*(w-x)*(2/3-S):x}function SRGBToLinear(x){return x<.04045?.0773993808*x:Math.pow(.9478672986*x+.0521327014,2.4)}function LinearToSRGB(x){return x<.0031308?12.92*x:1.055*Math.pow(x,.41666)-.055}class Color{constructor(x,w,S){return void 0===w&&void 0===S?this.set(x):this.setRGB(x,w,S)}set(x){return x&&x.isColor?this.copy(x):"number"==typeof x?this.setHex(x):"string"==typeof x&&this.setStyle(x),this}setScalar(x){return this.r=x,this.g=x,this.b=x,this}setHex(x){return x=Math.floor(x),this.r=(x>>16&255)/255,this.g=(x>>8&255)/255,this.b=(255&x)/255,this}setRGB(x,w,S){return this.r=x,this.g=w,this.b=S,this}setHSL(x,w,S){if(x=euclideanModulo(x,1),w=clamp(w,0,1),S=clamp(S,0,1),0===w)this.r=this.g=this.b=S;else{const U=S<=.5?S*(1+w):S+w-S*w,G=2*S-U;this.r=hue2rgb(G,U,x+1/3),this.g=hue2rgb(G,U,x),this.b=hue2rgb(G,U,x-1/3)}return this}setStyle(x){function handleAlpha(w){void 0!==w&&parseFloat(w)<1&&U.warn("THREE.Color: Alpha component of "+x+" will be ignored.")}let w;if(w=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(x)){let x;const S=w[1],U=w[2];switch(S){case"rgb":case"rgba":if(x=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(U))return this.r=Math.min(255,parseInt(x[1],10))/255,this.g=Math.min(255,parseInt(x[2],10))/255,this.b=Math.min(255,parseInt(x[3],10))/255,handleAlpha(x[4]),this;if(x=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(U))return this.r=Math.min(100,parseInt(x[1],10))/100,this.g=Math.min(100,parseInt(x[2],10))/100,this.b=Math.min(100,parseInt(x[3],10))/100,handleAlpha(x[4]),this;break;case"hsl":case"hsla":if(x=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(U)){const w=parseFloat(x[1])/360,S=parseInt(x[2],10)/100,U=parseInt(x[3],10)/100;return handleAlpha(x[4]),this.setHSL(w,S,U)}}}else if(w=/^\#([A-Fa-f\d]+)$/.exec(x)){const x=w[1],S=x.length;if(3===S)return this.r=parseInt(x.charAt(0)+x.charAt(0),16)/255,this.g=parseInt(x.charAt(1)+x.charAt(1),16)/255,this.b=parseInt(x.charAt(2)+x.charAt(2),16)/255,this;if(6===S)return this.r=parseInt(x.charAt(0)+x.charAt(1),16)/255,this.g=parseInt(x.charAt(2)+x.charAt(3),16)/255,this.b=parseInt(x.charAt(4)+x.charAt(5),16)/255,this}return x&&x.length>0?this.setColorName(x):this}setColorName(x){const w=eo[x.toLowerCase()];return void 0!==w?this.setHex(w):U.warn("THREE.Color: Unknown color "+x),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(x){return this.r=x.r,this.g=x.g,this.b=x.b,this}copyGammaToLinear(x,w=2){return this.r=Math.pow(x.r,w),this.g=Math.pow(x.g,w),this.b=Math.pow(x.b,w),this}copyLinearToGamma(x,w=2){const S=w>0?1/w:1;return this.r=Math.pow(x.r,S),this.g=Math.pow(x.g,S),this.b=Math.pow(x.b,S),this}convertGammaToLinear(x){return this.copyGammaToLinear(this,x),this}convertLinearToGamma(x){return this.copyLinearToGamma(this,x),this}copySRGBToLinear(x){return this.r=SRGBToLinear(x.r),this.g=SRGBToLinear(x.g),this.b=SRGBToLinear(x.b),this}copyLinearToSRGB(x){return this.r=LinearToSRGB(x.r),this.g=LinearToSRGB(x.g),this.b=LinearToSRGB(x.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(x){const w=this.r,S=this.g,U=this.b,G=Math.max(w,S,U),z=Math.min(w,S,U);let H,j;const X=(z+G)/2;if(z===G)H=0,j=0;else{const x=G-z;switch(j=X<=.5?x/(G+z):x/(2-G-z),G){case w:H=(S-U)/x+(S<U?6:0);break;case S:H=(U-w)/x+2;break;case U:H=(w-S)/x+4}H/=6}return x.h=H,x.s=j,x.l=X,x}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(x,w,S){return this.getHSL(to),to.h+=x,to.s+=w,to.l+=S,this.setHSL(to.h,to.s,to.l),this}add(x){return this.r+=x.r,this.g+=x.g,this.b+=x.b,this}addColors(x,w){return this.r=x.r+w.r,this.g=x.g+w.g,this.b=x.b+w.b,this}addScalar(x){return this.r+=x,this.g+=x,this.b+=x,this}sub(x){return this.r=Math.max(0,this.r-x.r),this.g=Math.max(0,this.g-x.g),this.b=Math.max(0,this.b-x.b),this}multiply(x){return this.r*=x.r,this.g*=x.g,this.b*=x.b,this}multiplyScalar(x){return this.r*=x,this.g*=x,this.b*=x,this}lerp(x,w){return this.r+=(x.r-this.r)*w,this.g+=(x.g-this.g)*w,this.b+=(x.b-this.b)*w,this}lerpColors(x,w,S){return this.r=x.r+(w.r-x.r)*S,this.g=x.g+(w.g-x.g)*S,this.b=x.b+(w.b-x.b)*S,this}lerpHSL(x,w){this.getHSL(to),x.getHSL(no);const S=lerp(to.h,no.h,w),U=lerp(to.s,no.s,w),G=lerp(to.l,no.l,w);return this.setHSL(S,U,G),this}equals(x){return x.r===this.r&&x.g===this.g&&x.b===this.b}fromArray(x,w=0){return this.r=x[w],this.g=x[w+1],this.b=x[w+2],this}toArray(x=[],w=0){return x[w]=this.r,x[w+1]=this.g,x[w+2]=this.b,x}fromBufferAttribute(x,w){return this.r=x.getX(w),this.g=x.getY(w),this.b=x.getZ(w),!0===x.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Color.NAMES=eo,Color.prototype.isColor=!0,Color.prototype.r=1,Color.prototype.g=1,Color.prototype.b=1;class MeshBasicMaterial extends Material{constructor(x){super(),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(x)}copy(x){return super.copy(x),this.color.copy(x.color),this.map=x.map,this.lightMap=x.lightMap,this.lightMapIntensity=x.lightMapIntensity,this.aoMap=x.aoMap,this.aoMapIntensity=x.aoMapIntensity,this.specularMap=x.specularMap,this.alphaMap=x.alphaMap,this.envMap=x.envMap,this.combine=x.combine,this.reflectivity=x.reflectivity,this.refractionRatio=x.refractionRatio,this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.wireframeLinecap=x.wireframeLinecap,this.wireframeLinejoin=x.wireframeLinejoin,this}}MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;const ro=new Vector3,io=new Vector2;class BufferAttribute{constructor(x,w,S){if(Array.isArray(x))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=x,this.itemSize=w,this.count=void 0!==x?x.length/w:0,this.normalized=!0===S,this.usage=Sr,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(x){!0===x&&this.version++}setUsage(x){return this.usage=x,this}copy(x){return this.name=x.name,this.array=new x.array.constructor(x.array),this.itemSize=x.itemSize,this.count=x.count,this.normalized=x.normalized,this.usage=x.usage,this}copyAt(x,w,S){x*=this.itemSize,S*=w.itemSize;for(let U=0,G=this.itemSize;U<G;U++)this.array[x+U]=w.array[S+U];return this}copyArray(x){return this.array.set(x),this}copyColorsArray(x){const w=this.array;let S=0;for(let G=0,z=x.length;G<z;G++){let z=x[G];void 0===z&&(U.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",G),z=new Color),w[S++]=z.r,w[S++]=z.g,w[S++]=z.b}return this}copyVector2sArray(x){const w=this.array;let S=0;for(let G=0,z=x.length;G<z;G++){let z=x[G];void 0===z&&(U.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",G),z=new Vector2),w[S++]=z.x,w[S++]=z.y}return this}copyVector3sArray(x){const w=this.array;let S=0;for(let G=0,z=x.length;G<z;G++){let z=x[G];void 0===z&&(U.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",G),z=new Vector3),w[S++]=z.x,w[S++]=z.y,w[S++]=z.z}return this}copyVector4sArray(x){const w=this.array;let S=0;for(let G=0,z=x.length;G<z;G++){let z=x[G];void 0===z&&(U.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",G),z=new Vector4),w[S++]=z.x,w[S++]=z.y,w[S++]=z.z,w[S++]=z.w}return this}applyMatrix3(x){if(2===this.itemSize)for(let w=0,S=this.count;w<S;w++)io.fromBufferAttribute(this,w),io.applyMatrix3(x),this.setXY(w,io.x,io.y);else if(3===this.itemSize)for(let w=0,S=this.count;w<S;w++)ro.fromBufferAttribute(this,w),ro.applyMatrix3(x),this.setXYZ(w,ro.x,ro.y,ro.z);return this}applyMatrix4(x){for(let w=0,S=this.count;w<S;w++)ro.x=this.getX(w),ro.y=this.getY(w),ro.z=this.getZ(w),ro.applyMatrix4(x),this.setXYZ(w,ro.x,ro.y,ro.z);return this}applyNormalMatrix(x){for(let w=0,S=this.count;w<S;w++)ro.x=this.getX(w),ro.y=this.getY(w),ro.z=this.getZ(w),ro.applyNormalMatrix(x),this.setXYZ(w,ro.x,ro.y,ro.z);return this}transformDirection(x){for(let w=0,S=this.count;w<S;w++)ro.x=this.getX(w),ro.y=this.getY(w),ro.z=this.getZ(w),ro.transformDirection(x),this.setXYZ(w,ro.x,ro.y,ro.z);return this}set(x,w=0){return this.array.set(x,w),this}getX(x){return this.array[x*this.itemSize]}setX(x,w){return this.array[x*this.itemSize]=w,this}getY(x){return this.array[x*this.itemSize+1]}setY(x,w){return this.array[x*this.itemSize+1]=w,this}getZ(x){return this.array[x*this.itemSize+2]}setZ(x,w){return this.array[x*this.itemSize+2]=w,this}getW(x){return this.array[x*this.itemSize+3]}setW(x,w){return this.array[x*this.itemSize+3]=w,this}setXY(x,w,S){return x*=this.itemSize,this.array[x+0]=w,this.array[x+1]=S,this}setXYZ(x,w,S,U){return x*=this.itemSize,this.array[x+0]=w,this.array[x+1]=S,this.array[x+2]=U,this}setXYZW(x,w,S,U,G){return x*=this.itemSize,this.array[x+0]=w,this.array[x+1]=S,this.array[x+2]=U,this.array[x+3]=G,this}onUpload(x){return this.onUploadCallback=x,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const x={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(x.name=this.name),this.usage!==Sr&&(x.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(x.updateRange=this.updateRange),x}}BufferAttribute.prototype.isBufferAttribute=!0;class Int8BufferAttribute extends BufferAttribute{constructor(x,w,S){super(new Int8Array(x),w,S)}}class Uint8BufferAttribute extends BufferAttribute{constructor(x,w,S){super(new Uint8Array(x),w,S)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(x,w,S){super(new Uint8ClampedArray(x),w,S)}}class Int16BufferAttribute extends BufferAttribute{constructor(x,w,S){super(new Int16Array(x),w,S)}}class Uint16BufferAttribute extends BufferAttribute{constructor(x,w,S){super(new Uint16Array(x),w,S)}}class Int32BufferAttribute extends BufferAttribute{constructor(x,w,S){super(new Int32Array(x),w,S)}}class Uint32BufferAttribute extends BufferAttribute{constructor(x,w,S){super(new Uint32Array(x),w,S)}}class Float16BufferAttribute extends BufferAttribute{constructor(x,w,S){super(new Uint16Array(x),w,S)}}Float16BufferAttribute.prototype.isFloat16BufferAttribute=!0;class Float32BufferAttribute extends BufferAttribute{constructor(x,w,S){super(new Float32Array(x),w,S)}}class Float64BufferAttribute extends BufferAttribute{constructor(x,w,S){super(new Float64Array(x),w,S)}}let oo=0;const ao=new Matrix4,so=new Object3D,lo=new Vector3,co=new Box3,uo=new Box3,ho=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),Object.defineProperty(this,"id",{value:oo++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(x){return Array.isArray(x)?this.index=new(arrayMax(x)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(x,1):this.index=x,this}getAttribute(x){return this.attributes[x]}setAttribute(x,w){return this.attributes[x]=w,this}deleteAttribute(x){return delete this.attributes[x],this}hasAttribute(x){return void 0!==this.attributes[x]}addGroup(x,w,S=0){this.groups.push({start:x,count:w,materialIndex:S})}clearGroups(){this.groups=[]}setDrawRange(x,w){this.drawRange.start=x,this.drawRange.count=w}applyMatrix4(x){const w=this.attributes.position;void 0!==w&&(w.applyMatrix4(x),w.needsUpdate=!0);const S=this.attributes.normal;if(void 0!==S){const w=(new Matrix3).getNormalMatrix(x);S.applyNormalMatrix(w),S.needsUpdate=!0}const U=this.attributes.tangent;return void 0!==U&&(U.transformDirection(x),U.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(x){return ao.makeRotationFromQuaternion(x),this.applyMatrix4(ao),this}rotateX(x){return ao.makeRotationX(x),this.applyMatrix4(ao),this}rotateY(x){return ao.makeRotationY(x),this.applyMatrix4(ao),this}rotateZ(x){return ao.makeRotationZ(x),this.applyMatrix4(ao),this}translate(x,w,S){return ao.makeTranslation(x,w,S),this.applyMatrix4(ao),this}scale(x,w,S){return ao.makeScale(x,w,S),this.applyMatrix4(ao),this}lookAt(x){return so.lookAt(x),so.updateMatrix(),this.applyMatrix4(so.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(lo).negate(),this.translate(lo.x,lo.y,lo.z),this}setFromPoints(x){const w=[];for(let S=0,U=x.length;S<U;S++){const U=x[S];w.push(U.x,U.y,U.z||0)}return this.setAttribute("position",new Float32BufferAttribute(w,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Box3);const x=this.attributes.position,w=this.morphAttributes.position;if(x&&x.isGLBufferAttribute)return U.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));if(void 0!==x){if(this.boundingBox.setFromBufferAttribute(x),w)for(let x=0,S=w.length;x<S;x++){const S=w[x];co.setFromBufferAttribute(S),this.morphTargetsRelative?(ho.addVectors(this.boundingBox.min,co.min),this.boundingBox.expandByPoint(ho),ho.addVectors(this.boundingBox.max,co.max),this.boundingBox.expandByPoint(ho)):(this.boundingBox.expandByPoint(co.min),this.boundingBox.expandByPoint(co.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&U.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);const x=this.attributes.position,w=this.morphAttributes.position;if(x&&x.isGLBufferAttribute)return U.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Vector3,1/0);if(x){const S=this.boundingSphere.center;if(co.setFromBufferAttribute(x),w)for(let x=0,S=w.length;x<S;x++){const S=w[x];uo.setFromBufferAttribute(S),this.morphTargetsRelative?(ho.addVectors(co.min,uo.min),co.expandByPoint(ho),ho.addVectors(co.max,uo.max),co.expandByPoint(ho)):(co.expandByPoint(uo.min),co.expandByPoint(uo.max))}co.getCenter(S);let G=0;for(let w=0,U=x.count;w<U;w++)ho.fromBufferAttribute(x,w),G=Math.max(G,S.distanceToSquared(ho));if(w)for(let U=0,z=w.length;U<z;U++){const z=w[U],H=this.morphTargetsRelative;for(let w=0,U=z.count;w<U;w++)ho.fromBufferAttribute(z,w),H&&(lo.fromBufferAttribute(x,w),ho.add(lo)),G=Math.max(G,S.distanceToSquared(ho))}this.boundingSphere.radius=Math.sqrt(G),isNaN(this.boundingSphere.radius)&&U.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const x=this.index,w=this.attributes;if(null===x||void 0===w.position||void 0===w.normal||void 0===w.uv)return void U.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const S=x.array,G=w.position.array,z=w.normal.array,H=w.uv.array,j=G.length/3;void 0===w.tangent&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*j),4));const X=w.tangent.array,q=[],K=[];for(let x=0;x<j;x++)q[x]=new Vector3,K[x]=new Vector3;const Y=new Vector3,Z=new Vector3,J=new Vector3,Q=new Vector2,ee=new Vector2,te=new Vector2,ne=new Vector3,re=new Vector3;function handleTriangle(x,w,S){Y.fromArray(G,3*x),Z.fromArray(G,3*w),J.fromArray(G,3*S),Q.fromArray(H,2*x),ee.fromArray(H,2*w),te.fromArray(H,2*S),Z.sub(Y),J.sub(Y),ee.sub(Q),te.sub(Q);const U=1/(ee.x*te.y-te.x*ee.y);isFinite(U)&&(ne.copy(Z).multiplyScalar(te.y).addScaledVector(J,-ee.y).multiplyScalar(U),re.copy(J).multiplyScalar(ee.x).addScaledVector(Z,-te.x).multiplyScalar(U),q[x].add(ne),q[w].add(ne),q[S].add(ne),K[x].add(re),K[w].add(re),K[S].add(re))}let ie=this.groups;0===ie.length&&(ie=[{start:0,count:S.length}]);for(let x=0,w=ie.length;x<w;++x){const w=ie[x],U=w.start;for(let x=U,G=U+w.count;x<G;x+=3)handleTriangle(S[x+0],S[x+1],S[x+2])}const oe=new Vector3,ae=new Vector3,se=new Vector3,le=new Vector3;function handleVertex(x){se.fromArray(z,3*x),le.copy(se);const w=q[x];oe.copy(w),oe.sub(se.multiplyScalar(se.dot(w))).normalize(),ae.crossVectors(le,w);const S=ae.dot(K[x])<0?-1:1;X[4*x]=oe.x,X[4*x+1]=oe.y,X[4*x+2]=oe.z,X[4*x+3]=S}for(let x=0,w=ie.length;x<w;++x){const w=ie[x],U=w.start;for(let x=U,G=U+w.count;x<G;x+=3)handleVertex(S[x+0]),handleVertex(S[x+1]),handleVertex(S[x+2])}}computeVertexNormals(){const x=this.index,w=this.getAttribute("position");if(void 0!==w){let S=this.getAttribute("normal");if(void 0===S)S=new BufferAttribute(new Float32Array(3*w.count),3),this.setAttribute("normal",S);else for(let x=0,w=S.count;x<w;x++)S.setXYZ(x,0,0,0);const U=new Vector3,G=new Vector3,z=new Vector3,H=new Vector3,j=new Vector3,X=new Vector3,q=new Vector3,K=new Vector3;if(x)for(let Y=0,Z=x.count;Y<Z;Y+=3){const Z=x.getX(Y+0),J=x.getX(Y+1),Q=x.getX(Y+2);U.fromBufferAttribute(w,Z),G.fromBufferAttribute(w,J),z.fromBufferAttribute(w,Q),q.subVectors(z,G),K.subVectors(U,G),q.cross(K),H.fromBufferAttribute(S,Z),j.fromBufferAttribute(S,J),X.fromBufferAttribute(S,Q),H.add(q),j.add(q),X.add(q),S.setXYZ(Z,H.x,H.y,H.z),S.setXYZ(J,j.x,j.y,j.z),S.setXYZ(Q,X.x,X.y,X.z)}else for(let x=0,H=w.count;x<H;x+=3)U.fromBufferAttribute(w,x+0),G.fromBufferAttribute(w,x+1),z.fromBufferAttribute(w,x+2),q.subVectors(z,G),K.subVectors(U,G),q.cross(K),S.setXYZ(x+0,q.x,q.y,q.z),S.setXYZ(x+1,q.x,q.y,q.z),S.setXYZ(x+2,q.x,q.y,q.z);this.normalizeNormals(),S.needsUpdate=!0}}merge(x,w){if(!x||!x.isBufferGeometry)return void U.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",x);void 0===w&&(w=0,U.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const S=this.attributes;for(const U in S){if(void 0===x.attributes[U])continue;const G=S[U].array,z=x.attributes[U],H=z.array,j=z.itemSize*w,X=Math.min(H.length,G.length-j);for(let x=0,w=j;x<X;x++,w++)G[w]=H[x]}return this}normalizeNormals(){const x=this.attributes.normal;for(let w=0,S=x.count;w<S;w++)ho.fromBufferAttribute(x,w),ho.normalize(),x.setXYZ(w,ho.x,ho.y,ho.z)}toNonIndexed(){function convertBufferAttribute(x,w){const S=x.array,U=x.itemSize,G=x.normalized,z=new S.constructor(w.length*U);let H=0,j=0;for(let G=0,X=w.length;G<X;G++){H=x.isInterleavedBufferAttribute?w[G]*x.data.stride+x.offset:w[G]*U;for(let x=0;x<U;x++)z[j++]=S[H++]}return new BufferAttribute(z,U,G)}if(null===this.index)return U.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const x=new BufferGeometry,w=this.index.array,S=this.attributes;for(const U in S){const G=convertBufferAttribute(S[U],w);x.setAttribute(U,G)}const G=this.morphAttributes;for(const S in G){const U=[],z=G[S];for(let x=0,S=z.length;x<S;x++){const S=convertBufferAttribute(z[x],w);U.push(S)}x.morphAttributes[S]=U}x.morphTargetsRelative=this.morphTargetsRelative;const z=this.groups;for(let w=0,S=z.length;w<S;w++){const S=z[w];x.addGroup(S.start,S.count,S.materialIndex)}return x}toJSON(){const x={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(x.uuid=this.uuid,x.type=this.type,""!==this.name&&(x.name=this.name),Object.keys(this.userData).length>0&&(x.userData=this.userData),void 0!==this.parameters){const w=this.parameters;for(const S in w)void 0!==w[S]&&(x[S]=w[S]);return x}x.data={attributes:{}};const w=this.index;null!==w&&(x.data.index={type:w.array.constructor.name,array:Array.prototype.slice.call(w.array)});const S=this.attributes;for(const w in S){const U=S[w];x.data.attributes[w]=U.toJSON(x.data)}const U={};let G=!1;for(const w in this.morphAttributes){const S=this.morphAttributes[w],z=[];for(let w=0,U=S.length;w<U;w++){const U=S[w];z.push(U.toJSON(x.data))}z.length>0&&(U[w]=z,G=!0)}G&&(x.data.morphAttributes=U,x.data.morphTargetsRelative=this.morphTargetsRelative);const z=this.groups;z.length>0&&(x.data.groups=JSON.parse(JSON.stringify(z)));const H=this.boundingSphere;return null!==H&&(x.data.boundingSphere={center:H.center.toArray(),radius:H.radius}),x}clone(){return(new this.constructor).copy(this)}copy(x){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const w={};this.name=x.name;const S=x.index;null!==S&&this.setIndex(S.clone(w));const U=x.attributes;for(const x in U){const S=U[x];this.setAttribute(x,S.clone(w))}const G=x.morphAttributes;for(const x in G){const S=[],U=G[x];for(let x=0,G=U.length;x<G;x++)S.push(U[x].clone(w));this.morphAttributes[x]=S}this.morphTargetsRelative=x.morphTargetsRelative;const z=x.groups;for(let x=0,w=z.length;x<w;x++){const w=z[x];this.addGroup(w.start,w.count,w.materialIndex)}const H=x.boundingBox;null!==H&&(this.boundingBox=H.clone());const j=x.boundingSphere;return null!==j&&(this.boundingSphere=j.clone()),this.drawRange.start=x.drawRange.start,this.drawRange.count=x.drawRange.count,this.userData=x.userData,void 0!==x.parameters&&(this.parameters=Object.assign({},x.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}BufferGeometry.prototype.isBufferGeometry=!0;const po=new Matrix4,fo=new Ray,mo=new Sphere,go=new Vector3,vo=new Vector3,yo=new Vector3,_o=new Vector3,bo=new Vector3,xo=new Vector3,Eo=new Vector3,wo=new Vector3,So=new Vector3,To=new Vector2,Co=new Vector2,Ao=new Vector2,Mo=new Vector3,Ro=new Vector3;class Mesh extends Object3D{constructor(x=new BufferGeometry,w=new MeshBasicMaterial){super(),this.type="Mesh",this.geometry=x,this.material=w,this.updateMorphTargets()}copy(x){return super.copy(x),void 0!==x.morphTargetInfluences&&(this.morphTargetInfluences=x.morphTargetInfluences.slice()),void 0!==x.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},x.morphTargetDictionary)),this.material=x.material,this.geometry=x.geometry,this}updateMorphTargets(){const x=this.geometry;if(x.isBufferGeometry){const w=x.morphAttributes,S=Object.keys(w);if(S.length>0){const x=w[S[0]];if(void 0!==x){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let w=0,S=x.length;w<S;w++){const S=x[w].name||String(w);this.morphTargetInfluences.push(0),this.morphTargetDictionary[S]=w}}}}else{const w=x.morphTargets;void 0!==w&&w.length>0&&U.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(x,w){const S=this.geometry,G=this.material,z=this.matrixWorld;if(void 0===G)return;if(null===S.boundingSphere&&S.computeBoundingSphere(),mo.copy(S.boundingSphere),mo.applyMatrix4(z),!1===x.ray.intersectsSphere(mo))return;if(po.copy(z).invert(),fo.copy(x.ray).applyMatrix4(po),null!==S.boundingBox&&!1===fo.intersectsBox(S.boundingBox))return;let H;if(S.isBufferGeometry){const U=S.index,z=S.attributes.position,j=S.morphAttributes.position,X=S.morphTargetsRelative,q=S.attributes.uv,K=S.attributes.uv2,Y=S.groups,Z=S.drawRange;if(null!==U)if(Array.isArray(G))for(let S=0,J=Y.length;S<J;S++){const J=Y[S],Q=G[J.materialIndex];for(let S=Math.max(J.start,Z.start),G=Math.min(U.count,Math.min(J.start+J.count,Z.start+Z.count));S<G;S+=3){const G=U.getX(S),Y=U.getX(S+1),Z=U.getX(S+2);H=checkBufferGeometryIntersection(this,Q,x,fo,z,j,X,q,K,G,Y,Z),H&&(H.faceIndex=Math.floor(S/3),H.face.materialIndex=J.materialIndex,w.push(H))}}else{for(let S=Math.max(0,Z.start),Y=Math.min(U.count,Z.start+Z.count);S<Y;S+=3){const Y=U.getX(S),Z=U.getX(S+1),J=U.getX(S+2);H=checkBufferGeometryIntersection(this,G,x,fo,z,j,X,q,K,Y,Z,J),H&&(H.faceIndex=Math.floor(S/3),w.push(H))}}else if(void 0!==z)if(Array.isArray(G))for(let S=0,U=Y.length;S<U;S++){const U=Y[S],J=G[U.materialIndex];for(let S=Math.max(U.start,Z.start),G=Math.min(z.count,Math.min(U.start+U.count,Z.start+Z.count));S<G;S+=3){H=checkBufferGeometryIntersection(this,J,x,fo,z,j,X,q,K,S,S+1,S+2),H&&(H.faceIndex=Math.floor(S/3),H.face.materialIndex=U.materialIndex,w.push(H))}}else{for(let S=Math.max(0,Z.start),U=Math.min(z.count,Z.start+Z.count);S<U;S+=3){H=checkBufferGeometryIntersection(this,G,x,fo,z,j,X,q,K,S,S+1,S+2),H&&(H.faceIndex=Math.floor(S/3),w.push(H))}}}else S.isGeometry&&U.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function checkBufferGeometryIntersection(x,w,S,U,G,z,H,j,X,q,K,Y){go.fromBufferAttribute(G,q),vo.fromBufferAttribute(G,K),yo.fromBufferAttribute(G,Y);const Z=x.morphTargetInfluences;if(z&&Z){Eo.set(0,0,0),wo.set(0,0,0),So.set(0,0,0);for(let x=0,w=z.length;x<w;x++){const w=Z[x],S=z[x];0!==w&&(_o.fromBufferAttribute(S,q),bo.fromBufferAttribute(S,K),xo.fromBufferAttribute(S,Y),H?(Eo.addScaledVector(_o,w),wo.addScaledVector(bo,w),So.addScaledVector(xo,w)):(Eo.addScaledVector(_o.sub(go),w),wo.addScaledVector(bo.sub(vo),w),So.addScaledVector(xo.sub(yo),w)))}go.add(Eo),vo.add(wo),yo.add(So)}x.isSkinnedMesh&&(x.boneTransform(q,go),x.boneTransform(K,vo),x.boneTransform(Y,yo));const J=function checkIntersection(x,w,S,U,G,z,H,j){let X;if(X=w.side===te?U.intersectTriangle(H,z,G,!0,j):U.intersectTriangle(G,z,H,w.side!==ne,j),null===X)return null;Ro.copy(j),Ro.applyMatrix4(x.matrixWorld);const q=S.ray.origin.distanceTo(Ro);return q<S.near||q>S.far?null:{distance:q,point:Ro.clone(),object:x}}(x,w,S,U,go,vo,yo,Mo);if(J){j&&(To.fromBufferAttribute(j,q),Co.fromBufferAttribute(j,K),Ao.fromBufferAttribute(j,Y),J.uv=Triangle.getUV(Mo,go,vo,yo,To,Co,Ao,new Vector2)),X&&(To.fromBufferAttribute(X,q),Co.fromBufferAttribute(X,K),Ao.fromBufferAttribute(X,Y),J.uv2=Triangle.getUV(Mo,go,vo,yo,To,Co,Ao,new Vector2));const x={a:q,b:K,c:Y,normal:new Vector3,materialIndex:0};Triangle.getNormal(go,vo,yo,x.normal),J.face=x}return J}Mesh.prototype.isMesh=!0;class BoxGeometry extends BufferGeometry{constructor(x=1,w=1,S=1,U=1,G=1,z=1){super(),this.type="BoxGeometry",this.parameters={width:x,height:w,depth:S,widthSegments:U,heightSegments:G,depthSegments:z};const H=this;U=Math.floor(U),G=Math.floor(G),z=Math.floor(z);const j=[],X=[],q=[],K=[];let Y=0,Z=0;function buildPlane(x,w,S,U,G,z,J,Q,ee,te,ne){const re=z/ee,ie=J/te,oe=z/2,ae=J/2,se=Q/2,le=ee+1,ce=te+1;let ue=0,he=0;const de=new Vector3;for(let z=0;z<ce;z++){const H=z*ie-ae;for(let j=0;j<le;j++){const Y=j*re-oe;de[x]=Y*U,de[w]=H*G,de[S]=se,X.push(de.x,de.y,de.z),de[x]=0,de[w]=0,de[S]=Q>0?1:-1,q.push(de.x,de.y,de.z),K.push(j/ee),K.push(1-z/te),ue+=1}}for(let x=0;x<te;x++)for(let w=0;w<ee;w++){const S=Y+w+le*x,U=Y+w+le*(x+1),G=Y+(w+1)+le*(x+1),z=Y+(w+1)+le*x;j.push(S,U,z),j.push(U,G,z),he+=6}H.addGroup(Z,he,ne),Z+=he,Y+=ue}buildPlane("z","y","x",-1,-1,S,w,x,z,G,0),buildPlane("z","y","x",1,-1,S,w,-x,z,G,1),buildPlane("x","z","y",1,1,x,S,w,U,z,2),buildPlane("x","z","y",1,-1,x,S,-w,U,z,3),buildPlane("x","y","z",1,-1,x,w,S,U,G,4),buildPlane("x","y","z",-1,-1,x,w,-S,U,G,5),this.setIndex(j),this.setAttribute("position",new Float32BufferAttribute(X,3)),this.setAttribute("normal",new Float32BufferAttribute(q,3)),this.setAttribute("uv",new Float32BufferAttribute(K,2))}static fromJSON(x){return new BoxGeometry(x.width,x.height,x.depth,x.widthSegments,x.heightSegments,x.depthSegments)}}function cloneUniforms(x){const w={};for(const S in x){w[S]={};for(const U in x[S]){const G=x[S][U];G&&(G.isColor||G.isMatrix3||G.isMatrix4||G.isVector2||G.isVector3||G.isVector4||G.isTexture||G.isQuaternion)?w[S][U]=G.clone():Array.isArray(G)?w[S][U]=G.slice():w[S][U]=G}}return w}function mergeUniforms(x){const w={};for(let S=0;S<x.length;S++){const U=cloneUniforms(x[S]);for(const x in U)w[x]=U[x]}return w}const Lo={clone:cloneUniforms,merge:mergeUniforms};class ShaderMaterial extends Material{constructor(x){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==x&&(void 0!==x.attributes&&U.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(x))}copy(x){return super.copy(x),this.fragmentShader=x.fragmentShader,this.vertexShader=x.vertexShader,this.uniforms=cloneUniforms(x.uniforms),this.defines=Object.assign({},x.defines),this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.lights=x.lights,this.clipping=x.clipping,this.extensions=Object.assign({},x.extensions),this.glslVersion=x.glslVersion,this}toJSON(x){const w=super.toJSON(x);w.glslVersion=this.glslVersion,w.uniforms={};for(const S in this.uniforms){const U=this.uniforms[S].value;U&&U.isTexture?w.uniforms[S]={type:"t",value:U.toJSON(x).uuid}:U&&U.isColor?w.uniforms[S]={type:"c",value:U.getHex()}:U&&U.isVector2?w.uniforms[S]={type:"v2",value:U.toArray()}:U&&U.isVector3?w.uniforms[S]={type:"v3",value:U.toArray()}:U&&U.isVector4?w.uniforms[S]={type:"v4",value:U.toArray()}:U&&U.isMatrix3?w.uniforms[S]={type:"m3",value:U.toArray()}:U&&U.isMatrix4?w.uniforms[S]={type:"m4",value:U.toArray()}:w.uniforms[S]={value:U}}Object.keys(this.defines).length>0&&(w.defines=this.defines),w.vertexShader=this.vertexShader,w.fragmentShader=this.fragmentShader;const S={};for(const x in this.extensions)!0===this.extensions[x]&&(S[x]=!0);return Object.keys(S).length>0&&(w.extensions=S),w}}ShaderMaterial.prototype.isShaderMaterial=!0;class Camera extends Object3D{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}copy(x,w){return super.copy(x,w),this.matrixWorldInverse.copy(x.matrixWorldInverse),this.projectionMatrix.copy(x.projectionMatrix),this.projectionMatrixInverse.copy(x.projectionMatrixInverse),this}getWorldDirection(x){this.updateWorldMatrix(!0,!1);const w=this.matrixWorld.elements;return x.set(-w[8],-w[9],-w[10]).normalize()}updateMatrixWorld(x){super.updateMatrixWorld(x),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(x,w){super.updateWorldMatrix(x,w),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Camera.prototype.isCamera=!0;class PerspectiveCamera extends Camera{constructor(x=50,w=1,S=.1,U=2e3){super(),this.type="PerspectiveCamera",this.fov=x,this.zoom=1,this.near=S,this.far=U,this.focus=10,this.aspect=w,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(x,w){return super.copy(x,w),this.fov=x.fov,this.zoom=x.zoom,this.near=x.near,this.far=x.far,this.focus=x.focus,this.aspect=x.aspect,this.view=null===x.view?null:Object.assign({},x.view),this.filmGauge=x.filmGauge,this.filmOffset=x.filmOffset,this}setFocalLength(x){const w=.5*this.getFilmHeight()/x;this.fov=2*Dr*Math.atan(w),this.updateProjectionMatrix()}getFocalLength(){const x=Math.tan(.5*Br*this.fov);return.5*this.getFilmHeight()/x}getEffectiveFOV(){return 2*Dr*Math.atan(Math.tan(.5*Br*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(x,w,S,U,G,z){this.aspect=x/w,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=x,this.view.fullHeight=w,this.view.offsetX=S,this.view.offsetY=U,this.view.width=G,this.view.height=z,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const x=this.near;let w=x*Math.tan(.5*Br*this.fov)/this.zoom,S=2*w,U=this.aspect*S,G=-.5*U;const z=this.view;if(null!==this.view&&this.view.enabled){const x=z.fullWidth,H=z.fullHeight;G+=z.offsetX*U/x,w-=z.offsetY*S/H,U*=z.width/x,S*=z.height/H}const H=this.filmOffset;0!==H&&(G+=x*H/this.getFilmWidth()),this.projectionMatrix.makePerspective(G,G+U,w,w-S,x,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(x){const w=super.toJSON(x);return w.object.fov=this.fov,w.object.zoom=this.zoom,w.object.near=this.near,w.object.far=this.far,w.object.focus=this.focus,w.object.aspect=this.aspect,null!==this.view&&(w.object.view=Object.assign({},this.view)),w.object.filmGauge=this.filmGauge,w.object.filmOffset=this.filmOffset,w}}PerspectiveCamera.prototype.isPerspectiveCamera=!0;const Oo=90;class CubeCamera extends Object3D{constructor(x,w,S){if(super(),this.type="CubeCamera",!0!==S.isWebGLCubeRenderTarget)return void U.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=S;const G=new PerspectiveCamera(Oo,1,x,w);G.layers=this.layers,G.up.set(0,-1,0),G.lookAt(new Vector3(1,0,0)),this.add(G);const z=new PerspectiveCamera(Oo,1,x,w);z.layers=this.layers,z.up.set(0,-1,0),z.lookAt(new Vector3(-1,0,0)),this.add(z);const H=new PerspectiveCamera(Oo,1,x,w);H.layers=this.layers,H.up.set(0,0,1),H.lookAt(new Vector3(0,1,0)),this.add(H);const j=new PerspectiveCamera(Oo,1,x,w);j.layers=this.layers,j.up.set(0,0,-1),j.lookAt(new Vector3(0,-1,0)),this.add(j);const X=new PerspectiveCamera(Oo,1,x,w);X.layers=this.layers,X.up.set(0,-1,0),X.lookAt(new Vector3(0,0,1)),this.add(X);const q=new PerspectiveCamera(Oo,1,x,w);q.layers=this.layers,q.up.set(0,-1,0),q.lookAt(new Vector3(0,0,-1)),this.add(q)}update(x,w){null===this.parent&&this.updateMatrixWorld();const S=this.renderTarget,[U,G,z,H,j,X]=this.children,q=x.xr.enabled,K=x.getRenderTarget();x.xr.enabled=!1;const Y=S.texture.generateMipmaps;S.texture.generateMipmaps=!1,x.setRenderTarget(S,0),x.render(w,U),x.setRenderTarget(S,1),x.render(w,G),x.setRenderTarget(S,2),x.render(w,z),x.setRenderTarget(S,3),x.render(w,H),x.setRenderTarget(S,4),x.render(w,j),S.texture.generateMipmaps=Y,x.setRenderTarget(S,5),x.render(w,X),x.setRenderTarget(K),x.xr.enabled=q}}class CubeTexture extends Texture{constructor(x,w,S,U,G,z,H,j,X,q){super(x=void 0!==x?x:[],w=void 0!==w?w:$e,S,U,G,z,H,j,X,q),this.flipY=!1}get images(){return this.image}set images(x){this.image=x}}CubeTexture.prototype.isCubeTexture=!0;class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(x,w,S){Number.isInteger(w)&&(U.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),w=S),super(x,x,w),w=w||{},this.texture=new CubeTexture(void 0,w.mapping,w.wrapS,w.wrapT,w.magFilter,w.minFilter,w.format,w.type,w.anisotropy,w.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==w.generateMipmaps&&w.generateMipmaps,this.texture.minFilter=void 0!==w.minFilter?w.minFilter:ot,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(x,w){this.texture.type=w.type,this.texture.format=Tt,this.texture.encoding=w.encoding,this.texture.generateMipmaps=w.generateMipmaps,this.texture.minFilter=w.minFilter,this.texture.magFilter=w.magFilter;const S={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},U=new BoxGeometry(5,5,5),G=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(S.uniforms),vertexShader:S.vertexShader,fragmentShader:S.fragmentShader,side:te,blending:oe});G.uniforms.tEquirect.value=w;const z=new Mesh(U,G),H=w.minFilter;w.minFilter===lt&&(w.minFilter=ot);return new CubeCamera(1,10,this).update(x,z),w.minFilter=H,z.geometry.dispose(),z.material.dispose(),this}clear(x,w,S,U){const G=x.getRenderTarget();for(let G=0;G<6;G++)x.setRenderTarget(this,G),x.clear(w,S,U);x.setRenderTarget(G)}}WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;const Po=new Vector3,Io=new Vector3,No=new Matrix3;class Plane{constructor(x=new Vector3(1,0,0),w=0){this.normal=x,this.constant=w}set(x,w){return this.normal.copy(x),this.constant=w,this}setComponents(x,w,S,U){return this.normal.set(x,w,S),this.constant=U,this}setFromNormalAndCoplanarPoint(x,w){return this.normal.copy(x),this.constant=-w.dot(this.normal),this}setFromCoplanarPoints(x,w,S){const U=Po.subVectors(S,w).cross(Io.subVectors(x,w)).normalize();return this.setFromNormalAndCoplanarPoint(U,x),this}copy(x){return this.normal.copy(x.normal),this.constant=x.constant,this}normalize(){const x=1/this.normal.length();return this.normal.multiplyScalar(x),this.constant*=x,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(x){return this.normal.dot(x)+this.constant}distanceToSphere(x){return this.distanceToPoint(x.center)-x.radius}projectPoint(x,w){return w.copy(this.normal).multiplyScalar(-this.distanceToPoint(x)).add(x)}intersectLine(x,w){const S=x.delta(Po),U=this.normal.dot(S);if(0===U)return 0===this.distanceToPoint(x.start)?w.copy(x.start):null;const G=-(x.start.dot(this.normal)+this.constant)/U;return G<0||G>1?null:w.copy(S).multiplyScalar(G).add(x.start)}intersectsLine(x){const w=this.distanceToPoint(x.start),S=this.distanceToPoint(x.end);return w<0&&S>0||S<0&&w>0}intersectsBox(x){return x.intersectsPlane(this)}intersectsSphere(x){return x.intersectsPlane(this)}coplanarPoint(x){return x.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(x,w){const S=w||No.getNormalMatrix(x),U=this.coplanarPoint(Po).applyMatrix4(x),G=this.normal.applyMatrix3(S).normalize();return this.constant=-U.dot(G),this}translate(x){return this.constant-=x.dot(this.normal),this}equals(x){return x.normal.equals(this.normal)&&x.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Plane.prototype.isPlane=!0;const Fo=new Sphere,Bo=new Vector3;class Frustum{constructor(x=new Plane,w=new Plane,S=new Plane,U=new Plane,G=new Plane,z=new Plane){this.planes=[x,w,S,U,G,z]}set(x,w,S,U,G,z){const H=this.planes;return H[0].copy(x),H[1].copy(w),H[2].copy(S),H[3].copy(U),H[4].copy(G),H[5].copy(z),this}copy(x){const w=this.planes;for(let S=0;S<6;S++)w[S].copy(x.planes[S]);return this}setFromProjectionMatrix(x){const w=this.planes,S=x.elements,U=S[0],G=S[1],z=S[2],H=S[3],j=S[4],X=S[5],q=S[6],K=S[7],Y=S[8],Z=S[9],J=S[10],Q=S[11],ee=S[12],te=S[13],ne=S[14],re=S[15];return w[0].setComponents(H-U,K-j,Q-Y,re-ee).normalize(),w[1].setComponents(H+U,K+j,Q+Y,re+ee).normalize(),w[2].setComponents(H+G,K+X,Q+Z,re+te).normalize(),w[3].setComponents(H-G,K-X,Q-Z,re-te).normalize(),w[4].setComponents(H-z,K-q,Q-J,re-ne).normalize(),w[5].setComponents(H+z,K+q,Q+J,re+ne).normalize(),this}intersectsObject(x){const w=x.geometry;return null===w.boundingSphere&&w.computeBoundingSphere(),Fo.copy(w.boundingSphere).applyMatrix4(x.matrixWorld),this.intersectsSphere(Fo)}intersectsSprite(x){return Fo.center.set(0,0,0),Fo.radius=.7071067811865476,Fo.applyMatrix4(x.matrixWorld),this.intersectsSphere(Fo)}intersectsSphere(x){const w=this.planes,S=x.center,U=-x.radius;for(let x=0;x<6;x++){if(w[x].distanceToPoint(S)<U)return!1}return!0}intersectsBox(x){const w=this.planes;for(let S=0;S<6;S++){const U=w[S];if(Bo.x=U.normal.x>0?x.max.x:x.min.x,Bo.y=U.normal.y>0?x.max.y:x.min.y,Bo.z=U.normal.z>0?x.max.z:x.min.z,U.distanceToPoint(Bo)<0)return!1}return!0}containsPoint(x){const w=this.planes;for(let S=0;S<6;S++)if(w[S].distanceToPoint(x)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function WebGLAnimation(){let x=null,w=!1,S=null,U=null;function onAnimationFrame(w,G){S(w,G),U=x.requestAnimationFrame(onAnimationFrame)}return{start:function(){!0!==w&&null!==S&&(U=x.requestAnimationFrame(onAnimationFrame),w=!0)},stop:function(){x.cancelAnimationFrame(U),w=!1},setAnimationLoop:function(x){S=x},setContext:function(w){x=w}}}function WebGLAttributes(x,w){const S=w.isWebGL2,G=new WeakMap;return{get:function get(x){return x.isInterleavedBufferAttribute&&(x=x.data),G.get(x)},remove:function remove(w){w.isInterleavedBufferAttribute&&(w=w.data);const S=G.get(w);S&&(x.deleteBuffer(S.buffer),G.delete(w))},update:function update(w,z){if(w.isGLBufferAttribute){const x=G.get(w);return void((!x||x.version<w.version)&&G.set(w,{buffer:w.buffer,type:w.type,bytesPerElement:w.elementSize,version:w.version}))}w.isInterleavedBufferAttribute&&(w=w.data);const H=G.get(w);void 0===H?G.set(w,function createBuffer(w,G){const z=w.array,H=w.usage,j=x.createBuffer();x.bindBuffer(G,j),x.bufferData(G,z,H),w.onUploadCallback();let X=5126;return z instanceof Float32Array?X=5126:z instanceof Float64Array?U.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):z instanceof Uint16Array?w.isFloat16BufferAttribute?S?X=5131:U.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):X=5123:z instanceof Int16Array?X=5122:z instanceof Uint32Array?X=5125:z instanceof Int32Array?X=5124:z instanceof Int8Array?X=5120:(z instanceof Uint8Array||z instanceof Uint8ClampedArray)&&(X=5121),{buffer:j,type:X,bytesPerElement:z.BYTES_PER_ELEMENT,version:w.version}}(w,z)):H.version<w.version&&(!function updateBuffer(w,U,G){const z=U.array,H=U.updateRange;x.bindBuffer(G,w),-1===H.count?x.bufferSubData(G,0,z):(S?x.bufferSubData(G,H.offset*z.BYTES_PER_ELEMENT,z,H.offset,H.count):x.bufferSubData(G,H.offset*z.BYTES_PER_ELEMENT,z.subarray(H.offset,H.offset+H.count)),H.count=-1)}(H.buffer,w,z),H.version=w.version)}}}class PlaneGeometry extends BufferGeometry{constructor(x=1,w=1,S=1,U=1){super(),this.type="PlaneGeometry",this.parameters={width:x,height:w,widthSegments:S,heightSegments:U};const G=x/2,z=w/2,H=Math.floor(S),j=Math.floor(U),X=H+1,q=j+1,K=x/H,Y=w/j,Z=[],J=[],Q=[],ee=[];for(let x=0;x<q;x++){const w=x*Y-z;for(let S=0;S<X;S++){const U=S*K-G;J.push(U,-w,0),Q.push(0,0,1),ee.push(S/H),ee.push(1-x/j)}}for(let x=0;x<j;x++)for(let w=0;w<H;w++){const S=w+X*x,U=w+X*(x+1),G=w+1+X*(x+1),z=w+1+X*x;Z.push(S,U,z),Z.push(U,G,z)}this.setIndex(Z),this.setAttribute("position",new Float32BufferAttribute(J,3)),this.setAttribute("normal",new Float32BufferAttribute(Q,3)),this.setAttribute("uv",new Float32BufferAttribute(ee,2))}static fromJSON(x){return new PlaneGeometry(x.width,x.height,x.widthSegments,x.heightSegments)}}const Do={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenTint, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenTint * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenTint = sheenTint;\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenTint;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenTint, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenTint;\n\tuniform float sheenRoughness;\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ko={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}}},Uo={basic:{uniforms:mergeUniforms([ko.common,ko.specularmap,ko.envmap,ko.aomap,ko.lightmap,ko.fog]),vertexShader:Do.meshbasic_vert,fragmentShader:Do.meshbasic_frag},lambert:{uniforms:mergeUniforms([ko.common,ko.specularmap,ko.envmap,ko.aomap,ko.lightmap,ko.emissivemap,ko.fog,ko.lights,{emissive:{value:new Color(0)}}]),vertexShader:Do.meshlambert_vert,fragmentShader:Do.meshlambert_frag},phong:{uniforms:mergeUniforms([ko.common,ko.specularmap,ko.envmap,ko.aomap,ko.lightmap,ko.emissivemap,ko.bumpmap,ko.normalmap,ko.displacementmap,ko.fog,ko.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:Do.meshphong_vert,fragmentShader:Do.meshphong_frag},standard:{uniforms:mergeUniforms([ko.common,ko.envmap,ko.aomap,ko.lightmap,ko.emissivemap,ko.bumpmap,ko.normalmap,ko.displacementmap,ko.roughnessmap,ko.metalnessmap,ko.fog,ko.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Do.meshphysical_vert,fragmentShader:Do.meshphysical_frag},toon:{uniforms:mergeUniforms([ko.common,ko.aomap,ko.lightmap,ko.emissivemap,ko.bumpmap,ko.normalmap,ko.displacementmap,ko.gradientmap,ko.fog,ko.lights,{emissive:{value:new Color(0)}}]),vertexShader:Do.meshtoon_vert,fragmentShader:Do.meshtoon_frag},matcap:{uniforms:mergeUniforms([ko.common,ko.bumpmap,ko.normalmap,ko.displacementmap,ko.fog,{matcap:{value:null}}]),vertexShader:Do.meshmatcap_vert,fragmentShader:Do.meshmatcap_frag},points:{uniforms:mergeUniforms([ko.points,ko.fog]),vertexShader:Do.points_vert,fragmentShader:Do.points_frag},dashed:{uniforms:mergeUniforms([ko.common,ko.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Do.linedashed_vert,fragmentShader:Do.linedashed_frag},depth:{uniforms:mergeUniforms([ko.common,ko.displacementmap]),vertexShader:Do.depth_vert,fragmentShader:Do.depth_frag},normal:{uniforms:mergeUniforms([ko.common,ko.bumpmap,ko.normalmap,ko.displacementmap,{opacity:{value:1}}]),vertexShader:Do.meshnormal_vert,fragmentShader:Do.meshnormal_frag},sprite:{uniforms:mergeUniforms([ko.sprite,ko.fog]),vertexShader:Do.sprite_vert,fragmentShader:Do.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:Do.background_vert,fragmentShader:Do.background_frag},cube:{uniforms:mergeUniforms([ko.envmap,{opacity:{value:1}}]),vertexShader:Do.cube_vert,fragmentShader:Do.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Do.equirect_vert,fragmentShader:Do.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([ko.common,ko.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Do.distanceRGBA_vert,fragmentShader:Do.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([ko.lights,ko.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:Do.shadow_vert,fragmentShader:Do.shadow_frag}};function WebGLBackground(x,w,S,U,G){const z=new Color(0);let H,j,X=0,q=null,K=0,Y=null;function setClear(x,w){S.buffers.color.setClear(x.r,x.g,x.b,w,G)}return{getClearColor:function(){return z},setClearColor:function(x,w=1){z.set(x),X=w,setClear(z,X)},getClearAlpha:function(){return X},setClearAlpha:function(x){X=x,setClear(z,X)},render:function render(S,G){let Z=!1,J=!0===G.isScene?G.background:null;J&&J.isTexture&&(J=w.get(J));const Q=x.xr,ne=Q.getSession&&Q.getSession();ne&&"additive"===ne.environmentBlendMode&&(J=null),null===J?setClear(z,X):J&&J.isColor&&(setClear(J,1),Z=!0),(x.autoClear||Z)&&x.clear(x.autoClearColor,x.autoClearDepth,x.autoClearStencil),J&&(J.isCubeTexture||J.mapping===Ke)?(void 0===j&&(j=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(Uo.cube.uniforms),vertexShader:Uo.cube.vertexShader,fragmentShader:Uo.cube.fragmentShader,side:te,depthTest:!1,depthWrite:!1,fog:!1})),j.geometry.deleteAttribute("normal"),j.geometry.deleteAttribute("uv"),j.onBeforeRender=function(x,w,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(j.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),U.update(j)),j.material.uniforms.envMap.value=J,j.material.uniforms.flipEnvMap.value=J.isCubeTexture&&!1===J.isRenderTargetTexture?-1:1,q===J&&K===J.version&&Y===x.toneMapping||(j.material.needsUpdate=!0,q=J,K=J.version,Y=x.toneMapping),S.unshift(j,j.geometry,j.material,0,0,null)):J&&J.isTexture&&(void 0===H&&(H=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(Uo.background.uniforms),vertexShader:Uo.background.vertexShader,fragmentShader:Uo.background.fragmentShader,side:ee,depthTest:!1,depthWrite:!1,fog:!1})),H.geometry.deleteAttribute("normal"),Object.defineProperty(H.material,"map",{get:function(){return this.uniforms.t2D.value}}),U.update(H)),H.material.uniforms.t2D.value=J,!0===J.matrixAutoUpdate&&J.updateMatrix(),H.material.uniforms.uvTransform.value.copy(J.matrix),q===J&&K===J.version&&Y===x.toneMapping||(H.material.needsUpdate=!0,q=J,K=J.version,Y=x.toneMapping),S.unshift(H,H.geometry,H.material,0,0,null))}}}function WebGLBindingStates(x,w,S,U){const G=x.getParameter(34921),z=U.isWebGL2?null:w.get("OES_vertex_array_object"),H=U.isWebGL2||null!==z,j={},X=createBindingState(null);let q=X;function bindVertexArrayObject(w){return U.isWebGL2?x.bindVertexArray(w):z.bindVertexArrayOES(w)}function deleteVertexArrayObject(w){return U.isWebGL2?x.deleteVertexArray(w):z.deleteVertexArrayOES(w)}function createBindingState(x){const w=[],S=[],U=[];for(let x=0;x<G;x++)w[x]=0,S[x]=0,U[x]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:w,enabledAttributes:S,attributeDivisors:U,object:x,attributes:{},index:null}}function initAttributes(){const x=q.newAttributes;for(let w=0,S=x.length;w<S;w++)x[w]=0}function enableAttribute(x){enableAttributeAndDivisor(x,0)}function enableAttributeAndDivisor(S,G){const z=q.newAttributes,H=q.enabledAttributes,j=q.attributeDivisors;if(z[S]=1,0===H[S]&&(x.enableVertexAttribArray(S),H[S]=1),j[S]!==G){(U.isWebGL2?x:w.get("ANGLE_instanced_arrays"))[U.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](S,G),j[S]=G}}function disableUnusedAttributes(){const w=q.newAttributes,S=q.enabledAttributes;for(let U=0,G=S.length;U<G;U++)S[U]!==w[U]&&(x.disableVertexAttribArray(U),S[U]=0)}function vertexAttribPointer(w,S,G,z,H,j){!0!==U.isWebGL2||5124!==G&&5125!==G?x.vertexAttribPointer(w,S,G,z,H,j):x.vertexAttribIPointer(w,S,G,H,j)}function reset(){resetDefaultState(),q!==X&&(q=X,bindVertexArrayObject(q.object))}function resetDefaultState(){X.geometry=null,X.program=null,X.wireframe=!1}return{setup:function setup(G,X,K,Y,Z){let J=!1;if(H){const w=function getBindingState(w,S,G){const H=!0===G.wireframe;let X=j[w.id];void 0===X&&(X={},j[w.id]=X);let q=X[S.id];void 0===q&&(q={},X[S.id]=q);let K=q[H];void 0===K&&(K=createBindingState(function createVertexArrayObject(){return U.isWebGL2?x.createVertexArray():z.createVertexArrayOES()}()),q[H]=K);return K}(Y,K,X);q!==w&&(q=w,bindVertexArrayObject(q.object)),J=function needsUpdate(x,w){const S=q.attributes,U=x.attributes;let G=0;for(const x in U){const w=S[x],z=U[x];if(void 0===w)return!0;if(w.attribute!==z)return!0;if(w.data!==z.data)return!0;G++}return q.attributesNum!==G||q.index!==w}(Y,Z),J&&function saveCache(x,w){const S={},U=x.attributes;let G=0;for(const x in U){const w=U[x],z={};z.attribute=w,w.data&&(z.data=w.data),S[x]=z,G++}q.attributes=S,q.attributesNum=G,q.index=w}(Y,Z)}else{const x=!0===X.wireframe;q.geometry===Y.id&&q.program===K.id&&q.wireframe===x||(q.geometry=Y.id,q.program=K.id,q.wireframe=x,J=!0)}!0===G.isInstancedMesh&&(J=!0),null!==Z&&S.update(Z,34963),J&&(!function setupVertexAttributes(G,z,H,j){if(!1===U.isWebGL2&&(G.isInstancedMesh||j.isInstancedBufferGeometry)&&null===w.get("ANGLE_instanced_arrays"))return;initAttributes();const X=j.attributes,q=H.getAttributes(),K=z.defaultAttributeValues;for(const w in q){const U=q[w];if(U.location>=0){let z=X[w];if(void 0===z&&("instanceMatrix"===w&&G.instanceMatrix&&(z=G.instanceMatrix),"instanceColor"===w&&G.instanceColor&&(z=G.instanceColor)),void 0!==z){const w=z.normalized,H=z.itemSize,X=S.get(z);if(void 0===X)continue;const q=X.buffer,K=X.type,Y=X.bytesPerElement;if(z.isInterleavedBufferAttribute){const S=z.data,X=S.stride,Z=z.offset;if(S&&S.isInstancedInterleavedBuffer){for(let x=0;x<U.locationSize;x++)enableAttributeAndDivisor(U.location+x,S.meshPerAttribute);!0!==G.isInstancedMesh&&void 0===j._maxInstanceCount&&(j._maxInstanceCount=S.meshPerAttribute*S.count)}else for(let x=0;x<U.locationSize;x++)enableAttribute(U.location+x);x.bindBuffer(34962,q);for(let x=0;x<U.locationSize;x++)vertexAttribPointer(U.location+x,H/U.locationSize,K,w,X*Y,(Z+H/U.locationSize*x)*Y)}else{if(z.isInstancedBufferAttribute){for(let x=0;x<U.locationSize;x++)enableAttributeAndDivisor(U.location+x,z.meshPerAttribute);!0!==G.isInstancedMesh&&void 0===j._maxInstanceCount&&(j._maxInstanceCount=z.meshPerAttribute*z.count)}else for(let x=0;x<U.locationSize;x++)enableAttribute(U.location+x);x.bindBuffer(34962,q);for(let x=0;x<U.locationSize;x++)vertexAttribPointer(U.location+x,H/U.locationSize,K,w,H*Y,H/U.locationSize*x*Y)}}else if(void 0!==K){const S=K[w];if(void 0!==S)switch(S.length){case 2:x.vertexAttrib2fv(U.location,S);break;case 3:x.vertexAttrib3fv(U.location,S);break;case 4:x.vertexAttrib4fv(U.location,S);break;default:x.vertexAttrib1fv(U.location,S)}}}}disableUnusedAttributes()}(G,X,K,Y),null!==Z&&x.bindBuffer(34963,S.get(Z).buffer))},reset,resetDefaultState,dispose:function dispose(){reset();for(const x in j){const w=j[x];for(const x in w){const S=w[x];for(const x in S)deleteVertexArrayObject(S[x].object),delete S[x];delete w[x]}delete j[x]}},releaseStatesOfGeometry:function releaseStatesOfGeometry(x){if(void 0===j[x.id])return;const w=j[x.id];for(const x in w){const S=w[x];for(const x in S)deleteVertexArrayObject(S[x].object),delete S[x];delete w[x]}delete j[x.id]},releaseStatesOfProgram:function releaseStatesOfProgram(x){for(const w in j){const S=j[w];if(void 0===S[x.id])continue;const U=S[x.id];for(const x in U)deleteVertexArrayObject(U[x].object),delete U[x];delete S[x.id]}},initAttributes,enableAttribute,disableUnusedAttributes}}function WebGLBufferRenderer(x,w,S,G){const z=G.isWebGL2;let H;this.setMode=function setMode(x){H=x},this.render=function render(w,U){x.drawArrays(H,w,U),S.update(U,H,1)},this.renderInstances=function renderInstances(G,j,X){if(0===X)return;let q,K;if(z)q=x,K="drawArraysInstanced";else if(q=w.get("ANGLE_instanced_arrays"),K="drawArraysInstancedANGLE",null===q)return void U.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");q[K](H,G,j,X),S.update(j,H,X)}}function WebGLCapabilities(x,w,S){let G;function getMaxPrecision(w){if("highp"===w){if(x.getShaderPrecisionFormat(35633,36338).precision>0&&x.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";w="mediump"}return"mediump"===w&&x.getShaderPrecisionFormat(35633,36337).precision>0&&x.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const z="undefined"!=typeof WebGL2RenderingContext&&x instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&x instanceof WebGL2ComputeRenderingContext;let H=void 0!==S.precision?S.precision:"highp";const j=getMaxPrecision(H);j!==H&&(U.warn("THREE.WebGLRenderer:",H,"not supported, using",j,"instead."),H=j);const X=z||w.has("WEBGL_draw_buffers"),q=!0===S.logarithmicDepthBuffer,K=x.getParameter(34930),Y=x.getParameter(35660),Z=x.getParameter(3379),J=x.getParameter(34076),Q=x.getParameter(34921),ee=x.getParameter(36347),te=x.getParameter(36348),ne=x.getParameter(36349),re=Y>0,ie=z||w.has("OES_texture_float");return{isWebGL2:z,drawBuffers:X,getMaxAnisotropy:function getMaxAnisotropy(){if(void 0!==G)return G;if(!0===w.has("EXT_texture_filter_anisotropic")){const S=w.get("EXT_texture_filter_anisotropic");G=x.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else G=0;return G},getMaxPrecision,precision:H,logarithmicDepthBuffer:q,maxTextures:K,maxVertexTextures:Y,maxTextureSize:Z,maxCubemapSize:J,maxAttributes:Q,maxVertexUniforms:ee,maxVaryings:te,maxFragmentUniforms:ne,vertexTextures:re,floatFragmentTextures:ie,floatVertexTextures:re&&ie,maxSamples:z?x.getParameter(36183):0}}function WebGLClipping(x){const w=this;let S=null,U=0,G=!1,z=!1;const H=new Plane,j=new Matrix3,X={value:null,needsUpdate:!1};function resetGlobalState(){X.value!==S&&(X.value=S,X.needsUpdate=U>0),w.numPlanes=U,w.numIntersection=0}function projectPlanes(x,S,U,G){const z=null!==x?x.length:0;let q=null;if(0!==z){if(q=X.value,!0!==G||null===q){const w=U+4*z,G=S.matrixWorldInverse;j.getNormalMatrix(G),(null===q||q.length<w)&&(q=new Float32Array(w));for(let w=0,S=U;w!==z;++w,S+=4)H.copy(x[w]).applyMatrix4(G,j),H.normal.toArray(q,S),q[S+3]=H.constant}X.value=q,X.needsUpdate=!0}return w.numPlanes=z,w.numIntersection=0,q}this.uniform=X,this.numPlanes=0,this.numIntersection=0,this.init=function(x,w,z){const H=0!==x.length||w||0!==U||G;return G=w,S=projectPlanes(x,z,0),U=x.length,H},this.beginShadows=function(){z=!0,projectPlanes(null)},this.endShadows=function(){z=!1,resetGlobalState()},this.setState=function(w,H,j){const q=w.clippingPlanes,K=w.clipIntersection,Y=w.clipShadows,Z=x.get(w);if(!G||null===q||0===q.length||z&&!Y)z?projectPlanes(null):resetGlobalState();else{const x=z?0:U,w=4*x;let G=Z.clippingState||null;X.value=G,G=projectPlanes(q,H,w,j);for(let x=0;x!==w;++x)G[x]=S[x];Z.clippingState=G,this.numIntersection=K?this.numPlanes:0,this.numPlanes+=x}}}function WebGLCubeMaps(x){let w=new WeakMap;function mapTextureMapping(x,w){return w===Xe?x.mapping=$e:w===qe&&(x.mapping=je),x}function onTextureDispose(x){const S=x.target;S.removeEventListener("dispose",onTextureDispose);const U=w.get(S);void 0!==U&&(w.delete(S),U.dispose())}return{get:function get(S){if(S&&S.isTexture&&!1===S.isRenderTargetTexture){const U=S.mapping;if(U===Xe||U===qe){if(w.has(S)){return mapTextureMapping(w.get(S).texture,S.mapping)}{const U=S.image;if(U&&U.height>0){const G=x.getRenderTarget(),z=new WebGLCubeRenderTarget(U.height/2);return z.fromEquirectangularTexture(x,S),w.set(S,z),x.setRenderTarget(G),S.addEventListener("dispose",onTextureDispose),mapTextureMapping(z.texture,S.mapping)}return null}}}return S},dispose:function dispose(){w=new WeakMap}}}Uo.physical={uniforms:mergeUniforms([Uo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenTint:{value:new Color(0)},sheenRoughness:{value:0},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new Color(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new Color(1,1,1)},specularTintMap:{value:null}}]),vertexShader:Do.meshphysical_vert,fragmentShader:Do.meshphysical_frag};class OrthographicCamera extends Camera{constructor(x=-1,w=1,S=1,U=-1,G=.1,z=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=x,this.right=w,this.top=S,this.bottom=U,this.near=G,this.far=z,this.updateProjectionMatrix()}copy(x,w){return super.copy(x,w),this.left=x.left,this.right=x.right,this.top=x.top,this.bottom=x.bottom,this.near=x.near,this.far=x.far,this.zoom=x.zoom,this.view=null===x.view?null:Object.assign({},x.view),this}setViewOffset(x,w,S,U,G,z){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=x,this.view.fullHeight=w,this.view.offsetX=S,this.view.offsetY=U,this.view.width=G,this.view.height=z,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const x=(this.right-this.left)/(2*this.zoom),w=(this.top-this.bottom)/(2*this.zoom),S=(this.right+this.left)/2,U=(this.top+this.bottom)/2;let G=S-x,z=S+x,H=U+w,j=U-w;if(null!==this.view&&this.view.enabled){const x=(this.right-this.left)/this.view.fullWidth/this.zoom,w=(this.top-this.bottom)/this.view.fullHeight/this.zoom;G+=x*this.view.offsetX,z=G+x*this.view.width,H-=w*this.view.offsetY,j=H-w*this.view.height}this.projectionMatrix.makeOrthographic(G,z,H,j,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(x){const w=super.toJSON(x);return w.object.zoom=this.zoom,w.object.left=this.left,w.object.right=this.right,w.object.top=this.top,w.object.bottom=this.bottom,w.object.near=this.near,w.object.far=this.far,null!==this.view&&(w.object.view=Object.assign({},this.view)),w}}OrthographicCamera.prototype.isOrthographicCamera=!0;class RawShaderMaterial extends ShaderMaterial{constructor(x){super(x),this.type="RawShaderMaterial"}}RawShaderMaterial.prototype.isRawShaderMaterial=!0;const Go=Math.pow(2,8),Vo=[.125,.215,.35,.446,.526,.582],Wo=5+Vo.length,zo=20,Ho={[qn]:0,[Kn]:1,[Jn]:2,[tr]:3,[nr]:4,[rr]:5,[Zn]:6},$o=new OrthographicCamera,{_lodPlanes:jo,_sizeLods:Xo,_sigmas:qo}=_createPlanes(),Ko=new Color;let Yo=null;const Zo=(1+Math.sqrt(5))/2,Jo=1/Zo,Qo=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,Zo,Jo),new Vector3(0,Zo,-Jo),new Vector3(Jo,0,Zo),new Vector3(-Jo,0,Zo),new Vector3(Zo,Jo,0),new Vector3(-Zo,Jo,0)];class PMREMGenerator{constructor(x){this._renderer=x,this._pingPongRenderTarget=null,this._blurMaterial=function _getBlurShader(x){const w=new Float32Array(x),S=new Vector3(0,1,0);return new RawShaderMaterial({name:"SphericalGaussianBlur",defines:{n:x},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:w},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:S},inputEncoding:{value:Ho[qn]},outputEncoding:{value:Ho[qn]}},vertexShader:_getCommonVertexShader(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${_getEncodings()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:oe,depthTest:!1,depthWrite:!1})}(zo),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(x,w=0,S=.1,U=100){Yo=this._renderer.getRenderTarget();const G=this._allocateTargets();return this._sceneToCubeUV(x,S,U,G),w>0&&this._blur(G,0,0,w),this._applyPMREM(G),this._cleanup(G),G}fromEquirectangular(x){return this._fromTexture(x)}fromCubemap(x){return this._fromTexture(x)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let x=0;x<jo.length;x++)jo[x].dispose()}_cleanup(x){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Yo),x.scissorTest=!1,_setViewport(x,0,0,x.width,x.height)}_fromTexture(x){Yo=this._renderer.getRenderTarget();const w=this._allocateTargets(x);return this._textureToCubeUV(x,w),this._applyPMREM(w),this._cleanup(w),w}_allocateTargets(x){const w={magFilter:et,minFilter:et,generateMipmaps:!1,type:ut,format:Mt,encoding:_isLDR(x)?x.encoding:Jn,depthBuffer:!1},S=_createRenderTarget(w);return S.depthBuffer=!x,this._pingPongRenderTarget=_createRenderTarget(w),S}_compileMaterial(x){const w=new Mesh(jo[0],x);this._renderer.compile(w,$o)}_sceneToCubeUV(x,w,S,U){const G=new PerspectiveCamera(90,1,w,S),z=[1,-1,1,1,1,1],H=[1,1,1,-1,-1,-1],j=this._renderer,X=j.autoClear,q=j.outputEncoding,K=j.toneMapping;j.getClearColor(Ko),j.toneMapping=ke,j.outputEncoding=qn,j.autoClear=!1;const Y=new MeshBasicMaterial({name:"PMREM.Background",side:te,depthWrite:!1,depthTest:!1}),Z=new Mesh(new BoxGeometry,Y);let J=!1;const Q=x.background;Q?Q.isColor&&(Y.color.copy(Q),x.background=null,J=!0):(Y.color.copy(Ko),J=!0);for(let w=0;w<6;w++){const S=w%3;0==S?(G.up.set(0,z[w],0),G.lookAt(H[w],0,0)):1==S?(G.up.set(0,0,z[w]),G.lookAt(0,H[w],0)):(G.up.set(0,z[w],0),G.lookAt(0,0,H[w])),_setViewport(U,S*Go,w>2?Go:0,Go,Go),j.setRenderTarget(U),J&&j.render(Z,G),j.render(x,G)}Z.geometry.dispose(),Z.material.dispose(),j.toneMapping=K,j.outputEncoding=q,j.autoClear=X,x.background=Q}_setEncoding(x,w){!0===this._renderer.capabilities.isWebGL2&&w.format===Tt&&w.type===ut&&w.encoding===Kn?x.value=Ho[qn]:x.value=Ho[w.encoding]}_textureToCubeUV(x,w){const S=this._renderer;x.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=_getCubemapShader()):null==this._equirectShader&&(this._equirectShader=_getEquirectShader());const U=x.isCubeTexture?this._cubemapShader:this._equirectShader,G=new Mesh(jo[0],U),z=U.uniforms;z.envMap.value=x,x.isCubeTexture||z.texelSize.value.set(1/x.image.width,1/x.image.height),this._setEncoding(z.inputEncoding,x),this._setEncoding(z.outputEncoding,w.texture),_setViewport(w,0,0,3*Go,2*Go),S.setRenderTarget(w),S.render(G,$o)}_applyPMREM(x){const w=this._renderer,S=w.autoClear;w.autoClear=!1;for(let w=1;w<Wo;w++){const S=Math.sqrt(qo[w]*qo[w]-qo[w-1]*qo[w-1]),U=Qo[(w-1)%Qo.length];this._blur(x,w-1,w,S,U)}w.autoClear=S}_blur(x,w,S,U,G){const z=this._pingPongRenderTarget;this._halfBlur(x,z,w,S,U,"latitudinal",G),this._halfBlur(z,x,S,S,U,"longitudinal",G)}_halfBlur(x,w,S,G,z,H,j){const X=this._renderer,q=this._blurMaterial;"latitudinal"!==H&&"longitudinal"!==H&&U.error("blur direction must be either latitudinal or longitudinal!");const K=new Mesh(jo[G],q),Y=q.uniforms,Z=Xo[S]-1,J=isFinite(z)?Math.PI/(2*Z):2*Math.PI/39,Q=z/J,ee=isFinite(z)?1+Math.floor(3*Q):zo;ee>zo&&U.warn(`sigmaRadians, ${z}, is too large and will clip, as it requested ${ee} samples when the maximum is set to 20`);const te=[];let ne=0;for(let x=0;x<zo;++x){const w=x/Q,S=Math.exp(-w*w/2);te.push(S),0==x?ne+=S:x<ee&&(ne+=2*S)}for(let x=0;x<te.length;x++)te[x]=te[x]/ne;Y.envMap.value=x.texture,Y.samples.value=ee,Y.weights.value=te,Y.latitudinal.value="latitudinal"===H,j&&(Y.poleAxis.value=j),Y.dTheta.value=J,Y.mipInt.value=8-S,this._setEncoding(Y.inputEncoding,x.texture),this._setEncoding(Y.outputEncoding,x.texture);const re=Xo[G];_setViewport(w,3*Math.max(0,Go-2*re),(0===G?0:2*Go)+2*re*(G>4?G-8+4:0),3*re,2*re),X.setRenderTarget(w),X.render(K,$o)}}function _isLDR(x){return void 0!==x&&x.type===ut&&(x.encoding===qn||x.encoding===Kn||x.encoding===Zn)}function _createPlanes(){const x=[],w=[],S=[];let U=8;for(let G=0;G<Wo;G++){const z=Math.pow(2,U);w.push(z);let H=1/z;G>4?H=Vo[G-8+4-1]:0==G&&(H=0),S.push(H);const j=1/(z-1),X=-j/2,q=1+j/2,K=[X,X,q,X,q,q,X,X,q,q,X,q],Y=6,Z=6,J=3,Q=2,ee=1,te=new Float32Array(J*Z*Y),ne=new Float32Array(Q*Z*Y),re=new Float32Array(ee*Z*Y);for(let x=0;x<Y;x++){const w=x%3*2/3-1,S=x>2?0:-1,U=[w,S,0,w+2/3,S,0,w+2/3,S+1,0,w,S,0,w+2/3,S+1,0,w,S+1,0];te.set(U,J*Z*x),ne.set(K,Q*Z*x);const G=[x,x,x,x,x,x];re.set(G,ee*Z*x)}const ie=new BufferGeometry;ie.setAttribute("position",new BufferAttribute(te,J)),ie.setAttribute("uv",new BufferAttribute(ne,Q)),ie.setAttribute("faceIndex",new BufferAttribute(re,ee)),x.push(ie),U>4&&U--}return{_lodPlanes:x,_sizeLods:w,_sigmas:S}}function _createRenderTarget(x){const w=new WebGLRenderTarget(3*Go,3*Go,x);return w.texture.mapping=Ke,w.texture.name="PMREM.cubeUv",w.scissorTest=!0,w}function _setViewport(x,w,S,U,G){x.viewport.set(w,S,U,G),x.scissor.set(w,S,U,G)}function _getEquirectShader(){const x=new Vector2(1,1);return new RawShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:x},inputEncoding:{value:Ho[qn]},outputEncoding:{value:Ho[qn]}},vertexShader:_getCommonVertexShader(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${_getEncodings()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:oe,depthTest:!1,depthWrite:!1})}function _getCubemapShader(){return new RawShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Ho[qn]},outputEncoding:{value:Ho[qn]}},vertexShader:_getCommonVertexShader(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${_getEncodings()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:oe,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function _getEncodings(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function WebGLCubeUVMaps(x){let w=new WeakMap,S=null;function onTextureDispose(x){const S=x.target;S.removeEventListener("dispose",onTextureDispose);const U=w.get(S);void 0!==U&&(w.delete(S),U.dispose())}return{get:function get(U){if(U&&U.isTexture&&!1===U.isRenderTargetTexture){const G=U.mapping,z=G===Xe||G===qe,H=G===$e||G===je;if(z||H){if(w.has(U))return w.get(U).texture;{const G=U.image;if(z&&G&&G.height>0||H&&G&&function isCubeTextureComplete(x){let w=0;const S=6;for(let U=0;U<S;U++)void 0!==x[U]&&w++;return w===S}(G)){const G=x.getRenderTarget();null===S&&(S=new PMREMGenerator(x));const H=z?S.fromEquirectangular(U):S.fromCubemap(U);return w.set(U,H),x.setRenderTarget(G),U.addEventListener("dispose",onTextureDispose),H.texture}return null}}}return U},dispose:function dispose(){w=new WeakMap,null!==S&&(S.dispose(),S=null)}}}function WebGLExtensions(x){const w={};function getExtension(S){if(void 0!==w[S])return w[S];let U;switch(S){case"WEBGL_depth_texture":U=x.getExtension("WEBGL_depth_texture")||x.getExtension("MOZ_WEBGL_depth_texture")||x.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":U=x.getExtension("EXT_texture_filter_anisotropic")||x.getExtension("MOZ_EXT_texture_filter_anisotropic")||x.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":U=x.getExtension("WEBGL_compressed_texture_s3tc")||x.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":U=x.getExtension("WEBGL_compressed_texture_pvrtc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:U=x.getExtension(S)}return w[S]=U,U}return{has:function(x){return null!==getExtension(x)},init:function(x){x.isWebGL2?getExtension("EXT_color_buffer_float"):(getExtension("WEBGL_depth_texture"),getExtension("OES_texture_float"),getExtension("OES_texture_half_float"),getExtension("OES_texture_half_float_linear"),getExtension("OES_standard_derivatives"),getExtension("OES_element_index_uint"),getExtension("OES_vertex_array_object"),getExtension("ANGLE_instanced_arrays")),getExtension("OES_texture_float_linear"),getExtension("EXT_color_buffer_half_float")},get:function(x){const w=getExtension(x);return null===w&&U.warn("THREE.WebGLRenderer: "+x+" extension not supported."),w}}}function WebGLGeometries(x,w,S,U){const G={},z=new WeakMap;function onGeometryDispose(x){const H=x.target;null!==H.index&&w.remove(H.index);for(const x in H.attributes)w.remove(H.attributes[x]);H.removeEventListener("dispose",onGeometryDispose),delete G[H.id];const j=z.get(H);j&&(w.remove(j),z.delete(H)),U.releaseStatesOfGeometry(H),!0===H.isInstancedBufferGeometry&&delete H._maxInstanceCount,S.memory.geometries--}function updateWireframeAttribute(x){const S=[],U=x.index,G=x.attributes.position;let H=0;if(null!==U){const x=U.array;H=U.version;for(let w=0,U=x.length;w<U;w+=3){const U=x[w+0],G=x[w+1],z=x[w+2];S.push(U,G,G,z,z,U)}}else{const x=G.array;H=G.version;for(let w=0,U=x.length/3-1;w<U;w+=3){const x=w+0,U=w+1,G=w+2;S.push(x,U,U,G,G,x)}}const j=new(arrayMax(S)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(S,1);j.version=H;const X=z.get(x);X&&w.remove(X),z.set(x,j)}return{get:function get(x,w){return!0===G[w.id]||(w.addEventListener("dispose",onGeometryDispose),G[w.id]=!0,S.memory.geometries++),w},update:function update(x){const S=x.attributes;for(const x in S)w.update(S[x],34962);const U=x.morphAttributes;for(const x in U){const S=U[x];for(let x=0,U=S.length;x<U;x++)w.update(S[x],34962)}},getWireframeAttribute:function getWireframeAttribute(x){const w=z.get(x);if(w){const S=x.index;null!==S&&w.version<S.version&&updateWireframeAttribute(x)}else updateWireframeAttribute(x);return z.get(x)}}}function WebGLIndexedBufferRenderer(x,w,S,G){const z=G.isWebGL2;let H,j,X;this.setMode=function setMode(x){H=x},this.setIndex=function setIndex(x){j=x.type,X=x.bytesPerElement},this.render=function render(w,U){x.drawElements(H,U,j,w*X),S.update(U,H,1)},this.renderInstances=function renderInstances(G,q,K){if(0===K)return;let Y,Z;if(z)Y=x,Z="drawElementsInstanced";else if(Y=w.get("ANGLE_instanced_arrays"),Z="drawElementsInstancedANGLE",null===Y)return void U.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Y[Z](H,q,j,G*X,K),S.update(q,H,K)}}function WebGLInfo(x){const w={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:w,programs:null,autoReset:!0,reset:function reset(){w.frame++,w.calls=0,w.triangles=0,w.points=0,w.lines=0},update:function update(x,S,G){switch(w.calls++,S){case 4:w.triangles+=G*(x/3);break;case 1:w.lines+=G*(x/2);break;case 3:w.lines+=G*(x-1);break;case 2:w.lines+=G*x;break;case 0:w.points+=G*x;break;default:U.error("THREE.WebGLInfo: Unknown draw mode:",S)}}}}class DataTexture2DArray extends Texture{constructor(x=null,w=1,S=1,U=1){super(null),this.image={data:x,width:w,height:S,depth:U},this.magFilter=et,this.minFilter=et,this.wrapR=Je,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}function numericalSort(x,w){return x[0]-w[0]}function absNumericalSort(x,w){return Math.abs(w[1])-Math.abs(x[1])}function denormalize(x,w){let S=1;const G=w.isInterleavedBufferAttribute?w.data.array:w.array;G instanceof Int8Array?S=127:G instanceof Int16Array?S=32767:G instanceof Int32Array?S=2147483647:U.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",G),x.divideScalar(S)}function WebGLMorphtargets(x,w,S){const U={},G=new Float32Array(8),z=new WeakMap,H=new Vector3,j=[];for(let x=0;x<8;x++)j[x]=[x,0];return{update:function update(X,q,K,Y){const Z=X.morphTargetInfluences;if(!0===w.isWebGL2){const U=q.morphAttributes.position.length;let G=z.get(q);if(void 0===G||G.count!==U){void 0!==G&&G.texture.dispose();const x=void 0!==q.morphAttributes.normal,S=q.morphAttributes.position,j=q.morphAttributes.normal||[],X=!0===x?2:1;let K=q.attributes.position.count*X,Y=1;K>w.maxTextureSize&&(Y=Math.ceil(K/w.maxTextureSize),K=w.maxTextureSize);const Z=new Float32Array(K*Y*4*U),J=new DataTexture2DArray(Z,K,Y,U);J.format=Tt,J.type=vt;const Q=4*X;for(let w=0;w<U;w++){const U=S[w],G=j[w],z=K*Y*4*w;for(let w=0;w<U.count;w++){H.fromBufferAttribute(U,w),!0===U.normalized&&denormalize(H,U);const S=w*Q;Z[z+S+0]=H.x,Z[z+S+1]=H.y,Z[z+S+2]=H.z,Z[z+S+3]=0,!0===x&&(H.fromBufferAttribute(G,w),!0===G.normalized&&denormalize(H,G),Z[z+S+4]=H.x,Z[z+S+5]=H.y,Z[z+S+6]=H.z,Z[z+S+7]=0)}}G={count:U,texture:J,size:new Vector2(K,Y)},z.set(q,G)}let j=0;for(let x=0;x<Z.length;x++)j+=Z[x];const X=q.morphTargetsRelative?1:1-j;Y.getUniforms().setValue(x,"morphTargetBaseInfluence",X),Y.getUniforms().setValue(x,"morphTargetInfluences",Z),Y.getUniforms().setValue(x,"morphTargetsTexture",G.texture,S),Y.getUniforms().setValue(x,"morphTargetsTextureSize",G.size)}else{const w=void 0===Z?0:Z.length;let S=U[q.id];if(void 0===S||S.length!==w){S=[];for(let x=0;x<w;x++)S[x]=[x,0];U[q.id]=S}for(let x=0;x<w;x++){const w=S[x];w[0]=x,w[1]=Z[x]}S.sort(absNumericalSort);for(let x=0;x<8;x++)x<w&&S[x][1]?(j[x][0]=S[x][0],j[x][1]=S[x][1]):(j[x][0]=Number.MAX_SAFE_INTEGER,j[x][1]=0);j.sort(numericalSort);const z=q.morphAttributes.position,H=q.morphAttributes.normal;let X=0;for(let x=0;x<8;x++){const w=j[x],S=w[0],U=w[1];S!==Number.MAX_SAFE_INTEGER&&U?(z&&q.getAttribute("morphTarget"+x)!==z[S]&&q.setAttribute("morphTarget"+x,z[S]),H&&q.getAttribute("morphNormal"+x)!==H[S]&&q.setAttribute("morphNormal"+x,H[S]),G[x]=U,X+=U):(z&&!0===q.hasAttribute("morphTarget"+x)&&q.deleteAttribute("morphTarget"+x),H&&!0===q.hasAttribute("morphNormal"+x)&&q.deleteAttribute("morphNormal"+x),G[x]=0)}const K=q.morphTargetsRelative?1:1-X;Y.getUniforms().setValue(x,"morphTargetBaseInfluence",K),Y.getUniforms().setValue(x,"morphTargetInfluences",G)}}}}function WebGLObjects(x,w,S,U){let G=new WeakMap;function onInstancedMeshDispose(x){const w=x.target;w.removeEventListener("dispose",onInstancedMeshDispose),S.remove(w.instanceMatrix),null!==w.instanceColor&&S.remove(w.instanceColor)}return{update:function update(x){const z=U.render.frame,H=x.geometry,j=w.get(x,H);return G.get(j)!==z&&(w.update(j),G.set(j,z)),x.isInstancedMesh&&(!1===x.hasEventListener("dispose",onInstancedMeshDispose)&&x.addEventListener("dispose",onInstancedMeshDispose),S.update(x.instanceMatrix,34962),null!==x.instanceColor&&S.update(x.instanceColor,34962)),j},dispose:function dispose(){G=new WeakMap}}}DataTexture2DArray.prototype.isDataTexture2DArray=!0;class DataTexture3D extends Texture{constructor(x=null,w=1,S=1,U=1){super(null),this.image={data:x,width:w,height:S,depth:U},this.magFilter=et,this.minFilter=et,this.wrapR=Je,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}DataTexture3D.prototype.isDataTexture3D=!0;const ea=new Texture,ta=new DataTexture2DArray,na=new DataTexture3D,ra=new CubeTexture,ia=[],oa=[],aa=new Float32Array(16),sa=new Float32Array(9),la=new Float32Array(4);function flatten(x,w,S){const U=x[0];if(U<=0||U>0)return x;const G=w*S;let z=ia[G];if(void 0===z&&(z=new Float32Array(G),ia[G]=z),0!==w){U.toArray(z,0);for(let U=1,G=0;U!==w;++U)G+=S,x[U].toArray(z,G)}return z}function arraysEqual(x,w){if(x.length!==w.length)return!1;for(let S=0,U=x.length;S<U;S++)if(x[S]!==w[S])return!1;return!0}function copyArray(x,w){for(let S=0,U=w.length;S<U;S++)x[S]=w[S]}function allocTexUnits(x,w){let S=oa[w];void 0===S&&(S=new Int32Array(w),oa[w]=S);for(let U=0;U!==w;++U)S[U]=x.allocateTextureUnit();return S}function setValueV1f(x,w){const S=this.cache;S[0]!==w&&(x.uniform1f(this.addr,w),S[0]=w)}function setValueV2f(x,w){const S=this.cache;if(void 0!==w.x)S[0]===w.x&&S[1]===w.y||(x.uniform2f(this.addr,w.x,w.y),S[0]=w.x,S[1]=w.y);else{if(arraysEqual(S,w))return;x.uniform2fv(this.addr,w),copyArray(S,w)}}function setValueV3f(x,w){const S=this.cache;if(void 0!==w.x)S[0]===w.x&&S[1]===w.y&&S[2]===w.z||(x.uniform3f(this.addr,w.x,w.y,w.z),S[0]=w.x,S[1]=w.y,S[2]=w.z);else if(void 0!==w.r)S[0]===w.r&&S[1]===w.g&&S[2]===w.b||(x.uniform3f(this.addr,w.r,w.g,w.b),S[0]=w.r,S[1]=w.g,S[2]=w.b);else{if(arraysEqual(S,w))return;x.uniform3fv(this.addr,w),copyArray(S,w)}}function setValueV4f(x,w){const S=this.cache;if(void 0!==w.x)S[0]===w.x&&S[1]===w.y&&S[2]===w.z&&S[3]===w.w||(x.uniform4f(this.addr,w.x,w.y,w.z,w.w),S[0]=w.x,S[1]=w.y,S[2]=w.z,S[3]=w.w);else{if(arraysEqual(S,w))return;x.uniform4fv(this.addr,w),copyArray(S,w)}}function setValueM2(x,w){const S=this.cache,U=w.elements;if(void 0===U){if(arraysEqual(S,w))return;x.uniformMatrix2fv(this.addr,!1,w),copyArray(S,w)}else{if(arraysEqual(S,U))return;la.set(U),x.uniformMatrix2fv(this.addr,!1,la),copyArray(S,U)}}function setValueM3(x,w){const S=this.cache,U=w.elements;if(void 0===U){if(arraysEqual(S,w))return;x.uniformMatrix3fv(this.addr,!1,w),copyArray(S,w)}else{if(arraysEqual(S,U))return;sa.set(U),x.uniformMatrix3fv(this.addr,!1,sa),copyArray(S,U)}}function setValueM4(x,w){const S=this.cache,U=w.elements;if(void 0===U){if(arraysEqual(S,w))return;x.uniformMatrix4fv(this.addr,!1,w),copyArray(S,w)}else{if(arraysEqual(S,U))return;aa.set(U),x.uniformMatrix4fv(this.addr,!1,aa),copyArray(S,U)}}function setValueV1i(x,w){const S=this.cache;S[0]!==w&&(x.uniform1i(this.addr,w),S[0]=w)}function setValueV2i(x,w){const S=this.cache;arraysEqual(S,w)||(x.uniform2iv(this.addr,w),copyArray(S,w))}function setValueV3i(x,w){const S=this.cache;arraysEqual(S,w)||(x.uniform3iv(this.addr,w),copyArray(S,w))}function setValueV4i(x,w){const S=this.cache;arraysEqual(S,w)||(x.uniform4iv(this.addr,w),copyArray(S,w))}function setValueV1ui(x,w){const S=this.cache;S[0]!==w&&(x.uniform1ui(this.addr,w),S[0]=w)}function setValueV2ui(x,w){const S=this.cache;arraysEqual(S,w)||(x.uniform2uiv(this.addr,w),copyArray(S,w))}function setValueV3ui(x,w){const S=this.cache;arraysEqual(S,w)||(x.uniform3uiv(this.addr,w),copyArray(S,w))}function setValueV4ui(x,w){const S=this.cache;arraysEqual(S,w)||(x.uniform4uiv(this.addr,w),copyArray(S,w))}function setValueT1(x,w,S){const U=this.cache,G=S.allocateTextureUnit();U[0]!==G&&(x.uniform1i(this.addr,G),U[0]=G),S.safeSetTexture2D(w||ea,G)}function setValueT3D1(x,w,S){const U=this.cache,G=S.allocateTextureUnit();U[0]!==G&&(x.uniform1i(this.addr,G),U[0]=G),S.setTexture3D(w||na,G)}function setValueT6(x,w,S){const U=this.cache,G=S.allocateTextureUnit();U[0]!==G&&(x.uniform1i(this.addr,G),U[0]=G),S.safeSetTextureCube(w||ra,G)}function setValueT2DArray1(x,w,S){const U=this.cache,G=S.allocateTextureUnit();U[0]!==G&&(x.uniform1i(this.addr,G),U[0]=G),S.setTexture2DArray(w||ta,G)}function setValueV1fArray(x,w){x.uniform1fv(this.addr,w)}function setValueV2fArray(x,w){const S=flatten(w,this.size,2);x.uniform2fv(this.addr,S)}function setValueV3fArray(x,w){const S=flatten(w,this.size,3);x.uniform3fv(this.addr,S)}function setValueV4fArray(x,w){const S=flatten(w,this.size,4);x.uniform4fv(this.addr,S)}function setValueM2Array(x,w){const S=flatten(w,this.size,4);x.uniformMatrix2fv(this.addr,!1,S)}function setValueM3Array(x,w){const S=flatten(w,this.size,9);x.uniformMatrix3fv(this.addr,!1,S)}function setValueM4Array(x,w){const S=flatten(w,this.size,16);x.uniformMatrix4fv(this.addr,!1,S)}function setValueV1iArray(x,w){x.uniform1iv(this.addr,w)}function setValueV2iArray(x,w){x.uniform2iv(this.addr,w)}function setValueV3iArray(x,w){x.uniform3iv(this.addr,w)}function setValueV4iArray(x,w){x.uniform4iv(this.addr,w)}function setValueV1uiArray(x,w){x.uniform1uiv(this.addr,w)}function setValueV2uiArray(x,w){x.uniform2uiv(this.addr,w)}function setValueV3uiArray(x,w){x.uniform3uiv(this.addr,w)}function setValueV4uiArray(x,w){x.uniform4uiv(this.addr,w)}function setValueT1Array(x,w,S){const U=w.length,G=allocTexUnits(S,U);x.uniform1iv(this.addr,G);for(let x=0;x!==U;++x)S.safeSetTexture2D(w[x]||ea,G[x])}function setValueT6Array(x,w,S){const U=w.length,G=allocTexUnits(S,U);x.uniform1iv(this.addr,G);for(let x=0;x!==U;++x)S.safeSetTextureCube(w[x]||ra,G[x])}function SingleUniform(x,w,S){this.id=x,this.addr=S,this.cache=[],this.setValue=function getSingularSetter(x){switch(x){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}(w.type)}function PureArrayUniform(x,w,S){this.id=x,this.addr=S,this.cache=[],this.size=w.size,this.setValue=function getPureArraySetter(x){switch(x){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}(w.type)}function StructuredUniform(x){this.id=x,this.seq=[],this.map={}}PureArrayUniform.prototype.updateCache=function(x){const w=this.cache;x instanceof Float32Array&&w.length!==x.length&&(this.cache=new Float32Array(x.length)),copyArray(w,x)},StructuredUniform.prototype.setValue=function(x,w,S){const U=this.seq;for(let G=0,z=U.length;G!==z;++G){const z=U[G];z.setValue(x,w[z.id],S)}};const ca=/(\w+)(\])?(\[|\.)?/g;function addUniform(x,w){x.seq.push(w),x.map[w.id]=w}function parseUniform(x,w,S){const U=x.name,G=U.length;for(ca.lastIndex=0;;){const z=ca.exec(U),H=ca.lastIndex;let j=z[1];const X="]"===z[2],q=z[3];if(X&&(j|=0),void 0===q||"["===q&&H+2===G){addUniform(S,void 0===q?new SingleUniform(j,x,w):new PureArrayUniform(j,x,w));break}{let x=S.map[j];void 0===x&&(x=new StructuredUniform(j),addUniform(S,x)),S=x}}}function WebGLUniforms(x,w){this.seq=[],this.map={};const S=x.getProgramParameter(w,35718);for(let U=0;U<S;++U){const S=x.getActiveUniform(w,U);parseUniform(S,x.getUniformLocation(w,S.name),this)}}function WebGLShader(x,w,S){const U=x.createShader(w);return x.shaderSource(U,S),x.compileShader(U),U}WebGLUniforms.prototype.setValue=function(x,w,S,U){const G=this.map[w];void 0!==G&&G.setValue(x,S,U)},WebGLUniforms.prototype.setOptional=function(x,w,S){const U=w[S];void 0!==U&&this.setValue(x,S,U)},WebGLUniforms.upload=function(x,w,S,U){for(let G=0,z=w.length;G!==z;++G){const z=w[G],H=S[z.id];!1!==H.needsUpdate&&z.setValue(x,H.value,U)}},WebGLUniforms.seqWithValue=function(x,w){const S=[];for(let U=0,G=x.length;U!==G;++U){const G=x[U];G.id in w&&S.push(G)}return S};let ua=0;function getEncodingComponents(x){switch(x){case qn:return["Linear","( value )"];case Kn:return["sRGB","( value )"];case Jn:return["RGBE","( value )"];case tr:return["RGBM","( value, 7.0 )"];case nr:return["RGBM","( value, 16.0 )"];case rr:return["RGBD","( value, 256.0 )"];case Zn:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case er:return["LogLuv","( value )"];default:return U.warn("THREE.WebGLProgram: Unsupported encoding:",x),["Linear","( value )"]}}function getShaderErrors(x,w,S){const U=x.getShaderParameter(w,35713),G=x.getShaderInfoLog(w).trim();return U&&""===G?"":S.toUpperCase()+"\n\n"+G+"\n\n"+function addLineNumbers(x){const w=x.split("\n");for(let x=0;x<w.length;x++)w[x]=x+1+": "+w[x];return w.join("\n")}(x.getShaderSource(w))}function getTexelDecodingFunction(x,w){const S=getEncodingComponents(w);return"vec4 "+x+"( vec4 value ) { return "+S[0]+"ToLinear"+S[1]+"; }"}function getTexelEncodingFunction(x,w){const S=getEncodingComponents(w);return"vec4 "+x+"( vec4 value ) { return LinearTo"+S[0]+S[1]+"; }"}function getToneMappingFunction(x,w){let S;switch(w){case Ue:S="Linear";break;case Ge:S="Reinhard";break;case Ve:S="OptimizedCineon";break;case We:S="ACESFilmic";break;case ze:S="Custom";break;default:U.warn("THREE.WebGLProgram: Unsupported toneMapping:",w),S="Linear"}return"vec3 "+x+"( vec3 color ) { return "+S+"ToneMapping( color ); }"}function filterEmptyLine(x){return""!==x}function replaceLightNums(x,w){return x.replace(/NUM_DIR_LIGHTS/g,w.numDirLights).replace(/NUM_SPOT_LIGHTS/g,w.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,w.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,w.numPointLights).replace(/NUM_HEMI_LIGHTS/g,w.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,w.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,w.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,w.numPointLightShadows)}function replaceClippingPlaneNums(x,w){return x.replace(/NUM_CLIPPING_PLANES/g,w.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,w.numClippingPlanes-w.numClipIntersection)}const ha=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(x){return x.replace(ha,includeReplacer)}function includeReplacer(x,w){const S=Do[w];if(void 0===S)throw new Error("Can not resolve #include <"+w+">");return resolveIncludes(S)}const da=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,pa=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(x){return x.replace(pa,loopReplacer).replace(da,deprecatedLoopReplacer)}function deprecatedLoopReplacer(x,w,S,G){return U.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(x,w,S,G)}function loopReplacer(x,w,S,U){let G="";for(let x=parseInt(w);x<parseInt(S);x++)G+=U.replace(/\[\s*i\s*\]/g,"[ "+x+" ]").replace(/UNROLLED_LOOP_INDEX/g,x);return G}function generatePrecision(x){let w="precision "+x.precision+" float;\nprecision "+x.precision+" int;";return"highp"===x.precision?w+="\n#define HIGH_PRECISION":"mediump"===x.precision?w+="\n#define MEDIUM_PRECISION":"lowp"===x.precision&&(w+="\n#define LOW_PRECISION"),w}function WebGLProgram(x,w,S,G){const z=x.getContext(),H=S.defines;let j=S.vertexShader,X=S.fragmentShader;const q=function generateShadowMapTypeDefine(x){let w="SHADOWMAP_TYPE_BASIC";return x.shadowMapType===Z?w="SHADOWMAP_TYPE_PCF":x.shadowMapType===J?w="SHADOWMAP_TYPE_PCF_SOFT":x.shadowMapType===Q&&(w="SHADOWMAP_TYPE_VSM"),w}(S),K=function generateEnvMapTypeDefine(x){let w="ENVMAP_TYPE_CUBE";if(x.envMap)switch(x.envMapMode){case $e:case je:w="ENVMAP_TYPE_CUBE";break;case Ke:case Ye:w="ENVMAP_TYPE_CUBE_UV"}return w}(S),Y=function generateEnvMapModeDefine(x){let w="ENVMAP_MODE_REFLECTION";if(x.envMap)switch(x.envMapMode){case je:case Ye:w="ENVMAP_MODE_REFRACTION"}return w}(S),ee=function generateEnvMapBlendingDefine(x){let w="ENVMAP_BLENDING_NONE";if(x.envMap)switch(x.combine){case Fe:w="ENVMAP_BLENDING_MULTIPLY";break;case Be:w="ENVMAP_BLENDING_MIX";break;case De:w="ENVMAP_BLENDING_ADD"}return w}(S),te=x.gammaFactor>0?x.gammaFactor:1,ne=S.isWebGL2?"":function generateExtensions(x){return[x.extensionDerivatives||x.envMapCubeUV||x.bumpMap||x.tangentSpaceNormalMap||x.clearcoatNormalMap||x.flatShading||"physical"===x.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(x.extensionFragDepth||x.logarithmicDepthBuffer)&&x.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",x.extensionDrawBuffers&&x.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(x.extensionShaderTextureLOD||x.envMap||x.transmission)&&x.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join("\n")}(S),re=function generateDefines(x){const w=[];for(const S in x){const U=x[S];!1!==U&&w.push("#define "+S+" "+U)}return w.join("\n")}(H),ie=z.createProgram();let oe,ae,se=S.glslVersion?"#version "+S.glslVersion+"\n":"";S.isRawShaderMaterial?(oe=[re].filter(filterEmptyLine).join("\n"),oe.length>0&&(oe+="\n"),ae=[ne,re].filter(filterEmptyLine).join("\n"),ae.length>0&&(ae+="\n")):(oe=[generatePrecision(S),"#define SHADER_NAME "+S.shaderName,re,S.instancing?"#define USE_INSTANCING":"",S.instancingColor?"#define USE_INSTANCING_COLOR":"",S.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+te,"#define MAX_BONES "+S.maxBones,S.useFog&&S.fog?"#define USE_FOG":"",S.useFog&&S.fogExp2?"#define FOG_EXP2":"",S.map?"#define USE_MAP":"",S.envMap?"#define USE_ENVMAP":"",S.envMap?"#define "+Y:"",S.lightMap?"#define USE_LIGHTMAP":"",S.aoMap?"#define USE_AOMAP":"",S.emissiveMap?"#define USE_EMISSIVEMAP":"",S.bumpMap?"#define USE_BUMPMAP":"",S.normalMap?"#define USE_NORMALMAP":"",S.normalMap&&S.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",S.normalMap&&S.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",S.clearcoatMap?"#define USE_CLEARCOATMAP":"",S.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",S.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",S.displacementMap&&S.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",S.specularMap?"#define USE_SPECULARMAP":"",S.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",S.specularTintMap?"#define USE_SPECULARTINTMAP":"",S.roughnessMap?"#define USE_ROUGHNESSMAP":"",S.metalnessMap?"#define USE_METALNESSMAP":"",S.alphaMap?"#define USE_ALPHAMAP":"",S.transmission?"#define USE_TRANSMISSION":"",S.transmissionMap?"#define USE_TRANSMISSIONMAP":"",S.thicknessMap?"#define USE_THICKNESSMAP":"",S.vertexTangents?"#define USE_TANGENT":"",S.vertexColors?"#define USE_COLOR":"",S.vertexAlphas?"#define USE_COLOR_ALPHA":"",S.vertexUvs?"#define USE_UV":"",S.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",S.flatShading?"#define FLAT_SHADED":"",S.skinning?"#define USE_SKINNING":"",S.useVertexTexture?"#define BONE_TEXTURE":"",S.morphTargets?"#define USE_MORPHTARGETS":"",S.morphNormals&&!1===S.flatShading?"#define USE_MORPHNORMALS":"",S.morphTargets&&S.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",S.morphTargets&&S.isWebGL2?"#define MORPHTARGETS_COUNT "+S.morphTargetsCount:"",S.doubleSided?"#define DOUBLE_SIDED":"",S.flipSided?"#define FLIP_SIDED":"",S.shadowMapEnabled?"#define USE_SHADOWMAP":"",S.shadowMapEnabled?"#define "+q:"",S.sizeAttenuation?"#define USE_SIZEATTENUATION":"",S.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",S.logarithmicDepthBuffer&&S.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),ae=[ne,generatePrecision(S),"#define SHADER_NAME "+S.shaderName,re,"#define GAMMA_FACTOR "+te,S.useFog&&S.fog?"#define USE_FOG":"",S.useFog&&S.fogExp2?"#define FOG_EXP2":"",S.map?"#define USE_MAP":"",S.matcap?"#define USE_MATCAP":"",S.envMap?"#define USE_ENVMAP":"",S.envMap?"#define "+K:"",S.envMap?"#define "+Y:"",S.envMap?"#define "+ee:"",S.lightMap?"#define USE_LIGHTMAP":"",S.aoMap?"#define USE_AOMAP":"",S.emissiveMap?"#define USE_EMISSIVEMAP":"",S.bumpMap?"#define USE_BUMPMAP":"",S.normalMap?"#define USE_NORMALMAP":"",S.normalMap&&S.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",S.normalMap&&S.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",S.clearcoat?"#define USE_CLEARCOAT":"",S.clearcoatMap?"#define USE_CLEARCOATMAP":"",S.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",S.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",S.specularMap?"#define USE_SPECULARMAP":"",S.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",S.specularTintMap?"#define USE_SPECULARTINTMAP":"",S.roughnessMap?"#define USE_ROUGHNESSMAP":"",S.metalnessMap?"#define USE_METALNESSMAP":"",S.alphaMap?"#define USE_ALPHAMAP":"",S.alphaTest?"#define USE_ALPHATEST":"",S.sheen?"#define USE_SHEEN":"",S.transmission?"#define USE_TRANSMISSION":"",S.transmissionMap?"#define USE_TRANSMISSIONMAP":"",S.thicknessMap?"#define USE_THICKNESSMAP":"",S.vertexTangents?"#define USE_TANGENT":"",S.vertexColors||S.instancingColor?"#define USE_COLOR":"",S.vertexAlphas?"#define USE_COLOR_ALPHA":"",S.vertexUvs?"#define USE_UV":"",S.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",S.gradientMap?"#define USE_GRADIENTMAP":"",S.flatShading?"#define FLAT_SHADED":"",S.doubleSided?"#define DOUBLE_SIDED":"",S.flipSided?"#define FLIP_SIDED":"",S.shadowMapEnabled?"#define USE_SHADOWMAP":"",S.shadowMapEnabled?"#define "+q:"",S.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",S.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",S.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",S.logarithmicDepthBuffer&&S.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(S.extensionShaderTextureLOD||S.envMap)&&S.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",S.toneMapping!==ke?"#define TONE_MAPPING":"",S.toneMapping!==ke?Do.tonemapping_pars_fragment:"",S.toneMapping!==ke?getToneMappingFunction("toneMapping",S.toneMapping):"",S.dithering?"#define DITHERING":"",S.format===St?"#define OPAQUE":"",Do.encodings_pars_fragment,S.map?getTexelDecodingFunction("mapTexelToLinear",S.mapEncoding):"",S.matcap?getTexelDecodingFunction("matcapTexelToLinear",S.matcapEncoding):"",S.envMap?getTexelDecodingFunction("envMapTexelToLinear",S.envMapEncoding):"",S.emissiveMap?getTexelDecodingFunction("emissiveMapTexelToLinear",S.emissiveMapEncoding):"",S.specularTintMap?getTexelDecodingFunction("specularTintMapTexelToLinear",S.specularTintMapEncoding):"",S.lightMap?getTexelDecodingFunction("lightMapTexelToLinear",S.lightMapEncoding):"",getTexelEncodingFunction("linearToOutputTexel",S.outputEncoding),S.depthPacking?"#define DEPTH_PACKING "+S.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),j=resolveIncludes(j),j=replaceLightNums(j,S),j=replaceClippingPlaneNums(j,S),X=resolveIncludes(X),X=replaceLightNums(X,S),X=replaceClippingPlaneNums(X,S),j=unrollLoops(j),X=unrollLoops(X),S.isWebGL2&&!0!==S.isRawShaderMaterial&&(se="#version 300 es\n",oe=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+oe,ae=["#define varying in",S.glslVersion===Nr?"":"out highp vec4 pc_fragColor;",S.glslVersion===Nr?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+ae);const le=se+ae+X,ce=WebGLShader(z,35633,se+oe+j),ue=WebGLShader(z,35632,le);if(z.attachShader(ie,ce),z.attachShader(ie,ue),void 0!==S.index0AttributeName?z.bindAttribLocation(ie,0,S.index0AttributeName):!0===S.morphTargets&&z.bindAttribLocation(ie,0,"position"),z.linkProgram(ie),x.debug.checkShaderErrors){const x=z.getProgramInfoLog(ie).trim(),w=z.getShaderInfoLog(ce).trim(),S=z.getShaderInfoLog(ue).trim();let G=!0,H=!0;if(!1===z.getProgramParameter(ie,35714)){G=!1;const w=getShaderErrors(z,ce,"vertex"),S=getShaderErrors(z,ue,"fragment");U.error("THREE.WebGLProgram: Shader Error "+z.getError()+" - VALIDATE_STATUS "+z.getProgramParameter(ie,35715)+"\n\nProgram Info Log: "+x+"\n"+w+"\n"+S)}else""!==x?U.warn("THREE.WebGLProgram: Program Info Log:",x):""!==w&&""!==S||(H=!1);H&&(this.diagnostics={runnable:G,programLog:x,vertexShader:{log:w,prefix:oe},fragmentShader:{log:S,prefix:ae}})}let he,de;return z.deleteShader(ce),z.deleteShader(ue),this.getUniforms=function(){return void 0===he&&(he=new WebGLUniforms(z,ie)),he},this.getAttributes=function(){return void 0===de&&(de=function fetchAttributeLocations(x,w){const S={},U=x.getProgramParameter(w,35721);for(let G=0;G<U;G++){const U=x.getActiveAttrib(w,G),z=U.name;let H=1;35674===U.type&&(H=2),35675===U.type&&(H=3),35676===U.type&&(H=4),S[z]={type:U.type,location:x.getAttribLocation(w,z),locationSize:H}}return S}(z,ie)),de},this.destroy=function(){G.releaseStatesOfProgram(this),z.deleteProgram(ie),this.program=void 0},this.name=S.shaderName,this.id=ua++,this.cacheKey=w,this.usedTimes=1,this.program=ie,this.vertexShader=ce,this.fragmentShader=ue,this}function WebGLPrograms(x,w,S,G,z,H,j){const X=[],q=z.isWebGL2,K=z.logarithmicDepthBuffer,Y=z.floatVertexTextures,Z=z.maxVertexUniforms,J=z.vertexTextures;let Q=z.precision;const ee={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},re=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheen","transmission","transmissionMap","thicknessMap"];function getTextureEncodingFromMap(x){let w;return x&&x.isTexture?w=x.encoding:x&&x.isWebGLRenderTarget?(U.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),w=x.texture.encoding):w=qn,q&&x&&x.isTexture&&x.format===Tt&&x.type===ut&&x.encoding===Kn&&(w=qn),w}return{getParameters:function getParameters(H,X,re,ie,oe){const ae=ie.fog,se=H.isMeshStandardMaterial?ie.environment:null,le=(H.isMeshStandardMaterial?S:w).get(H.envMap||se),ce=ee[H.type],ue=oe.isSkinnedMesh?function getMaxBones(x){const w=x.skeleton.bones;if(Y)return 1024;{const x=Z,S=Math.floor((x-20)/4),G=Math.min(S,w.length);return G<w.length?(U.warn("THREE.WebGLRenderer: Skeleton has "+w.length+" bones. This GPU supports "+G+"."),0):G}}(oe):0;let he,de;if(null!==H.precision&&(Q=z.getMaxPrecision(H.precision),Q!==H.precision&&U.warn("THREE.WebGLProgram.getParameters:",H.precision,"not supported, using",Q,"instead.")),ce){const x=Uo[ce];he=x.vertexShader,de=x.fragmentShader}else he=H.vertexShader,de=H.fragmentShader;const pe=x.getRenderTarget(),fe=H.alphaTest>0,me=H.clearcoat>0;return{isWebGL2:q,shaderID:ce,shaderName:H.type,vertexShader:he,fragmentShader:de,defines:H.defines,isRawShaderMaterial:!0===H.isRawShaderMaterial,glslVersion:H.glslVersion,precision:Q,instancing:!0===oe.isInstancedMesh,instancingColor:!0===oe.isInstancedMesh&&null!==oe.instanceColor,supportsVertexTextures:J,outputEncoding:null!==pe?getTextureEncodingFromMap(pe.texture):x.outputEncoding,map:!!H.map,mapEncoding:getTextureEncodingFromMap(H.map),matcap:!!H.matcap,matcapEncoding:getTextureEncodingFromMap(H.matcap),envMap:!!le,envMapMode:le&&le.mapping,envMapEncoding:getTextureEncodingFromMap(le),envMapCubeUV:!!le&&(le.mapping===Ke||le.mapping===Ye),lightMap:!!H.lightMap,lightMapEncoding:getTextureEncodingFromMap(H.lightMap),aoMap:!!H.aoMap,emissiveMap:!!H.emissiveMap,emissiveMapEncoding:getTextureEncodingFromMap(H.emissiveMap),bumpMap:!!H.bumpMap,normalMap:!!H.normalMap,objectSpaceNormalMap:H.normalMapType===sr,tangentSpaceNormalMap:H.normalMapType===ar,clearcoat:me,clearcoatMap:me&&!!H.clearcoatMap,clearcoatRoughnessMap:me&&!!H.clearcoatRoughnessMap,clearcoatNormalMap:me&&!!H.clearcoatNormalMap,displacementMap:!!H.displacementMap,roughnessMap:!!H.roughnessMap,metalnessMap:!!H.metalnessMap,specularMap:!!H.specularMap,specularIntensityMap:!!H.specularIntensityMap,specularTintMap:!!H.specularTintMap,specularTintMapEncoding:getTextureEncodingFromMap(H.specularTintMap),alphaMap:!!H.alphaMap,alphaTest:fe,gradientMap:!!H.gradientMap,sheen:H.sheen>0,transmission:H.transmission>0,transmissionMap:!!H.transmissionMap,thicknessMap:!!H.thicknessMap,combine:H.combine,vertexTangents:!!H.normalMap&&!!oe.geometry&&!!oe.geometry.attributes.tangent,vertexColors:H.vertexColors,vertexAlphas:!0===H.vertexColors&&!!oe.geometry&&!!oe.geometry.attributes.color&&4===oe.geometry.attributes.color.itemSize,vertexUvs:!!(H.map||H.bumpMap||H.normalMap||H.specularMap||H.alphaMap||H.emissiveMap||H.roughnessMap||H.metalnessMap||H.clearcoatMap||H.clearcoatRoughnessMap||H.clearcoatNormalMap||H.displacementMap||H.transmissionMap||H.thicknessMap||H.specularIntensityMap||H.specularTintMap),uvsVertexOnly:!(H.map||H.bumpMap||H.normalMap||H.specularMap||H.alphaMap||H.emissiveMap||H.roughnessMap||H.metalnessMap||H.clearcoatNormalMap||H.transmission>0||H.transmissionMap||H.thicknessMap||H.specularIntensityMap||H.specularTintMap||!H.displacementMap),fog:!!ae,useFog:H.fog,fogExp2:ae&&ae.isFogExp2,flatShading:!!H.flatShading,sizeAttenuation:H.sizeAttenuation,logarithmicDepthBuffer:K,skinning:!0===oe.isSkinnedMesh&&ue>0,maxBones:ue,useVertexTexture:Y,morphTargets:!!oe.geometry&&!!oe.geometry.morphAttributes.position,morphNormals:!!oe.geometry&&!!oe.geometry.morphAttributes.normal,morphTargetsCount:oe.geometry&&oe.geometry.morphAttributes.position?oe.geometry.morphAttributes.position.length:0,numDirLights:X.directional.length,numPointLights:X.point.length,numSpotLights:X.spot.length,numRectAreaLights:X.rectArea.length,numHemiLights:X.hemi.length,numDirLightShadows:X.directionalShadowMap.length,numPointLightShadows:X.pointShadowMap.length,numSpotLightShadows:X.spotShadowMap.length,numClippingPlanes:j.numPlanes,numClipIntersection:j.numIntersection,format:H.format,dithering:H.dithering,shadowMapEnabled:x.shadowMap.enabled&&re.length>0,shadowMapType:x.shadowMap.type,toneMapping:H.toneMapped?x.toneMapping:ke,physicallyCorrectLights:x.physicallyCorrectLights,premultipliedAlpha:H.premultipliedAlpha,doubleSided:H.side===ne,flipSided:H.side===te,depthPacking:void 0!==H.depthPacking&&H.depthPacking,index0AttributeName:H.index0AttributeName,extensionDerivatives:H.extensions&&H.extensions.derivatives,extensionFragDepth:H.extensions&&H.extensions.fragDepth,extensionDrawBuffers:H.extensions&&H.extensions.drawBuffers,extensionShaderTextureLOD:H.extensions&&H.extensions.shaderTextureLOD,rendererExtensionFragDepth:q||G.has("EXT_frag_depth"),rendererExtensionDrawBuffers:q||G.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:q||G.has("EXT_shader_texture_lod"),customProgramCacheKey:H.customProgramCacheKey()}},getProgramCacheKey:function getProgramCacheKey(w){const S=[];if(w.shaderID?S.push(w.shaderID):(S.push(w.fragmentShader),S.push(w.vertexShader)),void 0!==w.defines)for(const x in w.defines)S.push(x),S.push(w.defines[x]);if(!1===w.isRawShaderMaterial){for(let x=0;x<re.length;x++)S.push(w[re[x]]);S.push(x.outputEncoding),S.push(x.gammaFactor)}return S.push(w.customProgramCacheKey),S.join()},getUniforms:function getUniforms(x){const w=ee[x.type];let S;if(w){const x=Uo[w];S=Lo.clone(x.uniforms)}else S=x.uniforms;return S},acquireProgram:function acquireProgram(w,S){let U;for(let x=0,w=X.length;x<w;x++){const w=X[x];if(w.cacheKey===S){U=w,++U.usedTimes;break}}return void 0===U&&(U=new WebGLProgram(x,S,w,H),X.push(U)),U},releaseProgram:function releaseProgram(x){if(0==--x.usedTimes){const w=X.indexOf(x);X[w]=X[X.length-1],X.pop(),x.destroy()}},programs:X}}function WebGLProperties(){let x=new WeakMap;return{get:function get(w){let S=x.get(w);return void 0===S&&(S={},x.set(w,S)),S},remove:function remove(w){x.delete(w)},update:function update(w,S,U){x.get(w)[S]=U},dispose:function dispose(){x=new WeakMap}}}function painterSortStable(x,w){return x.groupOrder!==w.groupOrder?x.groupOrder-w.groupOrder:x.renderOrder!==w.renderOrder?x.renderOrder-w.renderOrder:x.program!==w.program?x.program.id-w.program.id:x.material.id!==w.material.id?x.material.id-w.material.id:x.z!==w.z?x.z-w.z:x.id-w.id}function reversePainterSortStable(x,w){return x.groupOrder!==w.groupOrder?x.groupOrder-w.groupOrder:x.renderOrder!==w.renderOrder?x.renderOrder-w.renderOrder:x.z!==w.z?w.z-x.z:x.id-w.id}function WebGLRenderList(x){const w=[];let S=0;const U=[],G=[],z=[],H={id:-1};function getNextRenderItem(U,G,z,j,X,q){let K=w[S];const Y=x.get(z);return void 0===K?(K={id:U.id,object:U,geometry:G,material:z,program:Y.program||H,groupOrder:j,renderOrder:U.renderOrder,z:X,group:q},w[S]=K):(K.id=U.id,K.object=U,K.geometry=G,K.material=z,K.program=Y.program||H,K.groupOrder=j,K.renderOrder=U.renderOrder,K.z=X,K.group=q),S++,K}return{opaque:U,transmissive:G,transparent:z,init:function init(){S=0,U.length=0,G.length=0,z.length=0},push:function push(x,w,S,H,j,X){const q=getNextRenderItem(x,w,S,H,j,X);S.transmission>0?G.push(q):!0===S.transparent?z.push(q):U.push(q)},unshift:function unshift(x,w,S,H,j,X){const q=getNextRenderItem(x,w,S,H,j,X);S.transmission>0?G.unshift(q):!0===S.transparent?z.unshift(q):U.unshift(q)},finish:function finish(){for(let x=S,U=w.length;x<U;x++){const S=w[x];if(null===S.id)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.program=null,S.group=null}},sort:function sort(x,w){U.length>1&&U.sort(x||painterSortStable),G.length>1&&G.sort(w||reversePainterSortStable),z.length>1&&z.sort(w||reversePainterSortStable)}}}function WebGLRenderLists(x){let w=new WeakMap;return{get:function get(S,U){let G;return!1===w.has(S)?(G=new WebGLRenderList(x),w.set(S,[G])):U>=w.get(S).length?(G=new WebGLRenderList(x),w.get(S).push(G)):G=w.get(S)[U],G},dispose:function dispose(){w=new WeakMap}}}function UniformsCache(){const x={};return{get:function(w){if(void 0!==x[w.id])return x[w.id];let S;switch(w.type){case"DirectionalLight":S={direction:new Vector3,color:new Color};break;case"SpotLight":S={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":S={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":S={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":S={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3}}return x[w.id]=S,S}}}let fa=0;function shadowCastingLightsFirst(x,w){return(w.castShadow?1:0)-(x.castShadow?1:0)}function WebGLLights(x,w){const S=new UniformsCache,G=function ShadowUniformsCache(){const x={};return{get:function(w){if(void 0!==x[w.id])return x[w.id];let S;switch(w.type){case"DirectionalLight":case"SpotLight":S={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":S={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3}}return x[w.id]=S,S}}}(),z={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let x=0;x<9;x++)z.probe.push(new Vector3);const H=new Vector3,j=new Matrix4,X=new Matrix4;return{setup:function setup(H,j){let X=0,q=0,K=0;for(let x=0;x<9;x++)z.probe[x].set(0,0,0);let Y=0,Z=0,J=0,Q=0,ee=0,te=0,ne=0,re=0;H.sort(shadowCastingLightsFirst);const ie=!0!==j?Math.PI:1;for(let x=0,w=H.length;x<w;x++){const w=H[x],U=w.color,j=w.intensity,oe=w.distance,ae=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)X+=U.r*j*ie,q+=U.g*j*ie,K+=U.b*j*ie;else if(w.isLightProbe)for(let x=0;x<9;x++)z.probe[x].addScaledVector(w.sh.coefficients[x],j);else if(w.isDirectionalLight){const x=S.get(w);if(x.color.copy(w.color).multiplyScalar(w.intensity*ie),w.castShadow){const x=w.shadow,S=G.get(w);S.shadowBias=x.bias,S.shadowNormalBias=x.normalBias,S.shadowRadius=x.radius,S.shadowMapSize=x.mapSize,z.directionalShadow[Y]=S,z.directionalShadowMap[Y]=ae,z.directionalShadowMatrix[Y]=w.shadow.matrix,te++}z.directional[Y]=x,Y++}else if(w.isSpotLight){const x=S.get(w);if(x.position.setFromMatrixPosition(w.matrixWorld),x.color.copy(U).multiplyScalar(j*ie),x.distance=oe,x.coneCos=Math.cos(w.angle),x.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),x.decay=w.decay,w.castShadow){const x=w.shadow,S=G.get(w);S.shadowBias=x.bias,S.shadowNormalBias=x.normalBias,S.shadowRadius=x.radius,S.shadowMapSize=x.mapSize,z.spotShadow[J]=S,z.spotShadowMap[J]=ae,z.spotShadowMatrix[J]=w.shadow.matrix,re++}z.spot[J]=x,J++}else if(w.isRectAreaLight){const x=S.get(w);x.color.copy(U).multiplyScalar(j),x.halfWidth.set(.5*w.width,0,0),x.halfHeight.set(0,.5*w.height,0),z.rectArea[Q]=x,Q++}else if(w.isPointLight){const x=S.get(w);if(x.color.copy(w.color).multiplyScalar(w.intensity*ie),x.distance=w.distance,x.decay=w.decay,w.castShadow){const x=w.shadow,S=G.get(w);S.shadowBias=x.bias,S.shadowNormalBias=x.normalBias,S.shadowRadius=x.radius,S.shadowMapSize=x.mapSize,S.shadowCameraNear=x.camera.near,S.shadowCameraFar=x.camera.far,z.pointShadow[Z]=S,z.pointShadowMap[Z]=ae,z.pointShadowMatrix[Z]=w.shadow.matrix,ne++}z.point[Z]=x,Z++}else if(w.isHemisphereLight){const x=S.get(w);x.skyColor.copy(w.color).multiplyScalar(j*ie),x.groundColor.copy(w.groundColor).multiplyScalar(j*ie),z.hemi[ee]=x,ee++}}Q>0&&(w.isWebGL2||!0===x.has("OES_texture_float_linear")?(z.rectAreaLTC1=ko.LTC_FLOAT_1,z.rectAreaLTC2=ko.LTC_FLOAT_2):!0===x.has("OES_texture_half_float_linear")?(z.rectAreaLTC1=ko.LTC_HALF_1,z.rectAreaLTC2=ko.LTC_HALF_2):U.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),z.ambient[0]=X,z.ambient[1]=q,z.ambient[2]=K;const oe=z.hash;oe.directionalLength===Y&&oe.pointLength===Z&&oe.spotLength===J&&oe.rectAreaLength===Q&&oe.hemiLength===ee&&oe.numDirectionalShadows===te&&oe.numPointShadows===ne&&oe.numSpotShadows===re||(z.directional.length=Y,z.spot.length=J,z.rectArea.length=Q,z.point.length=Z,z.hemi.length=ee,z.directionalShadow.length=te,z.directionalShadowMap.length=te,z.pointShadow.length=ne,z.pointShadowMap.length=ne,z.spotShadow.length=re,z.spotShadowMap.length=re,z.directionalShadowMatrix.length=te,z.pointShadowMatrix.length=ne,z.spotShadowMatrix.length=re,oe.directionalLength=Y,oe.pointLength=Z,oe.spotLength=J,oe.rectAreaLength=Q,oe.hemiLength=ee,oe.numDirectionalShadows=te,oe.numPointShadows=ne,oe.numSpotShadows=re,z.version=fa++)},setupView:function setupView(x,w){let S=0,U=0,G=0,q=0,K=0;const Y=w.matrixWorldInverse;for(let w=0,Z=x.length;w<Z;w++){const Z=x[w];if(Z.isDirectionalLight){const x=z.directional[S];x.direction.setFromMatrixPosition(Z.matrixWorld),H.setFromMatrixPosition(Z.target.matrixWorld),x.direction.sub(H),x.direction.transformDirection(Y),S++}else if(Z.isSpotLight){const x=z.spot[G];x.position.setFromMatrixPosition(Z.matrixWorld),x.position.applyMatrix4(Y),x.direction.setFromMatrixPosition(Z.matrixWorld),H.setFromMatrixPosition(Z.target.matrixWorld),x.direction.sub(H),x.direction.transformDirection(Y),G++}else if(Z.isRectAreaLight){const x=z.rectArea[q];x.position.setFromMatrixPosition(Z.matrixWorld),x.position.applyMatrix4(Y),X.identity(),j.copy(Z.matrixWorld),j.premultiply(Y),X.extractRotation(j),x.halfWidth.set(.5*Z.width,0,0),x.halfHeight.set(0,.5*Z.height,0),x.halfWidth.applyMatrix4(X),x.halfHeight.applyMatrix4(X),q++}else if(Z.isPointLight){const x=z.point[U];x.position.setFromMatrixPosition(Z.matrixWorld),x.position.applyMatrix4(Y),U++}else if(Z.isHemisphereLight){const x=z.hemi[K];x.direction.setFromMatrixPosition(Z.matrixWorld),x.direction.transformDirection(Y),x.direction.normalize(),K++}}},state:z}}function WebGLRenderState(x,w){const S=new WebGLLights(x,w),U=[],G=[];return{init:function init(){U.length=0,G.length=0},state:{lightsArray:U,shadowsArray:G,lights:S},setupLights:function setupLights(x){S.setup(U,x)},setupLightsView:function setupLightsView(x){S.setupView(U,x)},pushLight:function pushLight(x){U.push(x)},pushShadow:function pushShadow(x){G.push(x)}}}function WebGLRenderStates(x,w){let S=new WeakMap;return{get:function get(U,G=0){let z;return!1===S.has(U)?(z=new WebGLRenderState(x,w),S.set(U,[z])):G>=S.get(U).length?(z=new WebGLRenderState(x,w),S.get(U).push(z)):z=S.get(U)[G],z},dispose:function dispose(){S=new WeakMap}}}class MeshDepthMaterial extends Material{constructor(x){super(),this.type="MeshDepthMaterial",this.depthPacking=ir,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(x)}copy(x){return super.copy(x),this.depthPacking=x.depthPacking,this.map=x.map,this.alphaMap=x.alphaMap,this.displacementMap=x.displacementMap,this.displacementScale=x.displacementScale,this.displacementBias=x.displacementBias,this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this}}MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;class MeshDistanceMaterial extends Material{constructor(x){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(x)}copy(x){return super.copy(x),this.referencePosition.copy(x.referencePosition),this.nearDistance=x.nearDistance,this.farDistance=x.farDistance,this.map=x.map,this.alphaMap=x.alphaMap,this.displacementMap=x.displacementMap,this.displacementScale=x.displacementScale,this.displacementBias=x.displacementBias,this}}MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;const ma="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",ga="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\nuniform float samples;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function WebGLShadowMap(x,w,S){let G=new Frustum;const z=new Vector2,H=new Vector2,j=new Vector4,X=new MeshDepthMaterial({depthPacking:or}),q=new MeshDistanceMaterial,K={},Y=S.maxTextureSize,J={0:te,1:ee,2:ne},re=new ShaderMaterial({uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4},samples:{value:8}},vertexShader:ma,fragmentShader:ga}),ie=re.clone();ie.defines.HORIZONTAL_PASS=1;const ae=new BufferGeometry;ae.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const se=new Mesh(ae,re),le=this;function VSMPass(S,U){const G=w.update(se);re.uniforms.shadow_pass.value=S.map.texture,re.uniforms.resolution.value=S.mapSize,re.uniforms.radius.value=S.radius,re.uniforms.samples.value=S.blurSamples,x.setRenderTarget(S.mapPass),x.clear(),x.renderBufferDirect(U,null,G,re,se,null),ie.uniforms.shadow_pass.value=S.mapPass.texture,ie.uniforms.resolution.value=S.mapSize,ie.uniforms.radius.value=S.radius,ie.uniforms.samples.value=S.blurSamples,x.setRenderTarget(S.map),x.clear(),x.renderBufferDirect(U,null,G,ie,se,null)}function getDepthMaterial(w,S,U,G,z,H,j){let Y=null;const Z=!0===G.isPointLight?w.customDistanceMaterial:w.customDepthMaterial;if(Y=void 0!==Z?Z:!0===G.isPointLight?q:X,x.localClippingEnabled&&!0===U.clipShadows&&0!==U.clippingPlanes.length||U.displacementMap&&0!==U.displacementScale||U.alphaMap&&U.alphaTest>0){const x=Y.uuid,w=U.uuid;let S=K[x];void 0===S&&(S={},K[x]=S);let G=S[w];void 0===G&&(G=Y.clone(),S[w]=G),Y=G}return Y.visible=U.visible,Y.wireframe=U.wireframe,Y.side=j===Q?null!==U.shadowSide?U.shadowSide:U.side:null!==U.shadowSide?U.shadowSide:J[U.side],Y.alphaMap=U.alphaMap,Y.alphaTest=U.alphaTest,Y.clipShadows=U.clipShadows,Y.clippingPlanes=U.clippingPlanes,Y.clipIntersection=U.clipIntersection,Y.displacementMap=U.displacementMap,Y.displacementScale=U.displacementScale,Y.displacementBias=U.displacementBias,Y.wireframeLinewidth=U.wireframeLinewidth,Y.linewidth=U.linewidth,!0===G.isPointLight&&!0===Y.isMeshDistanceMaterial&&(Y.referencePosition.setFromMatrixPosition(G.matrixWorld),Y.nearDistance=z,Y.farDistance=H),Y}function renderObject(S,U,z,H,j){if(!1===S.visible)return;if(S.layers.test(U.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&j===Q)&&(!S.frustumCulled||G.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,S.matrixWorld);const U=w.update(S),G=S.material;if(Array.isArray(G)){const w=U.groups;for(let X=0,q=w.length;X<q;X++){const q=w[X],K=G[q.materialIndex];if(K&&K.visible){const w=getDepthMaterial(S,0,K,H,z.near,z.far,j);x.renderBufferDirect(z,null,U,w,S,q)}}}else if(G.visible){const w=getDepthMaterial(S,0,G,H,z.near,z.far,j);x.renderBufferDirect(z,null,U,w,S,null)}}const X=S.children;for(let x=0,w=X.length;x<w;x++)renderObject(X[x],U,z,H,j)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Z,this.render=function(w,S,X){if(!1===le.enabled)return;if(!1===le.autoUpdate&&!1===le.needsUpdate)return;if(0===w.length)return;const q=x.getRenderTarget(),K=x.getActiveCubeFace(),Z=x.getActiveMipmapLevel(),J=x.state;J.setBlending(oe),J.buffers.color.setClear(1,1,1,1),J.buffers.depth.setTest(!0),J.setScissorTest(!1);for(let q=0,K=w.length;q<K;q++){const K=w[q],Z=K.shadow;if(void 0===Z){U.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(!1===Z.autoUpdate&&!1===Z.needsUpdate)continue;z.copy(Z.mapSize);const ee=Z.getFrameExtents();if(z.multiply(ee),H.copy(Z.mapSize),(z.x>Y||z.y>Y)&&(z.x>Y&&(H.x=Math.floor(Y/ee.x),z.x=H.x*ee.x,Z.mapSize.x=H.x),z.y>Y&&(H.y=Math.floor(Y/ee.y),z.y=H.y*ee.y,Z.mapSize.y=H.y)),null===Z.map&&!Z.isPointLightShadow&&this.type===Q){const x={minFilter:ot,magFilter:ot,format:Tt};Z.map=new WebGLRenderTarget(z.x,z.y,x),Z.map.texture.name=K.name+".shadowMap",Z.mapPass=new WebGLRenderTarget(z.x,z.y,x),Z.camera.updateProjectionMatrix()}if(null===Z.map){const x={minFilter:et,magFilter:et,format:Tt};Z.map=new WebGLRenderTarget(z.x,z.y,x),Z.map.texture.name=K.name+".shadowMap",Z.camera.updateProjectionMatrix()}x.setRenderTarget(Z.map),x.clear();const te=Z.getViewportCount();for(let x=0;x<te;x++){const w=Z.getViewport(x);j.set(H.x*w.x,H.y*w.y,H.x*w.z,H.y*w.w),J.viewport(j),Z.updateMatrices(K,x),G=Z.getFrustum(),renderObject(S,X,Z.camera,K,this.type)}Z.isPointLightShadow||this.type!==Q||VSMPass(Z,X),Z.needsUpdate=!1}le.needsUpdate=!1,x.setRenderTarget(q,K,Z)}}function WebGLState(x,w,S){const G=S.isWebGL2;const z=new function ColorBuffer(){let w=!1;const S=new Vector4;let U=null;const G=new Vector4(0,0,0,0);return{setMask:function(S){U===S||w||(x.colorMask(S,S,S,S),U=S)},setLocked:function(x){w=x},setClear:function(w,U,z,H,j){!0===j&&(w*=H,U*=H,z*=H),S.set(w,U,z,H),!1===G.equals(S)&&(x.clearColor(w,U,z,H),G.copy(S))},reset:function(){w=!1,U=null,G.set(-1,0,0,0)}}},H=new function DepthBuffer(){let w=!1,S=null,U=null,G=null;return{setTest:function(x){x?enable(2929):disable(2929)},setMask:function(U){S===U||w||(x.depthMask(U),S=U)},setFunc:function(w){if(U!==w){if(w)switch(w){case Ae:x.depthFunc(512);break;case Me:x.depthFunc(519);break;case Re:x.depthFunc(513);break;case Le:x.depthFunc(515);break;case Oe:x.depthFunc(514);break;case Pe:x.depthFunc(518);break;case Ie:x.depthFunc(516);break;case Ne:x.depthFunc(517);break;default:x.depthFunc(515)}else x.depthFunc(515);U=w}},setLocked:function(x){w=x},setClear:function(w){G!==w&&(x.clearDepth(w),G=w)},reset:function(){w=!1,S=null,U=null,G=null}}},K=new function StencilBuffer(){let w=!1,S=null,U=null,G=null,z=null,H=null,j=null,X=null,q=null;return{setTest:function(x){w||(x?enable(2960):disable(2960))},setMask:function(U){S===U||w||(x.stencilMask(U),S=U)},setFunc:function(w,S,H){U===w&&G===S&&z===H||(x.stencilFunc(w,S,H),U=w,G=S,z=H)},setOp:function(w,S,U){H===w&&j===S&&X===U||(x.stencilOp(w,S,U),H=w,j=S,X=U)},setLocked:function(x){w=x},setClear:function(w){q!==w&&(x.clearStencil(w),q=w)},reset:function(){w=!1,S=null,U=null,G=null,z=null,H=null,j=null,X=null,q=null}}};let Y={},Z=null,J={},Q=null,ee=!1,re=null,ie=null,Fe=null,Be=null,De=null,ke=null,Ue=null,Ge=!1,Ve=null,We=null,ze=null,He=null,$e=null;const je=x.getParameter(35661);let Xe=!1,qe=0;const Ke=x.getParameter(7938);-1!==Ke.indexOf("WebGL")?(qe=parseFloat(/^WebGL (\d)/.exec(Ke)[1]),Xe=qe>=1):-1!==Ke.indexOf("OpenGL ES")&&(qe=parseFloat(/^OpenGL ES (\d)/.exec(Ke)[1]),Xe=qe>=2);let Ye=null,Ze={};const Je=x.getParameter(3088),Qe=x.getParameter(2978),et=(new Vector4).fromArray(Je),tt=(new Vector4).fromArray(Qe);function createTexture(w,S,U){const G=new Uint8Array(4),z=x.createTexture();x.bindTexture(w,z),x.texParameteri(w,10241,9728),x.texParameteri(w,10240,9728);for(let w=0;w<U;w++)x.texImage2D(S+w,0,6408,1,1,0,6408,5121,G);return z}const nt={};function enable(w){!0!==Y[w]&&(x.enable(w),Y[w]=!0)}function disable(w){!1!==Y[w]&&(x.disable(w),Y[w]=!1)}nt[3553]=createTexture(3553,3553,1),nt[34067]=createTexture(34067,34069,6),z.setClear(0,0,0,1),H.setClear(1),K.setClear(0),enable(2929),H.setFunc(Le),setFlipSided(!1),setCullFace(X),enable(2884),setBlending(oe);const rt={[he]:32774,[de]:32778,[pe]:32779};if(G)rt[fe]=32775,rt[me]=32776;else{const x=w.get("EXT_blend_minmax");null!==x&&(rt[fe]=x.MIN_EXT,rt[me]=x.MAX_EXT)}const it={[ge]:0,[ve]:1,[ye]:768,[be]:770,[Ce]:776,[Se]:774,[Ee]:772,[_e]:769,[xe]:771,[Te]:775,[we]:773};function setBlending(w,S,G,z,H,j,X,q){if(w!==oe){if(!1===ee&&(enable(3042),ee=!0),w===ue)H=H||S,j=j||G,X=X||z,S===ie&&H===De||(x.blendEquationSeparate(rt[S],rt[H]),ie=S,De=H),G===Fe&&z===Be&&j===ke&&X===Ue||(x.blendFuncSeparate(it[G],it[z],it[j],it[X]),Fe=G,Be=z,ke=j,Ue=X),re=w,Ge=null;else if(w!==re||q!==Ge){if(ie===he&&De===he||(x.blendEquation(32774),ie=he,De=he),q)switch(w){case ae:x.blendFuncSeparate(1,771,1,771);break;case se:x.blendFunc(1,1);break;case le:x.blendFuncSeparate(0,0,769,771);break;case ce:x.blendFuncSeparate(0,768,0,770);break;default:U.error("THREE.WebGLState: Invalid blending: ",w)}else switch(w){case ae:x.blendFuncSeparate(770,771,1,771);break;case se:x.blendFunc(770,1);break;case le:x.blendFunc(0,769);break;case ce:x.blendFunc(0,768);break;default:U.error("THREE.WebGLState: Invalid blending: ",w)}Fe=null,Be=null,ke=null,Ue=null,re=w,Ge=q}}else!0===ee&&(disable(3042),ee=!1)}function setFlipSided(w){Ve!==w&&(w?x.frontFace(2304):x.frontFace(2305),Ve=w)}function setCullFace(w){w!==j?(enable(2884),w!==We&&(w===X?x.cullFace(1029):w===q?x.cullFace(1028):x.cullFace(1032))):disable(2884),We=w}function setPolygonOffset(w,S,U){w?(enable(32823),He===S&&$e===U||(x.polygonOffset(S,U),He=S,$e=U)):disable(32823)}function activeTexture(w){void 0===w&&(w=33984+je-1),Ye!==w&&(x.activeTexture(w),Ye=w)}return{buffers:{color:z,depth:H,stencil:K},enable,disable,bindFramebuffer:function bindFramebuffer(w,S){return null===S&&null!==Z&&(S=Z),J[w]!==S&&(x.bindFramebuffer(w,S),J[w]=S,G&&(36009===w&&(J[36160]=S),36160===w&&(J[36009]=S)),!0)},bindXRFramebuffer:function bindXRFramebuffer(w){w!==Z&&(x.bindFramebuffer(36160,w),Z=w)},useProgram:function useProgram(w){return Q!==w&&(x.useProgram(w),Q=w,!0)},setBlending,setMaterial:function setMaterial(x,w){x.side===ne?disable(2884):enable(2884);let S=x.side===te;w&&(S=!S),setFlipSided(S),x.blending===ae&&!1===x.transparent?setBlending(oe):setBlending(x.blending,x.blendEquation,x.blendSrc,x.blendDst,x.blendEquationAlpha,x.blendSrcAlpha,x.blendDstAlpha,x.premultipliedAlpha),H.setFunc(x.depthFunc),H.setTest(x.depthTest),H.setMask(x.depthWrite),z.setMask(x.colorWrite);const U=x.stencilWrite;K.setTest(U),U&&(K.setMask(x.stencilWriteMask),K.setFunc(x.stencilFunc,x.stencilRef,x.stencilFuncMask),K.setOp(x.stencilFail,x.stencilZFail,x.stencilZPass)),setPolygonOffset(x.polygonOffset,x.polygonOffsetFactor,x.polygonOffsetUnits),!0===x.alphaToCoverage?enable(32926):disable(32926)},setFlipSided,setCullFace,setLineWidth:function setLineWidth(w){w!==ze&&(Xe&&x.lineWidth(w),ze=w)},setPolygonOffset,setScissorTest:function setScissorTest(x){x?enable(3089):disable(3089)},activeTexture,bindTexture:function bindTexture(w,S){null===Ye&&activeTexture();let U=Ze[Ye];void 0===U&&(U={type:void 0,texture:void 0},Ze[Ye]=U),U.type===w&&U.texture===S||(x.bindTexture(w,S||nt[w]),U.type=w,U.texture=S)},unbindTexture:function unbindTexture(){const w=Ze[Ye];void 0!==w&&void 0!==w.type&&(x.bindTexture(w.type,null),w.type=void 0,w.texture=void 0)},compressedTexImage2D:function compressedTexImage2D(){try{x.compressedTexImage2D.apply(x,arguments)}catch(x){U.error("THREE.WebGLState:",x)}},texImage2D:function texImage2D(){try{x.texImage2D.apply(x,arguments)}catch(x){U.error("THREE.WebGLState:",x)}},texImage3D:function texImage3D(){try{x.texImage3D.apply(x,arguments)}catch(x){U.error("THREE.WebGLState:",x)}},scissor:function scissor(w){!1===et.equals(w)&&(x.scissor(w.x,w.y,w.z,w.w),et.copy(w))},viewport:function viewport(w){!1===tt.equals(w)&&(x.viewport(w.x,w.y,w.z,w.w),tt.copy(w))},reset:function reset(){x.disable(3042),x.disable(2884),x.disable(2929),x.disable(32823),x.disable(3089),x.disable(2960),x.disable(32926),x.blendEquation(32774),x.blendFunc(1,0),x.blendFuncSeparate(1,0,1,0),x.colorMask(!0,!0,!0,!0),x.clearColor(0,0,0,0),x.depthMask(!0),x.depthFunc(513),x.clearDepth(1),x.stencilMask(4294967295),x.stencilFunc(519,0,4294967295),x.stencilOp(7680,7680,7680),x.clearStencil(0),x.cullFace(1029),x.frontFace(2305),x.polygonOffset(0,0),x.activeTexture(33984),x.bindFramebuffer(36160,null),!0===G&&(x.bindFramebuffer(36009,null),x.bindFramebuffer(36008,null)),x.useProgram(null),x.lineWidth(1),x.scissor(0,0,x.canvas.width,x.canvas.height),x.viewport(0,0,x.canvas.width,x.canvas.height),Y={},Ye=null,Ze={},Z=null,J={},Q=null,ee=!1,re=null,ie=null,Fe=null,Be=null,De=null,ke=null,Ue=null,Ge=!1,Ve=null,We=null,ze=null,He=null,$e=null,et.set(0,0,x.canvas.width,x.canvas.height),tt.set(0,0,x.canvas.width,x.canvas.height),z.reset(),H.reset(),K.reset()}}}function WebGLTextures(x,w,S,G,z,H,j){const X=z.isWebGL2,q=z.maxTextures,K=z.maxCubemapSize,Y=z.maxTextureSize,Z=z.maxSamples,J=new WeakMap;let Q,ee=!1;try{ee="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(x){}function createCanvas(x,w){return ee?new OffscreenCanvas(x,w):createElementNS("canvas")}function resizeImage(x,w,S,G){let z=1;if((x.width>G||x.height>G)&&(z=G/Math.max(x.width,x.height)),z<1||!0===w){if("undefined"!=typeof HTMLImageElement&&x instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&x instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&x instanceof ImageBitmap){const G=w?floorPowerOfTwo:Math.floor,H=G(z*x.width),j=G(z*x.height);void 0===Q&&(Q=createCanvas(H,j));const X=S?createCanvas(H,j):Q;X.width=H,X.height=j;return X.getContext("2d").drawImage(x,0,0,H,j),U.warn("THREE.WebGLRenderer: Texture has been resized from ("+x.width+"x"+x.height+") to ("+H+"x"+j+")."),X}return"data"in x&&U.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+x.width+"x"+x.height+")."),x}return x}function isPowerOfTwo$1(x){return isPowerOfTwo(x.width)&&isPowerOfTwo(x.height)}function textureNeedsGenerateMipmaps(x,w){return x.generateMipmaps&&w&&x.minFilter!==et&&x.minFilter!==ot}function generateMipmap(w,S,U,z,H=1){x.generateMipmap(w);G.get(S).__maxMipLevel=Math.log2(Math.max(U,z,H))}function getInternalFormat(S,G,z,H){if(!1===X)return G;if(null!==S){if(void 0!==x[S])return x[S];U.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+S+"'")}let j=G;return 6403===G&&(5126===z&&(j=33326),5131===z&&(j=33325),5121===z&&(j=33321)),6407===G&&(5126===z&&(j=34837),5131===z&&(j=34843),5121===z&&(j=32849)),6408===G&&(5126===z&&(j=34836),5131===z&&(j=34842),5121===z&&(j=H===Kn?35907:32856)),33325!==j&&33326!==j&&34842!==j&&34836!==j||w.get("EXT_color_buffer_float"),j}function filterFallback(x){return x===et||x===tt||x===rt?9728:9729}function onTextureDispose(w){const S=w.target;S.removeEventListener("dispose",onTextureDispose),function deallocateTexture(w){const S=G.get(w);if(void 0===S.__webglInit)return;x.deleteTexture(S.__webglTexture),G.remove(w)}(S),S.isVideoTexture&&J.delete(S),j.memory.textures--}function onRenderTargetDispose(w){const S=w.target;S.removeEventListener("dispose",onRenderTargetDispose),function deallocateRenderTarget(w){const S=w.texture,U=G.get(w),z=G.get(S);if(!w)return;void 0!==z.__webglTexture&&(x.deleteTexture(z.__webglTexture),j.memory.textures--);w.depthTexture&&w.depthTexture.dispose();if(w.isWebGLCubeRenderTarget)for(let w=0;w<6;w++)x.deleteFramebuffer(U.__webglFramebuffer[w]),U.__webglDepthbuffer&&x.deleteRenderbuffer(U.__webglDepthbuffer[w]);else x.deleteFramebuffer(U.__webglFramebuffer),U.__webglDepthbuffer&&x.deleteRenderbuffer(U.__webglDepthbuffer),U.__webglMultisampledFramebuffer&&x.deleteFramebuffer(U.__webglMultisampledFramebuffer),U.__webglColorRenderbuffer&&x.deleteRenderbuffer(U.__webglColorRenderbuffer),U.__webglDepthRenderbuffer&&x.deleteRenderbuffer(U.__webglDepthRenderbuffer);if(w.isWebGLMultipleRenderTargets)for(let w=0,U=S.length;w<U;w++){const U=G.get(S[w]);U.__webglTexture&&(x.deleteTexture(U.__webglTexture),j.memory.textures--),G.remove(S[w])}G.remove(S),G.remove(w)}(S)}let te=0;function setTexture2D(x,w){const z=G.get(x);if(x.isVideoTexture&&function updateVideoTexture(x){const w=j.render.frame;J.get(x)!==w&&(J.set(x,w),x.update())}(x),x.version>0&&z.__version!==x.version){const S=x.image;if(void 0===S)U.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==S.complete)return void uploadTexture(z,x,w);U.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}S.activeTexture(33984+w),S.bindTexture(3553,z.__webglTexture)}function setTextureCube(w,z){const j=G.get(w);w.version>0&&j.__version!==w.version?function uploadCubeTexture(w,G,z){if(6!==G.image.length)return;initTexture(w,G),S.activeTexture(33984+z),S.bindTexture(34067,w.__webglTexture),x.pixelStorei(37440,G.flipY),x.pixelStorei(37441,G.premultiplyAlpha),x.pixelStorei(3317,G.unpackAlignment),x.pixelStorei(37443,0);const j=G&&(G.isCompressedTexture||G.image[0].isCompressedTexture),q=G.image[0]&&G.image[0].isDataTexture,Y=[];for(let x=0;x<6;x++)Y[x]=j||q?q?G.image[x].image:G.image[x]:resizeImage(G.image[x],!1,!0,K);const Z=Y[0],J=isPowerOfTwo$1(Z)||X,Q=H.convert(G.format),ee=H.convert(G.type),te=getInternalFormat(G.internalFormat,Q,ee,G.encoding);let ne;if(setTextureParameters(34067,G,J),j){for(let x=0;x<6;x++){ne=Y[x].mipmaps;for(let w=0;w<ne.length;w++){const z=ne[w];G.format!==Tt&&G.format!==St?null!==Q?S.compressedTexImage2D(34069+x,w,te,z.width,z.height,0,z.data):U.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):S.texImage2D(34069+x,w,te,z.width,z.height,0,Q,ee,z.data)}}w.__maxMipLevel=ne.length-1}else{ne=G.mipmaps;for(let x=0;x<6;x++)if(q){S.texImage2D(34069+x,0,te,Y[x].width,Y[x].height,0,Q,ee,Y[x].data);for(let w=0;w<ne.length;w++){const U=ne[w].image[x].image;S.texImage2D(34069+x,w+1,te,U.width,U.height,0,Q,ee,U.data)}}else{S.texImage2D(34069+x,0,te,Q,ee,Y[x]);for(let w=0;w<ne.length;w++){const U=ne[w];S.texImage2D(34069+x,w+1,te,Q,ee,U.image[x])}}w.__maxMipLevel=ne.length}textureNeedsGenerateMipmaps(G,J)&&generateMipmap(34067,G,Z.width,Z.height);w.__version=G.version,G.onUpdate&&G.onUpdate(G)}(j,w,z):(S.activeTexture(33984+z),S.bindTexture(34067,j.__webglTexture))}const ne={[Ze]:10497,[Je]:33071,[Qe]:33648},re={[et]:9728,[tt]:9984,[rt]:9986,[ot]:9729,[at]:9985,[lt]:9987};function setTextureParameters(S,H,j){if(j?(x.texParameteri(S,10242,ne[H.wrapS]),x.texParameteri(S,10243,ne[H.wrapT]),32879!==S&&35866!==S||x.texParameteri(S,32882,ne[H.wrapR]),x.texParameteri(S,10240,re[H.magFilter]),x.texParameteri(S,10241,re[H.minFilter])):(x.texParameteri(S,10242,33071),x.texParameteri(S,10243,33071),32879!==S&&35866!==S||x.texParameteri(S,32882,33071),H.wrapS===Je&&H.wrapT===Je||U.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),x.texParameteri(S,10240,filterFallback(H.magFilter)),x.texParameteri(S,10241,filterFallback(H.minFilter)),H.minFilter!==et&&H.minFilter!==ot&&U.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===w.has("EXT_texture_filter_anisotropic")){const U=w.get("EXT_texture_filter_anisotropic");if(H.type===vt&&!1===w.has("OES_texture_float_linear"))return;if(!1===X&&H.type===yt&&!1===w.has("OES_texture_half_float_linear"))return;(H.anisotropy>1||G.get(H).__currentAnisotropy)&&(x.texParameterf(S,U.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,z.getMaxAnisotropy())),G.get(H).__currentAnisotropy=H.anisotropy)}}function initTexture(w,S){void 0===w.__webglInit&&(w.__webglInit=!0,S.addEventListener("dispose",onTextureDispose),w.__webglTexture=x.createTexture(),j.memory.textures++)}function uploadTexture(w,G,z){let j=3553;G.isDataTexture2DArray&&(j=35866),G.isDataTexture3D&&(j=32879),initTexture(w,G),S.activeTexture(33984+z),S.bindTexture(j,w.__webglTexture),x.pixelStorei(37440,G.flipY),x.pixelStorei(37441,G.premultiplyAlpha),x.pixelStorei(3317,G.unpackAlignment),x.pixelStorei(37443,0);const q=function textureNeedsPowerOfTwo(x){return!X&&(x.wrapS!==Je||x.wrapT!==Je||x.minFilter!==et&&x.minFilter!==ot)}(G)&&!1===isPowerOfTwo$1(G.image),K=resizeImage(G.image,q,!1,Y),Z=isPowerOfTwo$1(K)||X,J=H.convert(G.format);let Q,ee=H.convert(G.type),te=getInternalFormat(G.internalFormat,J,ee,G.encoding);setTextureParameters(j,G,Z);const ne=G.mipmaps;if(G.isDepthTexture)te=6402,X?te=G.type===vt?36012:G.type===gt?33190:G.type===Et?35056:33189:G.type===vt&&U.error("WebGLRenderer: Floating point depth texture requires WebGL2."),G.format===Rt&&6402===te&&G.type!==ft&&G.type!==gt&&(U.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),G.type=ft,ee=H.convert(G.type)),G.format===Lt&&6402===te&&(te=34041,G.type!==Et&&(U.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),G.type=Et,ee=H.convert(G.type))),S.texImage2D(3553,0,te,K.width,K.height,0,J,ee,null);else if(G.isDataTexture)if(ne.length>0&&Z){for(let x=0,w=ne.length;x<w;x++)Q=ne[x],S.texImage2D(3553,x,te,Q.width,Q.height,0,J,ee,Q.data);G.generateMipmaps=!1,w.__maxMipLevel=ne.length-1}else S.texImage2D(3553,0,te,K.width,K.height,0,J,ee,K.data),w.__maxMipLevel=0;else if(G.isCompressedTexture){for(let x=0,w=ne.length;x<w;x++)Q=ne[x],G.format!==Tt&&G.format!==St?null!==J?S.compressedTexImage2D(3553,x,te,Q.width,Q.height,0,Q.data):U.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):S.texImage2D(3553,x,te,Q.width,Q.height,0,J,ee,Q.data);w.__maxMipLevel=ne.length-1}else if(G.isDataTexture2DArray)S.texImage3D(35866,0,te,K.width,K.height,K.depth,0,J,ee,K.data),w.__maxMipLevel=0;else if(G.isDataTexture3D)S.texImage3D(32879,0,te,K.width,K.height,K.depth,0,J,ee,K.data),w.__maxMipLevel=0;else if(ne.length>0&&Z){for(let x=0,w=ne.length;x<w;x++)Q=ne[x],S.texImage2D(3553,x,te,J,ee,Q);G.generateMipmaps=!1,w.__maxMipLevel=ne.length-1}else S.texImage2D(3553,0,te,J,ee,K),w.__maxMipLevel=0;textureNeedsGenerateMipmaps(G,Z)&&generateMipmap(j,G,K.width,K.height),w.__version=G.version,G.onUpdate&&G.onUpdate(G)}function setupFrameBufferTexture(w,U,z,j,X){const q=H.convert(z.format),K=H.convert(z.type),Y=getInternalFormat(z.internalFormat,q,K,z.encoding);32879===X||35866===X?S.texImage3D(X,0,Y,U.width,U.height,U.depth,0,q,K,null):S.texImage2D(X,0,Y,U.width,U.height,0,q,K,null),S.bindFramebuffer(36160,w),x.framebufferTexture2D(36160,j,X,G.get(z).__webglTexture,0),S.bindFramebuffer(36160,null)}function setupRenderBufferStorage(w,S,U){if(x.bindRenderbuffer(36161,w),S.depthBuffer&&!S.stencilBuffer){let G=33189;if(U){const w=S.depthTexture;w&&w.isDepthTexture&&(w.type===vt?G=36012:w.type===gt&&(G=33190));const U=getRenderTargetSamples(S);x.renderbufferStorageMultisample(36161,U,G,S.width,S.height)}else x.renderbufferStorage(36161,G,S.width,S.height);x.framebufferRenderbuffer(36160,36096,36161,w)}else if(S.depthBuffer&&S.stencilBuffer){if(U){const w=getRenderTargetSamples(S);x.renderbufferStorageMultisample(36161,w,35056,S.width,S.height)}else x.renderbufferStorage(36161,34041,S.width,S.height);x.framebufferRenderbuffer(36160,33306,36161,w)}else{const w=!0===S.isWebGLMultipleRenderTargets?S.texture[0]:S.texture,G=H.convert(w.format),z=H.convert(w.type),j=getInternalFormat(w.internalFormat,G,z,w.encoding);if(U){const w=getRenderTargetSamples(S);x.renderbufferStorageMultisample(36161,w,j,S.width,S.height)}else x.renderbufferStorage(36161,j,S.width,S.height)}x.bindRenderbuffer(36161,null)}function setupDepthRenderbuffer(w){const U=G.get(w),z=!0===w.isWebGLCubeRenderTarget;if(w.depthTexture){if(z)throw new Error("target.depthTexture not supported in Cube render targets");!function setupDepthTexture(w,U){if(U&&U.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(S.bindFramebuffer(36160,w),!U.depthTexture||!U.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");G.get(U.depthTexture).__webglTexture&&U.depthTexture.image.width===U.width&&U.depthTexture.image.height===U.height||(U.depthTexture.image.width=U.width,U.depthTexture.image.height=U.height,U.depthTexture.needsUpdate=!0),setTexture2D(U.depthTexture,0);const z=G.get(U.depthTexture).__webglTexture;if(U.depthTexture.format===Rt)x.framebufferTexture2D(36160,36096,3553,z,0);else{if(U.depthTexture.format!==Lt)throw new Error("Unknown depthTexture format");x.framebufferTexture2D(36160,33306,3553,z,0)}}(U.__webglFramebuffer,w)}else if(z){U.__webglDepthbuffer=[];for(let G=0;G<6;G++)S.bindFramebuffer(36160,U.__webglFramebuffer[G]),U.__webglDepthbuffer[G]=x.createRenderbuffer(),setupRenderBufferStorage(U.__webglDepthbuffer[G],w,!1)}else S.bindFramebuffer(36160,U.__webglFramebuffer),U.__webglDepthbuffer=x.createRenderbuffer(),setupRenderBufferStorage(U.__webglDepthbuffer,w,!1);S.bindFramebuffer(36160,null)}function getRenderTargetSamples(x){return X&&x.isWebGLMultisampleRenderTarget?Math.min(Z,x.samples):0}let ie=!1,oe=!1;this.allocateTextureUnit=function allocateTextureUnit(){const x=te;return x>=q&&U.warn("THREE.WebGLTextures: Trying to use "+x+" texture units while this GPU supports only "+q),te+=1,x},this.resetTextureUnits=function resetTextureUnits(){te=0},this.setTexture2D=setTexture2D,this.setTexture2DArray=function setTexture2DArray(x,w){const U=G.get(x);x.version>0&&U.__version!==x.version?uploadTexture(U,x,w):(S.activeTexture(33984+w),S.bindTexture(35866,U.__webglTexture))},this.setTexture3D=function setTexture3D(x,w){const U=G.get(x);x.version>0&&U.__version!==x.version?uploadTexture(U,x,w):(S.activeTexture(33984+w),S.bindTexture(32879,U.__webglTexture))},this.setTextureCube=setTextureCube,this.setupRenderTarget=function setupRenderTarget(w){const q=w.texture,K=G.get(w),Y=G.get(q);w.addEventListener("dispose",onRenderTargetDispose),!0!==w.isWebGLMultipleRenderTargets&&(Y.__webglTexture=x.createTexture(),Y.__version=q.version,j.memory.textures++);const Z=!0===w.isWebGLCubeRenderTarget,J=!0===w.isWebGLMultipleRenderTargets,Q=!0===w.isWebGLMultisampleRenderTarget,ee=q.isDataTexture3D||q.isDataTexture2DArray,te=isPowerOfTwo$1(w)||X;if(!X||q.format!==St||q.type!==vt&&q.type!==yt||(q.format=Tt,U.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Z){K.__webglFramebuffer=[];for(let w=0;w<6;w++)K.__webglFramebuffer[w]=x.createFramebuffer()}else if(K.__webglFramebuffer=x.createFramebuffer(),J)if(z.drawBuffers){const S=w.texture;for(let w=0,U=S.length;w<U;w++){const U=G.get(S[w]);void 0===U.__webglTexture&&(U.__webglTexture=x.createTexture(),j.memory.textures++)}}else U.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(Q)if(X){K.__webglMultisampledFramebuffer=x.createFramebuffer(),K.__webglColorRenderbuffer=x.createRenderbuffer(),x.bindRenderbuffer(36161,K.__webglColorRenderbuffer);const U=H.convert(q.format),G=H.convert(q.type),z=getInternalFormat(q.internalFormat,U,G,q.encoding),j=getRenderTargetSamples(w);x.renderbufferStorageMultisample(36161,j,z,w.width,w.height),S.bindFramebuffer(36160,K.__webglMultisampledFramebuffer),x.framebufferRenderbuffer(36160,36064,36161,K.__webglColorRenderbuffer),x.bindRenderbuffer(36161,null),w.depthBuffer&&(K.__webglDepthRenderbuffer=x.createRenderbuffer(),setupRenderBufferStorage(K.__webglDepthRenderbuffer,w,!0)),S.bindFramebuffer(36160,null)}else U.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Z){S.bindTexture(34067,Y.__webglTexture),setTextureParameters(34067,q,te);for(let x=0;x<6;x++)setupFrameBufferTexture(K.__webglFramebuffer[x],w,q,36064,34069+x);textureNeedsGenerateMipmaps(q,te)&&generateMipmap(34067,q,w.width,w.height),S.unbindTexture()}else if(J){const x=w.texture;for(let U=0,z=x.length;U<z;U++){const z=x[U],H=G.get(z);S.bindTexture(3553,H.__webglTexture),setTextureParameters(3553,z,te),setupFrameBufferTexture(K.__webglFramebuffer,w,z,36064+U,3553),textureNeedsGenerateMipmaps(z,te)&&generateMipmap(3553,z,w.width,w.height)}S.unbindTexture()}else{let x=3553;if(ee)if(X){x=q.isDataTexture3D?32879:35866}else U.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");S.bindTexture(x,Y.__webglTexture),setTextureParameters(x,q,te),setupFrameBufferTexture(K.__webglFramebuffer,w,q,36064,x),textureNeedsGenerateMipmaps(q,te)&&generateMipmap(x,q,w.width,w.height,w.depth),S.unbindTexture()}w.depthBuffer&&setupDepthRenderbuffer(w)},this.updateRenderTargetMipmap=function updateRenderTargetMipmap(x){const w=isPowerOfTwo$1(x)||X,U=!0===x.isWebGLMultipleRenderTargets?x.texture:[x.texture];for(let z=0,H=U.length;z<H;z++){const H=U[z];if(textureNeedsGenerateMipmaps(H,w)){const w=x.isWebGLCubeRenderTarget?34067:3553,U=G.get(H).__webglTexture;S.bindTexture(w,U),generateMipmap(w,H,x.width,x.height),S.unbindTexture()}}},this.updateMultisampleRenderTarget=function updateMultisampleRenderTarget(w){if(w.isWebGLMultisampleRenderTarget)if(X){const U=w.width,z=w.height;let H=16384;w.depthBuffer&&(H|=256),w.stencilBuffer&&(H|=1024);const j=G.get(w);S.bindFramebuffer(36008,j.__webglMultisampledFramebuffer),S.bindFramebuffer(36009,j.__webglFramebuffer),x.blitFramebuffer(0,0,U,z,0,0,U,z,H,9728),S.bindFramebuffer(36008,null),S.bindFramebuffer(36009,j.__webglMultisampledFramebuffer)}else U.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function safeSetTexture2D(x,w){x&&x.isWebGLRenderTarget&&(!1===ie&&(U.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ie=!0),x=x.texture),setTexture2D(x,w)},this.safeSetTextureCube=function safeSetTextureCube(x,w){x&&x.isWebGLCubeRenderTarget&&(!1===oe&&(U.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),oe=!0),x=x.texture),setTextureCube(x,w)}}function WebGLUtils(x,w,S){const U=S.isWebGL2;return{convert:function convert(x){let S;if(x===ut)return 5121;if(x===_t)return 32819;if(x===bt)return 32820;if(x===xt)return 33635;if(x===ht)return 5120;if(x===pt)return 5122;if(x===ft)return 5123;if(x===mt)return 5124;if(x===gt)return 5125;if(x===vt)return 5126;if(x===yt)return U?5131:(S=w.get("OES_texture_half_float"),null!==S?S.HALF_FLOAT_OES:null);if(x===wt)return 6406;if(x===St)return 6407;if(x===Tt)return 6408;if(x===Ct)return 6409;if(x===At)return 6410;if(x===Rt)return 6402;if(x===Lt)return 34041;if(x===Pt)return 6403;if(x===It)return 36244;if(x===Nt)return 33319;if(x===Ft)return 33320;if(x===Bt)return 36248;if(x===Dt)return 36249;if(x===kt||x===Ut||x===Gt||x===Vt){if(S=w.get("WEBGL_compressed_texture_s3tc"),null===S)return null;if(x===kt)return S.COMPRESSED_RGB_S3TC_DXT1_EXT;if(x===Ut)return S.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(x===Gt)return S.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(x===Vt)return S.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(x===Wt||x===zt||x===Ht||x===$t){if(S=w.get("WEBGL_compressed_texture_pvrtc"),null===S)return null;if(x===Wt)return S.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(x===zt)return S.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(x===Ht)return S.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(x===$t)return S.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(x===jt)return S=w.get("WEBGL_compressed_texture_etc1"),null!==S?S.COMPRESSED_RGB_ETC1_WEBGL:null;if((x===Xt||x===qt)&&(S=w.get("WEBGL_compressed_texture_etc"),null!==S)){if(x===Xt)return S.COMPRESSED_RGB8_ETC2;if(x===qt)return S.COMPRESSED_RGBA8_ETC2_EAC}return x===Kt||x===Yt||x===Zt||x===Jt||x===Qt||x===en||x===tn||x===nn||x===rn||x===on||x===an||x===sn||x===ln||x===cn||x===dn||x===pn||x===mn||x===gn||x===vn||x===bn||x===xn||x===En||x===wn||x===Sn||x===Tn||x===Cn||x===An||x===Mn?(S=w.get("WEBGL_compressed_texture_astc"),null!==S?x:null):x===hn?(S=w.get("EXT_texture_compression_bptc"),null!==S?x:null):x===Et?U?34042:(S=w.get("WEBGL_depth_texture"),null!==S?S.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class ArrayCamera extends PerspectiveCamera{constructor(x=[]){super(),this.cameras=x}}ArrayCamera.prototype.isArrayCamera=!0;class Group extends Object3D{constructor(){super(),this.type="Group"}}Group.prototype.isGroup=!0;const va={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(x){return null!==this._targetRay&&this._targetRay.dispatchEvent(x),null!==this._grip&&this._grip.dispatchEvent(x),null!==this._hand&&this._hand.dispatchEvent(x),this}disconnect(x){return this.dispatchEvent({type:"disconnected",data:x}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(x,w,S){let U=null,G=null,z=null;const H=this._targetRay,j=this._grip,X=this._hand;if(x&&"visible-blurred"!==w.session.visibilityState)if(null!==H&&(U=w.getPose(x.targetRaySpace,S),null!==U&&(H.matrix.fromArray(U.transform.matrix),H.matrix.decompose(H.position,H.rotation,H.scale),U.linearVelocity?(H.hasLinearVelocity=!0,H.linearVelocity.copy(U.linearVelocity)):H.hasLinearVelocity=!1,U.angularVelocity?(H.hasAngularVelocity=!0,H.angularVelocity.copy(U.angularVelocity)):H.hasAngularVelocity=!1,this.dispatchEvent(va))),X&&x.hand){z=!0;for(const U of x.hand.values()){const x=w.getJointPose(U,S);if(void 0===X.joints[U.jointName]){const x=new Group;x.matrixAutoUpdate=!1,x.visible=!1,X.joints[U.jointName]=x,X.add(x)}const G=X.joints[U.jointName];null!==x&&(G.matrix.fromArray(x.transform.matrix),G.matrix.decompose(G.position,G.rotation,G.scale),G.jointRadius=x.radius),G.visible=null!==x}const U=X.joints["index-finger-tip"],G=X.joints["thumb-tip"],H=U.position.distanceTo(G.position),j=.02,q=.005;X.inputState.pinching&&H>j+q?(X.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:x.handedness,target:this})):!X.inputState.pinching&&H<=j-q&&(X.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:x.handedness,target:this}))}else null!==j&&x.gripSpace&&(G=w.getPose(x.gripSpace,S),null!==G&&(j.matrix.fromArray(G.transform.matrix),j.matrix.decompose(j.position,j.rotation,j.scale),G.linearVelocity?(j.hasLinearVelocity=!0,j.linearVelocity.copy(G.linearVelocity)):j.hasLinearVelocity=!1,G.angularVelocity?(j.hasAngularVelocity=!0,j.angularVelocity.copy(G.angularVelocity)):j.hasAngularVelocity=!1));return null!==H&&(H.visible=null!==U),null!==j&&(j.visible=null!==G),null!==X&&(X.visible=null!==z),this}}class WebXRManager extends EventDispatcher{constructor(x,w){super();const S=this,G=x.state;let z=null,H=1,j=null,X="local-floor",q=null,K=null,Y=null,Z=null,J=null,Q=!1,ee=null,te=null,ne=null,re=null,ie=null,oe=null;const ae=[],se=new Map,le=new PerspectiveCamera;le.layers.enable(1),le.viewport=new Vector4;const ce=new PerspectiveCamera;ce.layers.enable(2),ce.viewport=new Vector4;const ue=[le,ce],he=new ArrayCamera;he.layers.enable(1),he.layers.enable(2);let de=null,pe=null;function onSessionEvent(x){const w=se.get(x.inputSource);w&&w.dispatchEvent({type:x.type,data:x.inputSource})}function onSessionEnd(){se.forEach((function(x,w){x.disconnect(w)})),se.clear(),de=null,pe=null,G.bindXRFramebuffer(null),x.setRenderTarget(x.getRenderTarget()),Y&&w.deleteFramebuffer(Y),ee&&w.deleteFramebuffer(ee),te&&w.deleteRenderbuffer(te),ne&&w.deleteRenderbuffer(ne),Y=null,ee=null,te=null,ne=null,J=null,Z=null,K=null,z=null,ve.stop(),S.isPresenting=!1,S.dispatchEvent({type:"sessionend"})}function onInputSourcesChange(x){const w=z.inputSources;for(let x=0;x<ae.length;x++)se.set(w[x],ae[x]);for(let w=0;w<x.removed.length;w++){const S=x.removed[w],U=se.get(S);U&&(U.dispatchEvent({type:"disconnected",data:S}),se.delete(S))}for(let w=0;w<x.added.length;w++){const S=x.added[w],U=se.get(S);U&&U.dispatchEvent({type:"connected",data:S})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(x){let w=ae[x];return void 0===w&&(w=new WebXRController,ae[x]=w),w.getTargetRaySpace()},this.getControllerGrip=function(x){let w=ae[x];return void 0===w&&(w=new WebXRController,ae[x]=w),w.getGripSpace()},this.getHand=function(x){let w=ae[x];return void 0===w&&(w=new WebXRController,ae[x]=w),w.getHandSpace()},this.setFramebufferScaleFactor=function(x){H=x,!0===S.isPresenting&&U.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(x){X=x,!0===S.isPresenting&&U.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return j},this.getBaseLayer=function(){return null!==Z?Z:J},this.getBinding=function(){return K},this.getFrame=function(){return re},this.getSession=function(){return z},this.setSession=async function(x){if(z=x,null!==z){z.addEventListener("select",onSessionEvent),z.addEventListener("selectstart",onSessionEvent),z.addEventListener("selectend",onSessionEvent),z.addEventListener("squeeze",onSessionEvent),z.addEventListener("squeezestart",onSessionEvent),z.addEventListener("squeezeend",onSessionEvent),z.addEventListener("end",onSessionEnd),z.addEventListener("inputsourceschange",onInputSourcesChange);const x=w.getContextAttributes();if(!0!==x.xrCompatible&&await w.makeXRCompatible(),void 0===z.renderState.layers){const S={antialias:x.antialias,alpha:x.alpha,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:H};J=new XRWebGLLayer(z,w,S),z.updateRenderState({baseLayer:J})}else if(w instanceof WebGLRenderingContext){const S={antialias:!0,alpha:x.alpha,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:H};J=new XRWebGLLayer(z,w,S),z.updateRenderState({layers:[J]})}else{Q=x.antialias;let S=null;x.depth&&(oe=256,x.stencil&&(oe|=1024),ie=x.stencil?33306:36096,S=x.stencil?35056:33190);const U={colorFormat:x.alpha?32856:32849,depthFormat:S,scaleFactor:H};K=new XRWebGLBinding(z,w),Z=K.createProjectionLayer(U),Y=w.createFramebuffer(),z.updateRenderState({layers:[Z]}),Q&&(ee=w.createFramebuffer(),te=w.createRenderbuffer(),w.bindRenderbuffer(36161,te),w.renderbufferStorageMultisample(36161,4,32856,Z.textureWidth,Z.textureHeight),G.bindFramebuffer(36160,ee),w.framebufferRenderbuffer(36160,36064,36161,te),w.bindRenderbuffer(36161,null),null!==S&&(ne=w.createRenderbuffer(),w.bindRenderbuffer(36161,ne),w.renderbufferStorageMultisample(36161,4,S,Z.textureWidth,Z.textureHeight),w.framebufferRenderbuffer(36160,ie,36161,ne),w.bindRenderbuffer(36161,null)),G.bindFramebuffer(36160,null))}j=await z.requestReferenceSpace(X),ve.setContext(z),ve.start(),S.isPresenting=!0,S.dispatchEvent({type:"sessionstart"})}};const fe=new Vector3,me=new Vector3;function updateCamera(x,w){null===w?x.matrixWorld.copy(x.matrix):x.matrixWorld.multiplyMatrices(w.matrixWorld,x.matrix),x.matrixWorldInverse.copy(x.matrixWorld).invert()}this.updateCamera=function(x){if(null===z)return;he.near=ce.near=le.near=x.near,he.far=ce.far=le.far=x.far,de===he.near&&pe===he.far||(z.updateRenderState({depthNear:he.near,depthFar:he.far}),de=he.near,pe=he.far);const w=x.parent,S=he.cameras;updateCamera(he,w);for(let x=0;x<S.length;x++)updateCamera(S[x],w);he.matrixWorld.decompose(he.position,he.quaternion,he.scale),x.position.copy(he.position),x.quaternion.copy(he.quaternion),x.scale.copy(he.scale),x.matrix.copy(he.matrix),x.matrixWorld.copy(he.matrixWorld);const U=x.children;for(let x=0,w=U.length;x<w;x++)U[x].updateMatrixWorld(!0);2===S.length?function setProjectionFromUnion(x,w,S){fe.setFromMatrixPosition(w.matrixWorld),me.setFromMatrixPosition(S.matrixWorld);const U=fe.distanceTo(me),G=w.projectionMatrix.elements,z=S.projectionMatrix.elements,H=G[14]/(G[10]-1),j=G[14]/(G[10]+1),X=(G[9]+1)/G[5],q=(G[9]-1)/G[5],K=(G[8]-1)/G[0],Y=(z[8]+1)/z[0],Z=H*K,J=H*Y,Q=U/(-K+Y),ee=Q*-K;w.matrixWorld.decompose(x.position,x.quaternion,x.scale),x.translateX(ee),x.translateZ(Q),x.matrixWorld.compose(x.position,x.quaternion,x.scale),x.matrixWorldInverse.copy(x.matrixWorld).invert();const te=H+Q,ne=j+Q,re=Z-ee,ie=J+(U-ee),oe=X*j/ne*te,ae=q*j/ne*te;x.projectionMatrix.makePerspective(re,ie,oe,ae,te,ne)}(he,le,ce):he.projectionMatrix.copy(le.projectionMatrix)},this.getCamera=function(){return he},this.getFoveation=function(){return null!==Z?Z.fixedFoveation:null!==J?J.fixedFoveation:void 0},this.setFoveation=function(x){null!==Z&&(Z.fixedFoveation=x),null!==J&&void 0!==J.fixedFoveation&&(J.fixedFoveation=x)};let ge=null;const ve=new WebGLAnimation;ve.setAnimationLoop((function onAnimationFrame(x,S){if(q=S.getViewerPose(j),re=S,null!==q){const x=q.views;null!==J&&G.bindXRFramebuffer(J.framebuffer);let S=!1;x.length!==he.cameras.length&&(he.cameras.length=0,S=!0);for(let U=0;U<x.length;U++){const z=x[U];let H=null;if(null!==J)H=J.getViewport(z);else{const x=K.getViewSubImage(Z,z);G.bindXRFramebuffer(Y),void 0!==x.depthStencilTexture&&w.framebufferTexture2D(36160,ie,3553,x.depthStencilTexture,0),w.framebufferTexture2D(36160,36064,3553,x.colorTexture,0),H=x.viewport}const j=ue[U];j.matrix.fromArray(z.transform.matrix),j.projectionMatrix.fromArray(z.projectionMatrix),j.viewport.set(H.x,H.y,H.width,H.height),0===U&&he.matrix.copy(j.matrix),!0===S&&he.cameras.push(j)}Q&&(G.bindXRFramebuffer(ee),null!==oe&&w.clear(oe))}const U=z.inputSources;for(let x=0;x<ae.length;x++){const w=ae[x],G=U[x];w.update(G,S,j)}if(ge&&ge(x,S),Q){const x=Z.textureWidth,S=Z.textureHeight;G.bindFramebuffer(36008,ee),G.bindFramebuffer(36009,Y),w.invalidateFramebuffer(36008,[ie]),w.invalidateFramebuffer(36009,[ie]),w.blitFramebuffer(0,0,x,S,0,0,x,S,16384,9728),w.invalidateFramebuffer(36008,[36064]),G.bindFramebuffer(36008,null),G.bindFramebuffer(36009,null),G.bindFramebuffer(36160,ee)}re=null})),this.setAnimationLoop=function(x){ge=x},this.dispose=function(){}}}function WebGLMaterials(x){function refreshUniformsCommon(w,S){w.opacity.value=S.opacity,S.color&&w.diffuse.value.copy(S.color),S.emissive&&w.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(w.map.value=S.map),S.alphaMap&&(w.alphaMap.value=S.alphaMap),S.specularMap&&(w.specularMap.value=S.specularMap),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest);const U=x.get(S).envMap;if(U){w.envMap.value=U,w.flipEnvMap.value=U.isCubeTexture&&!1===U.isRenderTargetTexture?-1:1,w.reflectivity.value=S.reflectivity,w.ior.value=S.ior,w.refractionRatio.value=S.refractionRatio;const G=x.get(U).__maxMipLevel;void 0!==G&&(w.maxMipLevel.value=G)}let G,z;S.lightMap&&(w.lightMap.value=S.lightMap,w.lightMapIntensity.value=S.lightMapIntensity),S.aoMap&&(w.aoMap.value=S.aoMap,w.aoMapIntensity.value=S.aoMapIntensity),S.map?G=S.map:S.specularMap?G=S.specularMap:S.displacementMap?G=S.displacementMap:S.normalMap?G=S.normalMap:S.bumpMap?G=S.bumpMap:S.roughnessMap?G=S.roughnessMap:S.metalnessMap?G=S.metalnessMap:S.alphaMap?G=S.alphaMap:S.emissiveMap?G=S.emissiveMap:S.clearcoatMap?G=S.clearcoatMap:S.clearcoatNormalMap?G=S.clearcoatNormalMap:S.clearcoatRoughnessMap?G=S.clearcoatRoughnessMap:S.specularIntensityMap?G=S.specularIntensityMap:S.specularTintMap?G=S.specularTintMap:S.transmissionMap?G=S.transmissionMap:S.thicknessMap&&(G=S.thicknessMap),void 0!==G&&(G.isWebGLRenderTarget&&(G=G.texture),!0===G.matrixAutoUpdate&&G.updateMatrix(),w.uvTransform.value.copy(G.matrix)),S.aoMap?z=S.aoMap:S.lightMap&&(z=S.lightMap),void 0!==z&&(z.isWebGLRenderTarget&&(z=z.texture),!0===z.matrixAutoUpdate&&z.updateMatrix(),w.uv2Transform.value.copy(z.matrix))}function refreshUniformsStandard(w,S){w.roughness.value=S.roughness,w.metalness.value=S.metalness,S.roughnessMap&&(w.roughnessMap.value=S.roughnessMap),S.metalnessMap&&(w.metalnessMap.value=S.metalnessMap),S.emissiveMap&&(w.emissiveMap.value=S.emissiveMap),S.bumpMap&&(w.bumpMap.value=S.bumpMap,w.bumpScale.value=S.bumpScale,S.side===te&&(w.bumpScale.value*=-1)),S.normalMap&&(w.normalMap.value=S.normalMap,w.normalScale.value.copy(S.normalScale),S.side===te&&w.normalScale.value.negate()),S.displacementMap&&(w.displacementMap.value=S.displacementMap,w.displacementScale.value=S.displacementScale,w.displacementBias.value=S.displacementBias);x.get(S).envMap&&(w.envMapIntensity.value=S.envMapIntensity)}return{refreshFogUniforms:function refreshFogUniforms(x,w){x.fogColor.value.copy(w.color),w.isFog?(x.fogNear.value=w.near,x.fogFar.value=w.far):w.isFogExp2&&(x.fogDensity.value=w.density)},refreshMaterialUniforms:function refreshMaterialUniforms(x,w,S,U,G){w.isMeshBasicMaterial?refreshUniformsCommon(x,w):w.isMeshLambertMaterial?(refreshUniformsCommon(x,w),function refreshUniformsLambert(x,w){w.emissiveMap&&(x.emissiveMap.value=w.emissiveMap)}(x,w)):w.isMeshToonMaterial?(refreshUniformsCommon(x,w),function refreshUniformsToon(x,w){w.gradientMap&&(x.gradientMap.value=w.gradientMap);w.emissiveMap&&(x.emissiveMap.value=w.emissiveMap);w.bumpMap&&(x.bumpMap.value=w.bumpMap,x.bumpScale.value=w.bumpScale,w.side===te&&(x.bumpScale.value*=-1));w.normalMap&&(x.normalMap.value=w.normalMap,x.normalScale.value.copy(w.normalScale),w.side===te&&x.normalScale.value.negate());w.displacementMap&&(x.displacementMap.value=w.displacementMap,x.displacementScale.value=w.displacementScale,x.displacementBias.value=w.displacementBias)}(x,w)):w.isMeshPhongMaterial?(refreshUniformsCommon(x,w),function refreshUniformsPhong(x,w){x.specular.value.copy(w.specular),x.shininess.value=Math.max(w.shininess,1e-4),w.emissiveMap&&(x.emissiveMap.value=w.emissiveMap);w.bumpMap&&(x.bumpMap.value=w.bumpMap,x.bumpScale.value=w.bumpScale,w.side===te&&(x.bumpScale.value*=-1));w.normalMap&&(x.normalMap.value=w.normalMap,x.normalScale.value.copy(w.normalScale),w.side===te&&x.normalScale.value.negate());w.displacementMap&&(x.displacementMap.value=w.displacementMap,x.displacementScale.value=w.displacementScale,x.displacementBias.value=w.displacementBias)}(x,w)):w.isMeshStandardMaterial?(refreshUniformsCommon(x,w),w.isMeshPhysicalMaterial?function refreshUniformsPhysical(x,w,S){refreshUniformsStandard(x,w),x.ior.value=w.ior,w.sheen>0&&(x.sheenTint.value.copy(w.sheenTint).multiplyScalar(w.sheen),x.sheenRoughness.value=w.sheenRoughness);w.clearcoat>0&&(x.clearcoat.value=w.clearcoat,x.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(x.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),x.clearcoatNormalMap.value=w.clearcoatNormalMap,w.side===te&&x.clearcoatNormalScale.value.negate()));w.transmission>0&&(x.transmission.value=w.transmission,x.transmissionSamplerMap.value=S.texture,x.transmissionSamplerSize.value.set(S.width,S.height),w.transmissionMap&&(x.transmissionMap.value=w.transmissionMap),x.thickness.value=w.thickness,w.thicknessMap&&(x.thicknessMap.value=w.thicknessMap),x.attenuationDistance.value=w.attenuationDistance,x.attenuationTint.value.copy(w.attenuationTint));x.specularIntensity.value=w.specularIntensity,x.specularTint.value.copy(w.specularTint),w.specularIntensityMap&&(x.specularIntensityMap.value=w.specularIntensityMap);w.specularTintMap&&(x.specularTintMap.value=w.specularTintMap)}(x,w,G):refreshUniformsStandard(x,w)):w.isMeshMatcapMaterial?(refreshUniformsCommon(x,w),function refreshUniformsMatcap(x,w){w.matcap&&(x.matcap.value=w.matcap);w.bumpMap&&(x.bumpMap.value=w.bumpMap,x.bumpScale.value=w.bumpScale,w.side===te&&(x.bumpScale.value*=-1));w.normalMap&&(x.normalMap.value=w.normalMap,x.normalScale.value.copy(w.normalScale),w.side===te&&x.normalScale.value.negate());w.displacementMap&&(x.displacementMap.value=w.displacementMap,x.displacementScale.value=w.displacementScale,x.displacementBias.value=w.displacementBias)}(x,w)):w.isMeshDepthMaterial?(refreshUniformsCommon(x,w),function refreshUniformsDepth(x,w){w.displacementMap&&(x.displacementMap.value=w.displacementMap,x.displacementScale.value=w.displacementScale,x.displacementBias.value=w.displacementBias)}(x,w)):w.isMeshDistanceMaterial?(refreshUniformsCommon(x,w),function refreshUniformsDistance(x,w){w.displacementMap&&(x.displacementMap.value=w.displacementMap,x.displacementScale.value=w.displacementScale,x.displacementBias.value=w.displacementBias);x.referencePosition.value.copy(w.referencePosition),x.nearDistance.value=w.nearDistance,x.farDistance.value=w.farDistance}(x,w)):w.isMeshNormalMaterial?(refreshUniformsCommon(x,w),function refreshUniformsNormal(x,w){w.bumpMap&&(x.bumpMap.value=w.bumpMap,x.bumpScale.value=w.bumpScale,w.side===te&&(x.bumpScale.value*=-1));w.normalMap&&(x.normalMap.value=w.normalMap,x.normalScale.value.copy(w.normalScale),w.side===te&&x.normalScale.value.negate());w.displacementMap&&(x.displacementMap.value=w.displacementMap,x.displacementScale.value=w.displacementScale,x.displacementBias.value=w.displacementBias)}(x,w)):w.isLineBasicMaterial?(!function refreshUniformsLine(x,w){x.diffuse.value.copy(w.color),x.opacity.value=w.opacity}(x,w),w.isLineDashedMaterial&&function refreshUniformsDash(x,w){x.dashSize.value=w.dashSize,x.totalSize.value=w.dashSize+w.gapSize,x.scale.value=w.scale}(x,w)):w.isPointsMaterial?function refreshUniformsPoints(x,w,S,U){x.diffuse.value.copy(w.color),x.opacity.value=w.opacity,x.size.value=w.size*S,x.scale.value=.5*U,w.map&&(x.map.value=w.map);w.alphaMap&&(x.alphaMap.value=w.alphaMap);w.alphaTest>0&&(x.alphaTest.value=w.alphaTest);let G;w.map?G=w.map:w.alphaMap&&(G=w.alphaMap);void 0!==G&&(!0===G.matrixAutoUpdate&&G.updateMatrix(),x.uvTransform.value.copy(G.matrix))}(x,w,S,U):w.isSpriteMaterial?function refreshUniformsSprites(x,w){x.diffuse.value.copy(w.color),x.opacity.value=w.opacity,x.rotation.value=w.rotation,w.map&&(x.map.value=w.map);w.alphaMap&&(x.alphaMap.value=w.alphaMap);w.alphaTest>0&&(x.alphaTest.value=w.alphaTest);let S;w.map?S=w.map:w.alphaMap&&(S=w.alphaMap);void 0!==S&&(!0===S.matrixAutoUpdate&&S.updateMatrix(),x.uvTransform.value.copy(S.matrix))}(x,w):w.isShadowMaterial?(x.color.value.copy(w.color),x.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}}}function WebGLRenderer(x={}){const w=void 0!==x.canvas?x.canvas:function createCanvasElement(){const x=createElementNS("canvas");return x.style.display="block",x}(),S=void 0!==x.context?x.context:null,G=void 0!==x.alpha&&x.alpha,z=void 0===x.depth||x.depth,H=void 0===x.stencil||x.stencil,j=void 0!==x.antialias&&x.antialias,X=void 0===x.premultipliedAlpha||x.premultipliedAlpha,q=void 0!==x.preserveDrawingBuffer&&x.preserveDrawingBuffer,K=void 0!==x.powerPreference?x.powerPreference:"default",Y=void 0!==x.failIfMajorPerformanceCaveat&&x.failIfMajorPerformanceCaveat;let Z=null,J=null;const Q=[],re=[];this.domElement=w,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=qn,this.physicallyCorrectLights=!1,this.toneMapping=ke,this.toneMappingExposure=1;const ie=this;let oe=!1,ae=0,se=0,le=null,ce=-1,ue=null;const he=new Vector4,de=new Vector4;let pe=null,fe=w.width,me=w.height,ge=1,ve=null,ye=null;const _e=new Vector4(0,0,fe,me),be=new Vector4(0,0,fe,me);let xe=!1;const Ee=[],we=new Frustum;let Se=!1,Te=!1,Ce=null;const Ae=new Matrix4,Me=new Vector3,Re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function getTargetPixelRatio(){return null===le?ge:1}let Le,Oe,Pe,Ie,Ne,Fe,Be,De,Ue,Ge,Ve,We,ze,He,$e,je,Xe,qe,Ke,Ye,Ze,Qe,tt,nt=S;function getContext(x,S){for(let U=0;U<x.length;U++){const G=x[U],z=w.getContext(G,S);if(null!==z)return z}return null}try{const x={alpha:G,depth:z,stencil:H,antialias:j,premultipliedAlpha:X,preserveDrawingBuffer:q,powerPreference:K,failIfMajorPerformanceCaveat:Y};if(w.addEventListener("webglcontextlost",onContextLost,!1),w.addEventListener("webglcontextrestored",onContextRestore,!1),null===nt){const w=["webgl2","webgl","experimental-webgl"];if(!0===ie.isWebGL1Renderer&&w.shift(),nt=getContext(w,x),null===nt)throw getContext(w)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===nt.getShaderPrecisionFormat&&(nt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(x){throw U.error("THREE.WebGLRenderer: "+x.message),x}function initGLContext(){Le=new WebGLExtensions(nt),Oe=new WebGLCapabilities(nt,Le,x),Le.init(Oe),Qe=new WebGLUtils(nt,Le,Oe),Pe=new WebGLState(nt,Le,Oe),Ee[0]=1029,Ie=new WebGLInfo(nt),Ne=new WebGLProperties,Fe=new WebGLTextures(nt,Le,Pe,Ne,Oe,Qe,Ie),Be=new WebGLCubeMaps(ie),De=new WebGLCubeUVMaps(ie),Ue=new WebGLAttributes(nt,Oe),tt=new WebGLBindingStates(nt,Le,Ue,Oe),Ge=new WebGLGeometries(nt,Ue,Ie,tt),Ve=new WebGLObjects(nt,Ge,Ue,Ie),Ke=new WebGLMorphtargets(nt,Oe,Fe),je=new WebGLClipping(Ne),We=new WebGLPrograms(ie,Be,De,Le,Oe,tt,je),ze=new WebGLMaterials(Ne),He=new WebGLRenderLists(Ne),$e=new WebGLRenderStates(Le,Oe),qe=new WebGLBackground(ie,Be,Pe,Ve,X),Xe=new WebGLShadowMap(ie,Ve,Oe),Ye=new WebGLBufferRenderer(nt,Le,Ie,Oe),Ze=new WebGLIndexedBufferRenderer(nt,Le,Ie,Oe),Ie.programs=We.programs,ie.capabilities=Oe,ie.extensions=Le,ie.properties=Ne,ie.renderLists=He,ie.shadowMap=Xe,ie.state=Pe,ie.info=Ie}initGLContext();const rt=new WebXRManager(ie,nt);function onContextLost(x){x.preventDefault(),U.log("THREE.WebGLRenderer: Context Lost."),oe=!0}function onContextRestore(){U.log("THREE.WebGLRenderer: Context Restored."),oe=!1;const x=Ie.autoReset,w=Xe.enabled,S=Xe.autoUpdate,G=Xe.needsUpdate,z=Xe.type;initGLContext(),Ie.autoReset=x,Xe.enabled=w,Xe.autoUpdate=S,Xe.needsUpdate=G,Xe.type=z}function onMaterialDispose(x){const w=x.target;w.removeEventListener("dispose",onMaterialDispose),function deallocateMaterial(x){(function releaseMaterialProgramReferences(x){const w=Ne.get(x).programs;void 0!==w&&w.forEach((function(x){We.releaseProgram(x)}))})(x),Ne.remove(x)}(w)}this.xr=rt,this.getContext=function(){return nt},this.getContextAttributes=function(){return nt.getContextAttributes()},this.forceContextLoss=function(){const x=Le.get("WEBGL_lose_context");x&&x.loseContext()},this.forceContextRestore=function(){const x=Le.get("WEBGL_lose_context");x&&x.restoreContext()},this.getPixelRatio=function(){return ge},this.setPixelRatio=function(x){void 0!==x&&(ge=x,this.setSize(fe,me,!1))},this.getSize=function(x){return x.set(fe,me)},this.setSize=function(x,S,G){rt.isPresenting?U.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(fe=x,me=S,w.width=Math.floor(x*ge),w.height=Math.floor(S*ge),!1!==G&&(w.style.width=x+"px",w.style.height=S+"px"),this.setViewport(0,0,x,S))},this.getDrawingBufferSize=function(x){return x.set(fe*ge,me*ge).floor()},this.setDrawingBufferSize=function(x,S,U){fe=x,me=S,ge=U,w.width=Math.floor(x*U),w.height=Math.floor(S*U),this.setViewport(0,0,x,S)},this.getCurrentViewport=function(x){return x.copy(he)},this.getViewport=function(x){return x.copy(_e)},this.setViewport=function(x,w,S,U){x.isVector4?_e.set(x.x,x.y,x.z,x.w):_e.set(x,w,S,U),Pe.viewport(he.copy(_e).multiplyScalar(ge).floor())},this.getScissor=function(x){return x.copy(be)},this.setScissor=function(x,w,S,U){x.isVector4?be.set(x.x,x.y,x.z,x.w):be.set(x,w,S,U),Pe.scissor(de.copy(be).multiplyScalar(ge).floor())},this.getScissorTest=function(){return xe},this.setScissorTest=function(x){Pe.setScissorTest(xe=x)},this.setOpaqueSort=function(x){ve=x},this.setTransparentSort=function(x){ye=x},this.getClearColor=function(x){return x.copy(qe.getClearColor())},this.setClearColor=function(){qe.setClearColor.apply(qe,arguments)},this.getClearAlpha=function(){return qe.getClearAlpha()},this.setClearAlpha=function(){qe.setClearAlpha.apply(qe,arguments)},this.clear=function(x,w,S){let U=0;(void 0===x||x)&&(U|=16384),(void 0===w||w)&&(U|=256),(void 0===S||S)&&(U|=1024),nt.clear(U)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){w.removeEventListener("webglcontextlost",onContextLost,!1),w.removeEventListener("webglcontextrestored",onContextRestore,!1),He.dispose(),$e.dispose(),Ne.dispose(),Be.dispose(),De.dispose(),Ve.dispose(),tt.dispose(),rt.dispose(),rt.removeEventListener("sessionstart",onXRSessionStart),rt.removeEventListener("sessionend",onXRSessionEnd),Ce&&(Ce.dispose(),Ce=null),ot.stop()},this.renderBufferImmediate=function(x,w){tt.initAttributes();const S=Ne.get(x);x.hasPositions&&!S.position&&(S.position=nt.createBuffer()),x.hasNormals&&!S.normal&&(S.normal=nt.createBuffer()),x.hasUvs&&!S.uv&&(S.uv=nt.createBuffer()),x.hasColors&&!S.color&&(S.color=nt.createBuffer());const U=w.getAttributes();x.hasPositions&&(nt.bindBuffer(34962,S.position),nt.bufferData(34962,x.positionArray,35048),tt.enableAttribute(U.position.location),nt.vertexAttribPointer(U.position.location,3,5126,!1,0,0)),x.hasNormals&&(nt.bindBuffer(34962,S.normal),nt.bufferData(34962,x.normalArray,35048),tt.enableAttribute(U.normal.location),nt.vertexAttribPointer(U.normal.location,3,5126,!1,0,0)),x.hasUvs&&(nt.bindBuffer(34962,S.uv),nt.bufferData(34962,x.uvArray,35048),tt.enableAttribute(U.uv.location),nt.vertexAttribPointer(U.uv.location,2,5126,!1,0,0)),x.hasColors&&(nt.bindBuffer(34962,S.color),nt.bufferData(34962,x.colorArray,35048),tt.enableAttribute(U.color.location),nt.vertexAttribPointer(U.color.location,3,5126,!1,0,0)),tt.disableUnusedAttributes(),nt.drawArrays(4,0,x.count),x.count=0},this.renderBufferDirect=function(x,w,S,U,G,z){null===w&&(w=Re);const H=G.isMesh&&G.matrixWorld.determinant()<0,j=setProgram(x,w,S,U,G);Pe.setMaterial(U,H);let X=S.index;const q=S.attributes.position;if(null===X){if(void 0===q||0===q.count)return}else if(0===X.count)return;let K,Y=1;!0===U.wireframe&&(X=Ge.getWireframeAttribute(S),Y=2),tt.setup(G,U,j,S,X);let Z=Ye;null!==X&&(K=Ue.get(X),Z=Ze,Z.setIndex(K));const J=null!==X?X.count:q.count,Q=S.drawRange.start*Y,ee=S.drawRange.count*Y,te=null!==z?z.start*Y:0,ne=null!==z?z.count*Y:1/0,re=Math.max(Q,te),ie=Math.min(J,Q+ee,te+ne)-1,oe=Math.max(0,ie-re+1);if(0!==oe){if(G.isMesh)!0===U.wireframe?(Pe.setLineWidth(U.wireframeLinewidth*getTargetPixelRatio()),Z.setMode(1)):Z.setMode(4);else if(G.isLine){let x=U.linewidth;void 0===x&&(x=1),Pe.setLineWidth(x*getTargetPixelRatio()),G.isLineSegments?Z.setMode(1):G.isLineLoop?Z.setMode(2):Z.setMode(3)}else G.isPoints?Z.setMode(0):G.isSprite&&Z.setMode(4);if(G.isInstancedMesh)Z.renderInstances(re,oe,G.count);else if(S.isInstancedBufferGeometry){const x=Math.min(S.instanceCount,S._maxInstanceCount);Z.renderInstances(re,oe,x)}else Z.render(re,oe)}},this.compile=function(x,w){J=$e.get(x),J.init(),re.push(J),x.traverseVisible((function(x){x.isLight&&x.layers.test(w.layers)&&(J.pushLight(x),x.castShadow&&J.pushShadow(x))})),J.setupLights(ie.physicallyCorrectLights),x.traverse((function(w){const S=w.material;if(S)if(Array.isArray(S))for(let U=0;U<S.length;U++){getProgram(S[U],x,w)}else getProgram(S,x,w)})),re.pop(),J=null};let it=null;function onXRSessionStart(){ot.stop()}function onXRSessionEnd(){ot.start()}const ot=new WebGLAnimation;function projectObject(x,w,S,U){if(!1===x.visible)return;if(x.layers.test(w.layers))if(x.isGroup)S=x.renderOrder;else if(x.isLOD)!0===x.autoUpdate&&x.update(w);else if(x.isLight)J.pushLight(x),x.castShadow&&J.pushShadow(x);else if(x.isSprite){if(!x.frustumCulled||we.intersectsSprite(x)){U&&Me.setFromMatrixPosition(x.matrixWorld).applyMatrix4(Ae);const w=Ve.update(x),G=x.material;G.visible&&Z.push(x,w,G,S,Me.z,null)}}else if(x.isImmediateRenderObject)U&&Me.setFromMatrixPosition(x.matrixWorld).applyMatrix4(Ae),Z.push(x,null,x.material,S,Me.z,null);else if((x.isMesh||x.isLine||x.isPoints)&&(x.isSkinnedMesh&&x.skeleton.frame!==Ie.render.frame&&(x.skeleton.update(),x.skeleton.frame=Ie.render.frame),!x.frustumCulled||we.intersectsObject(x))){U&&Me.setFromMatrixPosition(x.matrixWorld).applyMatrix4(Ae);const w=Ve.update(x),G=x.material;if(Array.isArray(G)){const U=w.groups;for(let z=0,H=U.length;z<H;z++){const H=U[z],j=G[H.materialIndex];j&&j.visible&&Z.push(x,w,j,S,Me.z,H)}}else G.visible&&Z.push(x,w,G,S,Me.z,null)}const G=x.children;for(let x=0,z=G.length;x<z;x++)projectObject(G[x],w,S,U)}function renderScene(x,w,S,U){const G=x.opaque,z=x.transmissive,H=x.transparent;J.setupLightsView(S),z.length>0&&function renderTransmissionPass(x,w,S){if(null===Ce){const x=!0===j&&!0===Oe.isWebGL2;Ce=new(x?WebGLMultisampleRenderTarget:WebGLRenderTarget)(1024,1024,{generateMipmaps:!0,type:null!==Qe.convert(yt)?yt:ut,minFilter:lt,magFilter:et,wrapS:Je,wrapT:Je})}const U=ie.getRenderTarget();ie.setRenderTarget(Ce),ie.clear();const G=ie.toneMapping;ie.toneMapping=ke,renderObjects(x,w,S),ie.toneMapping=G,Fe.updateMultisampleRenderTarget(Ce),Fe.updateRenderTargetMipmap(Ce),ie.setRenderTarget(U)}(G,w,S),U&&Pe.viewport(he.copy(U)),G.length>0&&renderObjects(G,w,S),z.length>0&&renderObjects(z,w,S),H.length>0&&renderObjects(H,w,S)}function renderObjects(x,w,S){const U=!0===w.isScene?w.overrideMaterial:null;for(let G=0,z=x.length;G<z;G++){const z=x[G],H=z.object,j=z.geometry,X=null===U?z.material:U,q=z.group;H.layers.test(S.layers)&&renderObject(H,w,S,j,X,q)}}function renderObject(x,w,S,U,G,z){if(x.onBeforeRender(ie,w,S,U,G,z),x.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,x.matrixWorld),x.normalMatrix.getNormalMatrix(x.modelViewMatrix),G.onBeforeRender(ie,w,S,U,x,z),x.isImmediateRenderObject){const z=setProgram(S,w,U,G,x);Pe.setMaterial(G),tt.reset(),function renderObjectImmediate(x,w){x.render((function(x){ie.renderBufferImmediate(x,w)}))}(x,z)}else!0===G.transparent&&G.side===ne?(G.side=te,G.needsUpdate=!0,ie.renderBufferDirect(S,w,U,G,x,z),G.side=ee,G.needsUpdate=!0,ie.renderBufferDirect(S,w,U,G,x,z),G.side=ne):ie.renderBufferDirect(S,w,U,G,x,z);x.onAfterRender(ie,w,S,U,G,z)}function getProgram(x,w,S){!0!==w.isScene&&(w=Re);const U=Ne.get(x),G=J.state.lights,z=J.state.shadowsArray,H=G.state.version,j=We.getParameters(x,G.state,z,w,S),X=We.getProgramCacheKey(j);let q=U.programs;U.environment=x.isMeshStandardMaterial?w.environment:null,U.fog=w.fog,U.envMap=(x.isMeshStandardMaterial?De:Be).get(x.envMap||U.environment),void 0===q&&(x.addEventListener("dispose",onMaterialDispose),q=new Map,U.programs=q);let K=q.get(X);if(void 0!==K){if(U.currentProgram===K&&U.lightsStateVersion===H)return updateCommonMaterialProperties(x,j),K}else j.uniforms=We.getUniforms(x),x.onBuild(j,ie),x.onBeforeCompile(j,ie),K=We.acquireProgram(j,X),q.set(X,K),U.uniforms=j.uniforms;const Y=U.uniforms;(x.isShaderMaterial||x.isRawShaderMaterial)&&!0!==x.clipping||(Y.clippingPlanes=je.uniform),updateCommonMaterialProperties(x,j),U.needsLights=function materialNeedsLights(x){return x.isMeshLambertMaterial||x.isMeshToonMaterial||x.isMeshPhongMaterial||x.isMeshStandardMaterial||x.isShadowMaterial||x.isShaderMaterial&&!0===x.lights}(x),U.lightsStateVersion=H,U.needsLights&&(Y.ambientLightColor.value=G.state.ambient,Y.lightProbe.value=G.state.probe,Y.directionalLights.value=G.state.directional,Y.directionalLightShadows.value=G.state.directionalShadow,Y.spotLights.value=G.state.spot,Y.spotLightShadows.value=G.state.spotShadow,Y.rectAreaLights.value=G.state.rectArea,Y.ltc_1.value=G.state.rectAreaLTC1,Y.ltc_2.value=G.state.rectAreaLTC2,Y.pointLights.value=G.state.point,Y.pointLightShadows.value=G.state.pointShadow,Y.hemisphereLights.value=G.state.hemi,Y.directionalShadowMap.value=G.state.directionalShadowMap,Y.directionalShadowMatrix.value=G.state.directionalShadowMatrix,Y.spotShadowMap.value=G.state.spotShadowMap,Y.spotShadowMatrix.value=G.state.spotShadowMatrix,Y.pointShadowMap.value=G.state.pointShadowMap,Y.pointShadowMatrix.value=G.state.pointShadowMatrix);const Z=K.getUniforms(),Q=WebGLUniforms.seqWithValue(Z.seq,Y);return U.currentProgram=K,U.uniformsList=Q,K}function updateCommonMaterialProperties(x,w){const S=Ne.get(x);S.outputEncoding=w.outputEncoding,S.instancing=w.instancing,S.skinning=w.skinning,S.morphTargets=w.morphTargets,S.morphNormals=w.morphNormals,S.morphTargetsCount=w.morphTargetsCount,S.numClippingPlanes=w.numClippingPlanes,S.numIntersection=w.numClipIntersection,S.vertexAlphas=w.vertexAlphas,S.vertexTangents=w.vertexTangents}function setProgram(x,w,S,U,G){!0!==w.isScene&&(w=Re),Fe.resetTextureUnits();const z=w.fog,H=U.isMeshStandardMaterial?w.environment:null,j=null===le?ie.outputEncoding:le.texture.encoding,X=(U.isMeshStandardMaterial?De:Be).get(U.envMap||H),q=!0===U.vertexColors&&!!S&&!!S.attributes.color&&4===S.attributes.color.itemSize,K=!!U.normalMap&&!!S&&!!S.attributes.tangent,Y=!!S&&!!S.morphAttributes.position,Z=!!S&&!!S.morphAttributes.normal,Q=S&&S.morphAttributes.position?S.morphAttributes.position.length:0,ee=Ne.get(U),te=J.state.lights;if(!0===Se&&(!0===Te||x!==ue)){const w=x===ue&&U.id===ce;je.setState(U,x,w)}let ne=!1;U.version===ee.__version?ee.needsLights&&ee.lightsStateVersion!==te.state.version||ee.outputEncoding!==j||G.isInstancedMesh&&!1===ee.instancing?ne=!0:G.isInstancedMesh||!0!==ee.instancing?G.isSkinnedMesh&&!1===ee.skinning?ne=!0:G.isSkinnedMesh||!0!==ee.skinning?ee.envMap!==X||U.fog&&ee.fog!==z?ne=!0:void 0===ee.numClippingPlanes||ee.numClippingPlanes===je.numPlanes&&ee.numIntersection===je.numIntersection?(ee.vertexAlphas!==q||ee.vertexTangents!==K||ee.morphTargets!==Y||ee.morphNormals!==Z||!0===Oe.isWebGL2&&ee.morphTargetsCount!==Q)&&(ne=!0):ne=!0:ne=!0:ne=!0:(ne=!0,ee.__version=U.version);let re=ee.currentProgram;!0===ne&&(re=getProgram(U,w,G));let oe=!1,ae=!1,se=!1;const he=re.getUniforms(),de=ee.uniforms;if(Pe.useProgram(re.program)&&(oe=!0,ae=!0,se=!0),U.id!==ce&&(ce=U.id,ae=!0),oe||ue!==x){if(he.setValue(nt,"projectionMatrix",x.projectionMatrix),Oe.logarithmicDepthBuffer&&he.setValue(nt,"logDepthBufFC",2/(Math.log(x.far+1)/Math.LN2)),ue!==x&&(ue=x,ae=!0,se=!0),U.isShaderMaterial||U.isMeshPhongMaterial||U.isMeshToonMaterial||U.isMeshStandardMaterial||U.envMap){const w=he.map.cameraPosition;void 0!==w&&w.setValue(nt,Me.setFromMatrixPosition(x.matrixWorld))}(U.isMeshPhongMaterial||U.isMeshToonMaterial||U.isMeshLambertMaterial||U.isMeshBasicMaterial||U.isMeshStandardMaterial||U.isShaderMaterial)&&he.setValue(nt,"isOrthographic",!0===x.isOrthographicCamera),(U.isMeshPhongMaterial||U.isMeshToonMaterial||U.isMeshLambertMaterial||U.isMeshBasicMaterial||U.isMeshStandardMaterial||U.isShaderMaterial||U.isShadowMaterial||G.isSkinnedMesh)&&he.setValue(nt,"viewMatrix",x.matrixWorldInverse)}if(G.isSkinnedMesh){he.setOptional(nt,G,"bindMatrix"),he.setOptional(nt,G,"bindMatrixInverse");const x=G.skeleton;x&&(Oe.floatVertexTextures?(null===x.boneTexture&&x.computeBoneTexture(),he.setValue(nt,"boneTexture",x.boneTexture,Fe),he.setValue(nt,"boneTextureSize",x.boneTextureSize)):he.setOptional(nt,x,"boneMatrices"))}return!S||void 0===S.morphAttributes.position&&void 0===S.morphAttributes.normal||Ke.update(G,S,U,re),(ae||ee.receiveShadow!==G.receiveShadow)&&(ee.receiveShadow=G.receiveShadow,he.setValue(nt,"receiveShadow",G.receiveShadow)),ae&&(he.setValue(nt,"toneMappingExposure",ie.toneMappingExposure),ee.needsLights&&function markUniformsLightsNeedsUpdate(x,w){x.ambientLightColor.needsUpdate=w,x.lightProbe.needsUpdate=w,x.directionalLights.needsUpdate=w,x.directionalLightShadows.needsUpdate=w,x.pointLights.needsUpdate=w,x.pointLightShadows.needsUpdate=w,x.spotLights.needsUpdate=w,x.spotLightShadows.needsUpdate=w,x.rectAreaLights.needsUpdate=w,x.hemisphereLights.needsUpdate=w}(de,se),z&&U.fog&&ze.refreshFogUniforms(de,z),ze.refreshMaterialUniforms(de,U,ge,me,Ce),WebGLUniforms.upload(nt,ee.uniformsList,de,Fe)),U.isShaderMaterial&&!0===U.uniformsNeedUpdate&&(WebGLUniforms.upload(nt,ee.uniformsList,de,Fe),U.uniformsNeedUpdate=!1),U.isSpriteMaterial&&he.setValue(nt,"center",G.center),he.setValue(nt,"modelViewMatrix",G.modelViewMatrix),he.setValue(nt,"normalMatrix",G.normalMatrix),he.setValue(nt,"modelMatrix",G.matrixWorld),re}ot.setAnimationLoop((function onAnimationFrame(x){it&&it(x)})),"undefined"!=typeof window&&ot.setContext(window),this.setAnimationLoop=function(x){it=x,rt.setAnimationLoop(x),null===x?ot.stop():ot.start()},rt.addEventListener("sessionstart",onXRSessionStart),rt.addEventListener("sessionend",onXRSessionEnd),this.render=function(x,w){if(void 0!==w&&!0!==w.isCamera)return void U.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===oe)return;!0===x.autoUpdate&&x.updateMatrixWorld(),null===w.parent&&w.updateMatrixWorld(),!0===rt.enabled&&!0===rt.isPresenting&&(!0===rt.cameraAutoUpdate&&rt.updateCamera(w),w=rt.getCamera()),!0===x.isScene&&x.onBeforeRender(ie,x,w,le),J=$e.get(x,re.length),J.init(),re.push(J),Ae.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),we.setFromProjectionMatrix(Ae),Te=this.localClippingEnabled,Se=je.init(this.clippingPlanes,Te,w),Z=He.get(x,Q.length),Z.init(),Q.push(Z),projectObject(x,w,0,ie.sortObjects),Z.finish(),!0===ie.sortObjects&&Z.sort(ve,ye),!0===Se&&je.beginShadows();const S=J.state.shadowsArray;if(Xe.render(S,x,w),!0===Se&&je.endShadows(),!0===this.info.autoReset&&this.info.reset(),qe.render(Z,x),J.setupLights(ie.physicallyCorrectLights),w.isArrayCamera){const S=w.cameras;for(let w=0,U=S.length;w<U;w++){const U=S[w];renderScene(Z,x,U,U.viewport)}}else renderScene(Z,x,w);null!==le&&(Fe.updateMultisampleRenderTarget(le),Fe.updateRenderTargetMipmap(le)),!0===x.isScene&&x.onAfterRender(ie,x,w),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1),tt.resetDefaultState(),ce=-1,ue=null,re.pop(),J=re.length>0?re[re.length-1]:null,Q.pop(),Z=Q.length>0?Q[Q.length-1]:null},this.getActiveCubeFace=function(){return ae},this.getActiveMipmapLevel=function(){return se},this.getRenderTarget=function(){return le},this.setRenderTarget=function(x,w=0,S=0){le=x,ae=w,se=S,x&&void 0===Ne.get(x).__webglFramebuffer&&Fe.setupRenderTarget(x);let U=null,G=!1,z=!1;if(x){const S=x.texture;(S.isDataTexture3D||S.isDataTexture2DArray)&&(z=!0);const H=Ne.get(x).__webglFramebuffer;x.isWebGLCubeRenderTarget?(U=H[w],G=!0):U=x.isWebGLMultisampleRenderTarget?Ne.get(x).__webglMultisampledFramebuffer:H,he.copy(x.viewport),de.copy(x.scissor),pe=x.scissorTest}else he.copy(_e).multiplyScalar(ge).floor(),de.copy(be).multiplyScalar(ge).floor(),pe=xe;if(Pe.bindFramebuffer(36160,U)&&Oe.drawBuffers){let w=!1;if(x)if(x.isWebGLMultipleRenderTargets){const S=x.texture;if(Ee.length!==S.length||36064!==Ee[0]){for(let x=0,w=S.length;x<w;x++)Ee[x]=36064+x;Ee.length=S.length,w=!0}}else 1===Ee.length&&36064===Ee[0]||(Ee[0]=36064,Ee.length=1,w=!0);else 1===Ee.length&&1029===Ee[0]||(Ee[0]=1029,Ee.length=1,w=!0);w&&(Oe.isWebGL2?nt.drawBuffers(Ee):Le.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ee))}if(Pe.viewport(he),Pe.scissor(de),Pe.setScissorTest(pe),G){const U=Ne.get(x.texture);nt.framebufferTexture2D(36160,36064,34069+w,U.__webglTexture,S)}else if(z){const U=Ne.get(x.texture),G=w||0;nt.framebufferTextureLayer(36160,36064,U.__webglTexture,S||0,G)}ce=-1},this.readRenderTargetPixels=function(x,w,S,G,z,H,j){if(!x||!x.isWebGLRenderTarget)return void U.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let X=Ne.get(x).__webglFramebuffer;if(x.isWebGLCubeRenderTarget&&void 0!==j&&(X=X[j]),X){Pe.bindFramebuffer(36160,X);try{const j=x.texture,X=j.format,q=j.type;if(X!==Tt&&Qe.convert(X)!==nt.getParameter(35739))return void U.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const K=q===yt&&(Le.has("EXT_color_buffer_half_float")||Oe.isWebGL2&&Le.has("EXT_color_buffer_float"));if(!(q===ut||Qe.convert(q)===nt.getParameter(35738)||q===vt&&(Oe.isWebGL2||Le.has("OES_texture_float")||Le.has("WEBGL_color_buffer_float"))||K))return void U.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===nt.checkFramebufferStatus(36160)?w>=0&&w<=x.width-G&&S>=0&&S<=x.height-z&&nt.readPixels(w,S,G,z,Qe.convert(X),Qe.convert(q),H):U.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const x=null!==le?Ne.get(le).__webglFramebuffer:null;Pe.bindFramebuffer(36160,x)}}},this.copyFramebufferToTexture=function(x,w,S=0){const U=Math.pow(2,-S),G=Math.floor(w.image.width*U),z=Math.floor(w.image.height*U);let H=Qe.convert(w.format);Oe.isWebGL2&&(6407===H&&(H=32849),6408===H&&(H=32856)),Fe.setTexture2D(w,0),nt.copyTexImage2D(3553,S,H,x.x,x.y,G,z,0),Pe.unbindTexture()},this.copyTextureToTexture=function(x,w,S,U=0){const G=w.image.width,z=w.image.height,H=Qe.convert(S.format),j=Qe.convert(S.type);Fe.setTexture2D(S,0),nt.pixelStorei(37440,S.flipY),nt.pixelStorei(37441,S.premultiplyAlpha),nt.pixelStorei(3317,S.unpackAlignment),w.isDataTexture?nt.texSubImage2D(3553,U,x.x,x.y,G,z,H,j,w.image.data):w.isCompressedTexture?nt.compressedTexSubImage2D(3553,U,x.x,x.y,w.mipmaps[0].width,w.mipmaps[0].height,H,w.mipmaps[0].data):nt.texSubImage2D(3553,U,x.x,x.y,H,j,w.image),0===U&&S.generateMipmaps&&nt.generateMipmap(3553),Pe.unbindTexture()},this.copyTextureToTexture3D=function(x,w,S,G,z=0){if(ie.isWebGL1Renderer)return void U.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const H=x.max.x-x.min.x+1,j=x.max.y-x.min.y+1,X=x.max.z-x.min.z+1,q=Qe.convert(G.format),K=Qe.convert(G.type);let Y;if(G.isDataTexture3D)Fe.setTexture3D(G,0),Y=32879;else{if(!G.isDataTexture2DArray)return void U.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Fe.setTexture2DArray(G,0),Y=35866}nt.pixelStorei(37440,G.flipY),nt.pixelStorei(37441,G.premultiplyAlpha),nt.pixelStorei(3317,G.unpackAlignment);const Z=nt.getParameter(3314),J=nt.getParameter(32878),Q=nt.getParameter(3316),ee=nt.getParameter(3315),te=nt.getParameter(32877),ne=S.isCompressedTexture?S.mipmaps[0]:S.image;nt.pixelStorei(3314,ne.width),nt.pixelStorei(32878,ne.height),nt.pixelStorei(3316,x.min.x),nt.pixelStorei(3315,x.min.y),nt.pixelStorei(32877,x.min.z),S.isDataTexture||S.isDataTexture3D?nt.texSubImage3D(Y,z,w.x,w.y,w.z,H,j,X,q,K,ne.data):S.isCompressedTexture?(U.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),nt.compressedTexSubImage3D(Y,z,w.x,w.y,w.z,H,j,X,q,ne.data)):nt.texSubImage3D(Y,z,w.x,w.y,w.z,H,j,X,q,K,ne),nt.pixelStorei(3314,Z),nt.pixelStorei(32878,J),nt.pixelStorei(3316,Q),nt.pixelStorei(3315,ee),nt.pixelStorei(32877,te),0===z&&G.generateMipmaps&&nt.generateMipmap(Y),Pe.unbindTexture()},this.initTexture=function(x){Fe.setTexture2D(x,0),Pe.unbindTexture()},this.resetState=function(){ae=0,se=0,le=null,Pe.reset(),tt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(x,w=25e-5){this.name="",this.color=new Color(x),this.density=w}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}FogExp2.prototype.isFogExp2=!0;class Fog{constructor(x,w=1,S=1e3){this.name="",this.color=new Color(x),this.near=w,this.far=S}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Fog.prototype.isFog=!0;class Scene extends Object3D{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(x,w){return super.copy(x,w),null!==x.background&&(this.background=x.background.clone()),null!==x.environment&&(this.environment=x.environment.clone()),null!==x.fog&&(this.fog=x.fog.clone()),null!==x.overrideMaterial&&(this.overrideMaterial=x.overrideMaterial.clone()),this.autoUpdate=x.autoUpdate,this.matrixAutoUpdate=x.matrixAutoUpdate,this}toJSON(x){const w=super.toJSON(x);return null!==this.fog&&(w.object.fog=this.fog.toJSON()),w}}Scene.prototype.isScene=!0;class InterleavedBuffer{constructor(x,w){this.array=x,this.stride=w,this.count=void 0!==x?x.length/w:0,this.usage=Sr,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(x){!0===x&&this.version++}setUsage(x){return this.usage=x,this}copy(x){return this.array=new x.array.constructor(x.array),this.count=x.count,this.stride=x.stride,this.usage=x.usage,this}copyAt(x,w,S){x*=this.stride,S*=w.stride;for(let U=0,G=this.stride;U<G;U++)this.array[x+U]=w.array[S+U];return this}set(x,w=0){return this.array.set(x,w),this}clone(x){void 0===x.arrayBuffers&&(x.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===x.arrayBuffers[this.array.buffer._uuid]&&(x.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const w=new this.array.constructor(x.arrayBuffers[this.array.buffer._uuid]),S=new this.constructor(w,this.stride);return S.setUsage(this.usage),S}onUpload(x){return this.onUploadCallback=x,this}toJSON(x){return void 0===x.arrayBuffers&&(x.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===x.arrayBuffers[this.array.buffer._uuid]&&(x.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}InterleavedBuffer.prototype.isInterleavedBuffer=!0;const ya=new Vector3;class InterleavedBufferAttribute{constructor(x,w,S,U=!1){this.name="",this.data=x,this.itemSize=w,this.offset=S,this.normalized=!0===U}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(x){this.data.needsUpdate=x}applyMatrix4(x){for(let w=0,S=this.data.count;w<S;w++)ya.x=this.getX(w),ya.y=this.getY(w),ya.z=this.getZ(w),ya.applyMatrix4(x),this.setXYZ(w,ya.x,ya.y,ya.z);return this}applyNormalMatrix(x){for(let w=0,S=this.count;w<S;w++)ya.x=this.getX(w),ya.y=this.getY(w),ya.z=this.getZ(w),ya.applyNormalMatrix(x),this.setXYZ(w,ya.x,ya.y,ya.z);return this}transformDirection(x){for(let w=0,S=this.count;w<S;w++)ya.x=this.getX(w),ya.y=this.getY(w),ya.z=this.getZ(w),ya.transformDirection(x),this.setXYZ(w,ya.x,ya.y,ya.z);return this}setX(x,w){return this.data.array[x*this.data.stride+this.offset]=w,this}setY(x,w){return this.data.array[x*this.data.stride+this.offset+1]=w,this}setZ(x,w){return this.data.array[x*this.data.stride+this.offset+2]=w,this}setW(x,w){return this.data.array[x*this.data.stride+this.offset+3]=w,this}getX(x){return this.data.array[x*this.data.stride+this.offset]}getY(x){return this.data.array[x*this.data.stride+this.offset+1]}getZ(x){return this.data.array[x*this.data.stride+this.offset+2]}getW(x){return this.data.array[x*this.data.stride+this.offset+3]}setXY(x,w,S){return x=x*this.data.stride+this.offset,this.data.array[x+0]=w,this.data.array[x+1]=S,this}setXYZ(x,w,S,U){return x=x*this.data.stride+this.offset,this.data.array[x+0]=w,this.data.array[x+1]=S,this.data.array[x+2]=U,this}setXYZW(x,w,S,U,G){return x=x*this.data.stride+this.offset,this.data.array[x+0]=w,this.data.array[x+1]=S,this.data.array[x+2]=U,this.data.array[x+3]=G,this}clone(x){if(void 0===x){U.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const x=[];for(let w=0;w<this.count;w++){const S=w*this.data.stride+this.offset;for(let w=0;w<this.itemSize;w++)x.push(this.data.array[S+w])}return new BufferAttribute(new this.array.constructor(x),this.itemSize,this.normalized)}return void 0===x.interleavedBuffers&&(x.interleavedBuffers={}),void 0===x.interleavedBuffers[this.data.uuid]&&(x.interleavedBuffers[this.data.uuid]=this.data.clone(x)),new InterleavedBufferAttribute(x.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(x){if(void 0===x){U.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const x=[];for(let w=0;w<this.count;w++){const S=w*this.data.stride+this.offset;for(let w=0;w<this.itemSize;w++)x.push(this.data.array[S+w])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:x,normalized:this.normalized}}return void 0===x.interleavedBuffers&&(x.interleavedBuffers={}),void 0===x.interleavedBuffers[this.data.uuid]&&(x.interleavedBuffers[this.data.uuid]=this.data.toJSON(x)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}InterleavedBufferAttribute.prototype.isInterleavedBufferAttribute=!0;class SpriteMaterial extends Material{constructor(x){super(),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(x)}copy(x){return super.copy(x),this.color.copy(x.color),this.map=x.map,this.alphaMap=x.alphaMap,this.rotation=x.rotation,this.sizeAttenuation=x.sizeAttenuation,this}}let _a;SpriteMaterial.prototype.isSpriteMaterial=!0;const ba=new Vector3,xa=new Vector3,Ea=new Vector3,wa=new Vector2,Sa=new Vector2,Ta=new Matrix4,Ca=new Vector3,Aa=new Vector3,Ma=new Vector3,Ra=new Vector2,La=new Vector2,Oa=new Vector2;class Sprite extends Object3D{constructor(x){if(super(),this.type="Sprite",void 0===_a){_a=new BufferGeometry;const x=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),w=new InterleavedBuffer(x,5);_a.setIndex([0,1,2,0,2,3]),_a.setAttribute("position",new InterleavedBufferAttribute(w,3,0,!1)),_a.setAttribute("uv",new InterleavedBufferAttribute(w,2,3,!1))}this.geometry=_a,this.material=void 0!==x?x:new SpriteMaterial,this.center=new Vector2(.5,.5)}raycast(x,w){null===x.camera&&U.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xa.setFromMatrixScale(this.matrixWorld),Ta.copy(x.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(x.camera.matrixWorldInverse,this.matrixWorld),Ea.setFromMatrixPosition(this.modelViewMatrix),x.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&xa.multiplyScalar(-Ea.z);const S=this.material.rotation;let G,z;0!==S&&(z=Math.cos(S),G=Math.sin(S));const H=this.center;transformVertex(Ca.set(-.5,-.5,0),Ea,H,xa,G,z),transformVertex(Aa.set(.5,-.5,0),Ea,H,xa,G,z),transformVertex(Ma.set(.5,.5,0),Ea,H,xa,G,z),Ra.set(0,0),La.set(1,0),Oa.set(1,1);let j=x.ray.intersectTriangle(Ca,Aa,Ma,!1,ba);if(null===j&&(transformVertex(Aa.set(-.5,.5,0),Ea,H,xa,G,z),La.set(0,1),j=x.ray.intersectTriangle(Ca,Ma,Aa,!1,ba),null===j))return;const X=x.ray.origin.distanceTo(ba);X<x.near||X>x.far||w.push({distance:X,point:ba.clone(),uv:Triangle.getUV(ba,Ca,Aa,Ma,Ra,La,Oa,new Vector2),face:null,object:this})}copy(x){return super.copy(x),void 0!==x.center&&this.center.copy(x.center),this.material=x.material,this}}function transformVertex(x,w,S,U,G,z){wa.subVectors(x,S).addScalar(.5).multiply(U),void 0!==G?(Sa.x=z*wa.x-G*wa.y,Sa.y=G*wa.x+z*wa.y):Sa.copy(wa),x.copy(w),x.x+=Sa.x,x.y+=Sa.y,x.applyMatrix4(Ta)}Sprite.prototype.isSprite=!0;const Pa=new Vector3,Ia=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(x){super.copy(x,!1);const w=x.levels;for(let x=0,S=w.length;x<S;x++){const S=w[x];this.addLevel(S.object.clone(),S.distance)}return this.autoUpdate=x.autoUpdate,this}addLevel(x,w=0){w=Math.abs(w);const S=this.levels;let U;for(U=0;U<S.length&&!(w<S[U].distance);U++);return S.splice(U,0,{distance:w,object:x}),this.add(x),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(x){const w=this.levels;if(w.length>0){let S,U;for(S=1,U=w.length;S<U&&!(x<w[S].distance);S++);return w[S-1].object}return null}raycast(x,w){if(this.levels.length>0){Pa.setFromMatrixPosition(this.matrixWorld);const S=x.ray.origin.distanceTo(Pa);this.getObjectForDistance(S).raycast(x,w)}}update(x){const w=this.levels;if(w.length>1){Pa.setFromMatrixPosition(x.matrixWorld),Ia.setFromMatrixPosition(this.matrixWorld);const S=Pa.distanceTo(Ia)/x.zoom;let U,G;for(w[0].object.visible=!0,U=1,G=w.length;U<G&&S>=w[U].distance;U++)w[U-1].object.visible=!1,w[U].object.visible=!0;for(this._currentLevel=U-1;U<G;U++)w[U].object.visible=!1}}toJSON(x){const w=super.toJSON(x);!1===this.autoUpdate&&(w.object.autoUpdate=!1),w.object.levels=[];const S=this.levels;for(let x=0,U=S.length;x<U;x++){const U=S[x];w.object.levels.push({object:U.object.uuid,distance:U.distance})}return w}}const Na=new Vector3,Fa=new Vector4,Ba=new Vector4,Da=new Vector3,ka=new Matrix4;class SkinnedMesh extends Mesh{constructor(x,w){super(x,w),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}copy(x){return super.copy(x),this.bindMode=x.bindMode,this.bindMatrix.copy(x.bindMatrix),this.bindMatrixInverse.copy(x.bindMatrixInverse),this.skeleton=x.skeleton,this}bind(x,w){this.skeleton=x,void 0===w&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),w=this.matrixWorld),this.bindMatrix.copy(w),this.bindMatrixInverse.copy(w).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const x=new Vector4,w=this.geometry.attributes.skinWeight;for(let S=0,U=w.count;S<U;S++){x.x=w.getX(S),x.y=w.getY(S),x.z=w.getZ(S),x.w=w.getW(S);const U=1/x.manhattanLength();U!==1/0?x.multiplyScalar(U):x.set(1,0,0,0),w.setXYZW(S,x.x,x.y,x.z,x.w)}}updateMatrixWorld(x){super.updateMatrixWorld(x),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():U.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(x,w){const S=this.skeleton,U=this.geometry;Fa.fromBufferAttribute(U.attributes.skinIndex,x),Ba.fromBufferAttribute(U.attributes.skinWeight,x),Na.copy(w).applyMatrix4(this.bindMatrix),w.set(0,0,0);for(let x=0;x<4;x++){const U=Ba.getComponent(x);if(0!==U){const G=Fa.getComponent(x);ka.multiplyMatrices(S.bones[G].matrixWorld,S.boneInverses[G]),w.addScaledVector(Da.copy(Na).applyMatrix4(ka),U)}}return w.applyMatrix4(this.bindMatrixInverse)}}SkinnedMesh.prototype.isSkinnedMesh=!0;class Bone extends Object3D{constructor(){super(),this.type="Bone"}}Bone.prototype.isBone=!0;class DataTexture extends Texture{constructor(x=null,w=1,S=1,U,G,z,H,j,X=et,q=et,K,Y){super(null,z,H,j,X,q,U,G,K,Y),this.image={data:x,width:w,height:S},this.magFilter=X,this.minFilter=q,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}DataTexture.prototype.isDataTexture=!0;const Ua=new Matrix4,Ga=new Matrix4;class Skeleton{constructor(x=[],w=[]){this.uuid=generateUUID(),this.bones=x.slice(0),this.boneInverses=w,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const x=this.bones,w=this.boneInverses;if(this.boneMatrices=new Float32Array(16*x.length),0===w.length)this.calculateInverses();else if(x.length!==w.length){U.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let x=0,w=this.bones.length;x<w;x++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let x=0,w=this.bones.length;x<w;x++){const w=new Matrix4;this.bones[x]&&w.copy(this.bones[x].matrixWorld).invert(),this.boneInverses.push(w)}}pose(){for(let x=0,w=this.bones.length;x<w;x++){const w=this.bones[x];w&&w.matrixWorld.copy(this.boneInverses[x]).invert()}for(let x=0,w=this.bones.length;x<w;x++){const w=this.bones[x];w&&(w.parent&&w.parent.isBone?(w.matrix.copy(w.parent.matrixWorld).invert(),w.matrix.multiply(w.matrixWorld)):w.matrix.copy(w.matrixWorld),w.matrix.decompose(w.position,w.quaternion,w.scale))}}update(){const x=this.bones,w=this.boneInverses,S=this.boneMatrices,U=this.boneTexture;for(let U=0,G=x.length;U<G;U++){const G=x[U]?x[U].matrixWorld:Ga;Ua.multiplyMatrices(G,w[U]),Ua.toArray(S,16*U)}null!==U&&(U.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let x=Math.sqrt(4*this.bones.length);x=ceilPowerOfTwo(x),x=Math.max(x,4);const w=new Float32Array(x*x*4);w.set(this.boneMatrices);const S=new DataTexture(w,x,x,Tt,vt);return this.boneMatrices=w,this.boneTexture=S,this.boneTextureSize=x,this}getBoneByName(x){for(let w=0,S=this.bones.length;w<S;w++){const S=this.bones[w];if(S.name===x)return S}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(x,w){this.uuid=x.uuid;for(let S=0,G=x.bones.length;S<G;S++){const G=x.bones[S];let z=w[G];void 0===z&&(U.warn("THREE.Skeleton: No bone found with UUID:",G),z=new Bone),this.bones.push(z),this.boneInverses.push((new Matrix4).fromArray(x.boneInverses[S]))}return this.init(),this}toJSON(){const x={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};x.uuid=this.uuid;const w=this.bones,S=this.boneInverses;for(let U=0,G=w.length;U<G;U++){const G=w[U];x.bones.push(G.uuid);const z=S[U];x.boneInverses.push(z.toArray())}return x}}class InstancedBufferAttribute extends BufferAttribute{constructor(x,w,S,G=1){"number"==typeof S&&(G=S,S=!1,U.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(x,w,S),this.meshPerAttribute=G}copy(x){return super.copy(x),this.meshPerAttribute=x.meshPerAttribute,this}toJSON(){const x=super.toJSON();return x.meshPerAttribute=this.meshPerAttribute,x.isInstancedBufferAttribute=!0,x}}InstancedBufferAttribute.prototype.isInstancedBufferAttribute=!0;const Va=new Matrix4,Wa=new Matrix4,za=[],Ha=new Mesh;class InstancedMesh extends Mesh{constructor(x,w,S){super(x,w),this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(16*S),16),this.instanceColor=null,this.count=S,this.frustumCulled=!1}copy(x){return super.copy(x),this.instanceMatrix.copy(x.instanceMatrix),null!==x.instanceColor&&(this.instanceColor=x.instanceColor.clone()),this.count=x.count,this}getColorAt(x,w){w.fromArray(this.instanceColor.array,3*x)}getMatrixAt(x,w){w.fromArray(this.instanceMatrix.array,16*x)}raycast(x,w){const S=this.matrixWorld,U=this.count;if(Ha.geometry=this.geometry,Ha.material=this.material,void 0!==Ha.material)for(let G=0;G<U;G++){this.getMatrixAt(G,Va),Wa.multiplyMatrices(S,Va),Ha.matrixWorld=Wa,Ha.raycast(x,za);for(let x=0,S=za.length;x<S;x++){const S=za[x];S.instanceId=G,S.object=this,w.push(S)}za.length=0}}setColorAt(x,w){null===this.instanceColor&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(3*this.instanceMatrix.count),3)),w.toArray(this.instanceColor.array,3*x)}setMatrixAt(x,w){w.toArray(this.instanceMatrix.array,16*x)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}InstancedMesh.prototype.isInstancedMesh=!0;class LineBasicMaterial extends Material{constructor(x){super(),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(x)}copy(x){return super.copy(x),this.color.copy(x.color),this.linewidth=x.linewidth,this.linecap=x.linecap,this.linejoin=x.linejoin,this}}LineBasicMaterial.prototype.isLineBasicMaterial=!0;const $a=new Vector3,ja=new Vector3,Xa=new Matrix4,qa=new Ray,Ka=new Sphere;class Line extends Object3D{constructor(x=new BufferGeometry,w=new LineBasicMaterial){super(),this.type="Line",this.geometry=x,this.material=w,this.updateMorphTargets()}copy(x){return super.copy(x),this.material=x.material,this.geometry=x.geometry,this}computeLineDistances(){const x=this.geometry;if(x.isBufferGeometry)if(null===x.index){const w=x.attributes.position,S=[0];for(let x=1,U=w.count;x<U;x++)$a.fromBufferAttribute(w,x-1),ja.fromBufferAttribute(w,x),S[x]=S[x-1],S[x]+=$a.distanceTo(ja);x.setAttribute("lineDistance",new Float32BufferAttribute(S,1))}else U.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else x.isGeometry&&U.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(x,w){const S=this.geometry,G=this.matrixWorld,z=x.params.Line.threshold,H=S.drawRange;if(null===S.boundingSphere&&S.computeBoundingSphere(),Ka.copy(S.boundingSphere),Ka.applyMatrix4(G),Ka.radius+=z,!1===x.ray.intersectsSphere(Ka))return;Xa.copy(G).invert(),qa.copy(x.ray).applyMatrix4(Xa);const j=z/((this.scale.x+this.scale.y+this.scale.z)/3),X=j*j,q=new Vector3,K=new Vector3,Y=new Vector3,Z=new Vector3,J=this.isLineSegments?2:1;if(S.isBufferGeometry){const U=S.index,G=S.attributes.position;if(null!==U){for(let S=Math.max(0,H.start),z=Math.min(U.count,H.start+H.count)-1;S<z;S+=J){const z=U.getX(S),H=U.getX(S+1);q.fromBufferAttribute(G,z),K.fromBufferAttribute(G,H);if(qa.distanceSqToSegment(q,K,Z,Y)>X)continue;Z.applyMatrix4(this.matrixWorld);const j=x.ray.origin.distanceTo(Z);j<x.near||j>x.far||w.push({distance:j,point:Y.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{for(let S=Math.max(0,H.start),U=Math.min(G.count,H.start+H.count)-1;S<U;S+=J){q.fromBufferAttribute(G,S),K.fromBufferAttribute(G,S+1);if(qa.distanceSqToSegment(q,K,Z,Y)>X)continue;Z.applyMatrix4(this.matrixWorld);const U=x.ray.origin.distanceTo(Z);U<x.near||U>x.far||w.push({distance:U,point:Y.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}else S.isGeometry&&U.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const x=this.geometry;if(x.isBufferGeometry){const w=x.morphAttributes,S=Object.keys(w);if(S.length>0){const x=w[S[0]];if(void 0!==x){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let w=0,S=x.length;w<S;w++){const S=x[w].name||String(w);this.morphTargetInfluences.push(0),this.morphTargetDictionary[S]=w}}}}else{const w=x.morphTargets;void 0!==w&&w.length>0&&U.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Line.prototype.isLine=!0;const Ya=new Vector3,Za=new Vector3;class LineSegments extends Line{constructor(x,w){super(x,w),this.type="LineSegments"}computeLineDistances(){const x=this.geometry;if(x.isBufferGeometry)if(null===x.index){const w=x.attributes.position,S=[];for(let x=0,U=w.count;x<U;x+=2)Ya.fromBufferAttribute(w,x),Za.fromBufferAttribute(w,x+1),S[x]=0===x?0:S[x-1],S[x+1]=S[x]+Ya.distanceTo(Za);x.setAttribute("lineDistance",new Float32BufferAttribute(S,1))}else U.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else x.isGeometry&&U.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}LineSegments.prototype.isLineSegments=!0;class LineLoop extends Line{constructor(x,w){super(x,w),this.type="LineLoop"}}LineLoop.prototype.isLineLoop=!0;class PointsMaterial extends Material{constructor(x){super(),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(x)}copy(x){return super.copy(x),this.color.copy(x.color),this.map=x.map,this.alphaMap=x.alphaMap,this.size=x.size,this.sizeAttenuation=x.sizeAttenuation,this}}PointsMaterial.prototype.isPointsMaterial=!0;const Ja=new Matrix4,Qa=new Ray,es=new Sphere,ts=new Vector3;class Points extends Object3D{constructor(x=new BufferGeometry,w=new PointsMaterial){super(),this.type="Points",this.geometry=x,this.material=w,this.updateMorphTargets()}copy(x){return super.copy(x),this.material=x.material,this.geometry=x.geometry,this}raycast(x,w){const S=this.geometry,G=this.matrixWorld,z=x.params.Points.threshold,H=S.drawRange;if(null===S.boundingSphere&&S.computeBoundingSphere(),es.copy(S.boundingSphere),es.applyMatrix4(G),es.radius+=z,!1===x.ray.intersectsSphere(es))return;Ja.copy(G).invert(),Qa.copy(x.ray).applyMatrix4(Ja);const j=z/((this.scale.x+this.scale.y+this.scale.z)/3),X=j*j;if(S.isBufferGeometry){const U=S.index,z=S.attributes.position;if(null!==U){for(let S=Math.max(0,H.start),j=Math.min(U.count,H.start+H.count);S<j;S++){const H=U.getX(S);ts.fromBufferAttribute(z,H),testPoint(ts,H,X,G,x,w,this)}}else{for(let S=Math.max(0,H.start),U=Math.min(z.count,H.start+H.count);S<U;S++)ts.fromBufferAttribute(z,S),testPoint(ts,S,X,G,x,w,this)}}else U.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const x=this.geometry;if(x.isBufferGeometry){const w=x.morphAttributes,S=Object.keys(w);if(S.length>0){const x=w[S[0]];if(void 0!==x){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let w=0,S=x.length;w<S;w++){const S=x[w].name||String(w);this.morphTargetInfluences.push(0),this.morphTargetDictionary[S]=w}}}}else{const w=x.morphTargets;void 0!==w&&w.length>0&&U.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function testPoint(x,w,S,U,G,z,H){const j=Qa.distanceSqToPoint(x);if(j<S){const S=new Vector3;Qa.closestPointToPoint(x,S),S.applyMatrix4(U);const X=G.ray.origin.distanceTo(S);if(X<G.near||X>G.far)return;z.push({distance:X,distanceToRay:Math.sqrt(j),point:S,index:w,face:null,object:H})}}Points.prototype.isPoints=!0;class VideoTexture extends Texture{constructor(x,w,S,U,G,z,H,j,X){super(x,w,S,U,G,z,H,j,X),this.format=void 0!==H?H:St,this.minFilter=void 0!==z?z:ot,this.magFilter=void 0!==G?G:ot,this.generateMipmaps=!1;const q=this;"requestVideoFrameCallback"in x&&x.requestVideoFrameCallback((function updateVideo(){q.needsUpdate=!0,x.requestVideoFrameCallback(updateVideo)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const x=this.image;!1==="requestVideoFrameCallback"in x&&x.readyState>=x.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}VideoTexture.prototype.isVideoTexture=!0;class CompressedTexture extends Texture{constructor(x,w,S,U,G,z,H,j,X,q,K,Y){super(null,z,H,j,X,q,U,G,K,Y),this.image={width:w,height:S},this.mipmaps=x,this.flipY=!1,this.generateMipmaps=!1}}CompressedTexture.prototype.isCompressedTexture=!0;class CanvasTexture extends Texture{constructor(x,w,S,U,G,z,H,j,X){super(x,w,S,U,G,z,H,j,X),this.needsUpdate=!0}}CanvasTexture.prototype.isCanvasTexture=!0;class DepthTexture extends Texture{constructor(x,w,S,U,G,z,H,j,X,q){if((q=void 0!==q?q:Rt)!==Rt&&q!==Lt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===S&&q===Rt&&(S=ft),void 0===S&&q===Lt&&(S=Et),super(null,U,G,z,H,j,q,S,X),this.image={width:x,height:w},this.magFilter=void 0!==H?H:et,this.minFilter=void 0!==j?j:et,this.flipY=!1,this.generateMipmaps=!1}}DepthTexture.prototype.isDepthTexture=!0;class CircleGeometry extends BufferGeometry{constructor(x=1,w=8,S=0,U=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:x,segments:w,thetaStart:S,thetaLength:U},w=Math.max(3,w);const G=[],z=[],H=[],j=[],X=new Vector3,q=new Vector2;z.push(0,0,0),H.push(0,0,1),j.push(.5,.5);for(let G=0,K=3;G<=w;G++,K+=3){const Y=S+G/w*U;X.x=x*Math.cos(Y),X.y=x*Math.sin(Y),z.push(X.x,X.y,X.z),H.push(0,0,1),q.x=(z[K]/x+1)/2,q.y=(z[K+1]/x+1)/2,j.push(q.x,q.y)}for(let x=1;x<=w;x++)G.push(x,x+1,0);this.setIndex(G),this.setAttribute("position",new Float32BufferAttribute(z,3)),this.setAttribute("normal",new Float32BufferAttribute(H,3)),this.setAttribute("uv",new Float32BufferAttribute(j,2))}static fromJSON(x){return new CircleGeometry(x.radius,x.segments,x.thetaStart,x.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(x=1,w=1,S=1,U=8,G=1,z=!1,H=0,j=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:x,radiusBottom:w,height:S,radialSegments:U,heightSegments:G,openEnded:z,thetaStart:H,thetaLength:j};const X=this;U=Math.floor(U),G=Math.floor(G);const q=[],K=[],Y=[],Z=[];let J=0;const Q=[],ee=S/2;let te=0;function generateCap(S){const G=J,z=new Vector2,Q=new Vector3;let ne=0;const re=!0===S?x:w,ie=!0===S?1:-1;for(let x=1;x<=U;x++)K.push(0,ee*ie,0),Y.push(0,ie,0),Z.push(.5,.5),J++;const oe=J;for(let x=0;x<=U;x++){const w=x/U*j+H,S=Math.cos(w),G=Math.sin(w);Q.x=re*G,Q.y=ee*ie,Q.z=re*S,K.push(Q.x,Q.y,Q.z),Y.push(0,ie,0),z.x=.5*S+.5,z.y=.5*G*ie+.5,Z.push(z.x,z.y),J++}for(let x=0;x<U;x++){const w=G+x,U=oe+x;!0===S?q.push(U,U+1,w):q.push(U+1,U,w),ne+=3}X.addGroup(te,ne,!0===S?1:2),te+=ne}!function generateTorso(){const z=new Vector3,ne=new Vector3;let re=0;const ie=(w-x)/S;for(let X=0;X<=G;X++){const q=[],te=X/G,re=te*(w-x)+x;for(let x=0;x<=U;x++){const w=x/U,G=w*j+H,X=Math.sin(G),Q=Math.cos(G);ne.x=re*X,ne.y=-te*S+ee,ne.z=re*Q,K.push(ne.x,ne.y,ne.z),z.set(X,ie,Q).normalize(),Y.push(z.x,z.y,z.z),Z.push(w,1-te),q.push(J++)}Q.push(q)}for(let x=0;x<U;x++)for(let w=0;w<G;w++){const S=Q[w][x],U=Q[w+1][x],G=Q[w+1][x+1],z=Q[w][x+1];q.push(S,U,z),q.push(U,G,z),re+=6}X.addGroup(te,re,0),te+=re}(),!1===z&&(x>0&&generateCap(!0),w>0&&generateCap(!1)),this.setIndex(q),this.setAttribute("position",new Float32BufferAttribute(K,3)),this.setAttribute("normal",new Float32BufferAttribute(Y,3)),this.setAttribute("uv",new Float32BufferAttribute(Z,2))}static fromJSON(x){return new CylinderGeometry(x.radiusTop,x.radiusBottom,x.height,x.radialSegments,x.heightSegments,x.openEnded,x.thetaStart,x.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(x=1,w=1,S=8,U=1,G=!1,z=0,H=2*Math.PI){super(0,x,w,S,U,G,z,H),this.type="ConeGeometry",this.parameters={radius:x,height:w,radialSegments:S,heightSegments:U,openEnded:G,thetaStart:z,thetaLength:H}}static fromJSON(x){return new ConeGeometry(x.radius,x.height,x.radialSegments,x.heightSegments,x.openEnded,x.thetaStart,x.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(x=[],w=[],S=1,U=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:x,indices:w,radius:S,detail:U};const G=[],z=[];function subdivideFace(x,w,S,U){const G=U+1,z=[];for(let U=0;U<=G;U++){z[U]=[];const H=x.clone().lerp(S,U/G),j=w.clone().lerp(S,U/G),X=G-U;for(let x=0;x<=X;x++)z[U][x]=0===x&&U===G?H:H.clone().lerp(j,x/X)}for(let x=0;x<G;x++)for(let w=0;w<2*(G-x)-1;w++){const S=Math.floor(w/2);w%2==0?(pushVertex(z[x][S+1]),pushVertex(z[x+1][S]),pushVertex(z[x][S])):(pushVertex(z[x][S+1]),pushVertex(z[x+1][S+1]),pushVertex(z[x+1][S]))}}function pushVertex(x){G.push(x.x,x.y,x.z)}function getVertexByIndex(w,S){const U=3*w;S.x=x[U+0],S.y=x[U+1],S.z=x[U+2]}function correctUV(x,w,S,U){U<0&&1===x.x&&(z[w]=x.x-1),0===S.x&&0===S.z&&(z[w]=U/2/Math.PI+.5)}function azimuth(x){return Math.atan2(x.z,-x.x)}!function subdivide(x){const S=new Vector3,U=new Vector3,G=new Vector3;for(let z=0;z<w.length;z+=3)getVertexByIndex(w[z+0],S),getVertexByIndex(w[z+1],U),getVertexByIndex(w[z+2],G),subdivideFace(S,U,G,x)}(U),function applyRadius(x){const w=new Vector3;for(let S=0;S<G.length;S+=3)w.x=G[S+0],w.y=G[S+1],w.z=G[S+2],w.normalize().multiplyScalar(x),G[S+0]=w.x,G[S+1]=w.y,G[S+2]=w.z}(S),function generateUVs(){const x=new Vector3;for(let S=0;S<G.length;S+=3){x.x=G[S+0],x.y=G[S+1],x.z=G[S+2];const U=azimuth(x)/2/Math.PI+.5,H=(w=x,Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))/Math.PI+.5);z.push(U,1-H)}var w;(function correctUVs(){const x=new Vector3,w=new Vector3,S=new Vector3,U=new Vector3,H=new Vector2,j=new Vector2,X=new Vector2;for(let q=0,K=0;q<G.length;q+=9,K+=6){x.set(G[q+0],G[q+1],G[q+2]),w.set(G[q+3],G[q+4],G[q+5]),S.set(G[q+6],G[q+7],G[q+8]),H.set(z[K+0],z[K+1]),j.set(z[K+2],z[K+3]),X.set(z[K+4],z[K+5]),U.copy(x).add(w).add(S).divideScalar(3);const Y=azimuth(U);correctUV(H,K+0,x,Y),correctUV(j,K+2,w,Y),correctUV(X,K+4,S,Y)}})(),function correctSeam(){for(let x=0;x<z.length;x+=6){const w=z[x+0],S=z[x+2],U=z[x+4],G=Math.max(w,S,U),H=Math.min(w,S,U);G>.9&&H<.1&&(w<.2&&(z[x+0]+=1),S<.2&&(z[x+2]+=1),U<.2&&(z[x+4]+=1))}}()}(),this.setAttribute("position",new Float32BufferAttribute(G,3)),this.setAttribute("normal",new Float32BufferAttribute(G.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(z,2)),0===U?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(x){return new PolyhedronGeometry(x.vertices,x.indices,x.radius,x.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(x=1,w=0){const S=(1+Math.sqrt(5))/2,U=1/S;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-U,-S,0,-U,S,0,U,-S,0,U,S,-U,-S,0,-U,S,0,U,-S,0,U,S,0,-S,0,-U,S,0,-U,-S,0,U,S,0,U],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],x,w),this.type="DodecahedronGeometry",this.parameters={radius:x,detail:w}}static fromJSON(x){return new DodecahedronGeometry(x.radius,x.detail)}}const ns=new Vector3,rs=new Vector3,os=new Vector3,as=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(x=null,w=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:x,thresholdAngle:w},null!==x){const S=4,U=Math.pow(10,S),G=Math.cos(Br*w),z=x.getIndex(),H=x.getAttribute("position"),j=z?z.count:H.count,X=[0,0,0],q=["a","b","c"],K=new Array(3),Y={},Z=[];for(let x=0;x<j;x+=3){z?(X[0]=z.getX(x),X[1]=z.getX(x+1),X[2]=z.getX(x+2)):(X[0]=x,X[1]=x+1,X[2]=x+2);const{a:w,b:S,c:j}=as;if(w.fromBufferAttribute(H,X[0]),S.fromBufferAttribute(H,X[1]),j.fromBufferAttribute(H,X[2]),as.getNormal(os),K[0]=`${Math.round(w.x*U)},${Math.round(w.y*U)},${Math.round(w.z*U)}`,K[1]=`${Math.round(S.x*U)},${Math.round(S.y*U)},${Math.round(S.z*U)}`,K[2]=`${Math.round(j.x*U)},${Math.round(j.y*U)},${Math.round(j.z*U)}`,K[0]!==K[1]&&K[1]!==K[2]&&K[2]!==K[0])for(let x=0;x<3;x++){const w=(x+1)%3,S=K[x],U=K[w],z=as[q[x]],H=as[q[w]],j=`${S}_${U}`,J=`${U}_${S}`;J in Y&&Y[J]?(os.dot(Y[J].normal)<=G&&(Z.push(z.x,z.y,z.z),Z.push(H.x,H.y,H.z)),Y[J]=null):j in Y||(Y[j]={index0:X[x],index1:X[w],normal:os.clone()})}}for(const x in Y)if(Y[x]){const{index0:w,index1:S}=Y[x];ns.fromBufferAttribute(H,w),rs.fromBufferAttribute(H,S),Z.push(ns.x,ns.y,ns.z),Z.push(rs.x,rs.y,rs.z)}this.setAttribute("position",new Float32BufferAttribute(Z,3))}}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return U.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(x,w){const S=this.getUtoTmapping(x);return this.getPoint(S,w)}getPoints(x=5){const w=[];for(let S=0;S<=x;S++)w.push(this.getPoint(S/x));return w}getSpacedPoints(x=5){const w=[];for(let S=0;S<=x;S++)w.push(this.getPointAt(S/x));return w}getLength(){const x=this.getLengths();return x[x.length-1]}getLengths(x=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===x+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const w=[];let S,U=this.getPoint(0),G=0;w.push(0);for(let z=1;z<=x;z++)S=this.getPoint(z/x),G+=S.distanceTo(U),w.push(G),U=S;return this.cacheArcLengths=w,w}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(x,w){const S=this.getLengths();let U=0;const G=S.length;let z;z=w||x*S[G-1];let H,j=0,X=G-1;for(;j<=X;)if(U=Math.floor(j+(X-j)/2),H=S[U]-z,H<0)j=U+1;else{if(!(H>0)){X=U;break}X=U-1}if(U=X,S[U]===z)return U/(G-1);const q=S[U];return(U+(z-q)/(S[U+1]-q))/(G-1)}getTangent(x,w){const S=1e-4;let U=x-S,G=x+S;U<0&&(U=0),G>1&&(G=1);const z=this.getPoint(U),H=this.getPoint(G),j=w||(z.isVector2?new Vector2:new Vector3);return j.copy(H).sub(z).normalize(),j}getTangentAt(x,w){const S=this.getUtoTmapping(x);return this.getTangent(S,w)}computeFrenetFrames(x,w){const S=new Vector3,U=[],G=[],z=[],H=new Vector3,j=new Matrix4;for(let w=0;w<=x;w++){const S=w/x;U[w]=this.getTangentAt(S,new Vector3)}G[0]=new Vector3,z[0]=new Vector3;let X=Number.MAX_VALUE;const q=Math.abs(U[0].x),K=Math.abs(U[0].y),Y=Math.abs(U[0].z);q<=X&&(X=q,S.set(1,0,0)),K<=X&&(X=K,S.set(0,1,0)),Y<=X&&S.set(0,0,1),H.crossVectors(U[0],S).normalize(),G[0].crossVectors(U[0],H),z[0].crossVectors(U[0],G[0]);for(let w=1;w<=x;w++){if(G[w]=G[w-1].clone(),z[w]=z[w-1].clone(),H.crossVectors(U[w-1],U[w]),H.length()>Number.EPSILON){H.normalize();const x=Math.acos(clamp(U[w-1].dot(U[w]),-1,1));G[w].applyMatrix4(j.makeRotationAxis(H,x))}z[w].crossVectors(U[w],G[w])}if(!0===w){let w=Math.acos(clamp(G[0].dot(G[x]),-1,1));w/=x,U[0].dot(H.crossVectors(G[0],G[x]))>0&&(w=-w);for(let S=1;S<=x;S++)G[S].applyMatrix4(j.makeRotationAxis(U[S],w*S)),z[S].crossVectors(U[S],G[S])}return{tangents:U,normals:G,binormals:z}}clone(){return(new this.constructor).copy(this)}copy(x){return this.arcLengthDivisions=x.arcLengthDivisions,this}toJSON(){const x={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return x.arcLengthDivisions=this.arcLengthDivisions,x.type=this.type,x}fromJSON(x){return this.arcLengthDivisions=x.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(x=0,w=0,S=1,U=1,G=0,z=2*Math.PI,H=!1,j=0){super(),this.type="EllipseCurve",this.aX=x,this.aY=w,this.xRadius=S,this.yRadius=U,this.aStartAngle=G,this.aEndAngle=z,this.aClockwise=H,this.aRotation=j}getPoint(x,w){const S=w||new Vector2,U=2*Math.PI;let G=this.aEndAngle-this.aStartAngle;const z=Math.abs(G)<Number.EPSILON;for(;G<0;)G+=U;for(;G>U;)G-=U;G<Number.EPSILON&&(G=z?0:U),!0!==this.aClockwise||z||(G===U?G=-U:G-=U);const H=this.aStartAngle+x*G;let j=this.aX+this.xRadius*Math.cos(H),X=this.aY+this.yRadius*Math.sin(H);if(0!==this.aRotation){const x=Math.cos(this.aRotation),w=Math.sin(this.aRotation),S=j-this.aX,U=X-this.aY;j=S*x-U*w+this.aX,X=S*w+U*x+this.aY}return S.set(j,X)}copy(x){return super.copy(x),this.aX=x.aX,this.aY=x.aY,this.xRadius=x.xRadius,this.yRadius=x.yRadius,this.aStartAngle=x.aStartAngle,this.aEndAngle=x.aEndAngle,this.aClockwise=x.aClockwise,this.aRotation=x.aRotation,this}toJSON(){const x=super.toJSON();return x.aX=this.aX,x.aY=this.aY,x.xRadius=this.xRadius,x.yRadius=this.yRadius,x.aStartAngle=this.aStartAngle,x.aEndAngle=this.aEndAngle,x.aClockwise=this.aClockwise,x.aRotation=this.aRotation,x}fromJSON(x){return super.fromJSON(x),this.aX=x.aX,this.aY=x.aY,this.xRadius=x.xRadius,this.yRadius=x.yRadius,this.aStartAngle=x.aStartAngle,this.aEndAngle=x.aEndAngle,this.aClockwise=x.aClockwise,this.aRotation=x.aRotation,this}}EllipseCurve.prototype.isEllipseCurve=!0;class ArcCurve extends EllipseCurve{constructor(x,w,S,U,G,z){super(x,w,S,S,U,G,z),this.type="ArcCurve"}}function CubicPoly(){let x=0,w=0,S=0,U=0;function init(G,z,H,j){x=G,w=H,S=-3*G+3*z-2*H-j,U=2*G-2*z+H+j}return{initCatmullRom:function(x,w,S,U,G){init(w,S,G*(S-x),G*(U-w))},initNonuniformCatmullRom:function(x,w,S,U,G,z,H){let j=(w-x)/G-(S-x)/(G+z)+(S-w)/z,X=(S-w)/z-(U-w)/(z+H)+(U-S)/H;j*=z,X*=z,init(w,S,j,X)},calc:function(G){const z=G*G;return x+w*G+S*z+U*(z*G)}}}ArcCurve.prototype.isArcCurve=!0;const ss=new Vector3,ls=new CubicPoly,cs=new CubicPoly,us=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(x=[],w=!1,S="centripetal",U=.5){super(),this.type="CatmullRomCurve3",this.points=x,this.closed=w,this.curveType=S,this.tension=U}getPoint(x,w=new Vector3){const S=w,U=this.points,G=U.length,z=(G-(this.closed?0:1))*x;let H,j,X=Math.floor(z),q=z-X;this.closed?X+=X>0?0:(Math.floor(Math.abs(X)/G)+1)*G:0===q&&X===G-1&&(X=G-2,q=1),this.closed||X>0?H=U[(X-1)%G]:(ss.subVectors(U[0],U[1]).add(U[0]),H=ss);const K=U[X%G],Y=U[(X+1)%G];if(this.closed||X+2<G?j=U[(X+2)%G]:(ss.subVectors(U[G-1],U[G-2]).add(U[G-1]),j=ss),"centripetal"===this.curveType||"chordal"===this.curveType){const x="chordal"===this.curveType?.5:.25;let w=Math.pow(H.distanceToSquared(K),x),S=Math.pow(K.distanceToSquared(Y),x),U=Math.pow(Y.distanceToSquared(j),x);S<1e-4&&(S=1),w<1e-4&&(w=S),U<1e-4&&(U=S),ls.initNonuniformCatmullRom(H.x,K.x,Y.x,j.x,w,S,U),cs.initNonuniformCatmullRom(H.y,K.y,Y.y,j.y,w,S,U),us.initNonuniformCatmullRom(H.z,K.z,Y.z,j.z,w,S,U)}else"catmullrom"===this.curveType&&(ls.initCatmullRom(H.x,K.x,Y.x,j.x,this.tension),cs.initCatmullRom(H.y,K.y,Y.y,j.y,this.tension),us.initCatmullRom(H.z,K.z,Y.z,j.z,this.tension));return S.set(ls.calc(q),cs.calc(q),us.calc(q)),S}copy(x){super.copy(x),this.points=[];for(let w=0,S=x.points.length;w<S;w++){const S=x.points[w];this.points.push(S.clone())}return this.closed=x.closed,this.curveType=x.curveType,this.tension=x.tension,this}toJSON(){const x=super.toJSON();x.points=[];for(let w=0,S=this.points.length;w<S;w++){const S=this.points[w];x.points.push(S.toArray())}return x.closed=this.closed,x.curveType=this.curveType,x.tension=this.tension,x}fromJSON(x){super.fromJSON(x),this.points=[];for(let w=0,S=x.points.length;w<S;w++){const S=x.points[w];this.points.push((new Vector3).fromArray(S))}return this.closed=x.closed,this.curveType=x.curveType,this.tension=x.tension,this}}function CatmullRom(x,w,S,U,G){const z=.5*(U-w),H=.5*(G-S),j=x*x;return(2*S-2*U+z+H)*(x*j)+(-3*S+3*U-2*z-H)*j+z*x+S}function QuadraticBezier(x,w,S,U){return function QuadraticBezierP0(x,w){const S=1-x;return S*S*w}(x,w)+function QuadraticBezierP1(x,w){return 2*(1-x)*x*w}(x,S)+function QuadraticBezierP2(x,w){return x*x*w}(x,U)}function CubicBezier(x,w,S,U,G){return function CubicBezierP0(x,w){const S=1-x;return S*S*S*w}(x,w)+function CubicBezierP1(x,w){const S=1-x;return 3*S*S*x*w}(x,S)+function CubicBezierP2(x,w){return 3*(1-x)*x*x*w}(x,U)+function CubicBezierP3(x,w){return x*x*x*w}(x,G)}CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;class CubicBezierCurve extends Curve{constructor(x=new Vector2,w=new Vector2,S=new Vector2,U=new Vector2){super(),this.type="CubicBezierCurve",this.v0=x,this.v1=w,this.v2=S,this.v3=U}getPoint(x,w=new Vector2){const S=w,U=this.v0,G=this.v1,z=this.v2,H=this.v3;return S.set(CubicBezier(x,U.x,G.x,z.x,H.x),CubicBezier(x,U.y,G.y,z.y,H.y)),S}copy(x){return super.copy(x),this.v0.copy(x.v0),this.v1.copy(x.v1),this.v2.copy(x.v2),this.v3.copy(x.v3),this}toJSON(){const x=super.toJSON();return x.v0=this.v0.toArray(),x.v1=this.v1.toArray(),x.v2=this.v2.toArray(),x.v3=this.v3.toArray(),x}fromJSON(x){return super.fromJSON(x),this.v0.fromArray(x.v0),this.v1.fromArray(x.v1),this.v2.fromArray(x.v2),this.v3.fromArray(x.v3),this}}CubicBezierCurve.prototype.isCubicBezierCurve=!0;class CubicBezierCurve3 extends Curve{constructor(x=new Vector3,w=new Vector3,S=new Vector3,U=new Vector3){super(),this.type="CubicBezierCurve3",this.v0=x,this.v1=w,this.v2=S,this.v3=U}getPoint(x,w=new Vector3){const S=w,U=this.v0,G=this.v1,z=this.v2,H=this.v3;return S.set(CubicBezier(x,U.x,G.x,z.x,H.x),CubicBezier(x,U.y,G.y,z.y,H.y),CubicBezier(x,U.z,G.z,z.z,H.z)),S}copy(x){return super.copy(x),this.v0.copy(x.v0),this.v1.copy(x.v1),this.v2.copy(x.v2),this.v3.copy(x.v3),this}toJSON(){const x=super.toJSON();return x.v0=this.v0.toArray(),x.v1=this.v1.toArray(),x.v2=this.v2.toArray(),x.v3=this.v3.toArray(),x}fromJSON(x){return super.fromJSON(x),this.v0.fromArray(x.v0),this.v1.fromArray(x.v1),this.v2.fromArray(x.v2),this.v3.fromArray(x.v3),this}}CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;class LineCurve extends Curve{constructor(x=new Vector2,w=new Vector2){super(),this.type="LineCurve",this.v1=x,this.v2=w}getPoint(x,w=new Vector2){const S=w;return 1===x?S.copy(this.v2):(S.copy(this.v2).sub(this.v1),S.multiplyScalar(x).add(this.v1)),S}getPointAt(x,w){return this.getPoint(x,w)}getTangent(x,w){const S=w||new Vector2;return S.copy(this.v2).sub(this.v1).normalize(),S}copy(x){return super.copy(x),this.v1.copy(x.v1),this.v2.copy(x.v2),this}toJSON(){const x=super.toJSON();return x.v1=this.v1.toArray(),x.v2=this.v2.toArray(),x}fromJSON(x){return super.fromJSON(x),this.v1.fromArray(x.v1),this.v2.fromArray(x.v2),this}}LineCurve.prototype.isLineCurve=!0;class LineCurve3 extends Curve{constructor(x=new Vector3,w=new Vector3){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=x,this.v2=w}getPoint(x,w=new Vector3){const S=w;return 1===x?S.copy(this.v2):(S.copy(this.v2).sub(this.v1),S.multiplyScalar(x).add(this.v1)),S}getPointAt(x,w){return this.getPoint(x,w)}copy(x){return super.copy(x),this.v1.copy(x.v1),this.v2.copy(x.v2),this}toJSON(){const x=super.toJSON();return x.v1=this.v1.toArray(),x.v2=this.v2.toArray(),x}fromJSON(x){return super.fromJSON(x),this.v1.fromArray(x.v1),this.v2.fromArray(x.v2),this}}class QuadraticBezierCurve extends Curve{constructor(x=new Vector2,w=new Vector2,S=new Vector2){super(),this.type="QuadraticBezierCurve",this.v0=x,this.v1=w,this.v2=S}getPoint(x,w=new Vector2){const S=w,U=this.v0,G=this.v1,z=this.v2;return S.set(QuadraticBezier(x,U.x,G.x,z.x),QuadraticBezier(x,U.y,G.y,z.y)),S}copy(x){return super.copy(x),this.v0.copy(x.v0),this.v1.copy(x.v1),this.v2.copy(x.v2),this}toJSON(){const x=super.toJSON();return x.v0=this.v0.toArray(),x.v1=this.v1.toArray(),x.v2=this.v2.toArray(),x}fromJSON(x){return super.fromJSON(x),this.v0.fromArray(x.v0),this.v1.fromArray(x.v1),this.v2.fromArray(x.v2),this}}QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;class QuadraticBezierCurve3 extends Curve{constructor(x=new Vector3,w=new Vector3,S=new Vector3){super(),this.type="QuadraticBezierCurve3",this.v0=x,this.v1=w,this.v2=S}getPoint(x,w=new Vector3){const S=w,U=this.v0,G=this.v1,z=this.v2;return S.set(QuadraticBezier(x,U.x,G.x,z.x),QuadraticBezier(x,U.y,G.y,z.y),QuadraticBezier(x,U.z,G.z,z.z)),S}copy(x){return super.copy(x),this.v0.copy(x.v0),this.v1.copy(x.v1),this.v2.copy(x.v2),this}toJSON(){const x=super.toJSON();return x.v0=this.v0.toArray(),x.v1=this.v1.toArray(),x.v2=this.v2.toArray(),x}fromJSON(x){return super.fromJSON(x),this.v0.fromArray(x.v0),this.v1.fromArray(x.v1),this.v2.fromArray(x.v2),this}}QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;class SplineCurve extends Curve{constructor(x=[]){super(),this.type="SplineCurve",this.points=x}getPoint(x,w=new Vector2){const S=w,U=this.points,G=(U.length-1)*x,z=Math.floor(G),H=G-z,j=U[0===z?z:z-1],X=U[z],q=U[z>U.length-2?U.length-1:z+1],K=U[z>U.length-3?U.length-1:z+2];return S.set(CatmullRom(H,j.x,X.x,q.x,K.x),CatmullRom(H,j.y,X.y,q.y,K.y)),S}copy(x){super.copy(x),this.points=[];for(let w=0,S=x.points.length;w<S;w++){const S=x.points[w];this.points.push(S.clone())}return this}toJSON(){const x=super.toJSON();x.points=[];for(let w=0,S=this.points.length;w<S;w++){const S=this.points[w];x.points.push(S.toArray())}return x}fromJSON(x){super.fromJSON(x),this.points=[];for(let w=0,S=x.points.length;w<S;w++){const S=x.points[w];this.points.push((new Vector2).fromArray(S))}return this}}SplineCurve.prototype.isSplineCurve=!0;var hs=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(x){this.curves.push(x)}closePath(){const x=this.curves[0].getPoint(0),w=this.curves[this.curves.length-1].getPoint(1);x.equals(w)||this.curves.push(new LineCurve(w,x))}getPoint(x,w){const S=x*this.getLength(),U=this.getCurveLengths();let G=0;for(;G<U.length;){if(U[G]>=S){const x=U[G]-S,z=this.curves[G],H=z.getLength(),j=0===H?0:1-x/H;return z.getPointAt(j,w)}G++}return null}getLength(){const x=this.getCurveLengths();return x[x.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const x=[];let w=0;for(let S=0,U=this.curves.length;S<U;S++)w+=this.curves[S].getLength(),x.push(w);return this.cacheLengths=x,x}getSpacedPoints(x=40){const w=[];for(let S=0;S<=x;S++)w.push(this.getPoint(S/x));return this.autoClose&&w.push(w[0]),w}getPoints(x=12){const w=[];let S;for(let U=0,G=this.curves;U<G.length;U++){const z=G[U],H=z&&z.isEllipseCurve?2*x:z&&(z.isLineCurve||z.isLineCurve3)?1:z&&z.isSplineCurve?x*z.points.length:x,j=z.getPoints(H);for(let x=0;x<j.length;x++){const U=j[x];S&&S.equals(U)||(w.push(U),S=U)}}return this.autoClose&&w.length>1&&!w[w.length-1].equals(w[0])&&w.push(w[0]),w}copy(x){super.copy(x),this.curves=[];for(let w=0,S=x.curves.length;w<S;w++){const S=x.curves[w];this.curves.push(S.clone())}return this.autoClose=x.autoClose,this}toJSON(){const x=super.toJSON();x.autoClose=this.autoClose,x.curves=[];for(let w=0,S=this.curves.length;w<S;w++){const S=this.curves[w];x.curves.push(S.toJSON())}return x}fromJSON(x){super.fromJSON(x),this.autoClose=x.autoClose,this.curves=[];for(let w=0,S=x.curves.length;w<S;w++){const S=x.curves[w];this.curves.push((new hs[S.type]).fromJSON(S))}return this}}class Path extends CurvePath{constructor(x){super(),this.type="Path",this.currentPoint=new Vector2,x&&this.setFromPoints(x)}setFromPoints(x){this.moveTo(x[0].x,x[0].y);for(let w=1,S=x.length;w<S;w++)this.lineTo(x[w].x,x[w].y);return this}moveTo(x,w){return this.currentPoint.set(x,w),this}lineTo(x,w){const S=new LineCurve(this.currentPoint.clone(),new Vector2(x,w));return this.curves.push(S),this.currentPoint.set(x,w),this}quadraticCurveTo(x,w,S,U){const G=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(x,w),new Vector2(S,U));return this.curves.push(G),this.currentPoint.set(S,U),this}bezierCurveTo(x,w,S,U,G,z){const H=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(x,w),new Vector2(S,U),new Vector2(G,z));return this.curves.push(H),this.currentPoint.set(G,z),this}splineThru(x){const w=[this.currentPoint.clone()].concat(x),S=new SplineCurve(w);return this.curves.push(S),this.currentPoint.copy(x[x.length-1]),this}arc(x,w,S,U,G,z){const H=this.currentPoint.x,j=this.currentPoint.y;return this.absarc(x+H,w+j,S,U,G,z),this}absarc(x,w,S,U,G,z){return this.absellipse(x,w,S,S,U,G,z),this}ellipse(x,w,S,U,G,z,H,j){const X=this.currentPoint.x,q=this.currentPoint.y;return this.absellipse(x+X,w+q,S,U,G,z,H,j),this}absellipse(x,w,S,U,G,z,H,j){const X=new EllipseCurve(x,w,S,U,G,z,H,j);if(this.curves.length>0){const x=X.getPoint(0);x.equals(this.currentPoint)||this.lineTo(x.x,x.y)}this.curves.push(X);const q=X.getPoint(1);return this.currentPoint.copy(q),this}copy(x){return super.copy(x),this.currentPoint.copy(x.currentPoint),this}toJSON(){const x=super.toJSON();return x.currentPoint=this.currentPoint.toArray(),x}fromJSON(x){return super.fromJSON(x),this.currentPoint.fromArray(x.currentPoint),this}}class Shape extends Path{constructor(x){super(x),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(x){const w=[];for(let S=0,U=this.holes.length;S<U;S++)w[S]=this.holes[S].getPoints(x);return w}extractPoints(x){return{shape:this.getPoints(x),holes:this.getPointsHoles(x)}}copy(x){super.copy(x),this.holes=[];for(let w=0,S=x.holes.length;w<S;w++){const S=x.holes[w];this.holes.push(S.clone())}return this}toJSON(){const x=super.toJSON();x.uuid=this.uuid,x.holes=[];for(let w=0,S=this.holes.length;w<S;w++){const S=this.holes[w];x.holes.push(S.toJSON())}return x}fromJSON(x){super.fromJSON(x),this.uuid=x.uuid,this.holes=[];for(let w=0,S=x.holes.length;w<S;w++){const S=x.holes[w];this.holes.push((new Path).fromJSON(S))}return this}}const Earcut_triangulate=function(x,w,S=2){const U=w&&w.length,G=U?w[0]*S:x.length;let z=linkedList(x,0,G,S,!0);const H=[];if(!z||z.next===z.prev)return H;let j,X,q,K,Y,Z,J;if(U&&(z=function eliminateHoles(x,w,S,U){const G=[];let z,H,j,X,q;for(z=0,H=w.length;z<H;z++)j=w[z]*U,X=z<H-1?w[z+1]*U:x.length,q=linkedList(x,j,X,U,!1),q===q.next&&(q.steiner=!0),G.push(getLeftmost(q));for(G.sort(compareX),z=0;z<G.length;z++)eliminateHole(G[z],S),S=filterPoints(S,S.next);return S}(x,w,z,S)),x.length>80*S){j=q=x[0],X=K=x[1];for(let w=S;w<G;w+=S)Y=x[w],Z=x[w+1],Y<j&&(j=Y),Z<X&&(X=Z),Y>q&&(q=Y),Z>K&&(K=Z);J=Math.max(q-j,K-X),J=0!==J?1/J:0}return earcutLinked(z,H,S,j,X,J),H};function linkedList(x,w,S,U,G){let z,H;if(G===function signedArea(x,w,S,U){let G=0;for(let z=w,H=S-U;z<S;z+=U)G+=(x[H]-x[z])*(x[z+1]+x[H+1]),H=z;return G}(x,w,S,U)>0)for(z=w;z<S;z+=U)H=insertNode(z,x[z],x[z+1],H);else for(z=S-U;z>=w;z-=U)H=insertNode(z,x[z],x[z+1],H);return H&&equals(H,H.next)&&(removeNode(H),H=H.next),H}function filterPoints(x,w){if(!x)return x;w||(w=x);let S,U=x;do{if(S=!1,U.steiner||!equals(U,U.next)&&0!==area(U.prev,U,U.next))U=U.next;else{if(removeNode(U),U=w=U.prev,U===U.next)break;S=!0}}while(S||U!==w);return w}function earcutLinked(x,w,S,U,G,z,H){if(!x)return;!H&&z&&function indexCurve(x,w,S,U){let G=x;do{null===G.z&&(G.z=zOrder(G.x,G.y,w,S,U)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next}while(G!==x);G.prevZ.nextZ=null,G.prevZ=null,function sortLinked(x){let w,S,U,G,z,H,j,X,q=1;do{for(S=x,x=null,z=null,H=0;S;){for(H++,U=S,j=0,w=0;w<q&&(j++,U=U.nextZ,U);w++);for(X=q;j>0||X>0&&U;)0!==j&&(0===X||!U||S.z<=U.z)?(G=S,S=S.nextZ,j--):(G=U,U=U.nextZ,X--),z?z.nextZ=G:x=G,G.prevZ=z,z=G;S=U}z.nextZ=null,q*=2}while(H>1);return x}(G)}(x,U,G,z);let j,X,q=x;for(;x.prev!==x.next;)if(j=x.prev,X=x.next,z?isEarHashed(x,U,G,z):isEar(x))w.push(j.i/S),w.push(x.i/S),w.push(X.i/S),removeNode(x),x=X.next,q=X.next;else if((x=X)===q){H?1===H?earcutLinked(x=cureLocalIntersections(filterPoints(x),w,S),w,S,U,G,z,2):2===H&&splitEarcut(x,w,S,U,G,z):earcutLinked(filterPoints(x),w,S,U,G,z,1);break}}function isEar(x){const w=x.prev,S=x,U=x.next;if(area(w,S,U)>=0)return!1;let G=x.next.next;for(;G!==x.prev;){if(pointInTriangle(w.x,w.y,S.x,S.y,U.x,U.y,G.x,G.y)&&area(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function isEarHashed(x,w,S,U){const G=x.prev,z=x,H=x.next;if(area(G,z,H)>=0)return!1;const j=G.x<z.x?G.x<H.x?G.x:H.x:z.x<H.x?z.x:H.x,X=G.y<z.y?G.y<H.y?G.y:H.y:z.y<H.y?z.y:H.y,q=G.x>z.x?G.x>H.x?G.x:H.x:z.x>H.x?z.x:H.x,K=G.y>z.y?G.y>H.y?G.y:H.y:z.y>H.y?z.y:H.y,Y=zOrder(j,X,w,S,U),Z=zOrder(q,K,w,S,U);let J=x.prevZ,Q=x.nextZ;for(;J&&J.z>=Y&&Q&&Q.z<=Z;){if(J!==x.prev&&J!==x.next&&pointInTriangle(G.x,G.y,z.x,z.y,H.x,H.y,J.x,J.y)&&area(J.prev,J,J.next)>=0)return!1;if(J=J.prevZ,Q!==x.prev&&Q!==x.next&&pointInTriangle(G.x,G.y,z.x,z.y,H.x,H.y,Q.x,Q.y)&&area(Q.prev,Q,Q.next)>=0)return!1;Q=Q.nextZ}for(;J&&J.z>=Y;){if(J!==x.prev&&J!==x.next&&pointInTriangle(G.x,G.y,z.x,z.y,H.x,H.y,J.x,J.y)&&area(J.prev,J,J.next)>=0)return!1;J=J.prevZ}for(;Q&&Q.z<=Z;){if(Q!==x.prev&&Q!==x.next&&pointInTriangle(G.x,G.y,z.x,z.y,H.x,H.y,Q.x,Q.y)&&area(Q.prev,Q,Q.next)>=0)return!1;Q=Q.nextZ}return!0}function cureLocalIntersections(x,w,S){let U=x;do{const G=U.prev,z=U.next.next;!equals(G,z)&&intersects(G,U,U.next,z)&&locallyInside(G,z)&&locallyInside(z,G)&&(w.push(G.i/S),w.push(U.i/S),w.push(z.i/S),removeNode(U),removeNode(U.next),U=x=z),U=U.next}while(U!==x);return filterPoints(U)}function splitEarcut(x,w,S,U,G,z){let H=x;do{let x=H.next.next;for(;x!==H.prev;){if(H.i!==x.i&&isValidDiagonal(H,x)){let j=splitPolygon(H,x);return H=filterPoints(H,H.next),j=filterPoints(j,j.next),earcutLinked(H,w,S,U,G,z),void earcutLinked(j,w,S,U,G,z)}x=x.next}H=H.next}while(H!==x)}function compareX(x,w){return x.x-w.x}function eliminateHole(x,w){if(w=function findHoleBridge(x,w){let S=w;const U=x.x,G=x.y;let z,H=-1/0;do{if(G<=S.y&&G>=S.next.y&&S.next.y!==S.y){const x=S.x+(G-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(x<=U&&x>H){if(H=x,x===U){if(G===S.y)return S;if(G===S.next.y)return S.next}z=S.x<S.next.x?S:S.next}}S=S.next}while(S!==w);if(!z)return null;if(U===H)return z;const j=z,X=z.x,q=z.y;let K,Y=1/0;S=z;do{U>=S.x&&S.x>=X&&U!==S.x&&pointInTriangle(G<q?U:H,G,X,q,G<q?H:U,G,S.x,S.y)&&(K=Math.abs(G-S.y)/(U-S.x),locallyInside(S,x)&&(K<Y||K===Y&&(S.x>z.x||S.x===z.x&&sectorContainsSector(z,S)))&&(z=S,Y=K)),S=S.next}while(S!==j);return z}(x,w),w){const S=splitPolygon(w,x);filterPoints(w,w.next),filterPoints(S,S.next)}}function sectorContainsSector(x,w){return area(x.prev,x,w.prev)<0&&area(w.next,x,x.next)<0}function zOrder(x,w,S,U,G){return(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x=32767*(x-S)*G)|x<<8))|x<<4))|x<<2))|x<<1))|(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-U)*G)|w<<8))|w<<4))|w<<2))|w<<1))<<1}function getLeftmost(x){let w=x,S=x;do{(w.x<S.x||w.x===S.x&&w.y<S.y)&&(S=w),w=w.next}while(w!==x);return S}function pointInTriangle(x,w,S,U,G,z,H,j){return(G-H)*(w-j)-(x-H)*(z-j)>=0&&(x-H)*(U-j)-(S-H)*(w-j)>=0&&(S-H)*(z-j)-(G-H)*(U-j)>=0}function isValidDiagonal(x,w){return x.next.i!==w.i&&x.prev.i!==w.i&&!function intersectsPolygon(x,w){let S=x;do{if(S.i!==x.i&&S.next.i!==x.i&&S.i!==w.i&&S.next.i!==w.i&&intersects(S,S.next,x,w))return!0;S=S.next}while(S!==x);return!1}(x,w)&&(locallyInside(x,w)&&locallyInside(w,x)&&function middleInside(x,w){let S=x,U=!1;const G=(x.x+w.x)/2,z=(x.y+w.y)/2;do{S.y>z!=S.next.y>z&&S.next.y!==S.y&&G<(S.next.x-S.x)*(z-S.y)/(S.next.y-S.y)+S.x&&(U=!U),S=S.next}while(S!==x);return U}(x,w)&&(area(x.prev,x,w.prev)||area(x,w.prev,w))||equals(x,w)&&area(x.prev,x,x.next)>0&&area(w.prev,w,w.next)>0)}function area(x,w,S){return(w.y-x.y)*(S.x-w.x)-(w.x-x.x)*(S.y-w.y)}function equals(x,w){return x.x===w.x&&x.y===w.y}function intersects(x,w,S,U){const G=sign(area(x,w,S)),z=sign(area(x,w,U)),H=sign(area(S,U,x)),j=sign(area(S,U,w));return G!==z&&H!==j||(!(0!==G||!onSegment(x,S,w))||(!(0!==z||!onSegment(x,U,w))||(!(0!==H||!onSegment(S,x,U))||!(0!==j||!onSegment(S,w,U)))))}function onSegment(x,w,S){return w.x<=Math.max(x.x,S.x)&&w.x>=Math.min(x.x,S.x)&&w.y<=Math.max(x.y,S.y)&&w.y>=Math.min(x.y,S.y)}function sign(x){return x>0?1:x<0?-1:0}function locallyInside(x,w){return area(x.prev,x,x.next)<0?area(x,w,x.next)>=0&&area(x,x.prev,w)>=0:area(x,w,x.prev)<0||area(x,x.next,w)<0}function splitPolygon(x,w){const S=new Node(x.i,x.x,x.y),U=new Node(w.i,w.x,w.y),G=x.next,z=w.prev;return x.next=w,w.prev=x,S.next=G,G.prev=S,U.next=S,S.prev=U,z.next=U,U.prev=z,U}function insertNode(x,w,S,U){const G=new Node(x,w,S);return U?(G.next=U.next,G.prev=U,U.next.prev=G,U.next=G):(G.prev=G,G.next=G),G}function removeNode(x){x.next.prev=x.prev,x.prev.next=x.next,x.prevZ&&(x.prevZ.nextZ=x.nextZ),x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function Node(x,w,S){this.i=x,this.x=w,this.y=S,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ShapeUtils{static area(x){const w=x.length;let S=0;for(let U=w-1,G=0;G<w;U=G++)S+=x[U].x*x[G].y-x[G].x*x[U].y;return.5*S}static isClockWise(x){return ShapeUtils.area(x)<0}static triangulateShape(x,w){const S=[],U=[],G=[];removeDupEndPts(x),addContour(S,x);let z=x.length;w.forEach(removeDupEndPts);for(let x=0;x<w.length;x++)U.push(z),z+=w[x].length,addContour(S,w[x]);const H=Earcut_triangulate(S,U);for(let x=0;x<H.length;x+=3)G.push(H.slice(x,x+3));return G}}function removeDupEndPts(x){const w=x.length;w>2&&x[w-1].equals(x[0])&&x.pop()}function addContour(x,w){for(let S=0;S<w.length;S++)x.push(w[S].x),x.push(w[S].y)}class ExtrudeGeometry extends BufferGeometry{constructor(x=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),w={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:x,options:w},x=Array.isArray(x)?x:[x];const S=this,G=[],z=[];for(let w=0,S=x.length;w<S;w++){addShape(x[w])}function addShape(x){const H=[],j=void 0!==w.curveSegments?w.curveSegments:12,X=void 0!==w.steps?w.steps:1;let q=void 0!==w.depth?w.depth:1,K=void 0===w.bevelEnabled||w.bevelEnabled,Y=void 0!==w.bevelThickness?w.bevelThickness:.2,Z=void 0!==w.bevelSize?w.bevelSize:Y-.1,J=void 0!==w.bevelOffset?w.bevelOffset:0,Q=void 0!==w.bevelSegments?w.bevelSegments:3;const ee=w.extrudePath,te=void 0!==w.UVGenerator?w.UVGenerator:ds;void 0!==w.amount&&(U.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),q=w.amount);let ne,re,ie,oe,ae,se=!1;ee&&(ne=ee.getSpacedPoints(X),se=!0,K=!1,re=ee.computeFrenetFrames(X,!1),ie=new Vector3,oe=new Vector3,ae=new Vector3),K||(Q=0,Y=0,Z=0,J=0);const le=x.extractPoints(j);let ce=le.shape;const ue=le.holes;if(!ShapeUtils.isClockWise(ce)){ce=ce.reverse();for(let x=0,w=ue.length;x<w;x++){const w=ue[x];ShapeUtils.isClockWise(w)&&(ue[x]=w.reverse())}}const he=ShapeUtils.triangulateShape(ce,ue),de=ce;for(let x=0,w=ue.length;x<w;x++){const w=ue[x];ce=ce.concat(w)}function scalePt2(x,w,S){return w||U.error("THREE.ExtrudeGeometry: vec does not exist"),w.clone().multiplyScalar(S).add(x)}const pe=ce.length,fe=he.length;function getBevelVec(x,w,S){let U,G,z;const H=x.x-w.x,j=x.y-w.y,X=S.x-x.x,q=S.y-x.y,K=H*H+j*j,Y=H*q-j*X;if(Math.abs(Y)>Number.EPSILON){const Y=Math.sqrt(K),Z=Math.sqrt(X*X+q*q),J=w.x-j/Y,Q=w.y+H/Y,ee=((S.x-q/Z-J)*q-(S.y+X/Z-Q)*X)/(H*q-j*X);U=J+H*ee-x.x,G=Q+j*ee-x.y;const te=U*U+G*G;if(te<=2)return new Vector2(U,G);z=Math.sqrt(te/2)}else{let x=!1;H>Number.EPSILON?X>Number.EPSILON&&(x=!0):H<-Number.EPSILON?X<-Number.EPSILON&&(x=!0):Math.sign(j)===Math.sign(q)&&(x=!0),x?(U=-j,G=H,z=Math.sqrt(K)):(U=H,G=j,z=Math.sqrt(K/2))}return new Vector2(U/z,G/z)}const me=[];for(let x=0,w=de.length,S=w-1,U=x+1;x<w;x++,S++,U++)S===w&&(S=0),U===w&&(U=0),me[x]=getBevelVec(de[x],de[S],de[U]);const ge=[];let ve,ye=me.concat();for(let x=0,w=ue.length;x<w;x++){const w=ue[x];ve=[];for(let x=0,S=w.length,U=S-1,G=x+1;x<S;x++,U++,G++)U===S&&(U=0),G===S&&(G=0),ve[x]=getBevelVec(w[x],w[U],w[G]);ge.push(ve),ye=ye.concat(ve)}for(let x=0;x<Q;x++){const w=x/Q,S=Y*Math.cos(w*Math.PI/2),U=Z*Math.sin(w*Math.PI/2)+J;for(let x=0,w=de.length;x<w;x++){const w=scalePt2(de[x],me[x],U);v(w.x,w.y,-S)}for(let x=0,w=ue.length;x<w;x++){const w=ue[x];ve=ge[x];for(let x=0,G=w.length;x<G;x++){const G=scalePt2(w[x],ve[x],U);v(G.x,G.y,-S)}}}const _e=Z+J;for(let x=0;x<pe;x++){const w=K?scalePt2(ce[x],ye[x],_e):ce[x];se?(oe.copy(re.normals[0]).multiplyScalar(w.x),ie.copy(re.binormals[0]).multiplyScalar(w.y),ae.copy(ne[0]).add(oe).add(ie),v(ae.x,ae.y,ae.z)):v(w.x,w.y,0)}for(let x=1;x<=X;x++)for(let w=0;w<pe;w++){const S=K?scalePt2(ce[w],ye[w],_e):ce[w];se?(oe.copy(re.normals[x]).multiplyScalar(S.x),ie.copy(re.binormals[x]).multiplyScalar(S.y),ae.copy(ne[x]).add(oe).add(ie),v(ae.x,ae.y,ae.z)):v(S.x,S.y,q/X*x)}for(let x=Q-1;x>=0;x--){const w=x/Q,S=Y*Math.cos(w*Math.PI/2),U=Z*Math.sin(w*Math.PI/2)+J;for(let x=0,w=de.length;x<w;x++){const w=scalePt2(de[x],me[x],U);v(w.x,w.y,q+S)}for(let x=0,w=ue.length;x<w;x++){const w=ue[x];ve=ge[x];for(let x=0,G=w.length;x<G;x++){const G=scalePt2(w[x],ve[x],U);se?v(G.x,G.y+ne[X-1].y,ne[X-1].x+S):v(G.x,G.y,q+S)}}}function sidewalls(x,w){let S=x.length;for(;--S>=0;){const U=S;let G=S-1;G<0&&(G=x.length-1);for(let x=0,S=X+2*Q;x<S;x++){const S=pe*x,z=pe*(x+1);f4(w+U+S,w+G+S,w+G+z,w+U+z)}}}function v(x,w,S){H.push(x),H.push(w),H.push(S)}function f3(x,w,U){addVertex(x),addVertex(w),addVertex(U);const z=G.length/3,H=te.generateTopUV(S,G,z-3,z-2,z-1);addUV(H[0]),addUV(H[1]),addUV(H[2])}function f4(x,w,U,z){addVertex(x),addVertex(w),addVertex(z),addVertex(w),addVertex(U),addVertex(z);const H=G.length/3,j=te.generateSideWallUV(S,G,H-6,H-3,H-2,H-1);addUV(j[0]),addUV(j[1]),addUV(j[3]),addUV(j[1]),addUV(j[2]),addUV(j[3])}function addVertex(x){G.push(H[3*x+0]),G.push(H[3*x+1]),G.push(H[3*x+2])}function addUV(x){z.push(x.x),z.push(x.y)}!function buildLidFaces(){const x=G.length/3;if(K){let x=0,w=pe*x;for(let x=0;x<fe;x++){const S=he[x];f3(S[2]+w,S[1]+w,S[0]+w)}x=X+2*Q,w=pe*x;for(let x=0;x<fe;x++){const S=he[x];f3(S[0]+w,S[1]+w,S[2]+w)}}else{for(let x=0;x<fe;x++){const w=he[x];f3(w[2],w[1],w[0])}for(let x=0;x<fe;x++){const w=he[x];f3(w[0]+pe*X,w[1]+pe*X,w[2]+pe*X)}}S.addGroup(x,G.length/3-x,0)}(),function buildSideFaces(){const x=G.length/3;let w=0;sidewalls(de,w),w+=de.length;for(let x=0,S=ue.length;x<S;x++){const S=ue[x];sidewalls(S,w),w+=S.length}S.addGroup(x,G.length/3-x,1)}()}this.setAttribute("position",new Float32BufferAttribute(G,3)),this.setAttribute("uv",new Float32BufferAttribute(z,2)),this.computeVertexNormals()}toJSON(){const x=super.toJSON();return function toJSON$1(x,w,S){if(S.shapes=[],Array.isArray(x))for(let w=0,U=x.length;w<U;w++){const U=x[w];S.shapes.push(U.uuid)}else S.shapes.push(x.uuid);void 0!==w.extrudePath&&(S.options.extrudePath=w.extrudePath.toJSON());return S}(this.parameters.shapes,this.parameters.options,x)}static fromJSON(x,w){const S=[];for(let U=0,G=x.shapes.length;U<G;U++){const G=w[x.shapes[U]];S.push(G)}const U=x.options.extrudePath;return void 0!==U&&(x.options.extrudePath=(new hs[U.type]).fromJSON(U)),new ExtrudeGeometry(S,x.options)}}const ds={generateTopUV:function(x,w,S,U,G){const z=w[3*S],H=w[3*S+1],j=w[3*U],X=w[3*U+1],q=w[3*G],K=w[3*G+1];return[new Vector2(z,H),new Vector2(j,X),new Vector2(q,K)]},generateSideWallUV:function(x,w,S,U,G,z){const H=w[3*S],j=w[3*S+1],X=w[3*S+2],q=w[3*U],K=w[3*U+1],Y=w[3*U+2],Z=w[3*G],J=w[3*G+1],Q=w[3*G+2],ee=w[3*z],te=w[3*z+1],ne=w[3*z+2];return Math.abs(j-K)<Math.abs(H-q)?[new Vector2(H,1-X),new Vector2(q,1-Y),new Vector2(Z,1-Q),new Vector2(ee,1-ne)]:[new Vector2(j,1-X),new Vector2(K,1-Y),new Vector2(J,1-Q),new Vector2(te,1-ne)]}};class IcosahedronGeometry extends PolyhedronGeometry{constructor(x=1,w=0){const S=(1+Math.sqrt(5))/2;super([-1,S,0,1,S,0,-1,-S,0,1,-S,0,0,-1,S,0,1,S,0,-1,-S,0,1,-S,S,0,-1,S,0,1,-S,0,-1,-S,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],x,w),this.type="IcosahedronGeometry",this.parameters={radius:x,detail:w}}static fromJSON(x){return new IcosahedronGeometry(x.radius,x.detail)}}class LatheGeometry extends BufferGeometry{constructor(x=[new Vector2(0,.5),new Vector2(.5,0),new Vector2(0,-.5)],w=12,S=0,U=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:x,segments:w,phiStart:S,phiLength:U},w=Math.floor(w),U=clamp(U,0,2*Math.PI);const G=[],z=[],H=[],j=1/w,X=new Vector3,q=new Vector2;for(let G=0;G<=w;G++){const K=S+G*j*U,Y=Math.sin(K),Z=Math.cos(K);for(let S=0;S<=x.length-1;S++)X.x=x[S].x*Y,X.y=x[S].y,X.z=x[S].x*Z,z.push(X.x,X.y,X.z),q.x=G/w,q.y=S/(x.length-1),H.push(q.x,q.y)}for(let S=0;S<w;S++)for(let w=0;w<x.length-1;w++){const U=w+S*x.length,z=U,H=U+x.length,j=U+x.length+1,X=U+1;G.push(z,H,X),G.push(H,j,X)}if(this.setIndex(G),this.setAttribute("position",new Float32BufferAttribute(z,3)),this.setAttribute("uv",new Float32BufferAttribute(H,2)),this.computeVertexNormals(),U===2*Math.PI){const S=this.attributes.normal.array,U=new Vector3,G=new Vector3,z=new Vector3,H=w*x.length*3;for(let w=0,j=0;w<x.length;w++,j+=3)U.x=S[j+0],U.y=S[j+1],U.z=S[j+2],G.x=S[H+j+0],G.y=S[H+j+1],G.z=S[H+j+2],z.addVectors(U,G).normalize(),S[j+0]=S[H+j+0]=z.x,S[j+1]=S[H+j+1]=z.y,S[j+2]=S[H+j+2]=z.z}}static fromJSON(x){return new LatheGeometry(x.points,x.segments,x.phiStart,x.phiLength)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(x=1,w=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],x,w),this.type="OctahedronGeometry",this.parameters={radius:x,detail:w}}static fromJSON(x){return new OctahedronGeometry(x.radius,x.detail)}}class RingGeometry extends BufferGeometry{constructor(x=.5,w=1,S=8,U=1,G=0,z=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:x,outerRadius:w,thetaSegments:S,phiSegments:U,thetaStart:G,thetaLength:z},S=Math.max(3,S);const H=[],j=[],X=[],q=[];let K=x;const Y=(w-x)/(U=Math.max(1,U)),Z=new Vector3,J=new Vector2;for(let x=0;x<=U;x++){for(let x=0;x<=S;x++){const U=G+x/S*z;Z.x=K*Math.cos(U),Z.y=K*Math.sin(U),j.push(Z.x,Z.y,Z.z),X.push(0,0,1),J.x=(Z.x/w+1)/2,J.y=(Z.y/w+1)/2,q.push(J.x,J.y)}K+=Y}for(let x=0;x<U;x++){const w=x*(S+1);for(let x=0;x<S;x++){const U=x+w,G=U,z=U+S+1,j=U+S+2,X=U+1;H.push(G,z,X),H.push(z,j,X)}}this.setIndex(H),this.setAttribute("position",new Float32BufferAttribute(j,3)),this.setAttribute("normal",new Float32BufferAttribute(X,3)),this.setAttribute("uv",new Float32BufferAttribute(q,2))}static fromJSON(x){return new RingGeometry(x.innerRadius,x.outerRadius,x.thetaSegments,x.phiSegments,x.thetaStart,x.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(x=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),w=12){super(),this.type="ShapeGeometry",this.parameters={shapes:x,curveSegments:w};const S=[],U=[],G=[],z=[];let H=0,j=0;if(!1===Array.isArray(x))addShape(x);else for(let w=0;w<x.length;w++)addShape(x[w]),this.addGroup(H,j,w),H+=j,j=0;function addShape(x){const H=U.length/3,X=x.extractPoints(w);let q=X.shape;const K=X.holes;!1===ShapeUtils.isClockWise(q)&&(q=q.reverse());for(let x=0,w=K.length;x<w;x++){const w=K[x];!0===ShapeUtils.isClockWise(w)&&(K[x]=w.reverse())}const Y=ShapeUtils.triangulateShape(q,K);for(let x=0,w=K.length;x<w;x++){const w=K[x];q=q.concat(w)}for(let x=0,w=q.length;x<w;x++){const w=q[x];U.push(w.x,w.y,0),G.push(0,0,1),z.push(w.x,w.y)}for(let x=0,w=Y.length;x<w;x++){const w=Y[x],U=w[0]+H,G=w[1]+H,z=w[2]+H;S.push(U,G,z),j+=3}}this.setIndex(S),this.setAttribute("position",new Float32BufferAttribute(U,3)),this.setAttribute("normal",new Float32BufferAttribute(G,3)),this.setAttribute("uv",new Float32BufferAttribute(z,2))}toJSON(){const x=super.toJSON();return function toJSON(x,w){if(w.shapes=[],Array.isArray(x))for(let S=0,U=x.length;S<U;S++){const U=x[S];w.shapes.push(U.uuid)}else w.shapes.push(x.uuid);return w}(this.parameters.shapes,x)}static fromJSON(x,w){const S=[];for(let U=0,G=x.shapes.length;U<G;U++){const G=w[x.shapes[U]];S.push(G)}return new ShapeGeometry(S,x.curveSegments)}}class SphereGeometry extends BufferGeometry{constructor(x=1,w=32,S=16,U=0,G=2*Math.PI,z=0,H=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:x,widthSegments:w,heightSegments:S,phiStart:U,phiLength:G,thetaStart:z,thetaLength:H},w=Math.max(3,Math.floor(w)),S=Math.max(2,Math.floor(S));const j=Math.min(z+H,Math.PI);let X=0;const q=[],K=new Vector3,Y=new Vector3,Z=[],J=[],Q=[],ee=[];for(let Z=0;Z<=S;Z++){const te=[],ne=Z/S;let re=0;0==Z&&0==z?re=.5/w:Z==S&&j==Math.PI&&(re=-.5/w);for(let S=0;S<=w;S++){const j=S/w;K.x=-x*Math.cos(U+j*G)*Math.sin(z+ne*H),K.y=x*Math.cos(z+ne*H),K.z=x*Math.sin(U+j*G)*Math.sin(z+ne*H),J.push(K.x,K.y,K.z),Y.copy(K).normalize(),Q.push(Y.x,Y.y,Y.z),ee.push(j+re,1-ne),te.push(X++)}q.push(te)}for(let x=0;x<S;x++)for(let U=0;U<w;U++){const w=q[x][U+1],G=q[x][U],H=q[x+1][U],X=q[x+1][U+1];(0!==x||z>0)&&Z.push(w,G,X),(x!==S-1||j<Math.PI)&&Z.push(G,H,X)}this.setIndex(Z),this.setAttribute("position",new Float32BufferAttribute(J,3)),this.setAttribute("normal",new Float32BufferAttribute(Q,3)),this.setAttribute("uv",new Float32BufferAttribute(ee,2))}static fromJSON(x){return new SphereGeometry(x.radius,x.widthSegments,x.heightSegments,x.phiStart,x.phiLength,x.thetaStart,x.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(x=1,w=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],x,w),this.type="TetrahedronGeometry",this.parameters={radius:x,detail:w}}static fromJSON(x){return new TetrahedronGeometry(x.radius,x.detail)}}class TorusGeometry extends BufferGeometry{constructor(x=1,w=.4,S=8,U=6,G=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:x,tube:w,radialSegments:S,tubularSegments:U,arc:G},S=Math.floor(S),U=Math.floor(U);const z=[],H=[],j=[],X=[],q=new Vector3,K=new Vector3,Y=new Vector3;for(let z=0;z<=S;z++)for(let Z=0;Z<=U;Z++){const J=Z/U*G,Q=z/S*Math.PI*2;K.x=(x+w*Math.cos(Q))*Math.cos(J),K.y=(x+w*Math.cos(Q))*Math.sin(J),K.z=w*Math.sin(Q),H.push(K.x,K.y,K.z),q.x=x*Math.cos(J),q.y=x*Math.sin(J),Y.subVectors(K,q).normalize(),j.push(Y.x,Y.y,Y.z),X.push(Z/U),X.push(z/S)}for(let x=1;x<=S;x++)for(let w=1;w<=U;w++){const S=(U+1)*x+w-1,G=(U+1)*(x-1)+w-1,H=(U+1)*(x-1)+w,j=(U+1)*x+w;z.push(S,G,j),z.push(G,H,j)}this.setIndex(z),this.setAttribute("position",new Float32BufferAttribute(H,3)),this.setAttribute("normal",new Float32BufferAttribute(j,3)),this.setAttribute("uv",new Float32BufferAttribute(X,2))}static fromJSON(x){return new TorusGeometry(x.radius,x.tube,x.radialSegments,x.tubularSegments,x.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(x=1,w=.4,S=64,U=8,G=2,z=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:x,tube:w,tubularSegments:S,radialSegments:U,p:G,q:z},S=Math.floor(S),U=Math.floor(U);const H=[],j=[],X=[],q=[],K=new Vector3,Y=new Vector3,Z=new Vector3,J=new Vector3,Q=new Vector3,ee=new Vector3,te=new Vector3;for(let H=0;H<=S;++H){const ne=H/S*G*Math.PI*2;calculatePositionOnCurve(ne,G,z,x,Z),calculatePositionOnCurve(ne+.01,G,z,x,J),ee.subVectors(J,Z),te.addVectors(J,Z),Q.crossVectors(ee,te),te.crossVectors(Q,ee),Q.normalize(),te.normalize();for(let x=0;x<=U;++x){const G=x/U*Math.PI*2,z=-w*Math.cos(G),J=w*Math.sin(G);K.x=Z.x+(z*te.x+J*Q.x),K.y=Z.y+(z*te.y+J*Q.y),K.z=Z.z+(z*te.z+J*Q.z),j.push(K.x,K.y,K.z),Y.subVectors(K,Z).normalize(),X.push(Y.x,Y.y,Y.z),q.push(H/S),q.push(x/U)}}for(let x=1;x<=S;x++)for(let w=1;w<=U;w++){const S=(U+1)*(x-1)+(w-1),G=(U+1)*x+(w-1),z=(U+1)*x+w,j=(U+1)*(x-1)+w;H.push(S,G,j),H.push(G,z,j)}function calculatePositionOnCurve(x,w,S,U,G){const z=Math.cos(x),H=Math.sin(x),j=S/w*x,X=Math.cos(j);G.x=U*(2+X)*.5*z,G.y=U*(2+X)*H*.5,G.z=U*Math.sin(j)*.5}this.setIndex(H),this.setAttribute("position",new Float32BufferAttribute(j,3)),this.setAttribute("normal",new Float32BufferAttribute(X,3)),this.setAttribute("uv",new Float32BufferAttribute(q,2))}static fromJSON(x){return new TorusKnotGeometry(x.radius,x.tube,x.tubularSegments,x.radialSegments,x.p,x.q)}}class TubeGeometry extends BufferGeometry{constructor(x=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),w=64,S=1,U=8,G=!1){super(),this.type="TubeGeometry",this.parameters={path:x,tubularSegments:w,radius:S,radialSegments:U,closed:G};const z=x.computeFrenetFrames(w,G);this.tangents=z.tangents,this.normals=z.normals,this.binormals=z.binormals;const H=new Vector3,j=new Vector3,X=new Vector2;let q=new Vector3;const K=[],Y=[],Z=[],J=[];function generateSegment(G){q=x.getPointAt(G/w,q);const X=z.normals[G],Z=z.binormals[G];for(let x=0;x<=U;x++){const w=x/U*Math.PI*2,G=Math.sin(w),z=-Math.cos(w);j.x=z*X.x+G*Z.x,j.y=z*X.y+G*Z.y,j.z=z*X.z+G*Z.z,j.normalize(),Y.push(j.x,j.y,j.z),H.x=q.x+S*j.x,H.y=q.y+S*j.y,H.z=q.z+S*j.z,K.push(H.x,H.y,H.z)}}!function generateBufferData(){for(let x=0;x<w;x++)generateSegment(x);generateSegment(!1===G?w:0),function generateUVs(){for(let x=0;x<=w;x++)for(let S=0;S<=U;S++)X.x=x/w,X.y=S/U,Z.push(X.x,X.y)}(),function generateIndices(){for(let x=1;x<=w;x++)for(let w=1;w<=U;w++){const S=(U+1)*(x-1)+(w-1),G=(U+1)*x+(w-1),z=(U+1)*x+w,H=(U+1)*(x-1)+w;J.push(S,G,H),J.push(G,z,H)}}()}(),this.setIndex(J),this.setAttribute("position",new Float32BufferAttribute(K,3)),this.setAttribute("normal",new Float32BufferAttribute(Y,3)),this.setAttribute("uv",new Float32BufferAttribute(Z,2))}toJSON(){const x=super.toJSON();return x.path=this.parameters.path.toJSON(),x}static fromJSON(x){return new TubeGeometry((new hs[x.path.type]).fromJSON(x.path),x.tubularSegments,x.radius,x.radialSegments,x.closed)}}class WireframeGeometry extends BufferGeometry{constructor(x=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:x},null!==x){const w=[],S=new Set,U=new Vector3,G=new Vector3;if(null!==x.index){const z=x.attributes.position,H=x.index;let j=x.groups;0===j.length&&(j=[{start:0,count:H.count,materialIndex:0}]);for(let x=0,X=j.length;x<X;++x){const X=j[x],q=X.start;for(let x=q,j=q+X.count;x<j;x+=3)for(let j=0;j<3;j++){const X=H.getX(x+j),q=H.getX(x+(j+1)%3);U.fromBufferAttribute(z,X),G.fromBufferAttribute(z,q),!0===isUniqueEdge(U,G,S)&&(w.push(U.x,U.y,U.z),w.push(G.x,G.y,G.z))}}}else{const z=x.attributes.position;for(let x=0,H=z.count/3;x<H;x++)for(let H=0;H<3;H++){const j=3*x+H,X=3*x+(H+1)%3;U.fromBufferAttribute(z,j),G.fromBufferAttribute(z,X),!0===isUniqueEdge(U,G,S)&&(w.push(U.x,U.y,U.z),w.push(G.x,G.y,G.z))}}this.setAttribute("position",new Float32BufferAttribute(w,3))}}}function isUniqueEdge(x,w,S){const U=`${x.x},${x.y},${x.z}-${w.x},${w.y},${w.z}`,G=`${w.x},${w.y},${w.z}-${x.x},${x.y},${x.z}`;return!0!==S.has(U)&&!0!==S.has(G)&&(S.add(U,G),!0)}var ps=Object.freeze({__proto__:null,BoxGeometry,BoxBufferGeometry:BoxGeometry,CircleGeometry,CircleBufferGeometry:CircleGeometry,ConeGeometry,ConeBufferGeometry:ConeGeometry,CylinderGeometry,CylinderBufferGeometry:CylinderGeometry,DodecahedronGeometry,DodecahedronBufferGeometry:DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,ExtrudeBufferGeometry:ExtrudeGeometry,IcosahedronGeometry,IcosahedronBufferGeometry:IcosahedronGeometry,LatheGeometry,LatheBufferGeometry:LatheGeometry,OctahedronGeometry,OctahedronBufferGeometry:OctahedronGeometry,PlaneGeometry,PlaneBufferGeometry:PlaneGeometry,PolyhedronGeometry,PolyhedronBufferGeometry:PolyhedronGeometry,RingGeometry,RingBufferGeometry:RingGeometry,ShapeGeometry,ShapeBufferGeometry:ShapeGeometry,SphereGeometry,SphereBufferGeometry:SphereGeometry,TetrahedronGeometry,TetrahedronBufferGeometry:TetrahedronGeometry,TorusGeometry,TorusBufferGeometry:TorusGeometry,TorusKnotGeometry,TorusKnotBufferGeometry:TorusKnotGeometry,TubeGeometry,TubeBufferGeometry:TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(x){super(),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(x)}copy(x){return super.copy(x),this.color.copy(x.color),this}}ShadowMaterial.prototype.isShadowMaterial=!0;class MeshStandardMaterial extends Material{constructor(x){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ar,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(x)}copy(x){return super.copy(x),this.defines={STANDARD:""},this.color.copy(x.color),this.roughness=x.roughness,this.metalness=x.metalness,this.map=x.map,this.lightMap=x.lightMap,this.lightMapIntensity=x.lightMapIntensity,this.aoMap=x.aoMap,this.aoMapIntensity=x.aoMapIntensity,this.emissive.copy(x.emissive),this.emissiveMap=x.emissiveMap,this.emissiveIntensity=x.emissiveIntensity,this.bumpMap=x.bumpMap,this.bumpScale=x.bumpScale,this.normalMap=x.normalMap,this.normalMapType=x.normalMapType,this.normalScale.copy(x.normalScale),this.displacementMap=x.displacementMap,this.displacementScale=x.displacementScale,this.displacementBias=x.displacementBias,this.roughnessMap=x.roughnessMap,this.metalnessMap=x.metalnessMap,this.alphaMap=x.alphaMap,this.envMap=x.envMap,this.envMapIntensity=x.envMapIntensity,this.refractionRatio=x.refractionRatio,this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.wireframeLinecap=x.wireframeLinecap,this.wireframeLinejoin=x.wireframeLinejoin,this.flatShading=x.flatShading,this}}MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(x){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(x){this.ior=(1+.4*x)/(1-.4*x)}}),this.sheenTint=new Color(0),this.sheenRoughness=1,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new Color(1,1,1),this.specularTintMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(x)}get sheen(){return this._sheen}set sheen(x){this._sheen>0!=x>0&&this.version++,this._sheen=x}get clearcoat(){return this._clearcoat}set clearcoat(x){this._clearcoat>0!=x>0&&this.version++,this._clearcoat=x}get transmission(){return this._transmission}set transmission(x){this._transmission>0!=x>0&&this.version++,this._transmission=x}copy(x){return super.copy(x),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=x.clearcoat,this.clearcoatMap=x.clearcoatMap,this.clearcoatRoughness=x.clearcoatRoughness,this.clearcoatRoughnessMap=x.clearcoatRoughnessMap,this.clearcoatNormalMap=x.clearcoatNormalMap,this.clearcoatNormalScale.copy(x.clearcoatNormalScale),this.ior=x.ior,this.sheen=x.sheen,this.sheenTint.copy(x.sheenTint),this.sheenRoughness=x.sheenRoughness,this.transmission=x.transmission,this.transmissionMap=x.transmissionMap,this.thickness=x.thickness,this.thicknessMap=x.thicknessMap,this.attenuationDistance=x.attenuationDistance,this.attenuationTint.copy(x.attenuationTint),this.specularIntensity=x.specularIntensity,this.specularIntensityMap=x.specularIntensityMap,this.specularTint.copy(x.specularTint),this.specularTintMap=x.specularTintMap,this}}MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;class MeshPhongMaterial extends Material{constructor(x){super(),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ar,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(x)}copy(x){return super.copy(x),this.color.copy(x.color),this.specular.copy(x.specular),this.shininess=x.shininess,this.map=x.map,this.lightMap=x.lightMap,this.lightMapIntensity=x.lightMapIntensity,this.aoMap=x.aoMap,this.aoMapIntensity=x.aoMapIntensity,this.emissive.copy(x.emissive),this.emissiveMap=x.emissiveMap,this.emissiveIntensity=x.emissiveIntensity,this.bumpMap=x.bumpMap,this.bumpScale=x.bumpScale,this.normalMap=x.normalMap,this.normalMapType=x.normalMapType,this.normalScale.copy(x.normalScale),this.displacementMap=x.displacementMap,this.displacementScale=x.displacementScale,this.displacementBias=x.displacementBias,this.specularMap=x.specularMap,this.alphaMap=x.alphaMap,this.envMap=x.envMap,this.combine=x.combine,this.reflectivity=x.reflectivity,this.refractionRatio=x.refractionRatio,this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.wireframeLinecap=x.wireframeLinecap,this.wireframeLinejoin=x.wireframeLinejoin,this.flatShading=x.flatShading,this}}MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;class MeshToonMaterial extends Material{constructor(x){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ar,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(x)}copy(x){return super.copy(x),this.color.copy(x.color),this.map=x.map,this.gradientMap=x.gradientMap,this.lightMap=x.lightMap,this.lightMapIntensity=x.lightMapIntensity,this.aoMap=x.aoMap,this.aoMapIntensity=x.aoMapIntensity,this.emissive.copy(x.emissive),this.emissiveMap=x.emissiveMap,this.emissiveIntensity=x.emissiveIntensity,this.bumpMap=x.bumpMap,this.bumpScale=x.bumpScale,this.normalMap=x.normalMap,this.normalMapType=x.normalMapType,this.normalScale.copy(x.normalScale),this.displacementMap=x.displacementMap,this.displacementScale=x.displacementScale,this.displacementBias=x.displacementBias,this.alphaMap=x.alphaMap,this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.wireframeLinecap=x.wireframeLinecap,this.wireframeLinejoin=x.wireframeLinejoin,this}}MeshToonMaterial.prototype.isMeshToonMaterial=!0;class MeshNormalMaterial extends Material{constructor(x){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ar,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(x)}copy(x){return super.copy(x),this.bumpMap=x.bumpMap,this.bumpScale=x.bumpScale,this.normalMap=x.normalMap,this.normalMapType=x.normalMapType,this.normalScale.copy(x.normalScale),this.displacementMap=x.displacementMap,this.displacementScale=x.displacementScale,this.displacementBias=x.displacementBias,this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.flatShading=x.flatShading,this}}MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;class MeshLambertMaterial extends Material{constructor(x){super(),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(x)}copy(x){return super.copy(x),this.color.copy(x.color),this.map=x.map,this.lightMap=x.lightMap,this.lightMapIntensity=x.lightMapIntensity,this.aoMap=x.aoMap,this.aoMapIntensity=x.aoMapIntensity,this.emissive.copy(x.emissive),this.emissiveMap=x.emissiveMap,this.emissiveIntensity=x.emissiveIntensity,this.specularMap=x.specularMap,this.alphaMap=x.alphaMap,this.envMap=x.envMap,this.combine=x.combine,this.reflectivity=x.reflectivity,this.refractionRatio=x.refractionRatio,this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.wireframeLinecap=x.wireframeLinecap,this.wireframeLinejoin=x.wireframeLinejoin,this}}MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;class MeshMatcapMaterial extends Material{constructor(x){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ar,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(x)}copy(x){return super.copy(x),this.defines={MATCAP:""},this.color.copy(x.color),this.matcap=x.matcap,this.map=x.map,this.bumpMap=x.bumpMap,this.bumpScale=x.bumpScale,this.normalMap=x.normalMap,this.normalMapType=x.normalMapType,this.normalScale.copy(x.normalScale),this.displacementMap=x.displacementMap,this.displacementScale=x.displacementScale,this.displacementBias=x.displacementBias,this.alphaMap=x.alphaMap,this.flatShading=x.flatShading,this}}MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;class LineDashedMaterial extends LineBasicMaterial{constructor(x){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(x)}copy(x){return super.copy(x),this.scale=x.scale,this.dashSize=x.dashSize,this.gapSize=x.gapSize,this}}LineDashedMaterial.prototype.isLineDashedMaterial=!0;var fs=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material});const ms={arraySlice:function(x,w,S){return ms.isTypedArray(x)?new x.constructor(x.subarray(w,void 0!==S?S:x.length)):x.slice(w,S)},convertArray:function(x,w,S){return!x||!S&&x.constructor===w?x:"number"==typeof w.BYTES_PER_ELEMENT?new w(x):Array.prototype.slice.call(x)},isTypedArray:function(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)},getKeyframeOrder:function(x){const w=x.length,S=new Array(w);for(let x=0;x!==w;++x)S[x]=x;return S.sort((function compareTime(w,S){return x[w]-x[S]})),S},sortedArray:function(x,w,S){const U=x.length,G=new x.constructor(U);for(let z=0,H=0;H!==U;++z){const U=S[z]*w;for(let S=0;S!==w;++S)G[H++]=x[U+S]}return G},flattenJSON:function(x,w,S,U){let G=1,z=x[0];for(;void 0!==z&&void 0===z[U];)z=x[G++];if(void 0===z)return;let H=z[U];if(void 0!==H)if(Array.isArray(H))do{H=z[U],void 0!==H&&(w.push(z.time),S.push.apply(S,H)),z=x[G++]}while(void 0!==z);else if(void 0!==H.toArray)do{H=z[U],void 0!==H&&(w.push(z.time),H.toArray(S,S.length)),z=x[G++]}while(void 0!==z);else do{H=z[U],void 0!==H&&(w.push(z.time),S.push(H)),z=x[G++]}while(void 0!==z)},subclip:function(x,w,S,U,G=30){const z=x.clone();z.name=w;const H=[];for(let x=0;x<z.tracks.length;++x){const w=z.tracks[x],j=w.getValueSize(),X=[],q=[];for(let x=0;x<w.times.length;++x){const z=w.times[x]*G;if(!(z<S||z>=U)){X.push(w.times[x]);for(let S=0;S<j;++S)q.push(w.values[x*j+S])}}0!==X.length&&(w.times=ms.convertArray(X,w.times.constructor),w.values=ms.convertArray(q,w.values.constructor),H.push(w))}z.tracks=H;let j=1/0;for(let x=0;x<z.tracks.length;++x)j>z.tracks[x].times[0]&&(j=z.tracks[x].times[0]);for(let x=0;x<z.tracks.length;++x)z.tracks[x].shift(-1*j);return z.resetDuration(),z},makeClipAdditive:function(x,w=0,S=x,U=30){U<=0&&(U=30);const G=S.tracks.length,z=w/U;for(let w=0;w<G;++w){const U=S.tracks[w],G=U.ValueTypeName;if("bool"===G||"string"===G)continue;const H=x.tracks.find((function(x){return x.name===U.name&&x.ValueTypeName===G}));if(void 0===H)continue;let j=0;const X=U.getValueSize();U.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(j=X/3);let q=0;const K=H.getValueSize();H.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(q=K/3);const Y=U.times.length-1;let Z;if(z<=U.times[0]){const x=j,w=X-j;Z=ms.arraySlice(U.values,x,w)}else if(z>=U.times[Y]){const x=Y*X+j,w=x+X-j;Z=ms.arraySlice(U.values,x,w)}else{const x=U.createInterpolant(),w=j,S=X-j;x.evaluate(z),Z=ms.arraySlice(x.resultBuffer,w,S)}if("quaternion"===G){(new Quaternion).fromArray(Z).normalize().conjugate().toArray(Z)}const J=H.times.length;for(let x=0;x<J;++x){const w=x*K+q;if("quaternion"===G)Quaternion.multiplyQuaternionsFlat(H.values,w,Z,0,H.values,w);else{const x=K-2*q;for(let S=0;S<x;++S)H.values[w+S]-=Z[S]}}}return x.blendMode=zn,x}};class Interpolant{constructor(x,w,S,U){this.parameterPositions=x,this._cachedIndex=0,this.resultBuffer=void 0!==U?U:new w.constructor(S),this.sampleValues=w,this.valueSize=S,this.settings=null,this.DefaultSettings_={}}evaluate(x){const w=this.parameterPositions;let S=this._cachedIndex,U=w[S],G=w[S-1];e:{t:{let z;n:{r:if(!(x<U)){for(let z=S+2;;){if(void 0===U){if(x<G)break r;return S=w.length,this._cachedIndex=S,this.afterEnd_(S-1,x,G)}if(S===z)break;if(G=U,U=w[++S],x<U)break t}z=w.length;break n}if(x>=G)break e;{const H=w[1];x<H&&(S=2,G=H);for(let z=S-2;;){if(void 0===G)return this._cachedIndex=0,this.beforeStart_(0,x,U);if(S===z)break;if(U=G,G=w[--S-1],x>=G)break t}z=S,S=0}}for(;S<z;){const U=S+z>>>1;x<w[U]?z=U:S=U+1}if(U=w[S],G=w[S-1],void 0===G)return this._cachedIndex=0,this.beforeStart_(0,x,U);if(void 0===U)return S=w.length,this._cachedIndex=S,this.afterEnd_(S-1,G,x)}this._cachedIndex=S,this.intervalChanged_(S,G,U)}return this.interpolate_(S,G,x,U)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(x){const w=this.resultBuffer,S=this.sampleValues,U=this.valueSize,G=x*U;for(let x=0;x!==U;++x)w[x]=S[G+x];return w}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Interpolant.prototype.beforeStart_=Interpolant.prototype.copySampleValue_,Interpolant.prototype.afterEnd_=Interpolant.prototype.copySampleValue_;class CubicInterpolant extends Interpolant{constructor(x,w,S,U){super(x,w,S,U),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Dn,endingEnd:Dn}}intervalChanged_(x,w,S){const U=this.parameterPositions;let G=x-2,z=x+1,H=U[G],j=U[z];if(void 0===H)switch(this.getSettings_().endingStart){case kn:G=x,H=2*w-S;break;case Gn:G=U.length-2,H=w+U[G]-U[G+1];break;default:G=x,H=S}if(void 0===j)switch(this.getSettings_().endingEnd){case kn:z=x,j=2*S-w;break;case Gn:z=1,j=S+U[1]-U[0];break;default:z=x-1,j=w}const X=.5*(S-w),q=this.valueSize;this._weightPrev=X/(w-H),this._weightNext=X/(j-S),this._offsetPrev=G*q,this._offsetNext=z*q}interpolate_(x,w,S,U){const G=this.resultBuffer,z=this.sampleValues,H=this.valueSize,j=x*H,X=j-H,q=this._offsetPrev,K=this._offsetNext,Y=this._weightPrev,Z=this._weightNext,J=(S-w)/(U-w),Q=J*J,ee=Q*J,te=-Y*ee+2*Y*Q-Y*J,ne=(1+Y)*ee+(-1.5-2*Y)*Q+(-.5+Y)*J+1,re=(-1-Z)*ee+(1.5+Z)*Q+.5*J,ie=Z*ee-Z*Q;for(let x=0;x!==H;++x)G[x]=te*z[q+x]+ne*z[X+x]+re*z[j+x]+ie*z[K+x];return G}}class LinearInterpolant extends Interpolant{constructor(x,w,S,U){super(x,w,S,U)}interpolate_(x,w,S,U){const G=this.resultBuffer,z=this.sampleValues,H=this.valueSize,j=x*H,X=j-H,q=(S-w)/(U-w),K=1-q;for(let x=0;x!==H;++x)G[x]=z[X+x]*K+z[j+x]*q;return G}}class DiscreteInterpolant extends Interpolant{constructor(x,w,S,U){super(x,w,S,U)}interpolate_(x){return this.copySampleValue_(x-1)}}class KeyframeTrack{constructor(x,w,S,U){if(void 0===x)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===w||0===w.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+x);this.name=x,this.times=ms.convertArray(w,this.TimeBufferType),this.values=ms.convertArray(S,this.ValueBufferType),this.setInterpolation(U||this.DefaultInterpolation)}static toJSON(x){const w=x.constructor;let S;if(w.toJSON!==this.toJSON)S=w.toJSON(x);else{S={name:x.name,times:ms.convertArray(x.times,Array),values:ms.convertArray(x.values,Array)};const w=x.getInterpolation();w!==x.DefaultInterpolation&&(S.interpolation=w)}return S.type=x.ValueTypeName,S}InterpolantFactoryMethodDiscrete(x){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),x)}InterpolantFactoryMethodLinear(x){return new LinearInterpolant(this.times,this.values,this.getValueSize(),x)}InterpolantFactoryMethodSmooth(x){return new CubicInterpolant(this.times,this.values,this.getValueSize(),x)}setInterpolation(x){let w;switch(x){case Nn:w=this.InterpolantFactoryMethodDiscrete;break;case Fn:w=this.InterpolantFactoryMethodLinear;break;case Bn:w=this.InterpolantFactoryMethodSmooth}if(void 0===w){const w="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(x===this.DefaultInterpolation)throw new Error(w);this.setInterpolation(this.DefaultInterpolation)}return U.warn("THREE.KeyframeTrack:",w),this}return this.createInterpolant=w,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Nn;case this.InterpolantFactoryMethodLinear:return Fn;case this.InterpolantFactoryMethodSmooth:return Bn}}getValueSize(){return this.values.length/this.times.length}shift(x){if(0!==x){const w=this.times;for(let S=0,U=w.length;S!==U;++S)w[S]+=x}return this}scale(x){if(1!==x){const w=this.times;for(let S=0,U=w.length;S!==U;++S)w[S]*=x}return this}trim(x,w){const S=this.times,U=S.length;let G=0,z=U-1;for(;G!==U&&S[G]<x;)++G;for(;-1!==z&&S[z]>w;)--z;if(++z,0!==G||z!==U){G>=z&&(z=Math.max(z,1),G=z-1);const x=this.getValueSize();this.times=ms.arraySlice(S,G,z),this.values=ms.arraySlice(this.values,G*x,z*x)}return this}validate(){let x=!0;const w=this.getValueSize();w-Math.floor(w)!=0&&(U.error("THREE.KeyframeTrack: Invalid value size in track.",this),x=!1);const S=this.times,G=this.values,z=S.length;0===z&&(U.error("THREE.KeyframeTrack: Track is empty.",this),x=!1);let H=null;for(let w=0;w!==z;w++){const G=S[w];if("number"==typeof G&&isNaN(G)){U.error("THREE.KeyframeTrack: Time is not a valid number.",this,w,G),x=!1;break}if(null!==H&&H>G){U.error("THREE.KeyframeTrack: Out of order keys.",this,w,G,H),x=!1;break}H=G}if(void 0!==G&&ms.isTypedArray(G))for(let w=0,S=G.length;w!==S;++w){const S=G[w];if(isNaN(S)){U.error("THREE.KeyframeTrack: Value is not a valid number.",this,w,S),x=!1;break}}return x}optimize(){const x=ms.arraySlice(this.times),w=ms.arraySlice(this.values),S=this.getValueSize(),U=this.getInterpolation()===Bn,G=x.length-1;let z=1;for(let H=1;H<G;++H){let G=!1;const j=x[H];if(j!==x[H+1]&&(1!==H||j!==x[0]))if(U)G=!0;else{const x=H*S,U=x-S,z=x+S;for(let H=0;H!==S;++H){const S=w[x+H];if(S!==w[U+H]||S!==w[z+H]){G=!0;break}}}if(G){if(H!==z){x[z]=x[H];const U=H*S,G=z*S;for(let x=0;x!==S;++x)w[G+x]=w[U+x]}++z}}if(G>0){x[z]=x[G];for(let x=G*S,U=z*S,H=0;H!==S;++H)w[U+H]=w[x+H];++z}return z!==x.length?(this.times=ms.arraySlice(x,0,z),this.values=ms.arraySlice(w,0,z*S)):(this.times=x,this.values=w),this}clone(){const x=ms.arraySlice(this.times,0),w=ms.arraySlice(this.values,0),S=new(0,this.constructor)(this.name,x,w);return S.createInterpolant=this.createInterpolant,S}}KeyframeTrack.prototype.TimeBufferType=Float32Array,KeyframeTrack.prototype.ValueBufferType=Float32Array,KeyframeTrack.prototype.DefaultInterpolation=Fn;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool",BooleanKeyframeTrack.prototype.ValueBufferType=Array,BooleanKeyframeTrack.prototype.DefaultInterpolation=Nn,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(x,w,S,U){super(x,w,S,U)}interpolate_(x,w,S,U){const G=this.resultBuffer,z=this.sampleValues,H=this.valueSize,j=(S-w)/(U-w);let X=x*H;for(let x=X+H;X!==x;X+=4)Quaternion.slerpFlat(G,0,z,X-H,z,X,j);return G}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(x){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),x)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion",QuaternionKeyframeTrack.prototype.DefaultInterpolation=Fn,QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string",StringKeyframeTrack.prototype.ValueBufferType=Array,StringKeyframeTrack.prototype.DefaultInterpolation=Nn,StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(x,w=-1,S,U=Wn){this.name=x,this.tracks=S,this.duration=w,this.blendMode=U,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(x){const w=[],S=x.tracks,U=1/(x.fps||1);for(let x=0,G=S.length;x!==G;++x)w.push(parseKeyframeTrack(S[x]).scale(U));const G=new this(x.name,x.duration,w,x.blendMode);return G.uuid=x.uuid,G}static toJSON(x){const w=[],S=x.tracks,U={name:x.name,duration:x.duration,tracks:w,uuid:x.uuid,blendMode:x.blendMode};for(let x=0,U=S.length;x!==U;++x)w.push(KeyframeTrack.toJSON(S[x]));return U}static CreateFromMorphTargetSequence(x,w,S,U){const G=w.length,z=[];for(let x=0;x<G;x++){let H=[],j=[];H.push((x+G-1)%G,x,(x+1)%G),j.push(0,1,0);const X=ms.getKeyframeOrder(H);H=ms.sortedArray(H,1,X),j=ms.sortedArray(j,1,X),U||0!==H[0]||(H.push(G),j.push(j[0])),z.push(new NumberKeyframeTrack(".morphTargetInfluences["+w[x].name+"]",H,j).scale(1/S))}return new this(x,-1,z)}static findByName(x,w){let S=x;if(!Array.isArray(x)){const w=x;S=w.geometry&&w.geometry.animations||w.animations}for(let x=0;x<S.length;x++)if(S[x].name===w)return S[x];return null}static CreateClipsFromMorphTargetSequences(x,w,S){const U={},G=/^([\w-]*?)([\d]+)$/;for(let w=0,S=x.length;w<S;w++){const S=x[w],z=S.name.match(G);if(z&&z.length>1){const x=z[1];let w=U[x];w||(U[x]=w=[]),w.push(S)}}const z=[];for(const x in U)z.push(this.CreateFromMorphTargetSequence(x,U[x],w,S));return z}static parseAnimation(x,w){if(!x)return U.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const addNonemptyTrack=function(x,w,S,U,G){if(0!==S.length){const z=[],H=[];ms.flattenJSON(S,z,H,U),0!==z.length&&G.push(new x(w,z,H))}},S=[],G=x.name||"default",z=x.fps||30,H=x.blendMode;let j=x.length||-1;const X=x.hierarchy||[];for(let x=0;x<X.length;x++){const U=X[x].keys;if(U&&0!==U.length)if(U[0].morphTargets){const x={};let w;for(w=0;w<U.length;w++)if(U[w].morphTargets)for(let S=0;S<U[w].morphTargets.length;S++)x[U[w].morphTargets[S]]=-1;for(const G in x){const x=[],z=[];for(let S=0;S!==U[w].morphTargets.length;++S){const S=U[w];x.push(S.time),z.push(S.morphTarget===G?1:0)}S.push(new NumberKeyframeTrack(".morphTargetInfluence["+G+"]",x,z))}j=x.length*(z||1)}else{const G=".bones["+w[x].name+"]";addNonemptyTrack(VectorKeyframeTrack,G+".position",U,"pos",S),addNonemptyTrack(QuaternionKeyframeTrack,G+".quaternion",U,"rot",S),addNonemptyTrack(VectorKeyframeTrack,G+".scale",U,"scl",S)}}if(0===S.length)return null;return new this(G,j,S,H)}resetDuration(){let x=0;for(let w=0,S=this.tracks.length;w!==S;++w){const S=this.tracks[w];x=Math.max(x,S.times[S.times.length-1])}return this.duration=x,this}trim(){for(let x=0;x<this.tracks.length;x++)this.tracks[x].trim(0,this.duration);return this}validate(){let x=!0;for(let w=0;w<this.tracks.length;w++)x=x&&this.tracks[w].validate();return x}optimize(){for(let x=0;x<this.tracks.length;x++)this.tracks[x].optimize();return this}clone(){const x=[];for(let w=0;w<this.tracks.length;w++)x.push(this.tracks[w].clone());return new this.constructor(this.name,this.duration,x,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function parseKeyframeTrack(x){if(void 0===x.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const w=function getTrackTypeForValueTypeName(x){switch(x.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+x)}(x.type);if(void 0===x.times){const w=[],S=[];ms.flattenJSON(x.keys,w,S,"value"),x.times=w,x.values=S}return void 0!==w.parse?w.parse(x):new w(x.name,x.times,x.values,x.interpolation)}const gs={enabled:!1,files:{},add:function(x,w){!1!==this.enabled&&(this.files[x]=w)},get:function(x){if(!1!==this.enabled)return this.files[x]},remove:function(x){delete this.files[x]},clear:function(){this.files={}}};class LoadingManager{constructor(x,w,S){const U=this;let G,z=!1,H=0,j=0;const X=[];this.onStart=void 0,this.onLoad=x,this.onProgress=w,this.onError=S,this.itemStart=function(x){j++,!1===z&&void 0!==U.onStart&&U.onStart(x,H,j),z=!0},this.itemEnd=function(x){H++,void 0!==U.onProgress&&U.onProgress(x,H,j),H===j&&(z=!1,void 0!==U.onLoad&&U.onLoad())},this.itemError=function(x){void 0!==U.onError&&U.onError(x)},this.resolveURL=function(x){return G?G(x):x},this.setURLModifier=function(x){return G=x,this},this.addHandler=function(x,w){return X.push(x,w),this},this.removeHandler=function(x){const w=X.indexOf(x);return-1!==w&&X.splice(w,2),this},this.getHandler=function(x){for(let w=0,S=X.length;w<S;w+=2){const S=X[w],U=X[w+1];if(S.global&&(S.lastIndex=0),S.test(x))return U}return null}}}const vs=new LoadingManager;class Loader{constructor(x){this.manager=void 0!==x?x:vs,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(x,w){const S=this;return new Promise((function(U,G){S.load(x,U,w,G)}))}parse(){}setCrossOrigin(x){return this.crossOrigin=x,this}setWithCredentials(x){return this.withCredentials=x,this}setPath(x){return this.path=x,this}setResourcePath(x){return this.resourcePath=x,this}setRequestHeader(x){return this.requestHeader=x,this}}const ys={};class FileLoader extends Loader{constructor(x){super(x)}load(x,w,S,G){void 0===x&&(x=""),void 0!==this.path&&(x=this.path+x),x=this.manager.resolveURL(x);const z=this,H=gs.get(x);if(void 0!==H)return z.manager.itemStart(x),setTimeout((function(){w&&w(H),z.manager.itemEnd(x)}),0),H;if(void 0!==ys[x])return void ys[x].push({onLoad:w,onProgress:S,onError:G});const j=x.match(/^data:(.*?)(;base64)?,(.*)$/);let X;if(j){const S=j[1],U=!!j[2];let H=j[3];H=decodeURIComponent(H),U&&(H=atob(H));try{let U;const G=(this.responseType||"").toLowerCase();switch(G){case"arraybuffer":case"blob":const x=new Uint8Array(H.length);for(let w=0;w<H.length;w++)x[w]=H.charCodeAt(w);U="blob"===G?new Blob([x.buffer],{type:S}):x.buffer;break;case"document":const w=new DOMParser;U=w.parseFromString(H,S);break;case"json":U=JSON.parse(H);break;default:U=H}setTimeout((function(){w&&w(U),z.manager.itemEnd(x)}),0)}catch(w){setTimeout((function(){G&&G(w),z.manager.itemError(x),z.manager.itemEnd(x)}),0)}}else{ys[x]=[],ys[x].push({onLoad:w,onProgress:S,onError:G}),X=new XMLHttpRequest,X.open("GET",x,!0),X.addEventListener("load",(function(w){const S=this.response,G=ys[x];if(delete ys[x],200===this.status||0===this.status){0===this.status&&U.warn("THREE.FileLoader: HTTP Status 0 received."),gs.add(x,S);for(let x=0,w=G.length;x<w;x++){const w=G[x];w.onLoad&&w.onLoad(S)}z.manager.itemEnd(x)}else{for(let x=0,S=G.length;x<S;x++){const S=G[x];S.onError&&S.onError(w)}z.manager.itemError(x),z.manager.itemEnd(x)}}),!1),X.addEventListener("progress",(function(w){const S=ys[x];for(let x=0,U=S.length;x<U;x++){const U=S[x];U.onProgress&&U.onProgress(w)}}),!1),X.addEventListener("error",(function(w){const S=ys[x];delete ys[x];for(let x=0,U=S.length;x<U;x++){const U=S[x];U.onError&&U.onError(w)}z.manager.itemError(x),z.manager.itemEnd(x)}),!1),X.addEventListener("abort",(function(w){const S=ys[x];delete ys[x];for(let x=0,U=S.length;x<U;x++){const U=S[x];U.onError&&U.onError(w)}z.manager.itemError(x),z.manager.itemEnd(x)}),!1),void 0!==this.responseType&&(X.responseType=this.responseType),void 0!==this.withCredentials&&(X.withCredentials=this.withCredentials),X.overrideMimeType&&X.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const x in this.requestHeader)X.setRequestHeader(x,this.requestHeader[x]);X.send(null)}return z.manager.itemStart(x),X}setResponseType(x){return this.responseType=x,this}setMimeType(x){return this.mimeType=x,this}}class AnimationLoader extends Loader{constructor(x){super(x)}load(x,w,S,G){const z=this,H=new FileLoader(this.manager);H.setPath(this.path),H.setRequestHeader(this.requestHeader),H.setWithCredentials(this.withCredentials),H.load(x,(function(S){try{w(z.parse(JSON.parse(S)))}catch(w){G?G(w):U.error(w),z.manager.itemError(x)}}),S,G)}parse(x){const w=[];for(let S=0;S<x.length;S++){const U=AnimationClip.parse(x[S]);w.push(U)}return w}}class CompressedTextureLoader extends Loader{constructor(x){super(x)}load(x,w,S,U){const G=this,z=[],H=new CompressedTexture,j=new FileLoader(this.manager);j.setPath(this.path),j.setResponseType("arraybuffer"),j.setRequestHeader(this.requestHeader),j.setWithCredentials(G.withCredentials);let X=0;function loadTexture(q){j.load(x[q],(function(x){const S=G.parse(x,!0);z[q]={width:S.width,height:S.height,format:S.format,mipmaps:S.mipmaps},X+=1,6===X&&(1===S.mipmapCount&&(H.minFilter=ot),H.image=z,H.format=S.format,H.needsUpdate=!0,w&&w(H))}),S,U)}if(Array.isArray(x))for(let w=0,S=x.length;w<S;++w)loadTexture(w);else j.load(x,(function(x){const S=G.parse(x,!0);if(S.isCubemap){const x=S.mipmaps.length/S.mipmapCount;for(let w=0;w<x;w++){z[w]={mipmaps:[]};for(let x=0;x<S.mipmapCount;x++)z[w].mipmaps.push(S.mipmaps[w*S.mipmapCount+x]),z[w].format=S.format,z[w].width=S.width,z[w].height=S.height}H.image=z}else H.image.width=S.width,H.image.height=S.height,H.mipmaps=S.mipmaps;1===S.mipmapCount&&(H.minFilter=ot),H.format=S.format,H.needsUpdate=!0,w&&w(H)}),S,U);return H}}class ImageLoader extends Loader{constructor(x){super(x)}load(x,w,S,U){void 0!==this.path&&(x=this.path+x),x=this.manager.resolveURL(x);const G=this,z=gs.get(x);if(void 0!==z)return G.manager.itemStart(x),setTimeout((function(){w&&w(z),G.manager.itemEnd(x)}),0),z;const H=createElementNS("img");function onImageLoad(){H.removeEventListener("load",onImageLoad,!1),H.removeEventListener("error",onImageError,!1),gs.add(x,this),w&&w(this),G.manager.itemEnd(x)}function onImageError(w){H.removeEventListener("load",onImageLoad,!1),H.removeEventListener("error",onImageError,!1),U&&U(w),G.manager.itemError(x),G.manager.itemEnd(x)}return H.addEventListener("load",onImageLoad,!1),H.addEventListener("error",onImageError,!1),"data:"!==x.substr(0,5)&&void 0!==this.crossOrigin&&(H.crossOrigin=this.crossOrigin),G.manager.itemStart(x),H.src=x,H}}class CubeTextureLoader extends Loader{constructor(x){super(x)}load(x,w,S,U){const G=new CubeTexture,z=new ImageLoader(this.manager);z.setCrossOrigin(this.crossOrigin),z.setPath(this.path);let H=0;function loadTexture(S){z.load(x[S],(function(x){G.images[S]=x,H++,6===H&&(G.needsUpdate=!0,w&&w(G))}),void 0,U)}for(let w=0;w<x.length;++w)loadTexture(w);return G}}class DataTextureLoader extends Loader{constructor(x){super(x)}load(x,w,S,U){const G=this,z=new DataTexture,H=new FileLoader(this.manager);return H.setResponseType("arraybuffer"),H.setRequestHeader(this.requestHeader),H.setPath(this.path),H.setWithCredentials(G.withCredentials),H.load(x,(function(x){const S=G.parse(x);S&&(void 0!==S.image?z.image=S.image:void 0!==S.data&&(z.image.width=S.width,z.image.height=S.height,z.image.data=S.data),z.wrapS=void 0!==S.wrapS?S.wrapS:Je,z.wrapT=void 0!==S.wrapT?S.wrapT:Je,z.magFilter=void 0!==S.magFilter?S.magFilter:ot,z.minFilter=void 0!==S.minFilter?S.minFilter:ot,z.anisotropy=void 0!==S.anisotropy?S.anisotropy:1,void 0!==S.encoding&&(z.encoding=S.encoding),void 0!==S.flipY&&(z.flipY=S.flipY),void 0!==S.format&&(z.format=S.format),void 0!==S.type&&(z.type=S.type),void 0!==S.mipmaps&&(z.mipmaps=S.mipmaps,z.minFilter=lt),1===S.mipmapCount&&(z.minFilter=ot),void 0!==S.generateMipmaps&&(z.generateMipmaps=S.generateMipmaps),z.needsUpdate=!0,w&&w(z,S))}),S,U),z}}class TextureLoader extends Loader{constructor(x){super(x)}load(x,w,S,U){const G=new Texture,z=new ImageLoader(this.manager);return z.setCrossOrigin(this.crossOrigin),z.setPath(this.path),z.load(x,(function(x){G.image=x,G.needsUpdate=!0,void 0!==w&&w(G)}),S,U),G}}class Light extends Object3D{constructor(x,w=1){super(),this.type="Light",this.color=new Color(x),this.intensity=w}dispose(){}copy(x){return super.copy(x),this.color.copy(x.color),this.intensity=x.intensity,this}toJSON(x){const w=super.toJSON(x);return w.object.color=this.color.getHex(),w.object.intensity=this.intensity,void 0!==this.groundColor&&(w.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(w.object.distance=this.distance),void 0!==this.angle&&(w.object.angle=this.angle),void 0!==this.decay&&(w.object.decay=this.decay),void 0!==this.penumbra&&(w.object.penumbra=this.penumbra),void 0!==this.shadow&&(w.object.shadow=this.shadow.toJSON()),w}}Light.prototype.isLight=!0;class HemisphereLight extends Light{constructor(x,w,S){super(x,S),this.type="HemisphereLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(w)}copy(x){return Light.prototype.copy.call(this,x),this.groundColor.copy(x.groundColor),this}}HemisphereLight.prototype.isHemisphereLight=!0;const _s=new Matrix4,bs=new Vector3,xs=new Vector3;class LightShadow{constructor(x){this.camera=x,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(x){const w=this.camera,S=this.matrix;bs.setFromMatrixPosition(x.matrixWorld),w.position.copy(bs),xs.setFromMatrixPosition(x.target.matrixWorld),w.lookAt(xs),w.updateMatrixWorld(),_s.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_s),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(w.projectionMatrix),S.multiply(w.matrixWorldInverse)}getViewport(x){return this._viewports[x]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(x){return this.camera=x.camera.clone(),this.bias=x.bias,this.radius=x.radius,this.mapSize.copy(x.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const x={};return 0!==this.bias&&(x.bias=this.bias),0!==this.normalBias&&(x.normalBias=this.normalBias),1!==this.radius&&(x.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(x.mapSize=this.mapSize.toArray()),x.camera=this.camera.toJSON(!1).object,delete x.camera.matrix,x}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.focus=1}updateMatrices(x){const w=this.camera,S=2*Dr*x.angle*this.focus,U=this.mapSize.width/this.mapSize.height,G=x.distance||w.far;S===w.fov&&U===w.aspect&&G===w.far||(w.fov=S,w.aspect=U,w.far=G,w.updateProjectionMatrix()),super.updateMatrices(x)}copy(x){return super.copy(x),this.focus=x.focus,this}}SpotLightShadow.prototype.isSpotLightShadow=!0;class SpotLight extends Light{constructor(x,w,S=0,U=Math.PI/3,G=0,z=1){super(x,w),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.distance=S,this.angle=U,this.penumbra=G,this.decay=z,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(x){this.intensity=x/Math.PI}dispose(){this.shadow.dispose()}copy(x){return super.copy(x),this.distance=x.distance,this.angle=x.angle,this.penumbra=x.penumbra,this.decay=x.decay,this.target=x.target.clone(),this.shadow=x.shadow.clone(),this}}SpotLight.prototype.isSpotLight=!0;const Es=new Matrix4,ws=new Vector3,Ss=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(x,w=0){const S=this.camera,U=this.matrix,G=x.distance||S.far;G!==S.far&&(S.far=G,S.updateProjectionMatrix()),ws.setFromMatrixPosition(x.matrixWorld),S.position.copy(ws),Ss.copy(S.position),Ss.add(this._cubeDirections[w]),S.up.copy(this._cubeUps[w]),S.lookAt(Ss),S.updateMatrixWorld(),U.makeTranslation(-ws.x,-ws.y,-ws.z),Es.multiplyMatrices(S.projectionMatrix,S.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Es)}}PointLightShadow.prototype.isPointLightShadow=!0;class PointLight extends Light{constructor(x,w,S=0,U=1){super(x,w),this.type="PointLight",this.distance=S,this.decay=U,this.shadow=new PointLightShadow}get power(){return 4*this.intensity*Math.PI}set power(x){this.intensity=x/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(x){return super.copy(x),this.distance=x.distance,this.decay=x.decay,this.shadow=x.shadow.clone(),this}}PointLight.prototype.isPointLight=!0;class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500))}}DirectionalLightShadow.prototype.isDirectionalLightShadow=!0;class DirectionalLight extends Light{constructor(x,w){super(x,w),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(x){return super.copy(x),this.target=x.target.clone(),this.shadow=x.shadow.clone(),this}}DirectionalLight.prototype.isDirectionalLight=!0;class AmbientLight extends Light{constructor(x,w){super(x,w),this.type="AmbientLight"}}AmbientLight.prototype.isAmbientLight=!0;class RectAreaLight extends Light{constructor(x,w,S=10,U=10){super(x,w),this.type="RectAreaLight",this.width=S,this.height=U}get power(){return this.intensity*this.width*this.height*Math.PI}set power(x){this.intensity=x/(this.width*this.height*Math.PI)}copy(x){return super.copy(x),this.width=x.width,this.height=x.height,this}toJSON(x){const w=super.toJSON(x);return w.object.width=this.width,w.object.height=this.height,w}}RectAreaLight.prototype.isRectAreaLight=!0;class SphericalHarmonics3{constructor(){this.coefficients=[];for(let x=0;x<9;x++)this.coefficients.push(new Vector3)}set(x){for(let w=0;w<9;w++)this.coefficients[w].copy(x[w]);return this}zero(){for(let x=0;x<9;x++)this.coefficients[x].set(0,0,0);return this}getAt(x,w){const S=x.x,U=x.y,G=x.z,z=this.coefficients;return w.copy(z[0]).multiplyScalar(.282095),w.addScaledVector(z[1],.488603*U),w.addScaledVector(z[2],.488603*G),w.addScaledVector(z[3],.488603*S),w.addScaledVector(z[4],S*U*1.092548),w.addScaledVector(z[5],U*G*1.092548),w.addScaledVector(z[6],.315392*(3*G*G-1)),w.addScaledVector(z[7],S*G*1.092548),w.addScaledVector(z[8],.546274*(S*S-U*U)),w}getIrradianceAt(x,w){const S=x.x,U=x.y,G=x.z,z=this.coefficients;return w.copy(z[0]).multiplyScalar(.886227),w.addScaledVector(z[1],1.023328*U),w.addScaledVector(z[2],1.023328*G),w.addScaledVector(z[3],1.023328*S),w.addScaledVector(z[4],.858086*S*U),w.addScaledVector(z[5],.858086*U*G),w.addScaledVector(z[6],.743125*G*G-.247708),w.addScaledVector(z[7],.858086*S*G),w.addScaledVector(z[8],.429043*(S*S-U*U)),w}add(x){for(let w=0;w<9;w++)this.coefficients[w].add(x.coefficients[w]);return this}addScaledSH(x,w){for(let S=0;S<9;S++)this.coefficients[S].addScaledVector(x.coefficients[S],w);return this}scale(x){for(let w=0;w<9;w++)this.coefficients[w].multiplyScalar(x);return this}lerp(x,w){for(let S=0;S<9;S++)this.coefficients[S].lerp(x.coefficients[S],w);return this}equals(x){for(let w=0;w<9;w++)if(!this.coefficients[w].equals(x.coefficients[w]))return!1;return!0}copy(x){return this.set(x.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(x,w=0){const S=this.coefficients;for(let U=0;U<9;U++)S[U].fromArray(x,w+3*U);return this}toArray(x=[],w=0){const S=this.coefficients;for(let U=0;U<9;U++)S[U].toArray(x,w+3*U);return x}static getBasisAt(x,w){const S=x.x,U=x.y,G=x.z;w[0]=.282095,w[1]=.488603*U,w[2]=.488603*G,w[3]=.488603*S,w[4]=1.092548*S*U,w[5]=1.092548*U*G,w[6]=.315392*(3*G*G-1),w[7]=1.092548*S*G,w[8]=.546274*(S*S-U*U)}}SphericalHarmonics3.prototype.isSphericalHarmonics3=!0;class LightProbe extends Light{constructor(x=new SphericalHarmonics3,w=1){super(void 0,w),this.sh=x}copy(x){return super.copy(x),this.sh.copy(x.sh),this}fromJSON(x){return this.intensity=x.intensity,this.sh.fromArray(x.sh),this}toJSON(x){const w=super.toJSON(x);return w.object.sh=this.sh.toArray(),w}}LightProbe.prototype.isLightProbe=!0;class MaterialLoader extends Loader{constructor(x){super(x),this.textures={}}load(x,w,S,G){const z=this,H=new FileLoader(z.manager);H.setPath(z.path),H.setRequestHeader(z.requestHeader),H.setWithCredentials(z.withCredentials),H.load(x,(function(S){try{w(z.parse(JSON.parse(S)))}catch(w){G?G(w):U.error(w),z.manager.itemError(x)}}),S,G)}parse(x){const w=this.textures;function getTexture(x){return void 0===w[x]&&U.warn("THREE.MaterialLoader: Undefined texture",x),w[x]}const S=new fs[x.type];if(void 0!==x.uuid&&(S.uuid=x.uuid),void 0!==x.name&&(S.name=x.name),void 0!==x.color&&void 0!==S.color&&S.color.setHex(x.color),void 0!==x.roughness&&(S.roughness=x.roughness),void 0!==x.metalness&&(S.metalness=x.metalness),void 0!==x.sheen&&(S.sheen=x.sheen),void 0!==x.sheenTint&&(S.sheenTint=(new Color).setHex(x.sheenTint)),void 0!==x.sheenRoughness&&(S.sheenRoughness=x.sheenRoughness),void 0!==x.emissive&&void 0!==S.emissive&&S.emissive.setHex(x.emissive),void 0!==x.specular&&void 0!==S.specular&&S.specular.setHex(x.specular),void 0!==x.specularIntensity&&(S.specularIntensity=x.specularIntensity),void 0!==x.specularTint&&void 0!==S.specularTint&&S.specularTint.setHex(x.specularTint),void 0!==x.shininess&&(S.shininess=x.shininess),void 0!==x.clearcoat&&(S.clearcoat=x.clearcoat),void 0!==x.clearcoatRoughness&&(S.clearcoatRoughness=x.clearcoatRoughness),void 0!==x.transmission&&(S.transmission=x.transmission),void 0!==x.thickness&&(S.thickness=x.thickness),void 0!==x.attenuationDistance&&(S.attenuationDistance=x.attenuationDistance),void 0!==x.attenuationTint&&void 0!==S.attenuationTint&&S.attenuationTint.setHex(x.attenuationTint),void 0!==x.fog&&(S.fog=x.fog),void 0!==x.flatShading&&(S.flatShading=x.flatShading),void 0!==x.blending&&(S.blending=x.blending),void 0!==x.combine&&(S.combine=x.combine),void 0!==x.side&&(S.side=x.side),void 0!==x.shadowSide&&(S.shadowSide=x.shadowSide),void 0!==x.opacity&&(S.opacity=x.opacity),void 0!==x.format&&(S.format=x.format),void 0!==x.transparent&&(S.transparent=x.transparent),void 0!==x.alphaTest&&(S.alphaTest=x.alphaTest),void 0!==x.depthTest&&(S.depthTest=x.depthTest),void 0!==x.depthWrite&&(S.depthWrite=x.depthWrite),void 0!==x.colorWrite&&(S.colorWrite=x.colorWrite),void 0!==x.stencilWrite&&(S.stencilWrite=x.stencilWrite),void 0!==x.stencilWriteMask&&(S.stencilWriteMask=x.stencilWriteMask),void 0!==x.stencilFunc&&(S.stencilFunc=x.stencilFunc),void 0!==x.stencilRef&&(S.stencilRef=x.stencilRef),void 0!==x.stencilFuncMask&&(S.stencilFuncMask=x.stencilFuncMask),void 0!==x.stencilFail&&(S.stencilFail=x.stencilFail),void 0!==x.stencilZFail&&(S.stencilZFail=x.stencilZFail),void 0!==x.stencilZPass&&(S.stencilZPass=x.stencilZPass),void 0!==x.wireframe&&(S.wireframe=x.wireframe),void 0!==x.wireframeLinewidth&&(S.wireframeLinewidth=x.wireframeLinewidth),void 0!==x.wireframeLinecap&&(S.wireframeLinecap=x.wireframeLinecap),void 0!==x.wireframeLinejoin&&(S.wireframeLinejoin=x.wireframeLinejoin),void 0!==x.rotation&&(S.rotation=x.rotation),1!==x.linewidth&&(S.linewidth=x.linewidth),void 0!==x.dashSize&&(S.dashSize=x.dashSize),void 0!==x.gapSize&&(S.gapSize=x.gapSize),void 0!==x.scale&&(S.scale=x.scale),void 0!==x.polygonOffset&&(S.polygonOffset=x.polygonOffset),void 0!==x.polygonOffsetFactor&&(S.polygonOffsetFactor=x.polygonOffsetFactor),void 0!==x.polygonOffsetUnits&&(S.polygonOffsetUnits=x.polygonOffsetUnits),void 0!==x.dithering&&(S.dithering=x.dithering),void 0!==x.alphaToCoverage&&(S.alphaToCoverage=x.alphaToCoverage),void 0!==x.premultipliedAlpha&&(S.premultipliedAlpha=x.premultipliedAlpha),void 0!==x.visible&&(S.visible=x.visible),void 0!==x.toneMapped&&(S.toneMapped=x.toneMapped),void 0!==x.userData&&(S.userData=x.userData),void 0!==x.vertexColors&&("number"==typeof x.vertexColors?S.vertexColors=x.vertexColors>0:S.vertexColors=x.vertexColors),void 0!==x.uniforms)for(const w in x.uniforms){const U=x.uniforms[w];switch(S.uniforms[w]={},U.type){case"t":S.uniforms[w].value=getTexture(U.value);break;case"c":S.uniforms[w].value=(new Color).setHex(U.value);break;case"v2":S.uniforms[w].value=(new Vector2).fromArray(U.value);break;case"v3":S.uniforms[w].value=(new Vector3).fromArray(U.value);break;case"v4":S.uniforms[w].value=(new Vector4).fromArray(U.value);break;case"m3":S.uniforms[w].value=(new Matrix3).fromArray(U.value);break;case"m4":S.uniforms[w].value=(new Matrix4).fromArray(U.value);break;default:S.uniforms[w].value=U.value}}if(void 0!==x.defines&&(S.defines=x.defines),void 0!==x.vertexShader&&(S.vertexShader=x.vertexShader),void 0!==x.fragmentShader&&(S.fragmentShader=x.fragmentShader),void 0!==x.extensions)for(const w in x.extensions)S.extensions[w]=x.extensions[w];if(void 0!==x.shading&&(S.flatShading=1===x.shading),void 0!==x.size&&(S.size=x.size),void 0!==x.sizeAttenuation&&(S.sizeAttenuation=x.sizeAttenuation),void 0!==x.map&&(S.map=getTexture(x.map)),void 0!==x.matcap&&(S.matcap=getTexture(x.matcap)),void 0!==x.alphaMap&&(S.alphaMap=getTexture(x.alphaMap)),void 0!==x.bumpMap&&(S.bumpMap=getTexture(x.bumpMap)),void 0!==x.bumpScale&&(S.bumpScale=x.bumpScale),void 0!==x.normalMap&&(S.normalMap=getTexture(x.normalMap)),void 0!==x.normalMapType&&(S.normalMapType=x.normalMapType),void 0!==x.normalScale){let w=x.normalScale;!1===Array.isArray(w)&&(w=[w,w]),S.normalScale=(new Vector2).fromArray(w)}return void 0!==x.displacementMap&&(S.displacementMap=getTexture(x.displacementMap)),void 0!==x.displacementScale&&(S.displacementScale=x.displacementScale),void 0!==x.displacementBias&&(S.displacementBias=x.displacementBias),void 0!==x.roughnessMap&&(S.roughnessMap=getTexture(x.roughnessMap)),void 0!==x.metalnessMap&&(S.metalnessMap=getTexture(x.metalnessMap)),void 0!==x.emissiveMap&&(S.emissiveMap=getTexture(x.emissiveMap)),void 0!==x.emissiveIntensity&&(S.emissiveIntensity=x.emissiveIntensity),void 0!==x.specularMap&&(S.specularMap=getTexture(x.specularMap)),void 0!==x.specularIntensityMap&&(S.specularIntensityMap=getTexture(x.specularIntensityMap)),void 0!==x.specularTintMap&&(S.specularTintMap=getTexture(x.specularTintMap)),void 0!==x.envMap&&(S.envMap=getTexture(x.envMap)),void 0!==x.envMapIntensity&&(S.envMapIntensity=x.envMapIntensity),void 0!==x.reflectivity&&(S.reflectivity=x.reflectivity),void 0!==x.refractionRatio&&(S.refractionRatio=x.refractionRatio),void 0!==x.lightMap&&(S.lightMap=getTexture(x.lightMap)),void 0!==x.lightMapIntensity&&(S.lightMapIntensity=x.lightMapIntensity),void 0!==x.aoMap&&(S.aoMap=getTexture(x.aoMap)),void 0!==x.aoMapIntensity&&(S.aoMapIntensity=x.aoMapIntensity),void 0!==x.gradientMap&&(S.gradientMap=getTexture(x.gradientMap)),void 0!==x.clearcoatMap&&(S.clearcoatMap=getTexture(x.clearcoatMap)),void 0!==x.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap=getTexture(x.clearcoatRoughnessMap)),void 0!==x.clearcoatNormalMap&&(S.clearcoatNormalMap=getTexture(x.clearcoatNormalMap)),void 0!==x.clearcoatNormalScale&&(S.clearcoatNormalScale=(new Vector2).fromArray(x.clearcoatNormalScale)),void 0!==x.transmissionMap&&(S.transmissionMap=getTexture(x.transmissionMap)),void 0!==x.thicknessMap&&(S.thicknessMap=getTexture(x.thicknessMap)),S}setTextures(x){return this.textures=x,this}}class LoaderUtils{static decodeText(x){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(x);let w="";for(let S=0,U=x.length;S<U;S++)w+=String.fromCharCode(x[S]);try{return decodeURIComponent(escape(w))}catch(x){return w}}static extractUrlBase(x){const w=x.lastIndexOf("/");return-1===w?"./":x.substr(0,w+1)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(x){return super.copy(x),this.instanceCount=x.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const x=super.toJSON(this);return x.instanceCount=this.instanceCount,x.isInstancedBufferGeometry=!0,x}}InstancedBufferGeometry.prototype.isInstancedBufferGeometry=!0;class BufferGeometryLoader extends Loader{constructor(x){super(x)}load(x,w,S,G){const z=this,H=new FileLoader(z.manager);H.setPath(z.path),H.setRequestHeader(z.requestHeader),H.setWithCredentials(z.withCredentials),H.load(x,(function(S){try{w(z.parse(JSON.parse(S)))}catch(w){G?G(w):U.error(w),z.manager.itemError(x)}}),S,G)}parse(x){const w={},S={};function getInterleavedBuffer(x,U){if(void 0!==w[U])return w[U];const G=x.interleavedBuffers[U],z=function getArrayBuffer(x,w){if(void 0!==S[w])return S[w];const U=x.arrayBuffers,G=U[w],z=new Uint32Array(G).buffer;return S[w]=z,z}(x,G.buffer),H=getTypedArray(G.type,z),j=new InterleavedBuffer(H,G.stride);return j.uuid=G.uuid,w[U]=j,j}const U=x.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,G=x.data.index;if(void 0!==G){const x=getTypedArray(G.type,G.array);U.setIndex(new BufferAttribute(x,1))}const z=x.data.attributes;for(const w in z){const S=z[w];let G;if(S.isInterleavedBufferAttribute){const w=getInterleavedBuffer(x.data,S.data);G=new InterleavedBufferAttribute(w,S.itemSize,S.offset,S.normalized)}else{const x=getTypedArray(S.type,S.array);G=new(S.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute)(x,S.itemSize,S.normalized)}void 0!==S.name&&(G.name=S.name),void 0!==S.usage&&G.setUsage(S.usage),void 0!==S.updateRange&&(G.updateRange.offset=S.updateRange.offset,G.updateRange.count=S.updateRange.count),U.setAttribute(w,G)}const H=x.data.morphAttributes;if(H)for(const w in H){const S=H[w],G=[];for(let w=0,U=S.length;w<U;w++){const U=S[w];let z;if(U.isInterleavedBufferAttribute){const w=getInterleavedBuffer(x.data,U.data);z=new InterleavedBufferAttribute(w,U.itemSize,U.offset,U.normalized)}else{const x=getTypedArray(U.type,U.array);z=new BufferAttribute(x,U.itemSize,U.normalized)}void 0!==U.name&&(z.name=U.name),G.push(z)}U.morphAttributes[w]=G}x.data.morphTargetsRelative&&(U.morphTargetsRelative=!0);const j=x.data.groups||x.data.drawcalls||x.data.offsets;if(void 0!==j)for(let x=0,w=j.length;x!==w;++x){const w=j[x];U.addGroup(w.start,w.count,w.materialIndex)}const X=x.data.boundingSphere;if(void 0!==X){const x=new Vector3;void 0!==X.center&&x.fromArray(X.center),U.boundingSphere=new Sphere(x,X.radius)}return x.name&&(U.name=x.name),x.userData&&(U.userData=x.userData),U}}class ObjectLoader extends Loader{constructor(x){super(x)}load(x,w,S,G){const z=this,H=""===this.path?LoaderUtils.extractUrlBase(x):this.path;this.resourcePath=this.resourcePath||H;const j=new FileLoader(this.manager);j.setPath(this.path),j.setRequestHeader(this.requestHeader),j.setWithCredentials(this.withCredentials),j.load(x,(function(S){let H=null;try{H=JSON.parse(S)}catch(w){return void 0!==G&&G(w),void U.error("THREE:ObjectLoader: Can't parse "+x+".",w.message)}const j=H.metadata;void 0!==j&&void 0!==j.type&&"geometry"!==j.type.toLowerCase()?z.parse(H,w):U.error("THREE.ObjectLoader: Can't load "+x)}),S,G)}async loadAsync(x,w){const S=""===this.path?LoaderUtils.extractUrlBase(x):this.path;this.resourcePath=this.resourcePath||S;const U=new FileLoader(this.manager);U.setPath(this.path),U.setRequestHeader(this.requestHeader),U.setWithCredentials(this.withCredentials);const G=await U.loadAsync(x,w),z=JSON.parse(G),H=z.metadata;if(void 0===H||void 0===H.type||"geometry"===H.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+x);return await this.parseAsync(z)}parse(x,w){const S=this.parseAnimations(x.animations),U=this.parseShapes(x.shapes),G=this.parseGeometries(x.geometries,U),z=this.parseImages(x.images,(function(){void 0!==w&&w(X)})),H=this.parseTextures(x.textures,z),j=this.parseMaterials(x.materials,H),X=this.parseObject(x.object,G,j,H,S),q=this.parseSkeletons(x.skeletons,X);if(this.bindSkeletons(X,q),void 0!==w){let x=!1;for(const w in z)if(z[w]instanceof HTMLImageElement){x=!0;break}!1===x&&w(X)}return X}async parseAsync(x){const w=this.parseAnimations(x.animations),S=this.parseShapes(x.shapes),U=this.parseGeometries(x.geometries,S),G=await this.parseImagesAsync(x.images),z=this.parseTextures(x.textures,G),H=this.parseMaterials(x.materials,z),j=this.parseObject(x.object,U,H,z,w),X=this.parseSkeletons(x.skeletons,j);return this.bindSkeletons(j,X),j}parseShapes(x){const w={};if(void 0!==x)for(let S=0,U=x.length;S<U;S++){const U=(new Shape).fromJSON(x[S]);w[U.uuid]=U}return w}parseSkeletons(x,w){const S={},U={};if(w.traverse((function(x){x.isBone&&(U[x.uuid]=x)})),void 0!==x)for(let w=0,G=x.length;w<G;w++){const G=(new Skeleton).fromJSON(x[w],U);S[G.uuid]=G}return S}parseGeometries(x,w){const S={};if(void 0!==x){const G=new BufferGeometryLoader;for(let z=0,H=x.length;z<H;z++){let H;const j=x[z];switch(j.type){case"BufferGeometry":case"InstancedBufferGeometry":H=G.parse(j);break;case"Geometry":U.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:j.type in ps?H=ps[j.type].fromJSON(j,w):U.warn(`THREE.ObjectLoader: Unsupported geometry type "${j.type}"`)}H.uuid=j.uuid,void 0!==j.name&&(H.name=j.name),!0===H.isBufferGeometry&&void 0!==j.userData&&(H.userData=j.userData),S[j.uuid]=H}}return S}parseMaterials(x,w){const S={},U={};if(void 0!==x){const G=new MaterialLoader;G.setTextures(w);for(let w=0,z=x.length;w<z;w++){const z=x[w];if("MultiMaterial"===z.type){const x=[];for(let w=0;w<z.materials.length;w++){const U=z.materials[w];void 0===S[U.uuid]&&(S[U.uuid]=G.parse(U)),x.push(S[U.uuid])}U[z.uuid]=x}else void 0===S[z.uuid]&&(S[z.uuid]=G.parse(z)),U[z.uuid]=S[z.uuid]}}return U}parseAnimations(x){const w={};if(void 0!==x)for(let S=0;S<x.length;S++){const U=x[S],G=AnimationClip.parse(U);w[G.uuid]=G}return w}parseImages(x,w){const S=this,U={};let G;function deserializeImage(x){if("string"==typeof x){const w=x;return function loadImage(x){return S.manager.itemStart(x),G.load(x,(function(){S.manager.itemEnd(x)}),void 0,(function(){S.manager.itemError(x),S.manager.itemEnd(x)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(w)?w:S.resourcePath+w)}return x.data?{data:getTypedArray(x.type,x.data),width:x.width,height:x.height}:null}if(void 0!==x&&x.length>0){const S=new LoadingManager(w);G=new ImageLoader(S),G.setCrossOrigin(this.crossOrigin);for(let w=0,S=x.length;w<S;w++){const S=x[w],G=S.url;if(Array.isArray(G)){U[S.uuid]=[];for(let x=0,w=G.length;x<w;x++){const w=deserializeImage(G[x]);null!==w&&(w instanceof HTMLImageElement?U[S.uuid].push(w):U[S.uuid].push(new DataTexture(w.data,w.width,w.height)))}}else{const x=deserializeImage(S.url);null!==x&&(U[S.uuid]=x)}}}return U}async parseImagesAsync(x){const w=this,S={};let U;async function deserializeImage(x){if("string"==typeof x){const S=x,G=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(S)?S:w.resourcePath+S;return await U.loadAsync(G)}return x.data?{data:getTypedArray(x.type,x.data),width:x.width,height:x.height}:null}if(void 0!==x&&x.length>0){U=new ImageLoader(this.manager),U.setCrossOrigin(this.crossOrigin);for(let w=0,U=x.length;w<U;w++){const U=x[w],G=U.url;if(Array.isArray(G)){S[U.uuid]=[];for(let x=0,w=G.length;x<w;x++){const w=G[x],z=await deserializeImage(w);null!==z&&(z instanceof HTMLImageElement?S[U.uuid].push(z):S[U.uuid].push(new DataTexture(z.data,z.width,z.height)))}}else{const x=await deserializeImage(U.url);null!==x&&(S[U.uuid]=x)}}}return S}parseTextures(x,w){function parseConstant(x,w){return"number"==typeof x?x:(U.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",x),w[x])}const S={};if(void 0!==x)for(let G=0,z=x.length;G<z;G++){const z=x[G];let H;void 0===z.image&&U.warn('THREE.ObjectLoader: No "image" specified for',z.uuid),void 0===w[z.image]&&U.warn("THREE.ObjectLoader: Undefined image",z.image);const j=w[z.image];Array.isArray(j)?(H=new CubeTexture(j),6===j.length&&(H.needsUpdate=!0)):(H=j&&j.data?new DataTexture(j.data,j.width,j.height):new Texture(j),j&&(H.needsUpdate=!0)),H.uuid=z.uuid,void 0!==z.name&&(H.name=z.name),void 0!==z.mapping&&(H.mapping=parseConstant(z.mapping,Ts)),void 0!==z.offset&&H.offset.fromArray(z.offset),void 0!==z.repeat&&H.repeat.fromArray(z.repeat),void 0!==z.center&&H.center.fromArray(z.center),void 0!==z.rotation&&(H.rotation=z.rotation),void 0!==z.wrap&&(H.wrapS=parseConstant(z.wrap[0],Cs),H.wrapT=parseConstant(z.wrap[1],Cs)),void 0!==z.format&&(H.format=z.format),void 0!==z.type&&(H.type=z.type),void 0!==z.encoding&&(H.encoding=z.encoding),void 0!==z.minFilter&&(H.minFilter=parseConstant(z.minFilter,As)),void 0!==z.magFilter&&(H.magFilter=parseConstant(z.magFilter,As)),void 0!==z.anisotropy&&(H.anisotropy=z.anisotropy),void 0!==z.flipY&&(H.flipY=z.flipY),void 0!==z.premultiplyAlpha&&(H.premultiplyAlpha=z.premultiplyAlpha),void 0!==z.unpackAlignment&&(H.unpackAlignment=z.unpackAlignment),S[z.uuid]=H}return S}parseObject(x,w,S,G,z){let H,j,X;function getGeometry(x){return void 0===w[x]&&U.warn("THREE.ObjectLoader: Undefined geometry",x),w[x]}function getMaterial(x){if(void 0!==x){if(Array.isArray(x)){const w=[];for(let G=0,z=x.length;G<z;G++){const z=x[G];void 0===S[z]&&U.warn("THREE.ObjectLoader: Undefined material",z),w.push(S[z])}return w}return void 0===S[x]&&U.warn("THREE.ObjectLoader: Undefined material",x),S[x]}}function getTexture(x){return void 0===G[x]&&U.warn("THREE.ObjectLoader: Undefined texture",x),G[x]}switch(x.type){case"Scene":H=new Scene,void 0!==x.background&&(Number.isInteger(x.background)?H.background=new Color(x.background):H.background=getTexture(x.background)),void 0!==x.environment&&(H.environment=getTexture(x.environment)),void 0!==x.fog&&("Fog"===x.fog.type?H.fog=new Fog(x.fog.color,x.fog.near,x.fog.far):"FogExp2"===x.fog.type&&(H.fog=new FogExp2(x.fog.color,x.fog.density)));break;case"PerspectiveCamera":H=new PerspectiveCamera(x.fov,x.aspect,x.near,x.far),void 0!==x.focus&&(H.focus=x.focus),void 0!==x.zoom&&(H.zoom=x.zoom),void 0!==x.filmGauge&&(H.filmGauge=x.filmGauge),void 0!==x.filmOffset&&(H.filmOffset=x.filmOffset),void 0!==x.view&&(H.view=Object.assign({},x.view));break;case"OrthographicCamera":H=new OrthographicCamera(x.left,x.right,x.top,x.bottom,x.near,x.far),void 0!==x.zoom&&(H.zoom=x.zoom),void 0!==x.view&&(H.view=Object.assign({},x.view));break;case"AmbientLight":H=new AmbientLight(x.color,x.intensity);break;case"DirectionalLight":H=new DirectionalLight(x.color,x.intensity);break;case"PointLight":H=new PointLight(x.color,x.intensity,x.distance,x.decay);break;case"RectAreaLight":H=new RectAreaLight(x.color,x.intensity,x.width,x.height);break;case"SpotLight":H=new SpotLight(x.color,x.intensity,x.distance,x.angle,x.penumbra,x.decay);break;case"HemisphereLight":H=new HemisphereLight(x.color,x.groundColor,x.intensity);break;case"LightProbe":H=(new LightProbe).fromJSON(x);break;case"SkinnedMesh":j=getGeometry(x.geometry),X=getMaterial(x.material),H=new SkinnedMesh(j,X),void 0!==x.bindMode&&(H.bindMode=x.bindMode),void 0!==x.bindMatrix&&H.bindMatrix.fromArray(x.bindMatrix),void 0!==x.skeleton&&(H.skeleton=x.skeleton);break;case"Mesh":j=getGeometry(x.geometry),X=getMaterial(x.material),H=new Mesh(j,X);break;case"InstancedMesh":j=getGeometry(x.geometry),X=getMaterial(x.material);const w=x.count,S=x.instanceMatrix,U=x.instanceColor;H=new InstancedMesh(j,X,w),H.instanceMatrix=new InstancedBufferAttribute(new Float32Array(S.array),16),void 0!==U&&(H.instanceColor=new InstancedBufferAttribute(new Float32Array(U.array),U.itemSize));break;case"LOD":H=new LOD;break;case"Line":H=new Line(getGeometry(x.geometry),getMaterial(x.material));break;case"LineLoop":H=new LineLoop(getGeometry(x.geometry),getMaterial(x.material));break;case"LineSegments":H=new LineSegments(getGeometry(x.geometry),getMaterial(x.material));break;case"PointCloud":case"Points":H=new Points(getGeometry(x.geometry),getMaterial(x.material));break;case"Sprite":H=new Sprite(getMaterial(x.material));break;case"Group":H=new Group;break;case"Bone":H=new Bone;break;default:H=new Object3D}if(H.uuid=x.uuid,void 0!==x.name&&(H.name=x.name),void 0!==x.matrix?(H.matrix.fromArray(x.matrix),void 0!==x.matrixAutoUpdate&&(H.matrixAutoUpdate=x.matrixAutoUpdate),H.matrixAutoUpdate&&H.matrix.decompose(H.position,H.quaternion,H.scale)):(void 0!==x.position&&H.position.fromArray(x.position),void 0!==x.rotation&&H.rotation.fromArray(x.rotation),void 0!==x.quaternion&&H.quaternion.fromArray(x.quaternion),void 0!==x.scale&&H.scale.fromArray(x.scale)),void 0!==x.castShadow&&(H.castShadow=x.castShadow),void 0!==x.receiveShadow&&(H.receiveShadow=x.receiveShadow),x.shadow&&(void 0!==x.shadow.bias&&(H.shadow.bias=x.shadow.bias),void 0!==x.shadow.normalBias&&(H.shadow.normalBias=x.shadow.normalBias),void 0!==x.shadow.radius&&(H.shadow.radius=x.shadow.radius),void 0!==x.shadow.mapSize&&H.shadow.mapSize.fromArray(x.shadow.mapSize),void 0!==x.shadow.camera&&(H.shadow.camera=this.parseObject(x.shadow.camera))),void 0!==x.visible&&(H.visible=x.visible),void 0!==x.frustumCulled&&(H.frustumCulled=x.frustumCulled),void 0!==x.renderOrder&&(H.renderOrder=x.renderOrder),void 0!==x.userData&&(H.userData=x.userData),void 0!==x.layers&&(H.layers.mask=x.layers),void 0!==x.children){const U=x.children;for(let x=0;x<U.length;x++)H.add(this.parseObject(U[x],w,S,G,z))}if(void 0!==x.animations){const w=x.animations;for(let x=0;x<w.length;x++){const S=w[x];H.animations.push(z[S])}}if("LOD"===x.type){void 0!==x.autoUpdate&&(H.autoUpdate=x.autoUpdate);const w=x.levels;for(let x=0;x<w.length;x++){const S=w[x],U=H.getObjectByProperty("uuid",S.object);void 0!==U&&H.addLevel(U,S.distance)}}return H}bindSkeletons(x,w){0!==Object.keys(w).length&&x.traverse((function(x){if(!0===x.isSkinnedMesh&&void 0!==x.skeleton){const S=w[x.skeleton];void 0===S?U.warn("THREE.ObjectLoader: No skeleton found with UUID:",x.skeleton):x.bind(S,x.bindMatrix)}}))}setTexturePath(x){return U.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(x)}}const Ts={UVMapping:He,CubeReflectionMapping:$e,CubeRefractionMapping:je,EquirectangularReflectionMapping:Xe,EquirectangularRefractionMapping:qe,CubeUVReflectionMapping:Ke,CubeUVRefractionMapping:Ye},Cs={RepeatWrapping:Ze,ClampToEdgeWrapping:Je,MirroredRepeatWrapping:Qe},As={NearestFilter:et,NearestMipmapNearestFilter:tt,NearestMipmapLinearFilter:rt,LinearFilter:ot,LinearMipmapNearestFilter:at,LinearMipmapLinearFilter:lt};class ImageBitmapLoader extends Loader{constructor(x){super(x),"undefined"==typeof createImageBitmap&&U.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&U.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(x){return this.options=x,this}load(x,w,S,U){void 0===x&&(x=""),void 0!==this.path&&(x=this.path+x),x=this.manager.resolveURL(x);const G=this,z=gs.get(x);if(void 0!==z)return G.manager.itemStart(x),setTimeout((function(){w&&w(z),G.manager.itemEnd(x)}),0),z;const H={};H.credentials="anonymous"===this.crossOrigin?"same-origin":"include",H.headers=this.requestHeader,fetch(x,H).then((function(x){return x.blob()})).then((function(x){return createImageBitmap(x,Object.assign(G.options,{colorSpaceConversion:"none"}))})).then((function(S){gs.add(x,S),w&&w(S),G.manager.itemEnd(x)})).catch((function(w){U&&U(w),G.manager.itemError(x),G.manager.itemEnd(x)})),G.manager.itemStart(x)}}let Ms;ImageBitmapLoader.prototype.isImageBitmapLoader=!0;const Rs={getContext:function(){return void 0===Ms&&(Ms=new(window.AudioContext||window.webkitAudioContext)),Ms},setContext:function(x){Ms=x}};class AudioLoader extends Loader{constructor(x){super(x)}load(x,w,S,G){const z=this,H=new FileLoader(this.manager);H.setResponseType("arraybuffer"),H.setPath(this.path),H.setRequestHeader(this.requestHeader),H.setWithCredentials(this.withCredentials),H.load(x,(function(S){try{const x=S.slice(0);Rs.getContext().decodeAudioData(x,(function(x){w(x)}))}catch(w){G?G(w):U.error(w),z.manager.itemError(x)}}),S,G)}}class HemisphereLightProbe extends LightProbe{constructor(x,w,S=1){super(void 0,S);const U=(new Color).set(x),G=(new Color).set(w),z=new Vector3(U.r,U.g,U.b),H=new Vector3(G.r,G.g,G.b),j=Math.sqrt(Math.PI),X=j*Math.sqrt(.75);this.sh.coefficients[0].copy(z).add(H).multiplyScalar(j),this.sh.coefficients[1].copy(z).sub(H).multiplyScalar(X)}}HemisphereLightProbe.prototype.isHemisphereLightProbe=!0;class AmbientLightProbe extends LightProbe{constructor(x,w=1){super(void 0,w);const S=(new Color).set(x);this.sh.coefficients[0].set(S.r,S.g,S.b).multiplyScalar(2*Math.sqrt(Math.PI))}}AmbientLightProbe.prototype.isAmbientLightProbe=!0;const Ls=new Matrix4,Os=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(x){const w=this._cache;if(w.focus!==x.focus||w.fov!==x.fov||w.aspect!==x.aspect*this.aspect||w.near!==x.near||w.far!==x.far||w.zoom!==x.zoom||w.eyeSep!==this.eyeSep){w.focus=x.focus,w.fov=x.fov,w.aspect=x.aspect*this.aspect,w.near=x.near,w.far=x.far,w.zoom=x.zoom,w.eyeSep=this.eyeSep;const S=x.projectionMatrix.clone(),U=w.eyeSep/2,G=U*w.near/w.focus,z=w.near*Math.tan(Br*w.fov*.5)/w.zoom;let H,j;Os.elements[12]=-U,Ls.elements[12]=U,H=-z*w.aspect+G,j=z*w.aspect+G,S.elements[0]=2*w.near/(j-H),S.elements[8]=(j+H)/(j-H),this.cameraL.projectionMatrix.copy(S),H=-z*w.aspect-G,j=z*w.aspect-G,S.elements[0]=2*w.near/(j-H),S.elements[8]=(j+H)/(j-H),this.cameraR.projectionMatrix.copy(S)}this.cameraL.matrixWorld.copy(x.matrixWorld).multiply(Os),this.cameraR.matrixWorld.copy(x.matrixWorld).multiply(Ls)}}class Clock{constructor(x=!0){this.autoStart=x,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let x=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const w=now();x=(w-this.oldTime)/1e3,this.oldTime=w,this.elapsedTime+=x}return x}}function now(){return("undefined"==typeof performance?Date:performance).now()}const Ps=new Vector3,Is=new Quaternion,Ns=new Vector3,Fs=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=Rs.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(x){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=x,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(x){return this.gain.gain.setTargetAtTime(x,this.context.currentTime,.01),this}updateMatrixWorld(x){super.updateMatrixWorld(x);const w=this.context.listener,S=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ps,Is,Ns),Fs.set(0,0,-1).applyQuaternion(Is),w.positionX){const x=this.context.currentTime+this.timeDelta;w.positionX.linearRampToValueAtTime(Ps.x,x),w.positionY.linearRampToValueAtTime(Ps.y,x),w.positionZ.linearRampToValueAtTime(Ps.z,x),w.forwardX.linearRampToValueAtTime(Fs.x,x),w.forwardY.linearRampToValueAtTime(Fs.y,x),w.forwardZ.linearRampToValueAtTime(Fs.z,x),w.upX.linearRampToValueAtTime(S.x,x),w.upY.linearRampToValueAtTime(S.y,x),w.upZ.linearRampToValueAtTime(S.z,x)}else w.setPosition(Ps.x,Ps.y,Ps.z),w.setOrientation(Fs.x,Fs.y,Fs.z,S.x,S.y,S.z)}}class Audio extends Object3D{constructor(x){super(),this.type="Audio",this.listener=x,this.context=x.context,this.gain=this.context.createGain(),this.gain.connect(x.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(x){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=x,this.connect(),this}setMediaElementSource(x){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(x),this.connect(),this}setMediaStreamSource(x){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(x),this.connect(),this}setBuffer(x){return this.buffer=x,this.sourceType="buffer",this.autoplay&&this.play(),this}play(x=0){if(!0===this.isPlaying)return void U.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void U.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+x;const w=this.context.createBufferSource();return w.buffer=this.buffer,w.loop=this.loop,w.loopStart=this.loopStart,w.loopEnd=this.loopEnd,w.onended=this.onEnded.bind(this),w.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=w,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;U.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;U.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let x=1,w=this.filters.length;x<w;x++)this.filters[x-1].connect(this.filters[x]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let x=1,w=this.filters.length;x<w;x++)this.filters[x-1].disconnect(this.filters[x]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(x){return x||(x=[]),!0===this._connected?(this.disconnect(),this.filters=x.slice(),this.connect()):this.filters=x.slice(),this}setDetune(x){if(this.detune=x,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(x){return this.setFilters(x?[x]:[])}setPlaybackRate(x){if(!1!==this.hasPlaybackControl)return this.playbackRate=x,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;U.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(U.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(x){if(!1!==this.hasPlaybackControl)return this.loop=x,!0===this.isPlaying&&(this.source.loop=this.loop),this;U.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(x){return this.loopStart=x,this}setLoopEnd(x){return this.loopEnd=x,this}getVolume(){return this.gain.gain.value}setVolume(x){return this.gain.gain.setTargetAtTime(x,this.context.currentTime,.01),this}}const Bs=new Vector3,Ds=new Quaternion,ks=new Vector3,Us=new Vector3;class PositionalAudio extends Audio{constructor(x){super(x),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(x){return this.panner.refDistance=x,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(x){return this.panner.rolloffFactor=x,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(x){return this.panner.distanceModel=x,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(x){return this.panner.maxDistance=x,this}setDirectionalCone(x,w,S){return this.panner.coneInnerAngle=x,this.panner.coneOuterAngle=w,this.panner.coneOuterGain=S,this}updateMatrixWorld(x){if(super.updateMatrixWorld(x),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Bs,Ds,ks),Us.set(0,0,1).applyQuaternion(Ds);const w=this.panner;if(w.positionX){const x=this.context.currentTime+this.listener.timeDelta;w.positionX.linearRampToValueAtTime(Bs.x,x),w.positionY.linearRampToValueAtTime(Bs.y,x),w.positionZ.linearRampToValueAtTime(Bs.z,x),w.orientationX.linearRampToValueAtTime(Us.x,x),w.orientationY.linearRampToValueAtTime(Us.y,x),w.orientationZ.linearRampToValueAtTime(Us.z,x)}else w.setPosition(Bs.x,Bs.y,Bs.z),w.setOrientation(Us.x,Us.y,Us.z)}}class AudioAnalyser{constructor(x,w=2048){this.analyser=x.context.createAnalyser(),this.analyser.fftSize=w,this.data=new Uint8Array(this.analyser.frequencyBinCount),x.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let x=0;const w=this.getFrequencyData();for(let S=0;S<w.length;S++)x+=w[S];return x/w.length}}class PropertyMixer{constructor(x,w,S){let U,G,z;switch(this.binding=x,this.valueSize=S,w){case"quaternion":U=this._slerp,G=this._slerpAdditive,z=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*S),this._workIndex=5;break;case"string":case"bool":U=this._select,G=this._select,z=this._setAdditiveIdentityOther,this.buffer=new Array(5*S);break;default:U=this._lerp,G=this._lerpAdditive,z=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*S)}this._mixBufferRegion=U,this._mixBufferRegionAdditive=G,this._setIdentity=z,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(x,w){const S=this.buffer,U=this.valueSize,G=x*U+U;let z=this.cumulativeWeight;if(0===z){for(let x=0;x!==U;++x)S[G+x]=S[x];z=w}else{z+=w;const x=w/z;this._mixBufferRegion(S,G,0,x,U)}this.cumulativeWeight=z}accumulateAdditive(x){const w=this.buffer,S=this.valueSize,U=S*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(w,U,0,x,S),this.cumulativeWeightAdditive+=x}apply(x){const w=this.valueSize,S=this.buffer,U=x*w+w,G=this.cumulativeWeight,z=this.cumulativeWeightAdditive,H=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,G<1){const x=w*this._origIndex;this._mixBufferRegion(S,U,x,1-G,w)}z>0&&this._mixBufferRegionAdditive(S,U,this._addIndex*w,1,w);for(let x=w,G=w+w;x!==G;++x)if(S[x]!==S[x+w]){H.setValue(S,U);break}}saveOriginalState(){const x=this.binding,w=this.buffer,S=this.valueSize,U=S*this._origIndex;x.getValue(w,U);for(let x=S,G=U;x!==G;++x)w[x]=w[U+x%S];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const x=3*this.valueSize;this.binding.setValue(this.buffer,x)}_setAdditiveIdentityNumeric(){const x=this._addIndex*this.valueSize,w=x+this.valueSize;for(let S=x;S<w;S++)this.buffer[S]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const x=this._origIndex*this.valueSize,w=this._addIndex*this.valueSize;for(let S=0;S<this.valueSize;S++)this.buffer[w+S]=this.buffer[x+S]}_select(x,w,S,U,G){if(U>=.5)for(let U=0;U!==G;++U)x[w+U]=x[S+U]}_slerp(x,w,S,U){Quaternion.slerpFlat(x,w,x,w,x,S,U)}_slerpAdditive(x,w,S,U,G){const z=this._workIndex*G;Quaternion.multiplyQuaternionsFlat(x,z,x,w,x,S),Quaternion.slerpFlat(x,w,x,w,x,z,U)}_lerp(x,w,S,U,G){const z=1-U;for(let H=0;H!==G;++H){const G=w+H;x[G]=x[G]*z+x[S+H]*U}}_lerpAdditive(x,w,S,U,G){for(let z=0;z!==G;++z){const G=w+z;x[G]=x[G]+x[S+z]*U}}}const Gs="\\[\\]\\.:\\/",Vs=new RegExp("["+Gs+"]","g"),Ws="[^"+Gs+"]",zs="[^"+Gs.replace("\\.","")+"]",Hs=/((?:WC+[\/:])*)/.source.replace("WC",Ws),$s=/(WCOD+)?/.source.replace("WCOD",zs),js=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ws),Xs=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ws),qs=new RegExp("^"+Hs+$s+js+Xs+"$"),Ks=["material","materials","bones"];class PropertyBinding{constructor(x,w,S){this.path=w,this.parsedPath=S||PropertyBinding.parseTrackName(w),this.node=PropertyBinding.findNode(x,this.parsedPath.nodeName)||x,this.rootNode=x,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(x,w,S){return x&&x.isAnimationObjectGroup?new PropertyBinding.Composite(x,w,S):new PropertyBinding(x,w,S)}static sanitizeNodeName(x){return x.replace(/\s/g,"_").replace(Vs,"")}static parseTrackName(x){const w=qs.exec(x);if(!w)throw new Error("PropertyBinding: Cannot parse trackName: "+x);const S={nodeName:w[2],objectName:w[3],objectIndex:w[4],propertyName:w[5],propertyIndex:w[6]},U=S.nodeName&&S.nodeName.lastIndexOf(".");if(void 0!==U&&-1!==U){const x=S.nodeName.substring(U+1);-1!==Ks.indexOf(x)&&(S.nodeName=S.nodeName.substring(0,U),S.objectName=x)}if(null===S.propertyName||0===S.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+x);return S}static findNode(x,w){if(!w||""===w||"."===w||-1===w||w===x.name||w===x.uuid)return x;if(x.skeleton){const S=x.skeleton.getBoneByName(w);if(void 0!==S)return S}if(x.children){const searchNodeSubtree=function(x){for(let S=0;S<x.length;S++){const U=x[S];if(U.name===w||U.uuid===w)return U;const G=searchNodeSubtree(U.children);if(G)return G}return null},S=searchNodeSubtree(x.children);if(S)return S}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(x,w){x[w]=this.targetObject[this.propertyName]}_getValue_array(x,w){const S=this.resolvedProperty;for(let U=0,G=S.length;U!==G;++U)x[w++]=S[U]}_getValue_arrayElement(x,w){x[w]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(x,w){this.resolvedProperty.toArray(x,w)}_setValue_direct(x,w){this.targetObject[this.propertyName]=x[w]}_setValue_direct_setNeedsUpdate(x,w){this.targetObject[this.propertyName]=x[w],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(x,w){this.targetObject[this.propertyName]=x[w],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(x,w){const S=this.resolvedProperty;for(let U=0,G=S.length;U!==G;++U)S[U]=x[w++]}_setValue_array_setNeedsUpdate(x,w){const S=this.resolvedProperty;for(let U=0,G=S.length;U!==G;++U)S[U]=x[w++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(x,w){const S=this.resolvedProperty;for(let U=0,G=S.length;U!==G;++U)S[U]=x[w++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(x,w){this.resolvedProperty[this.propertyIndex]=x[w]}_setValue_arrayElement_setNeedsUpdate(x,w){this.resolvedProperty[this.propertyIndex]=x[w],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(x,w){this.resolvedProperty[this.propertyIndex]=x[w],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(x,w){this.resolvedProperty.fromArray(x,w)}_setValue_fromArray_setNeedsUpdate(x,w){this.resolvedProperty.fromArray(x,w),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(x,w){this.resolvedProperty.fromArray(x,w),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(x,w){this.bind(),this.getValue(x,w)}_setValue_unbound(x,w){this.bind(),this.setValue(x,w)}bind(){let x=this.node;const w=this.parsedPath,S=w.objectName,G=w.propertyName;let z=w.propertyIndex;if(x||(x=PropertyBinding.findNode(this.rootNode,w.nodeName)||this.rootNode,this.node=x),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!x)return void U.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(S){let G=w.objectIndex;switch(S){case"materials":if(!x.material)return void U.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!x.material.materials)return void U.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);x=x.material.materials;break;case"bones":if(!x.skeleton)return void U.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);x=x.skeleton.bones;for(let w=0;w<x.length;w++)if(x[w].name===G){G=w;break}break;default:if(void 0===x[S])return void U.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);x=x[S]}if(void 0!==G){if(void 0===x[G])return void U.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,x);x=x[G]}}const H=x[G];if(void 0===H){const S=w.nodeName;return void U.error("THREE.PropertyBinding: Trying to update property for track: "+S+"."+G+" but it wasn't found.",x)}let j=this.Versioning.None;this.targetObject=x,void 0!==x.needsUpdate?j=this.Versioning.NeedsUpdate:void 0!==x.matrixWorldNeedsUpdate&&(j=this.Versioning.MatrixWorldNeedsUpdate);let X=this.BindingType.Direct;if(void 0!==z){if("morphTargetInfluences"===G){if(!x.geometry)return void U.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!x.geometry.isBufferGeometry)return void U.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!x.geometry.morphAttributes)return void U.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==x.morphTargetDictionary[z]&&(z=x.morphTargetDictionary[z])}X=this.BindingType.ArrayElement,this.resolvedProperty=H,this.propertyIndex=z}else void 0!==H.fromArray&&void 0!==H.toArray?(X=this.BindingType.HasFromToArray,this.resolvedProperty=H):Array.isArray(H)?(X=this.BindingType.EntireArray,this.resolvedProperty=H):this.propertyName=G;this.getValue=this.GetterByBindingType[X],this.setValue=this.SetterByBindingTypeAndVersioning[X][j]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=class Composite{constructor(x,w,S){const U=S||PropertyBinding.parseTrackName(w);this._targetGroup=x,this._bindings=x.subscribe_(w,U)}getValue(x,w){this.bind();const S=this._targetGroup.nCachedObjects_,U=this._bindings[S];void 0!==U&&U.getValue(x,w)}setValue(x,w){const S=this._bindings;for(let U=this._targetGroup.nCachedObjects_,G=S.length;U!==G;++U)S[U].setValue(x,w)}bind(){const x=this._bindings;for(let w=this._targetGroup.nCachedObjects_,S=x.length;w!==S;++w)x[w].bind()}unbind(){const x=this._bindings;for(let w=this._targetGroup.nCachedObjects_,S=x.length;w!==S;++w)x[w].unbind()}},PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray],PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const x={};this._indicesByUUID=x;for(let w=0,S=arguments.length;w!==S;++w)x[arguments[w].uuid]=w;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const w=this;this.stats={objects:{get total(){return w._objects.length},get inUse(){return this.total-w.nCachedObjects_}},get bindingsPerObject(){return w._bindings.length}}}add(){const x=this._objects,w=this._indicesByUUID,S=this._paths,G=this._parsedPaths,z=this._bindings,H=z.length;let j,X=x.length,q=this.nCachedObjects_;for(let K=0,Y=arguments.length;K!==Y;++K){const Y=arguments[K],Z=Y.uuid;let J=w[Z];if(void 0===J){J=X++,w[Z]=J,x.push(Y);for(let x=0,w=H;x!==w;++x)z[x].push(new PropertyBinding(Y,S[x],G[x]))}else if(J<q){j=x[J];const U=--q,X=x[U];w[X.uuid]=J,x[J]=X,w[Z]=U,x[U]=Y;for(let x=0,w=H;x!==w;++x){const w=z[x],H=w[U];let j=w[J];w[J]=H,void 0===j&&(j=new PropertyBinding(Y,S[x],G[x])),w[U]=j}}else x[J]!==j&&U.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=q}remove(){const x=this._objects,w=this._indicesByUUID,S=this._bindings,U=S.length;let G=this.nCachedObjects_;for(let z=0,H=arguments.length;z!==H;++z){const H=arguments[z],j=H.uuid,X=w[j];if(void 0!==X&&X>=G){const z=G++,q=x[z];w[q.uuid]=X,x[X]=q,w[j]=z,x[z]=H;for(let x=0,w=U;x!==w;++x){const w=S[x],U=w[z],G=w[X];w[X]=U,w[z]=G}}}this.nCachedObjects_=G}uncache(){const x=this._objects,w=this._indicesByUUID,S=this._bindings,U=S.length;let G=this.nCachedObjects_,z=x.length;for(let H=0,j=arguments.length;H!==j;++H){const j=arguments[H].uuid,X=w[j];if(void 0!==X)if(delete w[j],X<G){const H=--G,j=x[H],q=--z,K=x[q];w[j.uuid]=X,x[X]=j,w[K.uuid]=H,x[H]=K,x.pop();for(let x=0,w=U;x!==w;++x){const w=S[x],U=w[H],G=w[q];w[X]=U,w[H]=G,w.pop()}}else{const G=--z,H=x[G];G>0&&(w[H.uuid]=X),x[X]=H,x.pop();for(let x=0,w=U;x!==w;++x){const w=S[x];w[X]=w[G],w.pop()}}}this.nCachedObjects_=G}subscribe_(x,w){const S=this._bindingsIndicesByPath;let U=S[x];const G=this._bindings;if(void 0!==U)return G[U];const z=this._paths,H=this._parsedPaths,j=this._objects,X=j.length,q=this.nCachedObjects_,K=new Array(X);U=G.length,S[x]=U,z.push(x),H.push(w),G.push(K);for(let S=q,U=j.length;S!==U;++S){const U=j[S];K[S]=new PropertyBinding(U,x,w)}return K}unsubscribe_(x){const w=this._bindingsIndicesByPath,S=w[x];if(void 0!==S){const U=this._paths,G=this._parsedPaths,z=this._bindings,H=z.length-1,j=z[H];w[x[H]]=S,z[S]=j,z.pop(),G[S]=G[H],G.pop(),U[S]=U[H],U.pop()}}}AnimationObjectGroup.prototype.isAnimationObjectGroup=!0;class AnimationAction{constructor(x,w,S=null,U=w.blendMode){this._mixer=x,this._clip=w,this._localRoot=S,this.blendMode=U;const G=w.tracks,z=G.length,H=new Array(z),j={endingStart:Dn,endingEnd:Dn};for(let x=0;x!==z;++x){const w=G[x].createInterpolant(null);H[x]=w,w.settings=j}this._interpolantSettings=j,this._interpolants=H,this._propertyBindings=new Array(z),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=On,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(x){return this._startTime=x,this}setLoop(x,w){return this.loop=x,this.repetitions=w,this}setEffectiveWeight(x){return this.weight=x,this._effectiveWeight=this.enabled?x:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(x){return this._scheduleFading(x,0,1)}fadeOut(x){return this._scheduleFading(x,1,0)}crossFadeFrom(x,w,S){if(x.fadeOut(w),this.fadeIn(w),S){const S=this._clip.duration,U=x._clip.duration,G=U/S,z=S/U;x.warp(1,G,w),this.warp(z,1,w)}return this}crossFadeTo(x,w,S){return x.crossFadeFrom(this,w,S)}stopFading(){const x=this._weightInterpolant;return null!==x&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(x)),this}setEffectiveTimeScale(x){return this.timeScale=x,this._effectiveTimeScale=this.paused?0:x,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(x){return this.timeScale=this._clip.duration/x,this.stopWarping()}syncWith(x){return this.time=x.time,this.timeScale=x.timeScale,this.stopWarping()}halt(x){return this.warp(this._effectiveTimeScale,0,x)}warp(x,w,S){const U=this._mixer,G=U.time,z=this.timeScale;let H=this._timeScaleInterpolant;null===H&&(H=U._lendControlInterpolant(),this._timeScaleInterpolant=H);const j=H.parameterPositions,X=H.sampleValues;return j[0]=G,j[1]=G+S,X[0]=x/z,X[1]=w/z,this}stopWarping(){const x=this._timeScaleInterpolant;return null!==x&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(x)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(x,w,S,U){if(!this.enabled)return void this._updateWeight(x);const G=this._startTime;if(null!==G){const U=(x-G)*S;if(U<0||0===S)return;this._startTime=null,w=S*U}w*=this._updateTimeScale(x);const z=this._updateTime(w),H=this._updateWeight(x);if(H>0){const x=this._interpolants,w=this._propertyBindings;if(this.blendMode===zn)for(let S=0,U=x.length;S!==U;++S)x[S].evaluate(z),w[S].accumulateAdditive(H);else for(let S=0,G=x.length;S!==G;++S)x[S].evaluate(z),w[S].accumulate(U,H)}}_updateWeight(x){let w=0;if(this.enabled){w=this.weight;const S=this._weightInterpolant;if(null!==S){const U=S.evaluate(x)[0];w*=U,x>S.parameterPositions[1]&&(this.stopFading(),0===U&&(this.enabled=!1))}}return this._effectiveWeight=w,w}_updateTimeScale(x){let w=0;if(!this.paused){w=this.timeScale;const S=this._timeScaleInterpolant;if(null!==S){w*=S.evaluate(x)[0],x>S.parameterPositions[1]&&(this.stopWarping(),0===w?this.paused=!0:this.timeScale=w)}}return this._effectiveTimeScale=w,w}_updateTime(x){const w=this._clip.duration,S=this.loop;let U=this.time+x,G=this._loopCount;const z=S===In;if(0===x)return-1===G?U:z&&1==(1&G)?w-U:U;if(S===Rn){-1===G&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(U>=w)U=w;else{if(!(U<0)){this.time=U;break e}U=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=U,this._mixer.dispatchEvent({type:"finished",action:this,direction:x<0?-1:1})}}else{if(-1===G&&(x>=0?(G=0,this._setEndings(!0,0===this.repetitions,z)):this._setEndings(0===this.repetitions,!0,z)),U>=w||U<0){const S=Math.floor(U/w);U-=w*S,G+=Math.abs(S);const H=this.repetitions-G;if(H<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,U=x>0?w:0,this.time=U,this._mixer.dispatchEvent({type:"finished",action:this,direction:x>0?1:-1});else{if(1===H){const w=x<0;this._setEndings(w,!w,z)}else this._setEndings(!1,!1,z);this._loopCount=G,this.time=U,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:S})}}else this.time=U;if(z&&1==(1&G))return w-U}return U}_setEndings(x,w,S){const U=this._interpolantSettings;S?(U.endingStart=kn,U.endingEnd=kn):(U.endingStart=x?this.zeroSlopeAtStart?kn:Dn:Gn,U.endingEnd=w?this.zeroSlopeAtEnd?kn:Dn:Gn)}_scheduleFading(x,w,S){const U=this._mixer,G=U.time;let z=this._weightInterpolant;null===z&&(z=U._lendControlInterpolant(),this._weightInterpolant=z);const H=z.parameterPositions,j=z.sampleValues;return H[0]=G,j[0]=w,H[1]=G+x,j[1]=S,this}}class AnimationMixer extends EventDispatcher{constructor(x){super(),this._root=x,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(x,w){const S=x._localRoot||this._root,U=x._clip.tracks,G=U.length,z=x._propertyBindings,H=x._interpolants,j=S.uuid,X=this._bindingsByRootAndName;let q=X[j];void 0===q&&(q={},X[j]=q);for(let x=0;x!==G;++x){const G=U[x],X=G.name;let K=q[X];if(void 0!==K)z[x]=K;else{if(K=z[x],void 0!==K){null===K._cacheIndex&&(++K.referenceCount,this._addInactiveBinding(K,j,X));continue}const U=w&&w._propertyBindings[x].binding.parsedPath;K=new PropertyMixer(PropertyBinding.create(S,X,U),G.ValueTypeName,G.getValueSize()),++K.referenceCount,this._addInactiveBinding(K,j,X),z[x]=K}H[x].resultBuffer=K.buffer}}_activateAction(x){if(!this._isActiveAction(x)){if(null===x._cacheIndex){const w=(x._localRoot||this._root).uuid,S=x._clip.uuid,U=this._actionsByClip[S];this._bindAction(x,U&&U.knownActions[0]),this._addInactiveAction(x,S,w)}const w=x._propertyBindings;for(let x=0,S=w.length;x!==S;++x){const S=w[x];0==S.useCount++&&(this._lendBinding(S),S.saveOriginalState())}this._lendAction(x)}}_deactivateAction(x){if(this._isActiveAction(x)){const w=x._propertyBindings;for(let x=0,S=w.length;x!==S;++x){const S=w[x];0==--S.useCount&&(S.restoreOriginalState(),this._takeBackBinding(S))}this._takeBackAction(x)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const x=this;this.stats={actions:{get total(){return x._actions.length},get inUse(){return x._nActiveActions}},bindings:{get total(){return x._bindings.length},get inUse(){return x._nActiveBindings}},controlInterpolants:{get total(){return x._controlInterpolants.length},get inUse(){return x._nActiveControlInterpolants}}}}_isActiveAction(x){const w=x._cacheIndex;return null!==w&&w<this._nActiveActions}_addInactiveAction(x,w,S){const U=this._actions,G=this._actionsByClip;let z=G[w];if(void 0===z)z={knownActions:[x],actionByRoot:{}},x._byClipCacheIndex=0,G[w]=z;else{const w=z.knownActions;x._byClipCacheIndex=w.length,w.push(x)}x._cacheIndex=U.length,U.push(x),z.actionByRoot[S]=x}_removeInactiveAction(x){const w=this._actions,S=w[w.length-1],U=x._cacheIndex;S._cacheIndex=U,w[U]=S,w.pop(),x._cacheIndex=null;const G=x._clip.uuid,z=this._actionsByClip,H=z[G],j=H.knownActions,X=j[j.length-1],q=x._byClipCacheIndex;X._byClipCacheIndex=q,j[q]=X,j.pop(),x._byClipCacheIndex=null;delete H.actionByRoot[(x._localRoot||this._root).uuid],0===j.length&&delete z[G],this._removeInactiveBindingsForAction(x)}_removeInactiveBindingsForAction(x){const w=x._propertyBindings;for(let x=0,S=w.length;x!==S;++x){const S=w[x];0==--S.referenceCount&&this._removeInactiveBinding(S)}}_lendAction(x){const w=this._actions,S=x._cacheIndex,U=this._nActiveActions++,G=w[U];x._cacheIndex=U,w[U]=x,G._cacheIndex=S,w[S]=G}_takeBackAction(x){const w=this._actions,S=x._cacheIndex,U=--this._nActiveActions,G=w[U];x._cacheIndex=U,w[U]=x,G._cacheIndex=S,w[S]=G}_addInactiveBinding(x,w,S){const U=this._bindingsByRootAndName,G=this._bindings;let z=U[w];void 0===z&&(z={},U[w]=z),z[S]=x,x._cacheIndex=G.length,G.push(x)}_removeInactiveBinding(x){const w=this._bindings,S=x.binding,U=S.rootNode.uuid,G=S.path,z=this._bindingsByRootAndName,H=z[U],j=w[w.length-1],X=x._cacheIndex;j._cacheIndex=X,w[X]=j,w.pop(),delete H[G],0===Object.keys(H).length&&delete z[U]}_lendBinding(x){const w=this._bindings,S=x._cacheIndex,U=this._nActiveBindings++,G=w[U];x._cacheIndex=U,w[U]=x,G._cacheIndex=S,w[S]=G}_takeBackBinding(x){const w=this._bindings,S=x._cacheIndex,U=--this._nActiveBindings,G=w[U];x._cacheIndex=U,w[U]=x,G._cacheIndex=S,w[S]=G}_lendControlInterpolant(){const x=this._controlInterpolants,w=this._nActiveControlInterpolants++;let S=x[w];return void 0===S&&(S=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),S.__cacheIndex=w,x[w]=S),S}_takeBackControlInterpolant(x){const w=this._controlInterpolants,S=x.__cacheIndex,U=--this._nActiveControlInterpolants,G=w[U];x.__cacheIndex=U,w[U]=x,G.__cacheIndex=S,w[S]=G}clipAction(x,w,S){const U=w||this._root,G=U.uuid;let z="string"==typeof x?AnimationClip.findByName(U,x):x;const H=null!==z?z.uuid:x,j=this._actionsByClip[H];let X=null;if(void 0===S&&(S=null!==z?z.blendMode:Wn),void 0!==j){const x=j.actionByRoot[G];if(void 0!==x&&x.blendMode===S)return x;X=j.knownActions[0],null===z&&(z=X._clip)}if(null===z)return null;const q=new AnimationAction(this,z,w,S);return this._bindAction(q,X),this._addInactiveAction(q,H,G),q}existingAction(x,w){const S=w||this._root,U=S.uuid,G="string"==typeof x?AnimationClip.findByName(S,x):x,z=G?G.uuid:x,H=this._actionsByClip[z];return void 0!==H&&H.actionByRoot[U]||null}stopAllAction(){const x=this._actions;for(let w=this._nActiveActions-1;w>=0;--w)x[w].stop();return this}update(x){x*=this.timeScale;const w=this._actions,S=this._nActiveActions,U=this.time+=x,G=Math.sign(x),z=this._accuIndex^=1;for(let H=0;H!==S;++H){w[H]._update(U,x,G,z)}const H=this._bindings,j=this._nActiveBindings;for(let x=0;x!==j;++x)H[x].apply(z);return this}setTime(x){this.time=0;for(let x=0;x<this._actions.length;x++)this._actions[x].time=0;return this.update(x)}getRoot(){return this._root}uncacheClip(x){const w=this._actions,S=x.uuid,U=this._actionsByClip,G=U[S];if(void 0!==G){const x=G.knownActions;for(let S=0,U=x.length;S!==U;++S){const U=x[S];this._deactivateAction(U);const G=U._cacheIndex,z=w[w.length-1];U._cacheIndex=null,U._byClipCacheIndex=null,z._cacheIndex=G,w[G]=z,w.pop(),this._removeInactiveBindingsForAction(U)}delete U[S]}}uncacheRoot(x){const w=x.uuid,S=this._actionsByClip;for(const x in S){const U=S[x].actionByRoot[w];void 0!==U&&(this._deactivateAction(U),this._removeInactiveAction(U))}const U=this._bindingsByRootAndName[w];if(void 0!==U)for(const x in U){const w=U[x];w.restoreOriginalState(),this._removeInactiveBinding(w)}}uncacheAction(x,w){const S=this.existingAction(x,w);null!==S&&(this._deactivateAction(S),this._removeInactiveAction(S))}}AnimationMixer.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Uniform{constructor(x){"string"==typeof x&&(U.warn("THREE.Uniform: Type parameter is no longer needed."),x=arguments[1]),this.value=x}clone(){return new Uniform(void 0===this.value.clone?this.value:this.value.clone())}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(x,w,S=1){super(x,w),this.meshPerAttribute=S}copy(x){return super.copy(x),this.meshPerAttribute=x.meshPerAttribute,this}clone(x){const w=super.clone(x);return w.meshPerAttribute=this.meshPerAttribute,w}toJSON(x){const w=super.toJSON(x);return w.isInstancedInterleavedBuffer=!0,w.meshPerAttribute=this.meshPerAttribute,w}}InstancedInterleavedBuffer.prototype.isInstancedInterleavedBuffer=!0;class GLBufferAttribute{constructor(x,w,S,U,G){this.buffer=x,this.type=w,this.itemSize=S,this.elementSize=U,this.count=G,this.version=0}set needsUpdate(x){!0===x&&this.version++}setBuffer(x){return this.buffer=x,this}setType(x,w){return this.type=x,this.elementSize=w,this}setItemSize(x){return this.itemSize=x,this}setCount(x){return this.count=x,this}}GLBufferAttribute.prototype.isGLBufferAttribute=!0;class Raycaster{constructor(x,w,S=0,U=1/0){this.ray=new Ray(x,w),this.near=S,this.far=U,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(x,w){this.ray.set(x,w)}setFromCamera(x,w){w&&w.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(w.matrixWorld),this.ray.direction.set(x.x,x.y,.5).unproject(w).sub(this.ray.origin).normalize(),this.camera=w):w&&w.isOrthographicCamera?(this.ray.origin.set(x.x,x.y,(w.near+w.far)/(w.near-w.far)).unproject(w),this.ray.direction.set(0,0,-1).transformDirection(w.matrixWorld),this.camera=w):U.error("THREE.Raycaster: Unsupported camera type: "+w.type)}intersectObject(x,w=!0,S=[]){return intersectObject(x,this,S,w),S.sort(ascSort),S}intersectObjects(x,w=!0,S=[]){for(let U=0,G=x.length;U<G;U++)intersectObject(x[U],this,S,w);return S.sort(ascSort),S}}function ascSort(x,w){return x.distance-w.distance}function intersectObject(x,w,S,U){if(x.layers.test(w.layers)&&x.raycast(w,S),!0===U){const U=x.children;for(let x=0,G=U.length;x<G;x++)intersectObject(U[x],w,S,!0)}}class Spherical{constructor(x=1,w=0,S=0){return this.radius=x,this.phi=w,this.theta=S,this}set(x,w,S){return this.radius=x,this.phi=w,this.theta=S,this}copy(x){return this.radius=x.radius,this.phi=x.phi,this.theta=x.theta,this}makeSafe(){const x=1e-6;return this.phi=Math.max(x,Math.min(Math.PI-x,this.phi)),this}setFromVector3(x){return this.setFromCartesianCoords(x.x,x.y,x.z)}setFromCartesianCoords(x,w,S){return this.radius=Math.sqrt(x*x+w*w+S*S),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(x,S),this.phi=Math.acos(clamp(w/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Cylindrical{constructor(x=1,w=0,S=0){return this.radius=x,this.theta=w,this.y=S,this}set(x,w,S){return this.radius=x,this.theta=w,this.y=S,this}copy(x){return this.radius=x.radius,this.theta=x.theta,this.y=x.y,this}setFromVector3(x){return this.setFromCartesianCoords(x.x,x.y,x.z)}setFromCartesianCoords(x,w,S){return this.radius=Math.sqrt(x*x+S*S),this.theta=Math.atan2(x,S),this.y=w,this}clone(){return(new this.constructor).copy(this)}}const Ys=new Vector2;class Box2{constructor(x=new Vector2(1/0,1/0),w=new Vector2(-1/0,-1/0)){this.min=x,this.max=w}set(x,w){return this.min.copy(x),this.max.copy(w),this}setFromPoints(x){this.makeEmpty();for(let w=0,S=x.length;w<S;w++)this.expandByPoint(x[w]);return this}setFromCenterAndSize(x,w){const S=Ys.copy(w).multiplyScalar(.5);return this.min.copy(x).sub(S),this.max.copy(x).add(S),this}clone(){return(new this.constructor).copy(this)}copy(x){return this.min.copy(x.min),this.max.copy(x.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(x){return this.isEmpty()?x.set(0,0):x.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(x){return this.isEmpty()?x.set(0,0):x.subVectors(this.max,this.min)}expandByPoint(x){return this.min.min(x),this.max.max(x),this}expandByVector(x){return this.min.sub(x),this.max.add(x),this}expandByScalar(x){return this.min.addScalar(-x),this.max.addScalar(x),this}containsPoint(x){return!(x.x<this.min.x||x.x>this.max.x||x.y<this.min.y||x.y>this.max.y)}containsBox(x){return this.min.x<=x.min.x&&x.max.x<=this.max.x&&this.min.y<=x.min.y&&x.max.y<=this.max.y}getParameter(x,w){return w.set((x.x-this.min.x)/(this.max.x-this.min.x),(x.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(x){return!(x.max.x<this.min.x||x.min.x>this.max.x||x.max.y<this.min.y||x.min.y>this.max.y)}clampPoint(x,w){return w.copy(x).clamp(this.min,this.max)}distanceToPoint(x){return Ys.copy(x).clamp(this.min,this.max).sub(x).length()}intersect(x){return this.min.max(x.min),this.max.min(x.max),this}union(x){return this.min.min(x.min),this.max.max(x.max),this}translate(x){return this.min.add(x),this.max.add(x),this}equals(x){return x.min.equals(this.min)&&x.max.equals(this.max)}}Box2.prototype.isBox2=!0;const Zs=new Vector3,Js=new Vector3;class Line3{constructor(x=new Vector3,w=new Vector3){this.start=x,this.end=w}set(x,w){return this.start.copy(x),this.end.copy(w),this}copy(x){return this.start.copy(x.start),this.end.copy(x.end),this}getCenter(x){return x.addVectors(this.start,this.end).multiplyScalar(.5)}delta(x){return x.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(x,w){return this.delta(w).multiplyScalar(x).add(this.start)}closestPointToPointParameter(x,w){Zs.subVectors(x,this.start),Js.subVectors(this.end,this.start);const S=Js.dot(Js);let U=Js.dot(Zs)/S;return w&&(U=clamp(U,0,1)),U}closestPointToPoint(x,w,S){const U=this.closestPointToPointParameter(x,w);return this.delta(S).multiplyScalar(U).add(this.start)}applyMatrix4(x){return this.start.applyMatrix4(x),this.end.applyMatrix4(x),this}equals(x){return x.start.equals(this.start)&&x.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}class ImmediateRenderObject extends Object3D{constructor(x){super(),this.material=x,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}ImmediateRenderObject.prototype.isImmediateRenderObject=!0;const Qs=new Vector3;class SpotLightHelper extends Object3D{constructor(x,w){super(),this.light=x,this.light.updateMatrixWorld(),this.matrix=x.matrixWorld,this.matrixAutoUpdate=!1,this.color=w;const S=new BufferGeometry,U=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let x=0,w=1,S=32;x<S;x++,w++){const G=x/S*Math.PI*2,z=w/S*Math.PI*2;U.push(Math.cos(G),Math.sin(G),1,Math.cos(z),Math.sin(z),1)}S.setAttribute("position",new Float32BufferAttribute(U,3));const G=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(S,G),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const x=this.light.distance?this.light.distance:1e3,w=x*Math.tan(this.light.angle);this.cone.scale.set(w,w,x),Qs.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Qs),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const el=new Vector3,tl=new Matrix4,nl=new Matrix4;class SkeletonHelper extends LineSegments{constructor(x){const w=getBoneList(x),S=new BufferGeometry,U=[],G=[],z=new Color(0,0,1),H=new Color(0,1,0);for(let x=0;x<w.length;x++){const S=w[x];S.parent&&S.parent.isBone&&(U.push(0,0,0),U.push(0,0,0),G.push(z.r,z.g,z.b),G.push(H.r,H.g,H.b))}S.setAttribute("position",new Float32BufferAttribute(U,3)),S.setAttribute("color",new Float32BufferAttribute(G,3));super(S,new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=x,this.bones=w,this.matrix=x.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(x){const w=this.bones,S=this.geometry,U=S.getAttribute("position");nl.copy(this.root.matrixWorld).invert();for(let x=0,S=0;x<w.length;x++){const G=w[x];G.parent&&G.parent.isBone&&(tl.multiplyMatrices(nl,G.matrixWorld),el.setFromMatrixPosition(tl),U.setXYZ(S,el.x,el.y,el.z),tl.multiplyMatrices(nl,G.parent.matrixWorld),el.setFromMatrixPosition(tl),U.setXYZ(S+1,el.x,el.y,el.z),S+=2)}S.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(x)}}function getBoneList(x){const w=[];x&&x.isBone&&w.push(x);for(let S=0;S<x.children.length;S++)w.push.apply(w,getBoneList(x.children[S]));return w}class PointLightHelper extends Mesh{constructor(x,w,S){super(new SphereGeometry(w,4,2),new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1})),this.light=x,this.light.updateMatrixWorld(),this.color=S,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const rl=new Vector3,il=new Color,ol=new Color;class HemisphereLightHelper extends Object3D{constructor(x,w,S){super(),this.light=x,this.light.updateMatrixWorld(),this.matrix=x.matrixWorld,this.matrixAutoUpdate=!1,this.color=S;const U=new OctahedronGeometry(w);U.rotateY(.5*Math.PI),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const G=U.getAttribute("position"),z=new Float32Array(3*G.count);U.setAttribute("color",new BufferAttribute(z,3)),this.add(new Mesh(U,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const x=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const w=x.geometry.getAttribute("color");il.copy(this.light.color),ol.copy(this.light.groundColor);for(let x=0,S=w.count;x<S;x++){const U=x<S/2?il:ol;w.setXYZ(x,U.r,U.g,U.b)}w.needsUpdate=!0}x.lookAt(rl.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(x=10,w=10,S=4473924,U=8947848){S=new Color(S),U=new Color(U);const G=w/2,z=x/w,H=x/2,j=[],X=[];for(let x=0,q=0,K=-H;x<=w;x++,K+=z){j.push(-H,0,K,H,0,K),j.push(K,0,-H,K,0,H);const w=x===G?S:U;w.toArray(X,q),q+=3,w.toArray(X,q),q+=3,w.toArray(X,q),q+=3,w.toArray(X,q),q+=3}const q=new BufferGeometry;q.setAttribute("position",new Float32BufferAttribute(j,3)),q.setAttribute("color",new Float32BufferAttribute(X,3));super(q,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class PolarGridHelper extends LineSegments{constructor(x=10,w=16,S=8,U=64,G=4473924,z=8947848){G=new Color(G),z=new Color(z);const H=[],j=[];for(let S=0;S<=w;S++){const U=S/w*(2*Math.PI),X=Math.sin(U)*x,q=Math.cos(U)*x;H.push(0,0,0),H.push(X,0,q);const K=1&S?G:z;j.push(K.r,K.g,K.b),j.push(K.r,K.g,K.b)}for(let w=0;w<=S;w++){const X=1&w?G:z,q=x-x/S*w;for(let x=0;x<U;x++){let w=x/U*(2*Math.PI),S=Math.sin(w)*q,G=Math.cos(w)*q;H.push(S,0,G),j.push(X.r,X.g,X.b),w=(x+1)/U*(2*Math.PI),S=Math.sin(w)*q,G=Math.cos(w)*q,H.push(S,0,G),j.push(X.r,X.g,X.b)}}const X=new BufferGeometry;X.setAttribute("position",new Float32BufferAttribute(H,3)),X.setAttribute("color",new Float32BufferAttribute(j,3));super(X,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const al=new Vector3,sl=new Vector3,ll=new Vector3;class DirectionalLightHelper extends Object3D{constructor(x,w,S){super(),this.light=x,this.light.updateMatrixWorld(),this.matrix=x.matrixWorld,this.matrixAutoUpdate=!1,this.color=S,void 0===w&&(w=1);let U=new BufferGeometry;U.setAttribute("position",new Float32BufferAttribute([-w,w,0,w,w,0,w,-w,0,-w,-w,0,-w,w,0],3));const G=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(U,G),this.add(this.lightPlane),U=new BufferGeometry,U.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(U,G),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){al.setFromMatrixPosition(this.light.matrixWorld),sl.setFromMatrixPosition(this.light.target.matrixWorld),ll.subVectors(sl,al),this.lightPlane.lookAt(sl),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(sl),this.targetLine.scale.z=ll.length()}}const cl=new Vector3,ul=new Camera;class CameraHelper extends LineSegments{constructor(x){const w=new BufferGeometry,S=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),U=[],G=[],z={},H=new Color(16755200),j=new Color(16711680),X=new Color(43775),q=new Color(16777215),K=new Color(3355443);function addLine(x,w,S){addPoint(x,S),addPoint(w,S)}function addPoint(x,w){U.push(0,0,0),G.push(w.r,w.g,w.b),void 0===z[x]&&(z[x]=[]),z[x].push(U.length/3-1)}addLine("n1","n2",H),addLine("n2","n4",H),addLine("n4","n3",H),addLine("n3","n1",H),addLine("f1","f2",H),addLine("f2","f4",H),addLine("f4","f3",H),addLine("f3","f1",H),addLine("n1","f1",H),addLine("n2","f2",H),addLine("n3","f3",H),addLine("n4","f4",H),addLine("p","n1",j),addLine("p","n2",j),addLine("p","n3",j),addLine("p","n4",j),addLine("u1","u2",X),addLine("u2","u3",X),addLine("u3","u1",X),addLine("c","t",q),addLine("p","c",K),addLine("cn1","cn2",K),addLine("cn3","cn4",K),addLine("cf1","cf2",K),addLine("cf3","cf4",K),w.setAttribute("position",new Float32BufferAttribute(U,3)),w.setAttribute("color",new Float32BufferAttribute(G,3)),super(w,S),this.type="CameraHelper",this.camera=x,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=x.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=z,this.update()}update(){const x=this.geometry,w=this.pointMap;ul.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",w,x,ul,0,0,-1),setPoint("t",w,x,ul,0,0,1),setPoint("n1",w,x,ul,-1,-1,-1),setPoint("n2",w,x,ul,1,-1,-1),setPoint("n3",w,x,ul,-1,1,-1),setPoint("n4",w,x,ul,1,1,-1),setPoint("f1",w,x,ul,-1,-1,1),setPoint("f2",w,x,ul,1,-1,1),setPoint("f3",w,x,ul,-1,1,1),setPoint("f4",w,x,ul,1,1,1),setPoint("u1",w,x,ul,.7,1.1,-1),setPoint("u2",w,x,ul,-.7,1.1,-1),setPoint("u3",w,x,ul,0,2,-1),setPoint("cf1",w,x,ul,-1,0,1),setPoint("cf2",w,x,ul,1,0,1),setPoint("cf3",w,x,ul,0,-1,1),setPoint("cf4",w,x,ul,0,1,1),setPoint("cn1",w,x,ul,-1,0,-1),setPoint("cn2",w,x,ul,1,0,-1),setPoint("cn3",w,x,ul,0,-1,-1),setPoint("cn4",w,x,ul,0,1,-1),x.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(x,w,S,U,G,z,H){cl.set(G,z,H).unproject(U);const j=w[x];if(void 0!==j){const x=S.getAttribute("position");for(let w=0,S=j.length;w<S;w++)x.setXYZ(j[w],cl.x,cl.y,cl.z)}}const hl=new Box3;class BoxHelper extends LineSegments{constructor(x,w=16776960){const S=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),U=new Float32Array(24),G=new BufferGeometry;G.setIndex(new BufferAttribute(S,1)),G.setAttribute("position",new BufferAttribute(U,3)),super(G,new LineBasicMaterial({color:w,toneMapped:!1})),this.object=x,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(x){if(void 0!==x&&U.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&hl.setFromObject(this.object),hl.isEmpty())return;const w=hl.min,S=hl.max,G=this.geometry.attributes.position,z=G.array;z[0]=S.x,z[1]=S.y,z[2]=S.z,z[3]=w.x,z[4]=S.y,z[5]=S.z,z[6]=w.x,z[7]=w.y,z[8]=S.z,z[9]=S.x,z[10]=w.y,z[11]=S.z,z[12]=S.x,z[13]=S.y,z[14]=w.z,z[15]=w.x,z[16]=S.y,z[17]=w.z,z[18]=w.x,z[19]=w.y,z[20]=w.z,z[21]=S.x,z[22]=w.y,z[23]=w.z,G.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(x){return this.object=x,this.update(),this}copy(x){return LineSegments.prototype.copy.call(this,x),this.object=x.object,this}}class Box3Helper extends LineSegments{constructor(x,w=16776960){const S=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),U=new BufferGeometry;U.setIndex(new BufferAttribute(S,1)),U.setAttribute("position",new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(U,new LineBasicMaterial({color:w,toneMapped:!1})),this.box=x,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(x){const w=this.box;w.isEmpty()||(w.getCenter(this.position),w.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(x))}}class PlaneHelper extends Line{constructor(x,w=1,S=16776960){const U=S,G=new BufferGeometry;G.setAttribute("position",new Float32BufferAttribute([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),G.computeBoundingSphere(),super(G,new LineBasicMaterial({color:U,toneMapped:!1})),this.type="PlaneHelper",this.plane=x,this.size=w;const z=new BufferGeometry;z.setAttribute("position",new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),z.computeBoundingSphere(),this.add(new Mesh(z,new MeshBasicMaterial({color:U,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(x){let w=-this.plane.constant;Math.abs(w)<1e-8&&(w=1e-8),this.scale.set(.5*this.size,.5*this.size,w),this.children[0].material.side=w<0?te:ee,this.lookAt(this.plane.normal),super.updateMatrixWorld(x)}}const dl=new Vector3;let pl,fl;class ArrowHelper extends Object3D{constructor(x=new Vector3(0,0,1),w=new Vector3(0,0,0),S=1,U=16776960,G=.2*S,z=.2*G){super(),this.type="ArrowHelper",void 0===pl&&(pl=new BufferGeometry,pl.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),fl=new CylinderGeometry(0,.5,1,5,1),fl.translate(0,-.5,0)),this.position.copy(w),this.line=new Line(pl,new LineBasicMaterial({color:U,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(fl,new MeshBasicMaterial({color:U,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(x),this.setLength(S,G,z)}setDirection(x){if(x.y>.99999)this.quaternion.set(0,0,0,1);else if(x.y<-.99999)this.quaternion.set(1,0,0,0);else{dl.set(x.z,0,-x.x).normalize();const w=Math.acos(x.y);this.quaternion.setFromAxisAngle(dl,w)}}setLength(x,w=.2*x,S=.2*w){this.line.scale.set(1,Math.max(1e-4,x-w),1),this.line.updateMatrix(),this.cone.scale.set(S,w,S),this.cone.position.y=x,this.cone.updateMatrix()}setColor(x){this.line.material.color.set(x),this.cone.material.color.set(x)}copy(x){return super.copy(x,!1),this.line.copy(x.line),this.cone.copy(x.cone),this}}class AxesHelper extends LineSegments{constructor(x=1){const w=[0,0,0,x,0,0,0,0,0,0,x,0,0,0,0,0,0,x],S=new BufferGeometry;S.setAttribute("position",new Float32BufferAttribute(w,3)),S.setAttribute("color",new Float32BufferAttribute([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(S,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(x,w,S){const U=new Color,G=this.geometry.attributes.color.array;return U.set(x),U.toArray(G,0),U.toArray(G,3),U.set(w),U.toArray(G,6),U.toArray(G,9),U.set(S),U.toArray(G,12),U.toArray(G,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(x,w){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(x,w),this}lineTo(x,w){return this.currentPath.lineTo(x,w),this}quadraticCurveTo(x,w,S,U){return this.currentPath.quadraticCurveTo(x,w,S,U),this}bezierCurveTo(x,w,S,U,G,z){return this.currentPath.bezierCurveTo(x,w,S,U,G,z),this}splineThru(x){return this.currentPath.splineThru(x),this}toShapes(x,w){function toShapesNoHoles(x){const w=[];for(let S=0,U=x.length;S<U;S++){const U=x[S],G=new Shape;G.curves=U.curves,w.push(G)}return w}function isPointInsidePolygon(x,w){const S=w.length;let U=!1;for(let G=S-1,z=0;z<S;G=z++){let S=w[G],H=w[z],j=H.x-S.x,X=H.y-S.y;if(Math.abs(X)>Number.EPSILON){if(X<0&&(S=w[z],j=-j,H=w[G],X=-X),x.y<S.y||x.y>H.y)continue;if(x.y===S.y){if(x.x===S.x)return!0}else{const w=X*(x.x-S.x)-j*(x.y-S.y);if(0===w)return!0;if(w<0)continue;U=!U}}else{if(x.y!==S.y)continue;if(H.x<=x.x&&x.x<=S.x||S.x<=x.x&&x.x<=H.x)return!0}}return U}const S=ShapeUtils.isClockWise,U=this.subPaths;if(0===U.length)return[];if(!0===w)return toShapesNoHoles(U);let G,z,H;const j=[];if(1===U.length)return z=U[0],H=new Shape,H.curves=z.curves,j.push(H),j;let X=!S(U[0].getPoints());X=x?!X:X;const q=[],K=[];let Y,Z,J=[],Q=0;K[Q]=void 0,J[Q]=[];for(let w=0,H=U.length;w<H;w++)z=U[w],Y=z.getPoints(),G=S(Y),G=x?!G:G,G?(!X&&K[Q]&&Q++,K[Q]={s:new Shape,p:Y},K[Q].s.curves=z.curves,X&&Q++,J[Q]=[]):J[Q].push({h:z,p:Y[0]});if(!K[0])return toShapesNoHoles(U);if(K.length>1){let x=!1;const w=[];for(let x=0,w=K.length;x<w;x++)q[x]=[];for(let S=0,U=K.length;S<U;S++){const U=J[S];for(let G=0;G<U.length;G++){const z=U[G];let H=!0;for(let U=0;U<K.length;U++)isPointInsidePolygon(z.p,K[U].p)&&(S!==U&&w.push({froms:S,tos:U,hole:G}),H?(H=!1,q[U].push(z)):x=!0);H&&q[S].push(z)}}w.length>0&&(x||(J=q))}for(let x=0,w=K.length;x<w;x++){H=K[x].s,j.push(H),Z=J[x];for(let x=0,w=Z.length;x<w;x++)H.holes.push(Z[x].h)}return j}}const ml=new Float32Array(1),gl=new Int32Array(ml.buffer);class DataUtils{static toHalfFloat(x){x>65504&&(U.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),x=65504),ml[0]=x;const w=gl[0];let S=w>>16&32768,G=w>>12&2047;const z=w>>23&255;return z<103?S:z>142?(S|=31744,S|=(255==z?0:1)&&8388607&w,S):z<113?(G|=2048,S|=(G>>114-z)+(G>>113-z&1),S):(S|=z-112<<10|G>>1,S+=1&G,S)}}const vl=0,yl=1,_l=0,bl=1,xl=2;function MeshFaceMaterial(x){return U.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),x}function MultiMaterial(x=[]){return U.warn("THREE.MultiMaterial has been removed. Use an Array instead."),x.isMultiMaterial=!0,x.materials=x,x.clone=function(){return x.slice()},x}function PointCloud(x,w){return U.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(x,w)}function Particle(x){return U.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(x)}function ParticleSystem(x,w){return U.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(x,w)}function PointCloudMaterial(x){return U.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(x)}function ParticleBasicMaterial(x){return U.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(x)}function ParticleSystemMaterial(x){return U.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(x)}function Vertex(x,w,S){return U.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(x,w,S)}function DynamicBufferAttribute(x,w){return U.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(x,w).setUsage(Tr)}function Int8Attribute(x,w){return U.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(x,w)}function Uint8Attribute(x,w){return U.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(x,w)}function Uint8ClampedAttribute(x,w){return U.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(x,w)}function Int16Attribute(x,w){return U.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(x,w)}function Uint16Attribute(x,w){return U.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(x,w)}function Int32Attribute(x,w){return U.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(x,w)}function Uint32Attribute(x,w){return U.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(x,w)}function Float32Attribute(x,w){return U.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(x,w)}function Float64Attribute(x,w){return U.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(x,w)}function AxisHelper(x){return U.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(x)}function BoundingBoxHelper(x,w){return U.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(x,w)}function EdgesHelper(x,w){return U.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(x.geometry),new LineBasicMaterial({color:void 0!==w?w:16777215}))}function WireframeHelper(x,w){return U.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(x.geometry),new LineBasicMaterial({color:void 0!==w?w:16777215}))}function XHRLoader(x){return U.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(x)}function BinaryTextureLoader(x){return U.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(x)}function WebGLRenderTargetCube(x,w,S){return U.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(x,S)}function CanvasRenderer(){U.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){U.error("THREE.JSONLoader has been removed.")}Curve.create=function(x,w){return U.log("THREE.Curve.create() has been deprecated"),x.prototype=Object.create(Curve.prototype),x.prototype.constructor=x,x.prototype.getPoint=w,x},Path.prototype.fromPoints=function(x){return U.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(x)},GridHelper.prototype.setColors=function(){U.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},SkeletonHelper.prototype.update=function(){U.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Loader.prototype.extractUrlBase=function(x){return U.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(x)},Loader.Handlers={add:function(){U.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){U.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Box2.prototype.center=function(x){return U.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(x)},Box2.prototype.empty=function(){return U.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Box2.prototype.isIntersectionBox=function(x){return U.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(x)},Box2.prototype.size=function(x){return U.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(x)},Box3.prototype.center=function(x){return U.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(x)},Box3.prototype.empty=function(){return U.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Box3.prototype.isIntersectionBox=function(x){return U.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(x)},Box3.prototype.isIntersectionSphere=function(x){return U.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(x)},Box3.prototype.size=function(x){return U.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(x)},Sphere.prototype.empty=function(){return U.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Frustum.prototype.setFromMatrix=function(x){return U.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(x)},Line3.prototype.center=function(x){return U.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(x)},Matrix3.prototype.flattenToArrayOffset=function(x,w){return U.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(x,w)},Matrix3.prototype.multiplyVector3=function(x){return U.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),x.applyMatrix3(this)},Matrix3.prototype.multiplyVector3Array=function(){U.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Matrix3.prototype.applyToBufferAttribute=function(x){return U.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),x.applyMatrix3(this)},Matrix3.prototype.applyToVector3Array=function(){U.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Matrix3.prototype.getInverse=function(x){return U.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(x).invert()},Matrix4.prototype.extractPosition=function(x){return U.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(x)},Matrix4.prototype.flattenToArrayOffset=function(x,w){return U.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(x,w)},Matrix4.prototype.getPosition=function(){return U.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Vector3).setFromMatrixColumn(this,3)},Matrix4.prototype.setRotationFromQuaternion=function(x){return U.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(x)},Matrix4.prototype.multiplyToArray=function(){U.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Matrix4.prototype.multiplyVector3=function(x){return U.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),x.applyMatrix4(this)},Matrix4.prototype.multiplyVector4=function(x){return U.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),x.applyMatrix4(this)},Matrix4.prototype.multiplyVector3Array=function(){U.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Matrix4.prototype.rotateAxis=function(x){U.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),x.transformDirection(this)},Matrix4.prototype.crossVector=function(x){return U.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),x.applyMatrix4(this)},Matrix4.prototype.translate=function(){U.error("THREE.Matrix4: .translate() has been removed.")},Matrix4.prototype.rotateX=function(){U.error("THREE.Matrix4: .rotateX() has been removed.")},Matrix4.prototype.rotateY=function(){U.error("THREE.Matrix4: .rotateY() has been removed.")},Matrix4.prototype.rotateZ=function(){U.error("THREE.Matrix4: .rotateZ() has been removed.")},Matrix4.prototype.rotateByAxis=function(){U.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Matrix4.prototype.applyToBufferAttribute=function(x){return U.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),x.applyMatrix4(this)},Matrix4.prototype.applyToVector3Array=function(){U.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Matrix4.prototype.makeFrustum=function(x,w,S,G,z,H){return U.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(x,w,G,S,z,H)},Matrix4.prototype.getInverse=function(x){return U.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(x).invert()},Plane.prototype.isIntersectionLine=function(x){return U.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(x)},Quaternion.prototype.multiplyVector3=function(x){return U.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),x.applyQuaternion(this)},Quaternion.prototype.inverse=function(){return U.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Ray.prototype.isIntersectionBox=function(x){return U.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(x)},Ray.prototype.isIntersectionPlane=function(x){return U.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(x)},Ray.prototype.isIntersectionSphere=function(x){return U.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(x)},Triangle.prototype.area=function(){return U.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Triangle.prototype.barycoordFromPoint=function(x,w){return U.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(x,w)},Triangle.prototype.midpoint=function(x){return U.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(x)},Triangle.prototypenormal=function(x){return U.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(x)},Triangle.prototype.plane=function(x){return U.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(x)},Triangle.barycoordFromPoint=function(x,w,S,G,z){return U.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(x,w,S,G,z)},Triangle.normal=function(x,w,S,G){return U.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(x,w,S,G)},Shape.prototype.extractAllPoints=function(x){return U.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(x)},Shape.prototype.extrude=function(x){return U.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,x)},Shape.prototype.makeGeometry=function(x){return U.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,x)},Vector2.prototype.fromAttribute=function(x,w,S){return U.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(x,w,S)},Vector2.prototype.distanceToManhattan=function(x){return U.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(x)},Vector2.prototype.lengthManhattan=function(){return U.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Vector3.prototype.setEulerFromRotationMatrix=function(){U.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Vector3.prototype.setEulerFromQuaternion=function(){U.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Vector3.prototype.getPositionFromMatrix=function(x){return U.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(x)},Vector3.prototype.getScaleFromMatrix=function(x){return U.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(x)},Vector3.prototype.getColumnFromMatrix=function(x,w){return U.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(w,x)},Vector3.prototype.applyProjection=function(x){return U.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(x)},Vector3.prototype.fromAttribute=function(x,w,S){return U.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(x,w,S)},Vector3.prototype.distanceToManhattan=function(x){return U.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(x)},Vector3.prototype.lengthManhattan=function(){return U.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Vector4.prototype.fromAttribute=function(x,w,S){return U.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(x,w,S)},Vector4.prototype.lengthManhattan=function(){return U.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Object3D.prototype.getChildByName=function(x){return U.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(x)},Object3D.prototype.renderDepth=function(){U.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Object3D.prototype.translate=function(x,w){return U.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(w,x)},Object3D.prototype.getWorldRotation=function(){U.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Object3D.prototype.applyMatrix=function(x){return U.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(x)},Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return U.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(x){U.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=x}},useQuaternion:{get:function(){U.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){U.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Mesh.prototype.setDrawMode=function(){U.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return U.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Hn},set:function(){U.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),SkinnedMesh.prototype.initBones=function(){U.error("THREE.SkinnedMesh: initBones() has been removed.")},PerspectiveCamera.prototype.setLens=function(x,w){U.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==w&&(this.filmGauge=w),this.setFocalLength(x)},Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){U.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(x){U.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=x}},shadowCameraLeft:{set:function(x){U.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=x}},shadowCameraRight:{set:function(x){U.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=x}},shadowCameraTop:{set:function(x){U.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=x}},shadowCameraBottom:{set:function(x){U.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=x}},shadowCameraNear:{set:function(x){U.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=x}},shadowCameraFar:{set:function(x){U.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=x}},shadowCameraVisible:{set:function(){U.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(x){U.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=x}},shadowDarkness:{set:function(){U.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(x){U.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=x}},shadowMapHeight:{set:function(x){U.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=x}}}),Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return U.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return U.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Tr},set:function(){U.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Tr)}}}),BufferAttribute.prototype.setDynamic=function(x){return U.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===x?Tr:Sr),this},BufferAttribute.prototype.copyIndicesArray=function(){U.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},BufferAttribute.prototype.setArray=function(){U.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},BufferGeometry.prototype.addIndex=function(x){U.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(x)},BufferGeometry.prototype.addAttribute=function(x,w){return U.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),w&&w.isBufferAttribute||w&&w.isInterleavedBufferAttribute?"index"===x?(U.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(w),this):this.setAttribute(x,w):(U.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(x,new BufferAttribute(arguments[1],arguments[2])))},BufferGeometry.prototype.addDrawCall=function(x,w,S){void 0!==S&&U.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),U.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(x,w)},BufferGeometry.prototype.clearDrawCalls=function(){U.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},BufferGeometry.prototype.computeOffsets=function(){U.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},BufferGeometry.prototype.removeAttribute=function(x){return U.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(x)},BufferGeometry.prototype.applyMatrix=function(x){return U.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(x)},Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return U.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return U.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),InterleavedBuffer.prototype.setDynamic=function(x){return U.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===x?Tr:Sr),this},InterleavedBuffer.prototype.setArray=function(){U.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ExtrudeGeometry.prototype.getArrays=function(){U.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ExtrudeGeometry.prototype.addShapeList=function(){U.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ExtrudeGeometry.prototype.addShape=function(){U.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Scene.prototype.dispose=function(){U.error("THREE.Scene: .dispose() has been removed.")},Uniform.prototype.onUpdate=function(){return U.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Material.prototype,{wrapAround:{get:function(){U.warn("THREE.Material: .wrapAround has been removed.")},set:function(){U.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){U.warn("THREE.Material: .overdraw has been removed.")},set:function(){U.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return U.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){U.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(x){U.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=x===re}},stencilMask:{get:function(){return U.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(x){U.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=x}},vertexTangents:{get:function(){U.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){U.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return U.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(x){U.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=x}}}),WebGLRenderer.prototype.clearTarget=function(x,w,S,G){U.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(x),this.clear(w,S,G)},WebGLRenderer.prototype.animate=function(x){U.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(x)},WebGLRenderer.prototype.getCurrentRenderTarget=function(){return U.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},WebGLRenderer.prototype.getMaxAnisotropy=function(){return U.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},WebGLRenderer.prototype.getPrecision=function(){return U.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},WebGLRenderer.prototype.resetGLState=function(){return U.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},WebGLRenderer.prototype.supportsFloatTextures=function(){return U.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},WebGLRenderer.prototype.supportsHalfFloatTextures=function(){return U.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},WebGLRenderer.prototype.supportsStandardDerivatives=function(){return U.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},WebGLRenderer.prototype.supportsCompressedTextureS3TC=function(){return U.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},WebGLRenderer.prototype.supportsCompressedTexturePVRTC=function(){return U.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},WebGLRenderer.prototype.supportsBlendMinMax=function(){return U.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},WebGLRenderer.prototype.supportsVertexTextures=function(){return U.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},WebGLRenderer.prototype.supportsInstancedArrays=function(){return U.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},WebGLRenderer.prototype.enableScissorTest=function(x){U.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(x)},WebGLRenderer.prototype.initMaterial=function(){U.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},WebGLRenderer.prototype.addPrePlugin=function(){U.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},WebGLRenderer.prototype.addPostPlugin=function(){U.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},WebGLRenderer.prototype.updateShadowMap=function(){U.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},WebGLRenderer.prototype.setFaceCulling=function(){U.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},WebGLRenderer.prototype.allocTextureUnit=function(){U.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},WebGLRenderer.prototype.setTexture=function(){U.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},WebGLRenderer.prototype.setTexture2D=function(){U.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},WebGLRenderer.prototype.setTextureCube=function(){U.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},WebGLRenderer.prototype.getActiveMipMapLevel=function(){return U.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(x){U.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=x}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(x){U.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=x}},shadowMapCullFace:{get:function(){U.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){U.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return U.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return U.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return U.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){U.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return U.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(x){U.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===x?Kn:qn}},toneMappingWhitePoint:{get:function(){return U.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){U.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){U.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){U.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){U.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){U.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){U.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){U.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return U.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(x){U.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=x}},wrapT:{get:function(){return U.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(x){U.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=x}},magFilter:{get:function(){return U.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(x){U.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=x}},minFilter:{get:function(){return U.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(x){U.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=x}},anisotropy:{get:function(){return U.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(x){U.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=x}},offset:{get:function(){return U.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(x){U.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=x}},repeat:{get:function(){return U.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(x){U.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=x}},format:{get:function(){return U.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(x){U.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=x}},type:{get:function(){return U.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(x){U.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=x}},generateMipmaps:{get:function(){return U.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(x){U.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=x}}}),Audio.prototype.load=function(x){U.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const w=this;return(new AudioLoader).load(x,(function(x){w.setBuffer(x)})),this},AudioAnalyser.prototype.getData=function(){return U.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},CubeCamera.prototype.updateCubeMap=function(x,w){return U.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(x,w)},CubeCamera.prototype.clear=function(x,w,S,G){return U.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(x,w,S,G)},ImageUtils.crossOrigin=void 0,ImageUtils.loadTexture=function(x,w,S,G){U.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const z=new TextureLoader;z.setCrossOrigin(this.crossOrigin);const H=z.load(x,S,void 0,G);return w&&(H.mapping=w),H},ImageUtils.loadTextureCube=function(x,w,S,G){U.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const z=new CubeTextureLoader;z.setCrossOrigin(this.crossOrigin);const H=z.load(x,S,void 0,G);return w&&(H.mapping=w),H},ImageUtils.loadCompressedTexture=function(){U.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ImageUtils.loadCompressedTextureCube=function(){U.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const El={createMultiMaterialObject:function(){U.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){U.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){U.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){U.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function ParametricGeometry(){return U.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new BufferGeometry}function TextGeometry(){return U.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new BufferGeometry}function FontLoader(){U.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function Font(){U.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:G}})),"undefined"!=typeof window&&(window.__THREE__?U.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=G)},384:x=>{x.exports=function isBuffer(x){return x&&"object"==typeof x&&"function"==typeof x.copy&&"function"==typeof x.fill&&"function"==typeof x.readUInt8}},5955:(x,w,S)=>{"use strict";var U=S(2584),G=S(8662),z=S(6430),H=S(5692);function uncurryThis(x){return x.call.bind(x)}var j="undefined"!=typeof BigInt,X="undefined"!=typeof Symbol,q=uncurryThis(Object.prototype.toString),K=uncurryThis(Number.prototype.valueOf),Y=uncurryThis(String.prototype.valueOf),Z=uncurryThis(Boolean.prototype.valueOf);if(j)var J=uncurryThis(BigInt.prototype.valueOf);if(X)var Q=uncurryThis(Symbol.prototype.valueOf);function checkBoxedPrimitive(x,w){if("object"!=typeof x)return!1;try{return w(x),!0}catch(x){return!1}}function isMapToString(x){return"[object Map]"===q(x)}function isSetToString(x){return"[object Set]"===q(x)}function isWeakMapToString(x){return"[object WeakMap]"===q(x)}function isWeakSetToString(x){return"[object WeakSet]"===q(x)}function isArrayBufferToString(x){return"[object ArrayBuffer]"===q(x)}function isArrayBuffer(x){return"undefined"!=typeof ArrayBuffer&&(isArrayBufferToString.working?isArrayBufferToString(x):x instanceof ArrayBuffer)}function isDataViewToString(x){return"[object DataView]"===q(x)}function isDataView(x){return"undefined"!=typeof DataView&&(isDataViewToString.working?isDataViewToString(x):x instanceof DataView)}w.isArgumentsObject=U,w.isGeneratorFunction=G,w.isTypedArray=H,w.isPromise=function isPromise(x){return"undefined"!=typeof Promise&&x instanceof Promise||null!==x&&"object"==typeof x&&"function"==typeof x.then&&"function"==typeof x.catch},w.isArrayBufferView=function isArrayBufferView(x){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(x):H(x)||isDataView(x)},w.isUint8Array=function isUint8Array(x){return"Uint8Array"===z(x)},w.isUint8ClampedArray=function isUint8ClampedArray(x){return"Uint8ClampedArray"===z(x)},w.isUint16Array=function isUint16Array(x){return"Uint16Array"===z(x)},w.isUint32Array=function isUint32Array(x){return"Uint32Array"===z(x)},w.isInt8Array=function isInt8Array(x){return"Int8Array"===z(x)},w.isInt16Array=function isInt16Array(x){return"Int16Array"===z(x)},w.isInt32Array=function isInt32Array(x){return"Int32Array"===z(x)},w.isFloat32Array=function isFloat32Array(x){return"Float32Array"===z(x)},w.isFloat64Array=function isFloat64Array(x){return"Float64Array"===z(x)},w.isBigInt64Array=function isBigInt64Array(x){return"BigInt64Array"===z(x)},w.isBigUint64Array=function isBigUint64Array(x){return"BigUint64Array"===z(x)},isMapToString.working="undefined"!=typeof Map&&isMapToString(new Map),w.isMap=function isMap(x){return"undefined"!=typeof Map&&(isMapToString.working?isMapToString(x):x instanceof Map)},isSetToString.working="undefined"!=typeof Set&&isSetToString(new Set),w.isSet=function isSet(x){return"undefined"!=typeof Set&&(isSetToString.working?isSetToString(x):x instanceof Set)},isWeakMapToString.working="undefined"!=typeof WeakMap&&isWeakMapToString(new WeakMap),w.isWeakMap=function isWeakMap(x){return"undefined"!=typeof WeakMap&&(isWeakMapToString.working?isWeakMapToString(x):x instanceof WeakMap)},isWeakSetToString.working="undefined"!=typeof WeakSet&&isWeakSetToString(new WeakSet),w.isWeakSet=function isWeakSet(x){return isWeakSetToString(x)},isArrayBufferToString.working="undefined"!=typeof ArrayBuffer&&isArrayBufferToString(new ArrayBuffer),w.isArrayBuffer=isArrayBuffer,isDataViewToString.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&isDataViewToString(new DataView(new ArrayBuffer(1),0,1)),w.isDataView=isDataView;var ee="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function isSharedArrayBufferToString(x){return"[object SharedArrayBuffer]"===q(x)}function isSharedArrayBuffer(x){return void 0!==ee&&(void 0===isSharedArrayBufferToString.working&&(isSharedArrayBufferToString.working=isSharedArrayBufferToString(new ee)),isSharedArrayBufferToString.working?isSharedArrayBufferToString(x):x instanceof ee)}function isNumberObject(x){return checkBoxedPrimitive(x,K)}function isStringObject(x){return checkBoxedPrimitive(x,Y)}function isBooleanObject(x){return checkBoxedPrimitive(x,Z)}function isBigIntObject(x){return j&&checkBoxedPrimitive(x,J)}function isSymbolObject(x){return X&&checkBoxedPrimitive(x,Q)}w.isSharedArrayBuffer=isSharedArrayBuffer,w.isAsyncFunction=function isAsyncFunction(x){return"[object AsyncFunction]"===q(x)},w.isMapIterator=function isMapIterator(x){return"[object Map Iterator]"===q(x)},w.isSetIterator=function isSetIterator(x){return"[object Set Iterator]"===q(x)},w.isGeneratorObject=function isGeneratorObject(x){return"[object Generator]"===q(x)},w.isWebAssemblyCompiledModule=function isWebAssemblyCompiledModule(x){return"[object WebAssembly.Module]"===q(x)},w.isNumberObject=isNumberObject,w.isStringObject=isStringObject,w.isBooleanObject=isBooleanObject,w.isBigIntObject=isBigIntObject,w.isSymbolObject=isSymbolObject,w.isBoxedPrimitive=function isBoxedPrimitive(x){return isNumberObject(x)||isStringObject(x)||isBooleanObject(x)||isBigIntObject(x)||isSymbolObject(x)},w.isAnyArrayBuffer=function isAnyArrayBuffer(x){return"undefined"!=typeof Uint8Array&&(isArrayBuffer(x)||isSharedArrayBuffer(x))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(x){Object.defineProperty(w,x,{enumerable:!1,value:function(){throw new Error(x+" is not supported in userland")}})}))},9539:(x,w,S)=>{var U=S(4155),G=S(5108),z=Object.getOwnPropertyDescriptors||function getOwnPropertyDescriptors(x){for(var w=Object.keys(x),S={},U=0;U<w.length;U++)S[w[U]]=Object.getOwnPropertyDescriptor(x,w[U]);return S},H=/%[sdj%]/g;w.format=function(x){if(!isString(x)){for(var w=[],S=0;S<arguments.length;S++)w.push(inspect(arguments[S]));return w.join(" ")}S=1;for(var U=arguments,G=U.length,z=String(x).replace(H,(function(x){if("%%"===x)return"%";if(S>=G)return x;switch(x){case"%s":return String(U[S++]);case"%d":return Number(U[S++]);case"%j":try{return JSON.stringify(U[S++])}catch(x){return"[Circular]"}default:return x}})),j=U[S];S<G;j=U[++S])isNull(j)||!isObject(j)?z+=" "+j:z+=" "+inspect(j);return z},w.deprecate=function(x,S){if(void 0!==U&&!0===U.noDeprecation)return x;if(void 0===U)return function(){return w.deprecate(x,S).apply(this,arguments)};var z=!1;return function deprecated(){if(!z){if(U.throwDeprecation)throw new Error(S);U.traceDeprecation?G.trace(S):G.error(S),z=!0}return x.apply(this,arguments)}};var j={},X=/^$/;if({NODE_ENV:"production"}.NODE_DEBUG){var q={NODE_ENV:"production"}.NODE_DEBUG;q=q.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),X=new RegExp("^"+q+"$","i")}function inspect(x,S){var U={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(U.depth=arguments[2]),arguments.length>=4&&(U.colors=arguments[3]),isBoolean(S)?U.showHidden=S:S&&w._extend(U,S),isUndefined(U.showHidden)&&(U.showHidden=!1),isUndefined(U.depth)&&(U.depth=2),isUndefined(U.colors)&&(U.colors=!1),isUndefined(U.customInspect)&&(U.customInspect=!0),U.colors&&(U.stylize=stylizeWithColor),formatValue(U,x,U.depth)}function stylizeWithColor(x,w){var S=inspect.styles[w];return S?"["+inspect.colors[S][0]+"m"+x+"["+inspect.colors[S][1]+"m":x}function stylizeNoColor(x,w){return x}function formatValue(x,S,U){if(x.customInspect&&S&&isFunction(S.inspect)&&S.inspect!==w.inspect&&(!S.constructor||S.constructor.prototype!==S)){var G=S.inspect(U,x);return isString(G)||(G=formatValue(x,G,U)),G}var z=function formatPrimitive(x,w){if(isUndefined(w))return x.stylize("undefined","undefined");if(isString(w)){var S="'"+JSON.stringify(w).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return x.stylize(S,"string")}if(isNumber(w))return x.stylize(""+w,"number");if(isBoolean(w))return x.stylize(""+w,"boolean");if(isNull(w))return x.stylize("null","null")}(x,S);if(z)return z;var H=Object.keys(S),j=function arrayToHash(x){var w={};return x.forEach((function(x,S){w[x]=!0})),w}(H);if(x.showHidden&&(H=Object.getOwnPropertyNames(S)),isError(S)&&(H.indexOf("message")>=0||H.indexOf("description")>=0))return formatError(S);if(0===H.length){if(isFunction(S)){var X=S.name?": "+S.name:"";return x.stylize("[Function"+X+"]","special")}if(isRegExp(S))return x.stylize(RegExp.prototype.toString.call(S),"regexp");if(isDate(S))return x.stylize(Date.prototype.toString.call(S),"date");if(isError(S))return formatError(S)}var q,K="",Y=!1,Z=["{","}"];(isArray(S)&&(Y=!0,Z=["[","]"]),isFunction(S))&&(K=" [Function"+(S.name?": "+S.name:"")+"]");return isRegExp(S)&&(K=" "+RegExp.prototype.toString.call(S)),isDate(S)&&(K=" "+Date.prototype.toUTCString.call(S)),isError(S)&&(K=" "+formatError(S)),0!==H.length||Y&&0!=S.length?U<0?isRegExp(S)?x.stylize(RegExp.prototype.toString.call(S),"regexp"):x.stylize("[Object]","special"):(x.seen.push(S),q=Y?function formatArray(x,w,S,U,G){for(var z=[],H=0,j=w.length;H<j;++H)hasOwnProperty(w,String(H))?z.push(formatProperty(x,w,S,U,String(H),!0)):z.push("");return G.forEach((function(G){G.match(/^\d+$/)||z.push(formatProperty(x,w,S,U,G,!0))})),z}(x,S,U,j,H):H.map((function(w){return formatProperty(x,S,U,j,w,Y)})),x.seen.pop(),function reduceToSingleString(x,w,S){var U=x.reduce((function(x,w){return w.indexOf("\n")>=0&&0,x+w.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(U>60)return S[0]+(""===w?"":w+"\n ")+" "+x.join(",\n  ")+" "+S[1];return S[0]+w+" "+x.join(", ")+" "+S[1]}(q,K,Z)):Z[0]+K+Z[1]}function formatError(x){return"["+Error.prototype.toString.call(x)+"]"}function formatProperty(x,w,S,U,G,z){var H,j,X;if((X=Object.getOwnPropertyDescriptor(w,G)||{value:w[G]}).get?j=X.set?x.stylize("[Getter/Setter]","special"):x.stylize("[Getter]","special"):X.set&&(j=x.stylize("[Setter]","special")),hasOwnProperty(U,G)||(H="["+G+"]"),j||(x.seen.indexOf(X.value)<0?(j=isNull(S)?formatValue(x,X.value,null):formatValue(x,X.value,S-1)).indexOf("\n")>-1&&(j=z?j.split("\n").map((function(x){return"  "+x})).join("\n").slice(2):"\n"+j.split("\n").map((function(x){return"   "+x})).join("\n")):j=x.stylize("[Circular]","special")),isUndefined(H)){if(z&&G.match(/^\d+$/))return j;(H=JSON.stringify(""+G)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(H=H.slice(1,-1),H=x.stylize(H,"name")):(H=H.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),H=x.stylize(H,"string"))}return H+": "+j}function isArray(x){return Array.isArray(x)}function isBoolean(x){return"boolean"==typeof x}function isNull(x){return null===x}function isNumber(x){return"number"==typeof x}function isString(x){return"string"==typeof x}function isUndefined(x){return void 0===x}function isRegExp(x){return isObject(x)&&"[object RegExp]"===objectToString(x)}function isObject(x){return"object"==typeof x&&null!==x}function isDate(x){return isObject(x)&&"[object Date]"===objectToString(x)}function isError(x){return isObject(x)&&("[object Error]"===objectToString(x)||x instanceof Error)}function isFunction(x){return"function"==typeof x}function objectToString(x){return Object.prototype.toString.call(x)}function pad(x){return x<10?"0"+x.toString(10):x.toString(10)}w.debuglog=function(x){if(x=x.toUpperCase(),!j[x])if(X.test(x)){var S=U.pid;j[x]=function(){var U=w.format.apply(w,arguments);G.error("%s %d: %s",x,S,U)}}else j[x]=function(){};return j[x]},w.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},w.types=S(5955),w.isArray=isArray,w.isBoolean=isBoolean,w.isNull=isNull,w.isNullOrUndefined=function isNullOrUndefined(x){return null==x},w.isNumber=isNumber,w.isString=isString,w.isSymbol=function isSymbol(x){return"symbol"==typeof x},w.isUndefined=isUndefined,w.isRegExp=isRegExp,w.types.isRegExp=isRegExp,w.isObject=isObject,w.isDate=isDate,w.types.isDate=isDate,w.isError=isError,w.types.isNativeError=isError,w.isFunction=isFunction,w.isPrimitive=function isPrimitive(x){return null===x||"boolean"==typeof x||"number"==typeof x||"string"==typeof x||"symbol"==typeof x||void 0===x},w.isBuffer=S(384);var K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function hasOwnProperty(x,w){return Object.prototype.hasOwnProperty.call(x,w)}w.log=function(){G.log("%s - %s",function timestamp(){var x=new Date,w=[pad(x.getHours()),pad(x.getMinutes()),pad(x.getSeconds())].join(":");return[x.getDate(),K[x.getMonth()],w].join(" ")}(),w.format.apply(w,arguments))},w.inherits=S(5717),w._extend=function(x,w){if(!w||!isObject(w))return x;for(var S=Object.keys(w),U=S.length;U--;)x[S[U]]=w[S[U]];return x};var Y="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function callbackifyOnRejected(x,w){if(!x){var S=new Error("Promise was rejected with a falsy value");S.reason=x,x=S}return w(x)}w.promisify=function promisify(x){if("function"!=typeof x)throw new TypeError('The "original" argument must be of type Function');if(Y&&x[Y]){var w;if("function"!=typeof(w=x[Y]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(w,Y,{value:w,enumerable:!1,writable:!1,configurable:!0}),w}function w(){for(var w,S,U=new Promise((function(x,U){w=x,S=U})),G=[],z=0;z<arguments.length;z++)G.push(arguments[z]);G.push((function(x,U){x?S(x):w(U)}));try{x.apply(this,G)}catch(x){S(x)}return U}return Object.setPrototypeOf(w,Object.getPrototypeOf(x)),Y&&Object.defineProperty(w,Y,{value:w,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(w,z(x))},w.promisify.custom=Y,w.callbackify=function callbackify(x){if("function"!=typeof x)throw new TypeError('The "original" argument must be of type Function');function callbackified(){for(var w=[],S=0;S<arguments.length;S++)w.push(arguments[S]);var G=w.pop();if("function"!=typeof G)throw new TypeError("The last argument must be of type Function");var z=this,cb=function(){return G.apply(z,arguments)};x.apply(this,w).then((function(x){U.nextTick(cb.bind(null,null,x))}),(function(x){U.nextTick(callbackifyOnRejected.bind(null,x,cb))}))}return Object.setPrototypeOf(callbackified,Object.getPrototypeOf(x)),Object.defineProperties(callbackified,z(x)),callbackified}},1557:(x,w,S)=>{WebGLDebugUtils=function(){var x;void 0===x&&(x=S.g);var error=function(w){x.console&&x.console.error?x.console.error(w):function(w){x.console&&x.console.log&&x.console.log(w)}(w)},w={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},bindBuffer:{2:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}},bufferData:{3:{0:!0,2:!0},4:{0:!0,2:!0},5:{0:!0,2:!0}},bufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},copyBufferSubData:{5:{0:!0,1:!0}},getBufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},blitFramebuffer:{10:{8:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]},9:!0}},framebufferTextureLayer:{5:{0:!0,1:!0}},invalidateFramebuffer:{2:{0:!0}},invalidateSubFramebuffer:{6:{0:!0}},readBuffer:{1:{0:!0}},getInternalformatParameter:{3:{0:!0,1:!0,2:!0}},renderbufferStorageMultisample:{5:{0:!0,2:!0}},texStorage2D:{5:{0:!0,2:!0}},texStorage3D:{6:{0:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0},10:{0:!0,2:!0,6:!0,7:!0}},texImage3D:{10:{0:!0,2:!0,7:!0,8:!0},11:{0:!0,2:!0,7:!0,8:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0},10:{0:!0,6:!0,7:!0}},texSubImage3D:{11:{0:!0,8:!0,9:!0},12:{0:!0,8:!0,9:!0}},copyTexSubImage3D:{9:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0},8:{0:!0,2:!0},9:{0:!0,2:!0}},compressedTexImage3D:{8:{0:!0,2:!0},9:{0:!0,2:!0},10:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0},9:{0:!0,6:!0},10:{0:!0,6:!0}},compressedTexSubImage3D:{10:{0:!0,8:!0},11:{0:!0,8:!0},12:{0:!0,8:!0}},vertexAttribIPointer:{5:{2:!0}},drawArraysInstanced:{4:{0:!0}},drawElementsInstanced:{5:{0:!0,2:!0}},drawRangeElements:{6:{0:!0,4:!0}},readPixels:{7:{4:!0,5:!0},8:{4:!0,5:!0}},clearBufferfv:{3:{0:!0},4:{0:!0}},clearBufferiv:{3:{0:!0},4:{0:!0}},clearBufferuiv:{3:{0:!0},4:{0:!0}},clearBufferfi:{4:{0:!0}},beginQuery:{2:{0:!0}},endQuery:{1:{0:!0}},getQuery:{2:{0:!0,1:!0}},getQueryParameter:{2:{1:!0}},samplerParameteri:{3:{1:!0,2:!0}},samplerParameterf:{3:{1:!0}},getSamplerParameter:{2:{1:!0}},fenceSync:{2:{0:!0,1:{enumBitwiseOr:[]}}},clientWaitSync:{3:{1:{enumBitwiseOr:["SYNC_FLUSH_COMMANDS_BIT"]}}},waitSync:{3:{1:{enumBitwiseOr:[]}}},getSyncParameter:{2:{1:!0}},bindTransformFeedback:{2:{0:!0}},beginTransformFeedback:{1:{0:!0}},transformFeedbackVaryings:{3:{2:!0}},bindBufferBase:{3:{0:!0}},bindBufferRange:{5:{0:!0}},getIndexedParameter:{2:{0:!0}},getActiveUniforms:{3:{2:!0}},getActiveUniformBlockParameter:{3:{2:!0}}},U=null,G=null;function init(x){if(null==U)for(var w in U={},G={},x)"number"==typeof x[w]&&(U[x[w]]=w,G[w]=x[w])}function checkInit(){if(null==U)throw"WebGLDebugUtils.init(ctx) not called"}function glEnumToString(x){checkInit();var w=U[x];return void 0!==w?"gl."+w:"/*UNKNOWN WebGL ENUM*/ 0x"+x.toString(16)}function glFunctionArgToString(x,S,U,z){var H;if(void 0!==(H=w[x])&&(void 0!==(H=H[S])&&H[U])){if("object"==typeof H[U]&&void 0!==H[U].enumBitwiseOr){for(var j=H[U].enumBitwiseOr,X=0,q=[],K=0;K<j.length;++K){var Y=G[j[K]];0!=(z&Y)&&(X|=Y,q.push(glEnumToString(Y)))}return X===z?q.join(" | "):glEnumToString(z)}return glEnumToString(z)}return null===z?"null":void 0===z?"undefined":z.toString()}function makePropertyWrapper(x,w,S){x.__defineGetter__(S,(function(){return w[S]})),x.__defineSetter__(S,(function(x){w[S]=x}))}function resetToInitialState(x){var w=!!x.createTransformFeedback;w&&x.bindVertexArray(null);var S=x.getParameter(x.MAX_VERTEX_ATTRIBS),U=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,U);for(var G=0;G<S;++G)x.disableVertexAttribArray(G),x.vertexAttribPointer(G,4,x.FLOAT,!1,0,0),x.vertexAttrib1f(G,0),w&&x.vertexAttribDivisor(G,0);x.deleteBuffer(U);var z=x.getParameter(x.MAX_TEXTURE_IMAGE_UNITS);for(G=0;G<z;++G)x.activeTexture(x.TEXTURE0+G),x.bindTexture(x.TEXTURE_CUBE_MAP,null),x.bindTexture(x.TEXTURE_2D,null),w&&(x.bindTexture(x.TEXTURE_2D_ARRAY,null),x.bindTexture(x.TEXTURE_3D,null),x.bindSampler(G,null));if(x.activeTexture(x.TEXTURE0),x.useProgram(null),x.bindBuffer(x.ARRAY_BUFFER,null),x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,null),x.bindFramebuffer(x.FRAMEBUFFER,null),x.bindRenderbuffer(x.RENDERBUFFER,null),x.disable(x.BLEND),x.disable(x.CULL_FACE),x.disable(x.DEPTH_TEST),x.disable(x.DITHER),x.disable(x.SCISSOR_TEST),x.blendColor(0,0,0,0),x.blendEquation(x.FUNC_ADD),x.blendFunc(x.ONE,x.ZERO),x.clearColor(0,0,0,0),x.clearDepth(1),x.clearStencil(-1),x.colorMask(!0,!0,!0,!0),x.cullFace(x.BACK),x.depthFunc(x.LESS),x.depthMask(!0),x.depthRange(0,1),x.frontFace(x.CCW),x.hint(x.GENERATE_MIPMAP_HINT,x.DONT_CARE),x.lineWidth(1),x.pixelStorei(x.PACK_ALIGNMENT,4),x.pixelStorei(x.UNPACK_ALIGNMENT,4),x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,!1),x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),x.UNPACK_COLORSPACE_CONVERSION_WEBGL&&x.pixelStorei(x.UNPACK_COLORSPACE_CONVERSION_WEBGL,x.BROWSER_DEFAULT_WEBGL),x.polygonOffset(0,0),x.sampleCoverage(1,!1),x.scissor(0,0,x.canvas.width,x.canvas.height),x.stencilFunc(x.ALWAYS,0,4294967295),x.stencilMask(4294967295),x.stencilOp(x.KEEP,x.KEEP,x.KEEP),x.viewport(0,0,x.canvas.width,x.canvas.height),x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT|x.STENCIL_BUFFER_BIT),w){x.drawBuffers([x.BACK]),x.readBuffer(x.BACK),x.bindBuffer(x.COPY_READ_BUFFER,null),x.bindBuffer(x.COPY_WRITE_BUFFER,null),x.bindBuffer(x.PIXEL_PACK_BUFFER,null),x.bindBuffer(x.PIXEL_UNPACK_BUFFER,null);var H=x.getParameter(x.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);for(G=0;G<H;++G)x.bindBufferBase(x.TRANSFORM_FEEDBACK_BUFFER,G,null);var j=x.getParameter(x.MAX_UNIFORM_BUFFER_BINDINGS);for(G=0;G<j;++G)x.bindBufferBase(x.UNIFORM_BUFFER,G,null);x.disable(x.RASTERIZER_DISCARD),x.pixelStorei(x.UNPACK_IMAGE_HEIGHT,0),x.pixelStorei(x.UNPACK_SKIP_IMAGES,0),x.pixelStorei(x.UNPACK_ROW_LENGTH,0),x.pixelStorei(x.UNPACK_SKIP_ROWS,0),x.pixelStorei(x.UNPACK_SKIP_PIXELS,0),x.pixelStorei(x.PACK_ROW_LENGTH,0),x.pixelStorei(x.PACK_SKIP_ROWS,0),x.pixelStorei(x.PACK_SKIP_PIXELS,0),x.hint(x.FRAGMENT_SHADER_DERIVATIVE_HINT,x.DONT_CARE)}for(;x.getError(););}return{init,mightBeEnum:function mightBeEnum(x){return checkInit(),void 0!==U[x]},glEnumToString,glFunctionArgToString,glFunctionArgsToString:function glFunctionArgsToString(x,w){for(var S="",U=w.length,G=0;G<U;++G)S+=(0==G?"":", ")+glFunctionArgToString(x,U,G,w[G]);return S},makeDebugContext:function makeDebugContext(x,w,S,U){U=U||x,init(x),w=w||function(x,w,S){for(var U="",G=S.length,z=0;z<G;++z)U+=(0==z?"":", ")+glFunctionArgToString(w,G,z,S[z]);error("WebGL error "+glEnumToString(x)+" in "+w+"("+U+")")};var G={};function makeErrorWrapper(x,z){return function(){S&&S(z,arguments);var H=x[z].apply(x,arguments),j=U.getError();return 0!=j&&(G[j]=!0,w(j,z,arguments)),H}}var z={};for(var H in x)if("function"==typeof x[H])if("getExtension"!=H)z[H]=makeErrorWrapper(x,H);else{var j=makeErrorWrapper(x,H);z[H]=function(){var G=j.apply(x,arguments);return G?makeDebugContext(G,w,S,U):null}}else makePropertyWrapper(z,x,H);return z.getError=function(){for(var w in G)if(G.hasOwnProperty(w)&&G[w])return G[w]=!1,w;return x.NO_ERROR},z},makeLostContextSimulatingCanvas:function makeLostContextSimulatingCanvas(w){var S,U,G,z=[],H=[],j={},X=1,q=!1,K=[],Y=0,Z=0,J=!1,Q=0,ee={};function wrapEvent(x){return"function"==typeof x?x:function(w){x.handleEvent(w)}}function loseContextIfTime(){++Z,q||Y==Z&&w.loseContext()}function makeLostContextFunctionWrapper(x,w){var S=x[w];return function(){if(loseContextIfTime(),!q)return S.apply(x,arguments)}}function makeWebGLContextEvent(x){return{statusMessage:x,preventDefault:function(){J=!0}}}return w.getContext=(G=w.getContext,function(){var z=G.apply(w,arguments);if(z instanceof WebGLRenderingContext||x.WebGL2RenderingContext&&z instanceof WebGL2RenderingContext){if(z!=S){if(S)throw"got different context";U=x.WebGL2RenderingContext&&z instanceof WebGL2RenderingContext,j=function makeLostContextSimulatingContext(x){for(var w in x)"function"==typeof x[w]?j[w]=makeLostContextFunctionWrapper(x,w):makePropertyWrapper(j,x,w);j.getError=function(){if(loseContextIfTime(),!q)for(;x=S.getError();)ee[x]=!0;for(var x in ee)if(ee[x])return delete ee[x],x;return j.NO_ERROR};var G=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];U&&G.push("createQuery","createSampler","fenceSync","createTransformFeedback","createVertexArray");for(var z=0;z<G.length;++z){var H=G[z];j[H]=function(w){return function(){if(loseContextIfTime(),q)return null;var S=w.apply(x,arguments);return S.__webglDebugContextLostId__=X,K.push(S),S}}(x[H])}var Y=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];for(U&&Y.push("getInternalformatParameter","getQuery","getQueryParameter","getSamplerParameter","getSyncParameter","getTransformFeedbackVarying","getIndexedParameter","getUniformIndices","getActiveUniforms","getActiveUniformBlockParameter","getActiveUniformBlockName"),z=0;z<Y.length;++z)H=Y[z],j[H]=function(w){return function(){return loseContextIfTime(),q?null:w.apply(x,arguments)}}(j[H]);var Z=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];for(U&&Z.push("isQuery","isSampler","isSync","isTransformFeedback","isVertexArray"),z=0;z<Z.length;++z)H=Z[z],j[H]=function(w){return function(){return loseContextIfTime(),!q&&w.apply(x,arguments)}}(j[H]);return j.checkFramebufferStatus=function(w){return function(){return loseContextIfTime(),q?j.FRAMEBUFFER_UNSUPPORTED:w.apply(x,arguments)}}(j.checkFramebufferStatus),j.getAttribLocation=function(w){return function(){return loseContextIfTime(),q?-1:w.apply(x,arguments)}}(j.getAttribLocation),j.getVertexAttribOffset=function(w){return function(){return loseContextIfTime(),q?0:w.apply(x,arguments)}}(j.getVertexAttribOffset),j.isContextLost=function(){return q},U&&(j.getFragDataLocation=function(w){return function(){return loseContextIfTime(),q?-1:w.apply(x,arguments)}}(j.getFragDataLocation),j.clientWaitSync=function(w){return function(){return loseContextIfTime(),q?j.WAIT_FAILED:w.apply(x,arguments)}}(j.clientWaitSync),j.getUniformBlockIndex=function(w){return function(){return loseContextIfTime(),q?j.INVALID_INDEX:w.apply(x,arguments)}}(j.getUniformBlockIndex)),j}(S=z)}return j}return z}),function wrapAddEventListener(x){var w=x.addEventListener;x.addEventListener=function(S,U,G){switch(S){case"webglcontextlost":!function(x){z.push(wrapEvent(x))}(U);break;case"webglcontextrestored":!function(x){H.push(wrapEvent(x))}(U);break;default:w.apply(x,arguments)}}}(w),w.loseContext=function(){if(!q){for(q=!0,Y=0,++X;S.getError(););!function clearErrors(){for(var x=Object.keys(ee),w=0;w<x.length;++w)delete ee[x[w]]}(),ee[S.CONTEXT_LOST_WEBGL]=!0;var x=makeWebGLContextEvent("context lost"),U=z.slice();setTimeout((function(){for(var S=0;S<U.length;++S)U[S](x);Q>=0&&setTimeout((function(){w.restoreContext()}),Q)}),0)}},w.restoreContext=function(){q&&H.length&&setTimeout((function(){if(!J)throw"can not restore. webglcontestlost listener did not call event.preventDefault";!function freeResources(){for(var x=0;x<K.length;++x){var w=K[x];w instanceof WebGLBuffer?S.deleteBuffer(w):w instanceof WebGLFramebuffer?S.deleteFramebuffer(w):w instanceof WebGLProgram?S.deleteProgram(w):w instanceof WebGLRenderbuffer?S.deleteRenderbuffer(w):w instanceof WebGLShader?S.deleteShader(w):w instanceof WebGLTexture?S.deleteTexture(w):U&&(w instanceof WebGLQuery?S.deleteQuery(w):w instanceof WebGLSampler?S.deleteSampler(w):w instanceof WebGLSync?S.deleteSync(w):w instanceof WebGLTransformFeedback?S.deleteTransformFeedback(w):w instanceof WebGLVertexArrayObject&&S.deleteVertexArray(w))}}(),resetToInitialState(S),q=!1,Z=0,J=!1;for(var x=H.slice(),w=makeWebGLContextEvent("context restored"),G=0;G<x.length;++G)x[G](w)}),0)},w.loseContextInNCalls=function(x){if(q)throw"You can not ask a lost contet to be lost";Y=Z+x},w.getNumCalls=function(){return Z},w.setRestoreTimeout=function(x){Q=x},w},resetToInitialState}}(),x.exports=WebGLDebugUtils},745:x=>{x.exports="#version 100\r\n#extension GL_EXT_draw_buffers: enable\r\nprecision highp float;\r\n\r\nuniform sampler2D u_colmap;\r\nuniform sampler2D u_normap;\r\n\r\nvarying vec3 v_position;\r\nvarying vec3 v_normal;\r\nvarying vec2 v_uv;\r\n\r\nvec3 applyNormalMap(vec3 geomnor, vec3 normap) {\r\n    normap = normap * 2.0 - 1.0;\r\n    vec3 up = normalize(vec3(0.001, 1, 0.001));\r\n    vec3 surftan = normalize(cross(geomnor, up));\r\n    vec3 surfbinor = cross(geomnor, surftan);\r\n    return normap.y * surftan + normap.x * surfbinor + normap.z * geomnor;\r\n}\r\n\r\nvoid main() {\r\n    vec3 norm = applyNormalMap(v_normal, vec3(texture2D(u_normap, v_uv)));\r\n    vec3 col = vec3(texture2D(u_colmap, v_uv));\r\n\r\n    // TODO: populate your g buffer\r\n    // gl_FragData[0] = ??\r\n    // gl_FragData[1] = ??\r\n    // gl_FragData[2] = ??\r\n    // gl_FragData[3] = ??\r\n}"},4864:x=>{x.exports="#version 100\r\nprecision highp float;\r\n\r\nuniform mat4 u_viewProjectionMatrix;\r\n\r\nattribute vec3 a_position;\r\nattribute vec3 a_normal;\r\nattribute vec2 a_uv;\r\n\r\nvarying vec3 v_position;\r\nvarying vec3 v_normal;\r\nvarying vec2 v_uv;\r\n\r\nvoid main() {\r\n    gl_Position = u_viewProjectionMatrix * vec4(a_position, 1.0);\r\n    v_position = a_position;\r\n    v_normal = a_normal;\r\n    v_uv = a_uv;\r\n}"},1594:x=>{x.exports="#version 100\r\nprecision highp float;\r\n\r\nuniform mat4 u_viewProjectionMatrix;\r\n\r\nattribute vec3 a_position;\r\nattribute vec3 a_normal;\r\nattribute vec2 a_uv;\r\n\r\nvarying vec3 v_position;\r\nvarying vec3 v_normal;\r\nvarying vec2 v_uv;\r\n\r\nvoid main() {\r\n    gl_Position = u_viewProjectionMatrix * vec4(a_position, 1.0);\r\n    v_position = a_position;\r\n    v_normal = a_normal;\r\n    v_uv = a_uv;\r\n}"},6863:x=>{x.exports="#version 100\r\nprecision highp float;\r\n\r\nuniform mat4 u_viewProjectionMatrix;\r\n\r\nattribute vec3 a_position;\r\nattribute vec3 a_normal;\r\nattribute vec2 a_uv;\r\n\r\nvarying vec3 v_position;\r\nvarying vec3 v_normal;\r\nvarying vec2 v_uv;\r\n\r\nvoid main() {\r\n    gl_Position = u_viewProjectionMatrix * vec4(a_position, 1.0);\r\n    v_position = a_position;\r\n    v_normal = a_normal;\r\n    v_uv = a_uv;\r\n}"},999:x=>{x.exports="#version 100\r\nprecision highp float;\r\n\r\nattribute vec3 a_position;\r\n\r\nvarying vec2 v_uv;\r\n\r\nvoid main() {\r\n    gl_Position = vec4(a_position, 1.0);\r\n    v_uv = a_position.xy * 0.5 + 0.5;\r\n}"},9355:x=>{x.exports="precision highp float;\r\n\r\nvarying vec3 v_color;\r\n\r\nvoid main() {\r\n  gl_FragColor = vec4(v_color, 1.0);\r\n}\r\n"},1007:x=>{x.exports="#version 100\r\nprecision highp float;\r\n\r\nuniform mat4 u_viewProjectionMatrix;\r\n\r\nattribute vec3 a_position;\r\nattribute vec3 a_color;\r\n\r\nvarying vec3 v_color;\r\n\r\nvoid main() {\r\n    gl_Position = u_viewProjectionMatrix * vec4(a_position, 1.0);\r\n    v_color = a_color;\r\n}\r\n"},6430:(x,w,S)=>{"use strict";var U=S(4029),G=S(3083),z=S(5559),H=S(1924),j=S(7296),X=H("Object.prototype.toString"),q=S(6410)(),K="undefined"==typeof globalThis?S.g:globalThis,Y=G(),Z=H("String.prototype.slice"),J=Object.getPrototypeOf,Q=H("Array.prototype.indexOf",!0)||function indexOf(x,w){for(var S=0;S<x.length;S+=1)if(x[S]===w)return S;return-1},ee={__proto__:null};U(Y,q&&j&&J?function(x){var w=new K[x];if(Symbol.toStringTag in w){var S=J(w),U=j(S,Symbol.toStringTag);if(!U){var G=J(S);U=j(G,Symbol.toStringTag)}ee["$"+x]=z(U.get)}}:function(x){var w=new K[x],S=w.slice||w.set;S&&(ee["$"+x]=z(S))});x.exports=function whichTypedArray(x){if(!x||"object"!=typeof x)return!1;if(!q){var w=Z(X(x),8,-1);return Q(Y,w)>-1?w:"Object"===w&&function tryAllSlices(x){var w=!1;return U(ee,(function(S,U){if(!w)try{S(x),w=Z(U,1)}catch(x){}})),w}(x)}return j?function tryAllTypedArrays(x){var w=!1;return U(ee,(function(S,U){if(!w)try{"$"+S(x)===U&&(w=Z(U,1))}catch(x){}})),w}(x):null}},3083:(x,w,S)=>{"use strict";var U=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],G="undefined"==typeof globalThis?S.g:globalThis;x.exports=function availableTypedArrays(){for(var x=[],w=0;w<U.length;w++)"function"==typeof G[U[w]]&&(x[x.length]=U[w]);return x}}},w={};function __webpack_require__(S){var U=w[S];if(void 0!==U)return U.exports;var G=w[S]={exports:{}};return x[S].call(G.exports,G,G.exports,__webpack_require__),G.exports}__webpack_require__.n=x=>{var w=x&&x.__esModule?()=>x.default:()=>x;return __webpack_require__.d(w,{a:w}),w},__webpack_require__.d=(x,w)=>{for(var S in w)__webpack_require__.o(w,S)&&!__webpack_require__.o(x,S)&&Object.defineProperty(x,S,{enumerable:!0,get:w[S]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(x){if("object"==typeof window)return window}}(),__webpack_require__.o=(x,w)=>Object.prototype.hasOwnProperty.call(x,w),__webpack_require__.r=x=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})};__webpack_require__(7943)})();
//# sourceMappingURL=bundle.js.map